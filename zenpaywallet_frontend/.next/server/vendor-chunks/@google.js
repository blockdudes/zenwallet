"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@google";
exports.ids = ["vendor-chunks/@google"];
exports.modules = {

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/assets/close-material-svg.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/assets/close-material-svg.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"(ssr)/./node_modules/lit/index.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" fill=\"#000000\">\n    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\n         support for dynamic re-coloring of UI components -->\n    <defs>\n      <filter id=\"drop-shadow\" x=\"-100%\" y=\"-100%\" width=\"300%\" height=\"300%\">\n        <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"1\"/>\n        <feOffset dx=\"0\" dy=\"0\" result=\"offsetblur\"/>\n        <feFlood flood-color=\"#000000\"/>\n        <feComposite in2=\"offsetblur\" operator=\"in\"/>\n        <feMerge>\n          <feMergeNode/>\n          <feMergeNode in=\"SourceGraphic\"/>\n        </feMerge>\n      </filter>\n    </defs>\n    <path filter=\"url(#drop-shadow)\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n</svg>`);\n//# sourceMappingURL=close-material-svg.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2Fzc2V0cy9jbG9zZS1tYXRlcmlhbC1zdmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzJCO0FBQzNCLGlFQUFlLHlDQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLEVBQUM7QUFDUiIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvYXNzZXRzL2Nsb3NlLW1hdGVyaWFsLXN2Zy5qcz9jNTM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IGh0bWwgfSBmcm9tICdsaXQnO1xuZXhwb3J0IGRlZmF1bHQgaHRtbCBgXG48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0cHhcIiBoZWlnaHQ9XCIyNHB4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIjMDAwMDAwXCI+XG4gICAgPCEtLSBOT1RFKGNkYXRhKTogVGhpcyBTVkcgZmlsdGVyIGlzIGEgc3RvcC1nYXAgdW50aWwgd2UgY2FuIGltcGxlbWVudFxuICAgICAgICAgc3VwcG9ydCBmb3IgZHluYW1pYyByZS1jb2xvcmluZyBvZiBVSSBjb21wb25lbnRzIC0tPlxuICAgIDxkZWZzPlxuICAgICAgPGZpbHRlciBpZD1cImRyb3Atc2hhZG93XCIgeD1cIi0xMDAlXCIgeT1cIi0xMDAlXCIgd2lkdGg9XCIzMDAlXCIgaGVpZ2h0PVwiMzAwJVwiPlxuICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgaW49XCJTb3VyY2VBbHBoYVwiIHN0ZERldmlhdGlvbj1cIjFcIi8+XG4gICAgICAgIDxmZU9mZnNldCBkeD1cIjBcIiBkeT1cIjBcIiByZXN1bHQ9XCJvZmZzZXRibHVyXCIvPlxuICAgICAgICA8ZmVGbG9vZCBmbG9vZC1jb2xvcj1cIiMwMDAwMDBcIi8+XG4gICAgICAgIDxmZUNvbXBvc2l0ZSBpbjI9XCJvZmZzZXRibHVyXCIgb3BlcmF0b3I9XCJpblwiLz5cbiAgICAgICAgPGZlTWVyZ2U+XG4gICAgICAgICAgPGZlTWVyZ2VOb2RlLz5cbiAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49XCJTb3VyY2VHcmFwaGljXCIvPlxuICAgICAgICA8L2ZlTWVyZ2U+XG4gICAgICA8L2ZpbHRlcj5cbiAgICA8L2RlZnM+XG4gICAgPHBhdGggZmlsdGVyPVwidXJsKCNkcm9wLXNoYWRvdylcIiBkPVwiTTE5IDYuNDFMMTcuNTkgNSAxMiAxMC41OSA2LjQxIDUgNSA2LjQxIDEwLjU5IDEyIDUgMTcuNTkgNi40MSAxOSAxMiAxMy40MSAxNy41OSAxOSAxOSAxNy41OSAxMy40MSAxMnpcIi8+XG4gICAgPHBhdGggZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz5cbjwvc3ZnPmA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbG9zZS1tYXRlcmlhbC1zdmcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/assets/close-material-svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/assets/controls-svg.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/assets/controls-svg.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"(ssr)/./node_modules/lit/index.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"36\">\n    <defs>\n        <path id=\"A\" d=\"M.001.232h24.997V36H.001z\" />\n    </defs>\n    <g transform=\"translate(-11 -4)\" fill=\"none\" fill-rule=\"evenodd\">\n        <path fill-opacity=\"0\" fill=\"#fff\" d=\"M0 0h44v44H0z\" />\n        <g transform=\"translate(11 3)\">\n            <path d=\"M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z\" fill-opacity=\".5\" fill=\"#e4e4e4\" />\n            <path d=\"M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91\" fill-opacity=\".6\" fill=\"#000\" />\n            <path d=\"M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z\" fill=\"#fff\" />\n            <g transform=\"translate(0 .769)\">\n                <mask id=\"B\" fill=\"#fff\">\n                    <use xlink:href=\"#A\" />\n                </mask>\n                <path d=\"M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325\" fill-opacity=\".05\" fill=\"#000\" mask=\"url(#B)\" />\n            </g>\n        </g>\n    </g>\n</svg>`);\n//# sourceMappingURL=controls-svg.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2Fzc2V0cy9jb250cm9scy1zdmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzJCO0FBQzNCLGlFQUFlLHlDQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sRUFBQztBQUNSIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9hc3NldHMvY29udHJvbHMtc3ZnLmpzPzZhZDAiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgaHRtbCB9IGZyb20gJ2xpdCc7XG5leHBvcnQgZGVmYXVsdCBodG1sIGBcbjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHdpZHRoPVwiMjVcIiBoZWlnaHQ9XCIzNlwiPlxuICAgIDxkZWZzPlxuICAgICAgICA8cGF0aCBpZD1cIkFcIiBkPVwiTS4wMDEuMjMyaDI0Ljk5N1YzNkguMDAxelwiIC8+XG4gICAgPC9kZWZzPlxuICAgIDxnIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgtMTEgLTQpXCIgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+XG4gICAgICAgIDxwYXRoIGZpbGwtb3BhY2l0eT1cIjBcIiBmaWxsPVwiI2ZmZlwiIGQ9XCJNMCAwaDQ0djQ0SDB6XCIgLz5cbiAgICAgICAgPGcgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDExIDMpXCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTguNzMzIDExLjE2NWMuMDQtMS4xMDguNzY2LTIuMDI3IDEuNzQzLTIuMzA3YTIuNTQgMi41NCAwIDAgMSAuNjI4LS4wODljLjE2IDAgLjMxNC4wMTcuNDYzLjA0NCAxLjA4OC4yIDEuOSAxLjA5MiAxLjkgMi4xNnY4Ljg4aDEuMjZjMi45NDMtMS4zOSA1LTQuNDUgNS04LjAyNWE5LjAxIDkuMDEgMCAwIDAtMS45LTUuNTZsLS40My0uNWMtLjc2NS0uODM4LTEuNjgzLTEuNTIyLTIuNzEyLTItMS4wNTctLjQ5LTIuMjI2LS43Ny0zLjQ2LS43N3MtMi40LjI3OC0zLjQ2Ljc3Yy0xLjAzLjQ3OC0xLjk0NyAxLjE2Mi0yLjcxIDJsLS40My41YTkuMDEgOS4wMSAwIDAgMC0xLjkgNS41NiA5LjA0IDkuMDQgMCAwIDAgLjA5NCAxLjMwNWMuMDMuMjEuMDg4LjQxLjEzLjYxN2wuMTM2LjYyNGMuMDgzLjI4Ni4xOTYuNTYuMzA1LjgzMmwuMTI0LjMzM2E4Ljc4IDguNzggMCAwIDAgLjUwOS45NTNsLjA2NS4xMjJhOC42OSA4LjY5IDAgMCAwIDMuNTIxIDMuMTkxbDEuMTEuNTM3di05LjE3OHpcIiBmaWxsLW9wYWNpdHk9XCIuNVwiIGZpbGw9XCIjZTRlNGU0XCIgLz5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMjIuOTQgMjYuMjE4bC0yLjc2IDcuNzRjLS4xNzIuNDg1LS42NzYuOC0xLjI1My44SDEyLjI0Yy0xLjYwNiAwLTMuMDkyLS42OC0zLjk4LTEuODItMS41OTItMi4wNDgtMy42NDctMy44MjItNi4xMS01LjI3LS4wOTUtLjA1NS0uMTUtLjEzNy0uMTUyLS4yMy0uMDA0LS4xLjA0Ni0uMTk2LjE5My0uMjk3LjU2LS4zOTMgMS4yMzQtLjYgMS45MjYtLjZhMy40MyAzLjQzIDAgMCAxIC42OTEuMDY5bDQuOTIyLjk5NFYxMC45NzJjMC0uNjYzLjYxNS0xLjIwMyAxLjM3LTEuMjAzczEuMzczLjU0IDEuMzczIDEuMjAzdjkuODgyaDIuOTUzYy4yNzMgMCAuNTMzLjA3My43NTcuMjFsNi4yNTcgMy44NzRjLjAyNy4wMTcuMDQ1LjA0Mi4wNy4wNi40MS4yOTYuNTg2Ljc3LjQyNiAxLjIyTTQuMSAxNi42MTRjLS4wMjQtLjA0LS4wNDItLjA4My0uMDY1LS4xMjJhOC42OSA4LjY5IDAgMCAxLS41MDktLjk1M2MtLjA0OC0uMTA3LS4wOC0uMjIzLS4xMjQtLjMzM2wtLjMwNS0uODMyYy0uMDU4LS4yMDItLjA5LS40MTYtLjEzNi0uNjI0bC0uMTMtLjYxN2E5LjAzIDkuMDMgMCAwIDEtLjA5NC0xLjMwNWMwLTIuMTA3LjcxNC00LjA0IDEuOS01LjU2bC40My0uNWMuNzY0LS44NCAxLjY4Mi0xLjUyMyAyLjcxLTIgMS4wNTgtLjQ5IDIuMjI2LS43NyAzLjQ2LS43N3MyLjQwMi4yOCAzLjQ2Ljc3YzEuMDMuNDc3IDEuOTQ3IDEuMTYgMi43MTIgMmwuNDI4LjVhOSA5IDAgMCAxIDEuOTAxIDUuNTU5YzAgMy41NzctMi4wNTYgNi42MzYtNSA4LjAyNmgtMS4yNnYtOC44ODJjMC0xLjA2Ny0uODIyLTEuOTYtMS45LTIuMTYtLjE1LS4wMjgtLjMwNC0uMDQ0LS40NjMtLjA0NC0uMjIgMC0uNDI3LjAzNy0uNjI4LjA5LS45NzcuMjgtMS43MDMgMS4xOTgtMS43NDMgMi4zMDZ2OS4xNzhsLTEuMTEtLjUzN0M2LjE4IDE5LjA5OCA0Ljk2IDE4IDQuMSAxNi42MTRNMjIuOTcgMjQuMDlsLTYuMjU2LTMuODc0Yy0uMTAyLS4wNjMtLjIxOC0uMDk4LS4zMy0uMTQ0IDIuNjgzLTEuOCA0LjM1NC00Ljg1NSA0LjM1NC04LjI0MyAwLS40ODYtLjAzNy0uOTY0LS4xMDQtMS40M2E5Ljk3IDkuOTcgMCAwIDAtMS41Ny00LjEyOGwtLjI5NS0uNDA4LS4wNjYtLjA5MmExMC4wNSAxMC4wNSAwIDAgMC0uOTQ5LTEuMDc4Yy0uMzQyLS4zMzQtLjcwOC0uNjQzLTEuMDk0LS45MjItMS4xNTUtLjgzNC0yLjQ5Mi0xLjQxMi0zLjk0LTEuNjVsLS43MzItLjA4OC0uNzQ4LS4wM2E5LjI5IDkuMjkgMCAwIDAtMS40ODIuMTE5Yy0xLjQ0Ny4yMzgtMi43ODYuODE2LTMuOTQgMS42NWE5LjMzIDkuMzMgMCAwIDAtLjgxMy42ODYgOS41OSA5LjU5IDAgMCAwLS44NDUuODc3bC0uMzg1LjQzNy0uMzYuNS0uMjg4LjQ2OC0uNDE4Ljc3OC0uMDQuMDljLS41OTMgMS4yOC0uOTMgMi43MS0uOTMgNC4yMjIgMCAzLjgzMiAyLjE4MiA3LjM0MiA1LjU2IDguOTM4bDEuNDM3LjY4djQuOTQ2TDUgMjUuNjRhNC40NCA0LjQ0IDAgMCAwLS44ODgtLjA4NmMtLjAxNyAwLS4wMzQuMDAzLS4wNS4wMDMtLjI1Mi4wMDQtLjUwMy4wMzMtLjc1LjA4YTUuMDggNS4wOCAwIDAgMC0uMjM3LjA1NmMtLjE5My4wNDYtLjM4Mi4xMDctLjU2OC4xOC0uMDc1LjAzLS4xNS4wNTctLjIyNS4xLS4yNS4xMTQtLjQ5NC4yNDQtLjcyMy40MDVhMS4zMSAxLjMxIDAgMCAwLS41NjYgMS4xMjIgMS4yOCAxLjI4IDAgMCAwIC42NDUgMS4wNTFDNCAyOS45MjUgNS45NiAzMS42MTQgNy40NzMgMzMuNTYzYTUuMDYgNS4wNiAwIDAgMCAuNDM0LjQ5MWMxLjA4NiAxLjA4MiAyLjY1NiAxLjcxMyA0LjMyNiAxLjcxNWg2LjY5N2MuNzQ4LS4wMDEgMS40My0uMzMzIDEuODU4LS44NzIuMTQyLS4xOC4yNTYtLjM4LjMzNi0uNjAybDIuNzU3LTcuNzRjLjA5NC0uMjYuMTMtLjUzLjExMi0uNzk0cy0uMDg4LS41Mi0uMjAzLS43NmEyLjE5IDIuMTkgMCAwIDAtLjgyMS0uOTFcIiBmaWxsLW9wYWNpdHk9XCIuNlwiIGZpbGw9XCIjMDAwXCIgLz5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMjIuNDQ0IDI0Ljk0bC02LjI1Ny0zLjg3NGExLjQ1IDEuNDUgMCAwIDAtLjc1Ny0uMjExaC0yLjk1M3YtOS44OGMwLS42NjMtLjYxNi0xLjIwMy0xLjM3My0xLjIwM3MtMS4zNy41NC0xLjM3IDEuMjAzdjE2LjY0M2wtNC45MjItLjk5NGEzLjQ0IDMuNDQgMCAwIDAtLjY5Mi0uMDY5IDMuMzUgMy4zNSAwIDAgMC0xLjkyNS41OThjLS4xNDcuMTAyLS4xOTguMTk4LS4xOTQuMjk4LjAwNC4wOTQuMDU4LjE3Ni4xNTMuMjMgMi40NjIgMS40NDggNC41MTcgMy4yMiA2LjExIDUuMjcuODg3IDEuMTQgMi4zNzMgMS44MiAzLjk4IDEuODJoNi42ODZjLjU3NyAwIDEuMDgtLjMyNiAxLjI1My0uOGwyLjc2LTcuNzRjLjE2LS40NDgtLjAxNy0uOTIzLS40MjYtMS4yMi0uMDI1LS4wMi0uMDQzLS4wNDMtLjA3LS4wNnpcIiBmaWxsPVwiI2ZmZlwiIC8+XG4gICAgICAgICAgICA8ZyB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMCAuNzY5KVwiPlxuICAgICAgICAgICAgICAgIDxtYXNrIGlkPVwiQlwiIGZpbGw9XCIjZmZmXCI+XG4gICAgICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cIiNBXCIgLz5cbiAgICAgICAgICAgICAgICA8L21hc2s+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk0yMy45OTMgMjQuOTkyYTEuOTYgMS45NiAwIDAgMS0uMTExLjc5NGwtMi43NTggNy43NGMtLjA4LjIyLS4xOTQuNDIzLS4zMzYuNjAyLS40MjcuNTQtMS4xMS44Ny0xLjg1Ny44NzJoLTYuNjk4Yy0xLjY3LS4wMDItMy4yNC0uNjMzLTQuMzI2LTEuNzE1LS4xNTQtLjE1NC0uMy0uMzE4LS40MzQtLjQ5QzUuOTYgMzAuODQ2IDQgMjkuMTU3IDEuNjQ2IDI3Ljc3M2MtLjM4NS0uMjI1LS42MjYtLjYxOC0uNjQ1LTEuMDVhMS4zMSAxLjMxIDAgMCAxIC41NjYtMS4xMjIgNC41NiA0LjU2IDAgMCAxIC43MjMtLjQwNWwuMjI1LS4xYTQuMyA0LjMgMCAwIDEgLjU2OC0uMThsLjIzNy0uMDU2Yy4yNDgtLjA0Ni41LS4wNzUuNzUtLjA4LjAxOCAwIC4wMzQtLjAwMy4wNS0uMDAzLjMwMy0uMDAxLjU5Ny4wMjcuODkuMDg2bDMuNzIyLjc1MlYyMC42OGwtMS40MzYtLjY4Yy0zLjM3Ny0xLjU5Ni01LjU2LTUuMTA2LTUuNTYtOC45MzggMC0xLjUxLjMzNi0yLjk0LjkzLTQuMjIyLjAxNS0uMDMuMDI1LS4wNi4wNC0uMDkuMTI3LS4yNjcuMjY4LS41MjUuNDE4LS43NzguMDkzLS4xNi4xODYtLjMxNi4yODgtLjQ2OC4wNjMtLjA5NS4xMzMtLjE4Ni4yLS4yNzdMMy43NzMgNWMuMTE4LS4xNTUuMjYtLjI5LjM4NS0uNDM3LjI2Ni0uMy41NDQtLjYwNC44NDUtLjg3N2E5LjMzIDkuMzMgMCAwIDEgLjgxMy0uNjg2QzYuOTcgMi4xNjcgOC4zMSAxLjU5IDkuNzU3IDEuMzVhOS4yNyA5LjI3IDAgMCAxIDEuNDgxLS4xMTkgOC44MiA4LjgyIDAgMCAxIC43NDguMDMxYy4yNDcuMDIuNDkuMDUuNzMzLjA4OCAxLjQ0OC4yMzggMi43ODYuODE2IDMuOTQgMS42NS4zODcuMjguNzUyLjU4OCAxLjA5NC45MjJhOS45NCA5Ljk0IDAgMCAxIC45NDkgMS4wNzhsLjA2Ni4wOTJjLjEwMi4xMzMuMjAzLjI2OC4yOTUuNDA4YTkuOTcgOS45NyAwIDAgMSAxLjU3MSA0LjEyOGMuMDY2LjQ2Ny4xMDMuOTQ1LjEwMyAxLjQzIDAgMy4zODgtMS42NyA2LjQ1My00LjM1MyA4LjI0My4xMS4wNDYuMjI3LjA4LjMzLjE0NGw2LjI1NiAzLjg3NGMuMzcuMjMuNjQ1LjU1LjgyLjkuMTE1LjI0LjE4NS40OTguMjAzLjc2bS42OTctMS4xOTVjLS4yNjUtLjU1LS42NzctMS4wMDctMS4xOTQtMS4zMjZsLTUuMzIzLTMuMjk3YzIuMjU1LTIuMDM3IDMuNTY0LTQuOTcgMy41NjQtOC4xMTQgMC0yLjE5LS42MzctNC4zMDQtMS44NC02LjExNC0uMTI2LS4xODgtLjI2LS4zNy0uNC0uNTUyLS42NDUtLjg0OC0xLjQwMi0xLjYtMi4yNTItMi4yMDRDMTUuNDcyLjkxIDEzLjM5My4yMzIgMTEuMjM4LjIzMkExMC4yMSAxMC4yMSAwIDAgMCA1LjIzIDIuMTljLS44NDguNjE0LTEuNjA2IDEuMzU2LTIuMjUzIDIuMjA1LS4xMzYuMTgtLjI3Mi4zNjMtLjM5OC41NUMxLjM3NCA2Ljc1Ni43MzcgOC44Ny43MzcgMTEuMDZjMCA0LjIxOCAyLjQwNyA4LjA4IDYuMTMzIDkuODQybC44NjMuNDF2My4wOTJsLTIuNTI1LS41MWMtLjM1Ni0uMDctLjcxNy0uMTA2LTEuMDc2LS4xMDZhNS40NSA1LjQ1IDAgMCAwLTMuMTQuOTk2Yy0uNjUzLjQ2LTEuMDIyIDEuMjAyLS45OSAxLjk4M2EyLjI4IDIuMjggMCAwIDAgMS4xMzggMS44NzJjMi4yNCAxLjMxOCA0LjEwNiAyLjkyMyA1LjU0MyA0Ljc3MiAxLjI2IDEuNjIgMy4zMzMgMi41OSA1LjU1IDIuNTkyaDYuNjk4YzEuNDItLjAwMSAyLjY4LS44NiAzLjEzNC0yLjEzOGwyLjc2LTcuNzRjLjI3Mi0uNzU3LjIyNC0xLjU4NC0uMTM0LTIuMzI1XCIgZmlsbC1vcGFjaXR5PVwiLjA1XCIgZmlsbD1cIiMwMDBcIiBtYXNrPVwidXJsKCNCKVwiIC8+XG4gICAgICAgICAgICA8L2c+XG4gICAgICAgIDwvZz5cbiAgICA8L2c+XG48L3N2Zz5gO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udHJvbHMtc3ZnLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/assets/controls-svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/assets/view-in-ar-material-svg.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/assets/view-in-ar-material-svg.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"(ssr)/./node_modules/lit/index.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n<svg version=\"1.1\" id=\"view_x5F_in_x5F_AR_x5F_icon\"\n\t xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\"\n\t viewBox=\"0 0 24 24\" enable-background=\"new 0 0 24 24\" xml:space=\"preserve\">\n<rect id=\"Bounding_Box\" x=\"0\" y=\"0\" fill=\"none\" width=\"24\" height=\"24\"/>\n<g id=\"Art_layer\">\n\t<path d=\"M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z\"/>\n\t<path d=\"M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z\"/>\n\t<path d=\"M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z\"/>\n\t<path d=\"M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z\"/>\n\t<g>\n\t\t<path d=\"M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\n\t\t\tl5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\n\t\t\tl4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z\"/>\n\t</g>\n</g>\n</svg>`);\n//# sourceMappingURL=view-in-ar-material-svg.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2Fzc2V0cy92aWV3LWluLWFyLW1hdGVyaWFsLXN2Zy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDMkI7QUFDM0IsaUVBQWUseUNBQUk7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxFQUFDO0FBQ1IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2Fzc2V0cy92aWV3LWluLWFyLW1hdGVyaWFsLXN2Zy5qcz84YmJhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IGh0bWwgfSBmcm9tICdsaXQnO1xuZXhwb3J0IGRlZmF1bHQgaHRtbCBgXG48c3ZnIHZlcnNpb249XCIxLjFcIiBpZD1cInZpZXdfeDVGX2luX3g1Rl9BUl94NUZfaWNvblwiXG5cdCB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB3aWR0aD1cIjI0cHhcIiBoZWlnaHQ9XCIyNHB4XCJcblx0IHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBlbmFibGUtYmFja2dyb3VuZD1cIm5ldyAwIDAgMjQgMjRcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPlxuPHJlY3QgaWQ9XCJCb3VuZGluZ19Cb3hcIiB4PVwiMFwiIHk9XCIwXCIgZmlsbD1cIm5vbmVcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIi8+XG48ZyBpZD1cIkFydF9sYXllclwiPlxuXHQ8cGF0aCBkPVwiTTMsNGMwLTAuNTUsMC40NS0xLDEtMWgyVjFINEMyLjM1LDEsMSwyLjM1LDEsNHYyaDJWNHpcIi8+XG5cdDxwYXRoIGQ9XCJNMjAsM2MwLjU1LDAsMSwwLjQ1LDEsMXYyaDJWNGMwLTEuNjUtMS4zNS0zLTMtM2gtMnYySDIwelwiLz5cblx0PHBhdGggZD1cIk00LDIxYy0wLjU1LDAtMS0wLjQ1LTEtMXYtMkgxdjJjMCwxLjY1LDEuMzUsMywzLDNoMnYtMkg0elwiLz5cblx0PHBhdGggZD1cIk0yMCwyMWMwLjU1LDAsMS0wLjQ1LDEtMXYtMmgydjJjMCwxLjY1LTEuMzUsMy0zLDNoLTJ2LTJIMjB6XCIvPlxuXHQ8Zz5cblx0XHQ8cGF0aCBkPVwiTTE4LjI1LDcuNmwtNS41LTMuMThjLTAuNDYtMC4yNy0xLjA0LTAuMjctMS41LDBMNS43NSw3LjZDNS4yOSw3Ljg3LDUsOC4zNiw1LDguOXY2LjM1YzAsMC41NCwwLjI5LDEuMDMsMC43NSwxLjNcblx0XHRcdGw1LjUsMy4xOGMwLjQ2LDAuMjcsMS4wNCwwLjI3LDEuNSwwbDUuNS0zLjE4YzAuNDYtMC4yNywwLjc1LTAuNzYsMC43NS0xLjNWOC45QzE5LDguMzYsMTguNzEsNy44NywxOC4yNSw3LjZ6IE03LDE0Ljk2di00LjYyXG5cdFx0XHRsNCwyLjMydjQuNjFMNywxNC45NnogTTEyLDEwLjkzTDgsOC42MWw0LTIuMzFsNCwyLjMxTDEyLDEwLjkzeiBNMTMsMTcuMjd2LTQuNjFsNC0yLjMydjQuNjJMMTMsMTcuMjd6XCIvPlxuXHQ8L2c+XG48L2c+XG48L3N2Zz5gO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmlldy1pbi1hci1tYXRlcmlhbC1zdmcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/assets/view-in-ar-material-svg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/constants.js":
/*!************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/constants.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HAS_INTERSECTION_OBSERVER: () => (/* binding */ HAS_INTERSECTION_OBSERVER),\n/* harmony export */   HAS_RESIZE_OBSERVER: () => (/* binding */ HAS_RESIZE_OBSERVER),\n/* harmony export */   HAS_WEBXR_DEVICE_API: () => (/* binding */ HAS_WEBXR_DEVICE_API),\n/* harmony export */   HAS_WEBXR_HIT_TEST_API: () => (/* binding */ HAS_WEBXR_HIT_TEST_API),\n/* harmony export */   IS_ANDROID: () => (/* binding */ IS_ANDROID),\n/* harmony export */   IS_AR_QUICKLOOK_CANDIDATE: () => (/* binding */ IS_AR_QUICKLOOK_CANDIDATE),\n/* harmony export */   IS_CHROMEOS: () => (/* binding */ IS_CHROMEOS),\n/* harmony export */   IS_FIREFOX: () => (/* binding */ IS_FIREFOX),\n/* harmony export */   IS_IOS: () => (/* binding */ IS_IOS),\n/* harmony export */   IS_IOS_CHROME: () => (/* binding */ IS_IOS_CHROME),\n/* harmony export */   IS_IOS_SAFARI: () => (/* binding */ IS_IOS_SAFARI),\n/* harmony export */   IS_MOBILE: () => (/* binding */ IS_MOBILE),\n/* harmony export */   IS_OCULUS: () => (/* binding */ IS_OCULUS),\n/* harmony export */   IS_SAFARI: () => (/* binding */ IS_SAFARI),\n/* harmony export */   IS_SCENEVIEWER_CANDIDATE: () => (/* binding */ IS_SCENEVIEWER_CANDIDATE),\n/* harmony export */   IS_WEBXR_AR_CANDIDATE: () => (/* binding */ IS_WEBXR_AR_CANDIDATE),\n/* harmony export */   IS_WKWEBVIEW: () => (/* binding */ IS_WKWEBVIEW)\n/* harmony export */ });\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// NOTE(cdata): The HAS_WEBXR_* constants can be enabled in Chrome by turning on\n// the appropriate flags. However, just because we have the API does not\n// guarantee that AR will work.\nconst HAS_WEBXR_DEVICE_API = navigator.xr != null &&\n    self.XRSession != null && navigator.xr.isSessionSupported != null;\nconst HAS_WEBXR_HIT_TEST_API = HAS_WEBXR_DEVICE_API &&\n    self.XRSession.prototype.requestHitTestSource != null;\nconst HAS_RESIZE_OBSERVER = self.ResizeObserver != null;\nconst HAS_INTERSECTION_OBSERVER = self.IntersectionObserver != null;\nconst IS_WEBXR_AR_CANDIDATE = HAS_WEBXR_HIT_TEST_API;\nconst IS_MOBILE = (() => {\n    const userAgent = navigator.userAgent || navigator.vendor || self.opera;\n    let check = false;\n    // eslint-disable-next-line\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i\n        .test(userAgent) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i\n            .test(userAgent.substr(0, 4))) {\n        check = true;\n    }\n    return check;\n})();\nconst IS_CHROMEOS = /\\bCrOS\\b/.test(navigator.userAgent);\nconst IS_ANDROID = /android/i.test(navigator.userAgent);\n// Prior to iOS 13, detecting iOS Safari was relatively straight-forward.\n// As of iOS 13, Safari on iPad (in its default configuration) reports the same\n// user-agent string as Safari on desktop MacOS. Strictly speaking, we only care\n// about iOS for the purposes if selecting for cases where Quick Look is known\n// to be supported. However, for API correctness purposes, we must rely on\n// known, detectable signals to distinguish iOS Safari from MacOS Safari. At the\n// time of this writing, there are no non-iOS/iPadOS Apple devices with\n// multi-touch displays.\n// @see https://stackoverflow.com/questions/57765958/how-to-detect-ipad-and-ipad-os-version-in-ios-13-and-up\n// @see https://forums.developer.apple.com/thread/119186\n// @see https://github.com/google/model-viewer/issues/758\nconst IS_IOS = (/iPad|iPhone|iPod/.test(navigator.userAgent) && !self.MSStream) ||\n    (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\n// @see https://developer.chrome.com/multidevice/user-agent\nconst IS_SAFARI = /Safari\\//.test(navigator.userAgent);\nconst IS_FIREFOX = /firefox/i.test(navigator.userAgent);\nconst IS_OCULUS = /OculusBrowser/.test(navigator.userAgent);\nconst IS_IOS_CHROME = IS_IOS && /CriOS\\//.test(navigator.userAgent);\nconst IS_IOS_SAFARI = IS_IOS && IS_SAFARI;\nconst IS_SCENEVIEWER_CANDIDATE = IS_ANDROID && !IS_FIREFOX && !IS_OCULUS;\nconst IS_WKWEBVIEW = Boolean(window.webkit && window.webkit.messageHandlers);\n// If running in iOS Safari proper, and not within a WKWebView component instance, check for ARQL feature support.\n// Otherwise, if running in a WKWebView instance, check for known ARQL compatible iOS browsers, including:\n// Chrome (CriOS), Edge (EdgiOS), Firefox (FxiOS), Google App (GSA), DuckDuckGo (DuckDuckGo).\n// All other iOS browsers / apps will fail by default.\nconst IS_AR_QUICKLOOK_CANDIDATE = (() => {\n    if (IS_IOS) {\n        if (!IS_WKWEBVIEW) {\n            const tempAnchor = document.createElement('a');\n            return Boolean(tempAnchor.relList && tempAnchor.relList.supports && tempAnchor.relList.supports('ar'));\n        }\n        else {\n            return Boolean(/CriOS\\/|EdgiOS\\/|FxiOS\\/|GSA\\/|DuckDuckGo\\//.test(navigator.userAgent));\n        }\n    }\n    else {\n        return false;\n    }\n})();\n//# sourceMappingURL=constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNPO0FBQ0E7QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ007QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2NvbnN0YW50cy5qcz9mNzQ4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIE5PVEUoY2RhdGEpOiBUaGUgSEFTX1dFQlhSXyogY29uc3RhbnRzIGNhbiBiZSBlbmFibGVkIGluIENocm9tZSBieSB0dXJuaW5nIG9uXG4vLyB0aGUgYXBwcm9wcmlhdGUgZmxhZ3MuIEhvd2V2ZXIsIGp1c3QgYmVjYXVzZSB3ZSBoYXZlIHRoZSBBUEkgZG9lcyBub3Rcbi8vIGd1YXJhbnRlZSB0aGF0IEFSIHdpbGwgd29yay5cbmV4cG9ydCBjb25zdCBIQVNfV0VCWFJfREVWSUNFX0FQSSA9IG5hdmlnYXRvci54ciAhPSBudWxsICYmXG4gICAgc2VsZi5YUlNlc3Npb24gIT0gbnVsbCAmJiBuYXZpZ2F0b3IueHIuaXNTZXNzaW9uU3VwcG9ydGVkICE9IG51bGw7XG5leHBvcnQgY29uc3QgSEFTX1dFQlhSX0hJVF9URVNUX0FQSSA9IEhBU19XRUJYUl9ERVZJQ0VfQVBJICYmXG4gICAgc2VsZi5YUlNlc3Npb24ucHJvdG90eXBlLnJlcXVlc3RIaXRUZXN0U291cmNlICE9IG51bGw7XG5leHBvcnQgY29uc3QgSEFTX1JFU0laRV9PQlNFUlZFUiA9IHNlbGYuUmVzaXplT2JzZXJ2ZXIgIT0gbnVsbDtcbmV4cG9ydCBjb25zdCBIQVNfSU5URVJTRUNUSU9OX09CU0VSVkVSID0gc2VsZi5JbnRlcnNlY3Rpb25PYnNlcnZlciAhPSBudWxsO1xuZXhwb3J0IGNvbnN0IElTX1dFQlhSX0FSX0NBTkRJREFURSA9IEhBU19XRUJYUl9ISVRfVEVTVF9BUEk7XG5leHBvcnQgY29uc3QgSVNfTU9CSUxFID0gKCgpID0+IHtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgc2VsZi5vcGVyYTtcbiAgICBsZXQgY2hlY2sgPSBmYWxzZTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBpZiAoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pXG4gICAgICAgIC50ZXN0KHVzZXJBZ2VudCkgfHxcbiAgICAgICAgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2lcbiAgICAgICAgICAgIC50ZXN0KHVzZXJBZ2VudC5zdWJzdHIoMCwgNCkpKSB7XG4gICAgICAgIGNoZWNrID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrO1xufSkoKTtcbmV4cG9ydCBjb25zdCBJU19DSFJPTUVPUyA9IC9cXGJDck9TXFxiLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuZXhwb3J0IGNvbnN0IElTX0FORFJPSUQgPSAvYW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4vLyBQcmlvciB0byBpT1MgMTMsIGRldGVjdGluZyBpT1MgU2FmYXJpIHdhcyByZWxhdGl2ZWx5IHN0cmFpZ2h0LWZvcndhcmQuXG4vLyBBcyBvZiBpT1MgMTMsIFNhZmFyaSBvbiBpUGFkIChpbiBpdHMgZGVmYXVsdCBjb25maWd1cmF0aW9uKSByZXBvcnRzIHRoZSBzYW1lXG4vLyB1c2VyLWFnZW50IHN0cmluZyBhcyBTYWZhcmkgb24gZGVza3RvcCBNYWNPUy4gU3RyaWN0bHkgc3BlYWtpbmcsIHdlIG9ubHkgY2FyZVxuLy8gYWJvdXQgaU9TIGZvciB0aGUgcHVycG9zZXMgaWYgc2VsZWN0aW5nIGZvciBjYXNlcyB3aGVyZSBRdWljayBMb29rIGlzIGtub3duXG4vLyB0byBiZSBzdXBwb3J0ZWQuIEhvd2V2ZXIsIGZvciBBUEkgY29ycmVjdG5lc3MgcHVycG9zZXMsIHdlIG11c3QgcmVseSBvblxuLy8ga25vd24sIGRldGVjdGFibGUgc2lnbmFscyB0byBkaXN0aW5ndWlzaCBpT1MgU2FmYXJpIGZyb20gTWFjT1MgU2FmYXJpLiBBdCB0aGVcbi8vIHRpbWUgb2YgdGhpcyB3cml0aW5nLCB0aGVyZSBhcmUgbm8gbm9uLWlPUy9pUGFkT1MgQXBwbGUgZGV2aWNlcyB3aXRoXG4vLyBtdWx0aS10b3VjaCBkaXNwbGF5cy5cbi8vIEBzZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTc3NjU5NTgvaG93LXRvLWRldGVjdC1pcGFkLWFuZC1pcGFkLW9zLXZlcnNpb24taW4taW9zLTEzLWFuZC11cFxuLy8gQHNlZSBodHRwczovL2ZvcnVtcy5kZXZlbG9wZXIuYXBwbGUuY29tL3RocmVhZC8xMTkxODZcbi8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9tb2RlbC12aWV3ZXIvaXNzdWVzLzc1OFxuZXhwb3J0IGNvbnN0IElTX0lPUyA9ICgvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhc2VsZi5NU1N0cmVhbSkgfHxcbiAgICAobmF2aWdhdG9yLnBsYXRmb3JtID09PSAnTWFjSW50ZWwnICYmIG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDEpO1xuLy8gQHNlZSBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL211bHRpZGV2aWNlL3VzZXItYWdlbnRcbmV4cG9ydCBjb25zdCBJU19TQUZBUkkgPSAvU2FmYXJpXFwvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuZXhwb3J0IGNvbnN0IElTX0ZJUkVGT1ggPSAvZmlyZWZveC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5leHBvcnQgY29uc3QgSVNfT0NVTFVTID0gL09jdWx1c0Jyb3dzZXIvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5leHBvcnQgY29uc3QgSVNfSU9TX0NIUk9NRSA9IElTX0lPUyAmJiAvQ3JpT1NcXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5leHBvcnQgY29uc3QgSVNfSU9TX1NBRkFSSSA9IElTX0lPUyAmJiBJU19TQUZBUkk7XG5leHBvcnQgY29uc3QgSVNfU0NFTkVWSUVXRVJfQ0FORElEQVRFID0gSVNfQU5EUk9JRCAmJiAhSVNfRklSRUZPWCAmJiAhSVNfT0NVTFVTO1xuZXhwb3J0IGNvbnN0IElTX1dLV0VCVklFVyA9IEJvb2xlYW4od2luZG93LndlYmtpdCAmJiB3aW5kb3cud2Via2l0Lm1lc3NhZ2VIYW5kbGVycyk7XG4vLyBJZiBydW5uaW5nIGluIGlPUyBTYWZhcmkgcHJvcGVyLCBhbmQgbm90IHdpdGhpbiBhIFdLV2ViVmlldyBjb21wb25lbnQgaW5zdGFuY2UsIGNoZWNrIGZvciBBUlFMIGZlYXR1cmUgc3VwcG9ydC5cbi8vIE90aGVyd2lzZSwgaWYgcnVubmluZyBpbiBhIFdLV2ViVmlldyBpbnN0YW5jZSwgY2hlY2sgZm9yIGtub3duIEFSUUwgY29tcGF0aWJsZSBpT1MgYnJvd3NlcnMsIGluY2x1ZGluZzpcbi8vIENocm9tZSAoQ3JpT1MpLCBFZGdlIChFZGdpT1MpLCBGaXJlZm94IChGeGlPUyksIEdvb2dsZSBBcHAgKEdTQSksIER1Y2tEdWNrR28gKER1Y2tEdWNrR28pLlxuLy8gQWxsIG90aGVyIGlPUyBicm93c2VycyAvIGFwcHMgd2lsbCBmYWlsIGJ5IGRlZmF1bHQuXG5leHBvcnQgY29uc3QgSVNfQVJfUVVJQ0tMT09LX0NBTkRJREFURSA9ICgoKSA9PiB7XG4gICAgaWYgKElTX0lPUykge1xuICAgICAgICBpZiAoIUlTX1dLV0VCVklFVykge1xuICAgICAgICAgICAgY29uc3QgdGVtcEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHRlbXBBbmNob3IucmVsTGlzdCAmJiB0ZW1wQW5jaG9yLnJlbExpc3Quc3VwcG9ydHMgJiYgdGVtcEFuY2hvci5yZWxMaXN0LnN1cHBvcnRzKCdhcicpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKC9DcmlPU1xcL3xFZGdpT1NcXC98RnhpT1NcXC98R1NBXFwvfER1Y2tEdWNrR29cXC8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnN0YW50cy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/decorators.js":
/*!*************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/decorators.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   style: () => (/* binding */ style)\n/* harmony export */ });\n/* harmony import */ var _styles_evaluators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles/evaluators */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/evaluators.js\");\n/* harmony import */ var _styles_parsers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./styles/parsers */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* harmony import */ var _styles_style_effector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles/style-effector */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/style-effector.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n/**\n * The @style decorator is responsible for coordinating the conversion of a\n * CSS-like string property value into numbers that can be applied to\n * lower-level constructs. It also can optionally manage the lifecycle of a\n * StyleEffector which allows automatic updates for styles that use env() or\n * var() functions.\n *\n * The decorator is configured with Intrinsics and the property key for a\n * method that handles updates. The named update handler is invoked with the\n * result of parsing and evaluating the raw property string value. The format of\n * the evaluated result is derived from the basis of the configured Intrinsics,\n * and is always an array of numbers of fixed length.\n *\n * NOTE: This decorator depends on the property updating mechanism defined by\n * UpdatingElement as exported by the lit-element module. That means it *must*\n * be used in conjunction with the @property decorator, or equivalent\n * JavaScript.\n *\n * Supported configurations are:\n *\n *  - `intrinsics`: An Intrinsics struct that describes how to interpret a\n * serialized style attribute. For more detail on intrinsics see\n * ./styles/evaluators.ts\n *  - `updateHandler`: A string or Symbol that is the key of a method to be\n * invoked with the result of parsing and evaluating a serialized style string.\n *  - `observeEffects`: Optional, if set to true then styles that use env() will\n * cause their update handlers to be invoked every time the corresponding\n * environment variable changes (even if the style attribute itself remains\n * static).\n */\nconst style = (config) => {\n    const observeEffects = config.observeEffects || false;\n    const getIntrinsics = config.intrinsics instanceof Function ?\n        config.intrinsics :\n        (() => config.intrinsics);\n    return (proto, propertyName) => {\n        const originalUpdated = proto.updated;\n        const originalConnectedCallback = proto.connectedCallback;\n        const originalDisconnectedCallback = proto.disconnectedCallback;\n        const $styleEffector = Symbol(`${propertyName}StyleEffector`);\n        const $styleEvaluator = Symbol(`${propertyName}StyleEvaluator`);\n        const $updateEvaluator = Symbol(`${propertyName}UpdateEvaluator`);\n        const $evaluateAndSync = Symbol(`${propertyName}EvaluateAndSync`);\n        Object.defineProperties(proto, {\n            [$styleEffector]: { value: null, writable: true },\n            [$styleEvaluator]: { value: null, writable: true },\n            [$updateEvaluator]: {\n                value: function () {\n                    const ast = (0,_styles_parsers__WEBPACK_IMPORTED_MODULE_1__.parseExpressions)(this[propertyName]);\n                    this[$styleEvaluator] =\n                        new _styles_evaluators__WEBPACK_IMPORTED_MODULE_0__.StyleEvaluator(ast, getIntrinsics(this));\n                    if (this[$styleEffector] == null && observeEffects) {\n                        this[$styleEffector] =\n                            new _styles_style_effector__WEBPACK_IMPORTED_MODULE_2__.StyleEffector(() => this[$evaluateAndSync]());\n                    }\n                    if (this[$styleEffector] != null) {\n                        this[$styleEffector].observeEffectsFor(ast);\n                    }\n                }\n            },\n            [$evaluateAndSync]: {\n                value: function () {\n                    if (this[$styleEvaluator] == null) {\n                        return;\n                    }\n                    const result = this[$styleEvaluator].evaluate();\n                    // @see https://github.com/microsoft/TypeScript/pull/30769\n                    // @see https://github.com/Microsoft/TypeScript/issues/1863\n                    this[config.updateHandler](result);\n                }\n            },\n            updated: {\n                value: function (changedProperties) {\n                    // Always invoke updates to styles first. This gives a class that\n                    // uses this decorator the opportunity to override the effect, or\n                    // respond to it, in its own implementation of `updated`.\n                    if (changedProperties.has(propertyName)) {\n                        this[$updateEvaluator]();\n                        this[$evaluateAndSync]();\n                    }\n                    originalUpdated.call(this, changedProperties);\n                }\n            },\n            connectedCallback: {\n                value: function () {\n                    originalConnectedCallback.call(this);\n                    this.requestUpdate(propertyName, this[propertyName]);\n                }\n            },\n            disconnectedCallback: {\n                value: function () {\n                    originalDisconnectedCallback.call(this);\n                    if (this[$styleEffector] != null) {\n                        this[$styleEffector].dispose();\n                        this[$styleEffector] = null;\n                    }\n                }\n            }\n        });\n    };\n};\n//# sourceMappingURL=decorators.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2RlY29yYXRvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDcUQ7QUFDRDtBQUNJO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxhQUFhO0FBQ3RELDBDQUEwQyxhQUFhO0FBQ3ZELDJDQUEyQyxhQUFhO0FBQ3hELDJDQUEyQyxhQUFhO0FBQ3hEO0FBQ0EsZ0NBQWdDLDZCQUE2QjtBQUM3RCxpQ0FBaUMsNkJBQTZCO0FBQzlEO0FBQ0E7QUFDQSxnQ0FBZ0MsaUVBQWdCO0FBQ2hEO0FBQ0EsNEJBQTRCLDhEQUFjO0FBQzFDO0FBQ0E7QUFDQSxnQ0FBZ0MsaUVBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZGVjb3JhdG9ycy5qcz8wMWIyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IFN0eWxlRXZhbHVhdG9yIH0gZnJvbSAnLi9zdHlsZXMvZXZhbHVhdG9ycyc7XG5pbXBvcnQgeyBwYXJzZUV4cHJlc3Npb25zIH0gZnJvbSAnLi9zdHlsZXMvcGFyc2Vycyc7XG5pbXBvcnQgeyBTdHlsZUVmZmVjdG9yIH0gZnJvbSAnLi9zdHlsZXMvc3R5bGUtZWZmZWN0b3InO1xuLyoqXG4gKiBUaGUgQHN0eWxlIGRlY29yYXRvciBpcyByZXNwb25zaWJsZSBmb3IgY29vcmRpbmF0aW5nIHRoZSBjb252ZXJzaW9uIG9mIGFcbiAqIENTUy1saWtlIHN0cmluZyBwcm9wZXJ0eSB2YWx1ZSBpbnRvIG51bWJlcnMgdGhhdCBjYW4gYmUgYXBwbGllZCB0b1xuICogbG93ZXItbGV2ZWwgY29uc3RydWN0cy4gSXQgYWxzbyBjYW4gb3B0aW9uYWxseSBtYW5hZ2UgdGhlIGxpZmVjeWNsZSBvZiBhXG4gKiBTdHlsZUVmZmVjdG9yIHdoaWNoIGFsbG93cyBhdXRvbWF0aWMgdXBkYXRlcyBmb3Igc3R5bGVzIHRoYXQgdXNlIGVudigpIG9yXG4gKiB2YXIoKSBmdW5jdGlvbnMuXG4gKlxuICogVGhlIGRlY29yYXRvciBpcyBjb25maWd1cmVkIHdpdGggSW50cmluc2ljcyBhbmQgdGhlIHByb3BlcnR5IGtleSBmb3IgYVxuICogbWV0aG9kIHRoYXQgaGFuZGxlcyB1cGRhdGVzLiBUaGUgbmFtZWQgdXBkYXRlIGhhbmRsZXIgaXMgaW52b2tlZCB3aXRoIHRoZVxuICogcmVzdWx0IG9mIHBhcnNpbmcgYW5kIGV2YWx1YXRpbmcgdGhlIHJhdyBwcm9wZXJ0eSBzdHJpbmcgdmFsdWUuIFRoZSBmb3JtYXQgb2ZcbiAqIHRoZSBldmFsdWF0ZWQgcmVzdWx0IGlzIGRlcml2ZWQgZnJvbSB0aGUgYmFzaXMgb2YgdGhlIGNvbmZpZ3VyZWQgSW50cmluc2ljcyxcbiAqIGFuZCBpcyBhbHdheXMgYW4gYXJyYXkgb2YgbnVtYmVycyBvZiBmaXhlZCBsZW5ndGguXG4gKlxuICogTk9URTogVGhpcyBkZWNvcmF0b3IgZGVwZW5kcyBvbiB0aGUgcHJvcGVydHkgdXBkYXRpbmcgbWVjaGFuaXNtIGRlZmluZWQgYnlcbiAqIFVwZGF0aW5nRWxlbWVudCBhcyBleHBvcnRlZCBieSB0aGUgbGl0LWVsZW1lbnQgbW9kdWxlLiBUaGF0IG1lYW5zIGl0ICptdXN0KlxuICogYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBAcHJvcGVydHkgZGVjb3JhdG9yLCBvciBlcXVpdmFsZW50XG4gKiBKYXZhU2NyaXB0LlxuICpcbiAqIFN1cHBvcnRlZCBjb25maWd1cmF0aW9ucyBhcmU6XG4gKlxuICogIC0gYGludHJpbnNpY3NgOiBBbiBJbnRyaW5zaWNzIHN0cnVjdCB0aGF0IGRlc2NyaWJlcyBob3cgdG8gaW50ZXJwcmV0IGFcbiAqIHNlcmlhbGl6ZWQgc3R5bGUgYXR0cmlidXRlLiBGb3IgbW9yZSBkZXRhaWwgb24gaW50cmluc2ljcyBzZWVcbiAqIC4vc3R5bGVzL2V2YWx1YXRvcnMudHNcbiAqICAtIGB1cGRhdGVIYW5kbGVyYDogQSBzdHJpbmcgb3IgU3ltYm9sIHRoYXQgaXMgdGhlIGtleSBvZiBhIG1ldGhvZCB0byBiZVxuICogaW52b2tlZCB3aXRoIHRoZSByZXN1bHQgb2YgcGFyc2luZyBhbmQgZXZhbHVhdGluZyBhIHNlcmlhbGl6ZWQgc3R5bGUgc3RyaW5nLlxuICogIC0gYG9ic2VydmVFZmZlY3RzYDogT3B0aW9uYWwsIGlmIHNldCB0byB0cnVlIHRoZW4gc3R5bGVzIHRoYXQgdXNlIGVudigpIHdpbGxcbiAqIGNhdXNlIHRoZWlyIHVwZGF0ZSBoYW5kbGVycyB0byBiZSBpbnZva2VkIGV2ZXJ5IHRpbWUgdGhlIGNvcnJlc3BvbmRpbmdcbiAqIGVudmlyb25tZW50IHZhcmlhYmxlIGNoYW5nZXMgKGV2ZW4gaWYgdGhlIHN0eWxlIGF0dHJpYnV0ZSBpdHNlbGYgcmVtYWluc1xuICogc3RhdGljKS5cbiAqL1xuZXhwb3J0IGNvbnN0IHN0eWxlID0gKGNvbmZpZykgPT4ge1xuICAgIGNvbnN0IG9ic2VydmVFZmZlY3RzID0gY29uZmlnLm9ic2VydmVFZmZlY3RzIHx8IGZhbHNlO1xuICAgIGNvbnN0IGdldEludHJpbnNpY3MgPSBjb25maWcuaW50cmluc2ljcyBpbnN0YW5jZW9mIEZ1bmN0aW9uID9cbiAgICAgICAgY29uZmlnLmludHJpbnNpY3MgOlxuICAgICAgICAoKCkgPT4gY29uZmlnLmludHJpbnNpY3MpO1xuICAgIHJldHVybiAocHJvdG8sIHByb3BlcnR5TmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFVwZGF0ZWQgPSBwcm90by51cGRhdGVkO1xuICAgICAgICBjb25zdCBvcmlnaW5hbENvbm5lY3RlZENhbGxiYWNrID0gcHJvdG8uY29ubmVjdGVkQ2FsbGJhY2s7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRGlzY29ubmVjdGVkQ2FsbGJhY2sgPSBwcm90by5kaXNjb25uZWN0ZWRDYWxsYmFjaztcbiAgICAgICAgY29uc3QgJHN0eWxlRWZmZWN0b3IgPSBTeW1ib2woYCR7cHJvcGVydHlOYW1lfVN0eWxlRWZmZWN0b3JgKTtcbiAgICAgICAgY29uc3QgJHN0eWxlRXZhbHVhdG9yID0gU3ltYm9sKGAke3Byb3BlcnR5TmFtZX1TdHlsZUV2YWx1YXRvcmApO1xuICAgICAgICBjb25zdCAkdXBkYXRlRXZhbHVhdG9yID0gU3ltYm9sKGAke3Byb3BlcnR5TmFtZX1VcGRhdGVFdmFsdWF0b3JgKTtcbiAgICAgICAgY29uc3QgJGV2YWx1YXRlQW5kU3luYyA9IFN5bWJvbChgJHtwcm9wZXJ0eU5hbWV9RXZhbHVhdGVBbmRTeW5jYCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHByb3RvLCB7XG4gICAgICAgICAgICBbJHN0eWxlRWZmZWN0b3JdOiB7IHZhbHVlOiBudWxsLCB3cml0YWJsZTogdHJ1ZSB9LFxuICAgICAgICAgICAgWyRzdHlsZUV2YWx1YXRvcl06IHsgdmFsdWU6IG51bGwsIHdyaXRhYmxlOiB0cnVlIH0sXG4gICAgICAgICAgICBbJHVwZGF0ZUV2YWx1YXRvcl06IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3QgPSBwYXJzZUV4cHJlc3Npb25zKHRoaXNbcHJvcGVydHlOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbJHN0eWxlRXZhbHVhdG9yXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3R5bGVFdmFsdWF0b3IoYXN0LCBnZXRJbnRyaW5zaWNzKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNbJHN0eWxlRWZmZWN0b3JdID09IG51bGwgJiYgb2JzZXJ2ZUVmZmVjdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJHN0eWxlRWZmZWN0b3JdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgU3R5bGVFZmZlY3RvcigoKSA9PiB0aGlzWyRldmFsdWF0ZUFuZFN5bmNdKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzWyRzdHlsZUVmZmVjdG9yXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWyRzdHlsZUVmZmVjdG9yXS5vYnNlcnZlRWZmZWN0c0Zvcihhc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFskZXZhbHVhdGVBbmRTeW5jXToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzWyRzdHlsZUV2YWx1YXRvcl0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXNbJHN0eWxlRXZhbHVhdG9yXS5ldmFsdWF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9wdWxsLzMwNzY5XG4gICAgICAgICAgICAgICAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy8xODYzXG4gICAgICAgICAgICAgICAgICAgIHRoaXNbY29uZmlnLnVwZGF0ZUhhbmRsZXJdKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZWQ6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGNoYW5nZWRQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBpbnZva2UgdXBkYXRlcyB0byBzdHlsZXMgZmlyc3QuIFRoaXMgZ2l2ZXMgYSBjbGFzcyB0aGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZXMgdGhpcyBkZWNvcmF0b3IgdGhlIG9wcG9ydHVuaXR5IHRvIG92ZXJyaWRlIHRoZSBlZmZlY3QsIG9yXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3BvbmQgdG8gaXQsIGluIGl0cyBvd24gaW1wbGVtZW50YXRpb24gb2YgYHVwZGF0ZWRgLlxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKHByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJHVwZGF0ZUV2YWx1YXRvcl0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJGV2YWx1YXRlQW5kU3luY10oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFVwZGF0ZWQuY2FsbCh0aGlzLCBjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbm5lY3RlZENhbGxiYWNrOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxDb25uZWN0ZWRDYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUocHJvcGVydHlOYW1lLCB0aGlzW3Byb3BlcnR5TmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjazoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRGlzY29ubmVjdGVkQ2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNbJHN0eWxlRWZmZWN0b3JdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJHN0eWxlRWZmZWN0b3JdLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJHN0eWxlRWZmZWN0b3JdID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWNvcmF0b3JzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/decorators.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/animation.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/animation.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnimationMixin: () => (/* binding */ AnimationMixin)\n/* harmony export */ });\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/decorators.js */ \"(ssr)/./node_modules/lit/decorators.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\nconst MILLISECONDS_PER_SECOND = 1000.0;\nconst $changeAnimation = Symbol('changeAnimation');\nconst $paused = Symbol('paused');\nconst DEFAULT_PLAY_OPTIONS = {\n    repetitions: Infinity,\n    pingpong: false\n};\nconst AnimationMixin = (ModelViewerElement) => {\n    var _a;\n    class AnimationModelViewerElement extends ModelViewerElement {\n        constructor(...args) {\n            super(args);\n            this.autoplay = false;\n            this.animationName = undefined;\n            this.animationCrossfadeDuration = 300;\n            this[_a] = true;\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].subscribeMixerEvent('loop', (e) => {\n                const count = e.action._loopCount;\n                this.dispatchEvent(new CustomEvent('loop', { detail: { count } }));\n            });\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].subscribeMixerEvent('finished', () => {\n                this[$paused] = true;\n                this.dispatchEvent(new CustomEvent('finished'));\n            });\n        }\n        /**\n         * Returns an array\n         */\n        get availableAnimations() {\n            if (this.loaded) {\n                return this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].animationNames;\n            }\n            return [];\n        }\n        get duration() {\n            return this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].duration;\n        }\n        get paused() {\n            return this[$paused];\n        }\n        get currentTime() {\n            return this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].animationTime;\n        }\n        set currentTime(value) {\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].animationTime = value;\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n        }\n        get timeScale() {\n            return this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].animationTimeScale;\n        }\n        set timeScale(value) {\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].animationTimeScale = value;\n        }\n        pause() {\n            if (this[$paused]) {\n                return;\n            }\n            this[$paused] = true;\n            this.dispatchEvent(new CustomEvent('pause'));\n        }\n        play(options) {\n            if (this.availableAnimations.length > 0) {\n                this[$paused] = false;\n                this[$changeAnimation](options);\n                this.dispatchEvent(new CustomEvent('play'));\n            }\n        }\n        [(_a = $paused, _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$onModelLoad)]() {\n            super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$onModelLoad]();\n            this[$paused] = true;\n            if (this.autoplay) {\n                this.play();\n            }\n        }\n        [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$tick](_time, delta) {\n            super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$tick](_time, delta);\n            if (this[$paused] ||\n                (!this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$getModelIsVisible]() && !this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$renderer].isPresenting)) {\n                return;\n            }\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].updateAnimation(delta / MILLISECONDS_PER_SECOND);\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('autoplay') && this.autoplay) {\n                this.play();\n            }\n            if (changedProperties.has('animationName')) {\n                this[$changeAnimation]();\n            }\n        }\n        [$changeAnimation](options = DEFAULT_PLAY_OPTIONS) {\n            var _b;\n            const repetitions = (_b = options.repetitions) !== null && _b !== void 0 ? _b : Infinity;\n            const mode = options.pingpong ?\n                three__WEBPACK_IMPORTED_MODULE_2__.LoopPingPong :\n                (repetitions === 1 ? three__WEBPACK_IMPORTED_MODULE_2__.LoopOnce : three__WEBPACK_IMPORTED_MODULE_2__.LoopRepeat);\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].playAnimation(this.animationName, this.animationCrossfadeDuration / MILLISECONDS_PER_SECOND, mode, repetitions);\n            // If we are currently paused, we need to force a render so that\n            // the scene updates to the first frame of the new animation\n            if (this[$paused]) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].updateAnimation(0);\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n            }\n        }\n    }\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Boolean })\n    ], AnimationModelViewerElement.prototype, \"autoplay\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'animation-name' })\n    ], AnimationModelViewerElement.prototype, \"animationName\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Number, attribute: 'animation-crossfade-duration' })\n    ], AnimationModelViewerElement.prototype, \"animationCrossfadeDuration\", void 0);\n    return AnimationModelViewerElement;\n};\n//# sourceMappingURL=animation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL2FuaW1hdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFJLElBQUksU0FBSTtBQUM5QjtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTtBQUM2QztBQUNjO0FBQ3dEO0FBQ25IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHlEQUFNO0FBQ3ZCO0FBQ0EsNkRBQTZELFVBQVUsU0FBUztBQUNoRixhQUFhO0FBQ2IsaUJBQWlCLHlEQUFNO0FBQ3ZCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlEQUFNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlEQUFNO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseURBQU07QUFDOUI7QUFDQTtBQUNBLGlCQUFpQix5REFBTTtBQUN2QixpQkFBaUIsK0RBQVk7QUFDN0I7QUFDQTtBQUNBLHdCQUF3Qix5REFBTTtBQUM5QjtBQUNBO0FBQ0EsaUJBQWlCLHlEQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrREFBWTtBQUNwQyxrQkFBa0IsK0RBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsd0RBQUs7QUFDZCxrQkFBa0Isd0RBQUs7QUFDdkI7QUFDQSx1QkFBdUIscUVBQWtCLGFBQWEsNERBQVM7QUFDL0Q7QUFDQTtBQUNBLGlCQUFpQix5REFBTTtBQUN2QixpQkFBaUIsK0RBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrQ0FBWTtBQUM1QixxQ0FBcUMsMkNBQVEsR0FBRyw2Q0FBVTtBQUMxRCxpQkFBaUIseURBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHlEQUFNO0FBQzNCLHFCQUFxQiwrREFBWTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkRBQVEsR0FBRyxlQUFlO0FBQ2xDO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcsMkNBQTJDO0FBQzlEO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcseURBQXlEO0FBQzVFO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9mZWF0dXJlcy9hbmltYXRpb24uanM/NGU1MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IExvb3BPbmNlLCBMb29wUGluZ1BvbmcsIExvb3BSZXBlYXQgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgeyAkZ2V0TW9kZWxJc1Zpc2libGUsICRuZWVkc1JlbmRlciwgJG9uTW9kZWxMb2FkLCAkcmVuZGVyZXIsICRzY2VuZSwgJHRpY2sgfSBmcm9tICcuLi9tb2RlbC12aWV3ZXItYmFzZS5qcyc7XG5jb25zdCBNSUxMSVNFQ09ORFNfUEVSX1NFQ09ORCA9IDEwMDAuMDtcbmNvbnN0ICRjaGFuZ2VBbmltYXRpb24gPSBTeW1ib2woJ2NoYW5nZUFuaW1hdGlvbicpO1xuY29uc3QgJHBhdXNlZCA9IFN5bWJvbCgncGF1c2VkJyk7XG5jb25zdCBERUZBVUxUX1BMQVlfT1BUSU9OUyA9IHtcbiAgICByZXBldGl0aW9uczogSW5maW5pdHksXG4gICAgcGluZ3Bvbmc6IGZhbHNlXG59O1xuZXhwb3J0IGNvbnN0IEFuaW1hdGlvbk1peGluID0gKE1vZGVsVmlld2VyRWxlbWVudCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBjbGFzcyBBbmltYXRpb25Nb2RlbFZpZXdlckVsZW1lbnQgZXh0ZW5kcyBNb2RlbFZpZXdlckVsZW1lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgICAgICBzdXBlcihhcmdzKTtcbiAgICAgICAgICAgIHRoaXMuYXV0b3BsYXkgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uQ3Jvc3NmYWRlRHVyYXRpb24gPSAzMDA7XG4gICAgICAgICAgICB0aGlzW19hXSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzWyRzY2VuZV0uc3Vic2NyaWJlTWl4ZXJFdmVudCgnbG9vcCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBlLmFjdGlvbi5fbG9vcENvdW50O1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2xvb3AnLCB7IGRldGFpbDogeyBjb3VudCB9IH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpc1skc2NlbmVdLnN1YnNjcmliZU1peGVyRXZlbnQoJ2ZpbmlzaGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXNbJHBhdXNlZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2ZpbmlzaGVkJykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYW4gYXJyYXlcbiAgICAgICAgICovXG4gICAgICAgIGdldCBhdmFpbGFibGVBbmltYXRpb25zKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbJHNjZW5lXS5hbmltYXRpb25OYW1lcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBnZXQgZHVyYXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skc2NlbmVdLmR1cmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGdldCBwYXVzZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skcGF1c2VkXTtcbiAgICAgICAgfVxuICAgICAgICBnZXQgY3VycmVudFRpbWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skc2NlbmVdLmFuaW1hdGlvblRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgc2V0IGN1cnJlbnRUaW1lKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzWyRzY2VuZV0uYW5pbWF0aW9uVGltZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpc1skbmVlZHNSZW5kZXJdKCk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0IHRpbWVTY2FsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzWyRzY2VuZV0uYW5pbWF0aW9uVGltZVNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIHNldCB0aW1lU2NhbGUodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5hbmltYXRpb25UaW1lU2NhbGUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBwYXVzZSgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzWyRwYXVzZWRdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1skcGF1c2VkXSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdwYXVzZScpKTtcbiAgICAgICAgfVxuICAgICAgICBwbGF5KG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmF2YWlsYWJsZUFuaW1hdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXNbJHBhdXNlZF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzWyRjaGFuZ2VBbmltYXRpb25dKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3BsYXknKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgWyhfYSA9ICRwYXVzZWQsICRvbk1vZGVsTG9hZCldKCkge1xuICAgICAgICAgICAgc3VwZXJbJG9uTW9kZWxMb2FkXSgpO1xuICAgICAgICAgICAgdGhpc1skcGF1c2VkXSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvcGxheSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFskdGlja10oX3RpbWUsIGRlbHRhKSB7XG4gICAgICAgICAgICBzdXBlclskdGlja10oX3RpbWUsIGRlbHRhKTtcbiAgICAgICAgICAgIGlmICh0aGlzWyRwYXVzZWRdIHx8XG4gICAgICAgICAgICAgICAgKCF0aGlzWyRnZXRNb2RlbElzVmlzaWJsZV0oKSAmJiAhdGhpc1skcmVuZGVyZXJdLmlzUHJlc2VudGluZykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzWyRzY2VuZV0udXBkYXRlQW5pbWF0aW9uKGRlbHRhIC8gTUlMTElTRUNPTkRTX1BFUl9TRUNPTkQpO1xuICAgICAgICAgICAgdGhpc1skbmVlZHNSZW5kZXJdKCk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICAgICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdhdXRvcGxheScpICYmIHRoaXMuYXV0b3BsYXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2FuaW1hdGlvbk5hbWUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJGNoYW5nZUFuaW1hdGlvbl0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBbJGNoYW5nZUFuaW1hdGlvbl0ob3B0aW9ucyA9IERFRkFVTFRfUExBWV9PUFRJT05TKSB7XG4gICAgICAgICAgICB2YXIgX2I7XG4gICAgICAgICAgICBjb25zdCByZXBldGl0aW9ucyA9IChfYiA9IG9wdGlvbnMucmVwZXRpdGlvbnMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IEluZmluaXR5O1xuICAgICAgICAgICAgY29uc3QgbW9kZSA9IG9wdGlvbnMucGluZ3BvbmcgP1xuICAgICAgICAgICAgICAgIExvb3BQaW5nUG9uZyA6XG4gICAgICAgICAgICAgICAgKHJlcGV0aXRpb25zID09PSAxID8gTG9vcE9uY2UgOiBMb29wUmVwZWF0KTtcbiAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5wbGF5QW5pbWF0aW9uKHRoaXMuYW5pbWF0aW9uTmFtZSwgdGhpcy5hbmltYXRpb25Dcm9zc2ZhZGVEdXJhdGlvbiAvIE1JTExJU0VDT05EU19QRVJfU0VDT05ELCBtb2RlLCByZXBldGl0aW9ucyk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgY3VycmVudGx5IHBhdXNlZCwgd2UgbmVlZCB0byBmb3JjZSBhIHJlbmRlciBzbyB0aGF0XG4gICAgICAgICAgICAvLyB0aGUgc2NlbmUgdXBkYXRlcyB0byB0aGUgZmlyc3QgZnJhbWUgb2YgdGhlIG5ldyBhbmltYXRpb25cbiAgICAgICAgICAgIGlmICh0aGlzWyRwYXVzZWRdKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skc2NlbmVdLnVwZGF0ZUFuaW1hdGlvbigwKTtcbiAgICAgICAgICAgICAgICB0aGlzWyRuZWVkc1JlbmRlcl0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuIH0pXG4gICAgXSwgQW5pbWF0aW9uTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJhdXRvcGxheVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgYXR0cmlidXRlOiAnYW5pbWF0aW9uLW5hbWUnIH0pXG4gICAgXSwgQW5pbWF0aW9uTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJhbmltYXRpb25OYW1lXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogTnVtYmVyLCBhdHRyaWJ1dGU6ICdhbmltYXRpb24tY3Jvc3NmYWRlLWR1cmF0aW9uJyB9KVxuICAgIF0sIEFuaW1hdGlvbk1vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwiYW5pbWF0aW9uQ3Jvc3NmYWRlRHVyYXRpb25cIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gQW5pbWF0aW9uTW9kZWxWaWV3ZXJFbGVtZW50O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuaW1hdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/animation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/annotation.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/annotation.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AnnotationMixin: () => (/* binding */ AnnotationMixin)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _three_components_Hotspot_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../three-components/Hotspot.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Hotspot.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\nconst $hotspotMap = Symbol('hotspotMap');\nconst $mutationCallback = Symbol('mutationCallback');\nconst $observer = Symbol('observer');\nconst $addHotspot = Symbol('addHotspot');\nconst $removeHotspot = Symbol('removeHotspot');\nconst worldToModel = new three__WEBPACK_IMPORTED_MODULE_2__.Matrix4();\nconst worldToModelNormal = new three__WEBPACK_IMPORTED_MODULE_2__.Matrix3();\n/**\n * AnnotationMixin implements a declarative API to add hotspots and annotations.\n * Child elements of the <model-viewer> element that have a slot name that\n * begins with \"hotspot\" and data-position and data-normal attributes in\n * the format of the camera-target attribute will be added to the scene and\n * track the specified model coordinates.\n */\nconst AnnotationMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class AnnotationModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this[_a] = new Map();\n            this[_b] = (mutations) => {\n                mutations.forEach((mutation) => {\n                    // NOTE: Be wary that in ShadyDOM cases, the MutationRecord\n                    // only has addedNodes and removedNodes (and no other details).\n                    if (!(mutation instanceof MutationRecord) ||\n                        mutation.type === 'childList') {\n                        mutation.addedNodes.forEach((node) => {\n                            this[$addHotspot](node);\n                        });\n                        mutation.removedNodes.forEach((node) => {\n                            this[$removeHotspot](node);\n                        });\n                        this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$needsRender]();\n                    }\n                });\n            };\n            this[_c] = new MutationObserver(this[$mutationCallback]);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            for (let i = 0; i < this.children.length; ++i) {\n                this[$addHotspot](this.children[i]);\n            }\n            const { ShadyDOM } = self;\n            if (ShadyDOM == null) {\n                this[$observer].observe(this, { childList: true });\n            }\n            else {\n                this[$observer] =\n                    ShadyDOM.observeChildren(this, this[$mutationCallback]);\n            }\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            const { ShadyDOM } = self;\n            if (ShadyDOM == null) {\n                this[$observer].disconnect();\n            }\n            else {\n                ShadyDOM.unobserveChildren(this[$observer]);\n            }\n        }\n        [(_a = $hotspotMap, _b = $mutationCallback, _c = $observer, _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$tick)](time, delta) {\n            super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$tick](time, delta);\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$scene];\n            const { annotationRenderer } = scene;\n            const camera = scene.getCamera();\n            if (scene.shouldRender()) {\n                scene.updateHotspots(camera.position);\n                annotationRenderer.domElement.style.display = '';\n                annotationRenderer.render(scene, camera);\n            }\n        }\n        /**\n         * Since the data-position and data-normal attributes are not observed, use\n         * this method to move a hotspot. Keep in mind that all hotspots with the\n         * same slot name use a single location and the first definition takes\n         * precedence, until updated with this method.\n         */\n        updateHotspot(config) {\n            const hotspot = this[$hotspotMap].get(config.name);\n            if (hotspot == null) {\n                return;\n            }\n            hotspot.updatePosition(config.position);\n            hotspot.updateNormal(config.normal);\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$needsRender]();\n        }\n        /**\n         * This method returns in-scene data about a requested hotspot including\n         * its position in screen (canvas) space and its current visibility.\n         */\n        queryHotspot(name) {\n            const hotspot = this[$hotspotMap].get(name);\n            if (hotspot == null) {\n                return null;\n            }\n            const position = (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.toVector3D)(hotspot.position);\n            const normal = (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.toVector3D)(hotspot.normal);\n            const facingCamera = hotspot.facingCamera;\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$scene];\n            const camera = scene.getCamera();\n            const vector = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n            vector.setFromMatrixPosition(hotspot.matrixWorld);\n            vector.project(camera);\n            const widthHalf = scene.width / 2;\n            const heightHalf = scene.height / 2;\n            vector.x = (vector.x * widthHalf) + widthHalf;\n            vector.y = -(vector.y * heightHalf) + heightHalf;\n            const canvasPosition = (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.toVector3D)(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(vector.x, vector.y, vector.z));\n            if (!Number.isFinite(canvasPosition.x) ||\n                !Number.isFinite(canvasPosition.y)) {\n                return null;\n            }\n            return { position, normal, canvasPosition, facingCamera };\n        }\n        /**\n         * This method returns the model position, normal and texture coordinate\n         * of the point on the mesh corresponding to the input pixel coordinates\n         * given relative to the model-viewer element. The position and normal\n         * are returned as strings in the format suitable for putting in a\n         * hotspot's data-position and data-normal attributes. If the mesh is\n         * not hit, the result is null.\n         */\n        positionAndNormalFromPoint(pixelX, pixelY) {\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$scene];\n            const ndcPosition = scene.getNDC(pixelX, pixelY);\n            const hit = scene.positionAndNormalFromPoint(ndcPosition);\n            if (hit == null) {\n                return null;\n            }\n            worldToModel.copy(scene.target.matrixWorld).invert();\n            const position = (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.toVector3D)(hit.position.applyMatrix4(worldToModel));\n            worldToModelNormal.getNormalMatrix(worldToModel);\n            const normal = (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.toVector3D)(hit.normal.applyNormalMatrix(worldToModelNormal));\n            let uv = null;\n            if (hit.uv != null) {\n                uv = (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.toVector2D)(hit.uv);\n            }\n            return { position: position, normal: normal, uv: uv };\n        }\n        [$addHotspot](node) {\n            if (!(node instanceof HTMLElement &&\n                node.slot.indexOf('hotspot') === 0)) {\n                return;\n            }\n            let hotspot = this[$hotspotMap].get(node.slot);\n            if (hotspot != null) {\n                hotspot.increment();\n            }\n            else {\n                hotspot = new _three_components_Hotspot_js__WEBPACK_IMPORTED_MODULE_1__.Hotspot({\n                    name: node.slot,\n                    position: node.dataset.position,\n                    normal: node.dataset.normal,\n                });\n                this[$hotspotMap].set(node.slot, hotspot);\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$scene].addHotspot(hotspot);\n            }\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$scene].queueRender();\n        }\n        [$removeHotspot](node) {\n            if (!(node instanceof HTMLElement)) {\n                return;\n            }\n            const hotspot = this[$hotspotMap].get(node.slot);\n            if (!hotspot) {\n                return;\n            }\n            if (hotspot.decrement()) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$scene].removeHotspot(hotspot);\n                this[$hotspotMap].delete(node.slot);\n            }\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.$scene].queueRender();\n        }\n    }\n    return AnnotationModelViewerElement;\n};\n//# sourceMappingURL=annotation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL2Fubm90YXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDa0Q7QUFDNEM7QUFDckM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwwQ0FBTztBQUNoQywrQkFBK0IsMENBQU87QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsNkJBQTZCLCtEQUFZO0FBQ3pDO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMEJBQTBCO0FBQ3REO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBLGdEQUFnRCxpQkFBaUI7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLHdEQUFLO0FBQ3pFLGtCQUFrQix3REFBSztBQUN2QiwrQkFBK0IseURBQU07QUFDckMsb0JBQW9CLHFCQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLCtEQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlFQUFVO0FBQ3ZDLDJCQUEyQixpRUFBVTtBQUNyQztBQUNBLCtCQUErQix5REFBTTtBQUNyQztBQUNBLCtCQUErQiwwQ0FBTztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsaUVBQVUsS0FBSywwQ0FBTztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5REFBTTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUVBQVU7QUFDdkM7QUFDQSwyQkFBMkIsaUVBQVU7QUFDckM7QUFDQTtBQUNBLHFCQUFxQixpRUFBVTtBQUMvQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlFQUFPO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLHFCQUFxQix5REFBTTtBQUMzQjtBQUNBLGlCQUFpQix5REFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5REFBTTtBQUMzQjtBQUNBO0FBQ0EsaUJBQWlCLHlEQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL2Fubm90YXRpb24uanM/OTc3MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBNYXRyaXgzLCBNYXRyaXg0LCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgJG5lZWRzUmVuZGVyLCAkc2NlbmUsICR0aWNrLCB0b1ZlY3RvcjJELCB0b1ZlY3RvcjNEIH0gZnJvbSAnLi4vbW9kZWwtdmlld2VyLWJhc2UuanMnO1xuaW1wb3J0IHsgSG90c3BvdCB9IGZyb20gJy4uL3RocmVlLWNvbXBvbmVudHMvSG90c3BvdC5qcyc7XG5jb25zdCAkaG90c3BvdE1hcCA9IFN5bWJvbCgnaG90c3BvdE1hcCcpO1xuY29uc3QgJG11dGF0aW9uQ2FsbGJhY2sgPSBTeW1ib2woJ211dGF0aW9uQ2FsbGJhY2snKTtcbmNvbnN0ICRvYnNlcnZlciA9IFN5bWJvbCgnb2JzZXJ2ZXInKTtcbmNvbnN0ICRhZGRIb3RzcG90ID0gU3ltYm9sKCdhZGRIb3RzcG90Jyk7XG5jb25zdCAkcmVtb3ZlSG90c3BvdCA9IFN5bWJvbCgncmVtb3ZlSG90c3BvdCcpO1xuY29uc3Qgd29ybGRUb01vZGVsID0gbmV3IE1hdHJpeDQoKTtcbmNvbnN0IHdvcmxkVG9Nb2RlbE5vcm1hbCA9IG5ldyBNYXRyaXgzKCk7XG4vKipcbiAqIEFubm90YXRpb25NaXhpbiBpbXBsZW1lbnRzIGEgZGVjbGFyYXRpdmUgQVBJIHRvIGFkZCBob3RzcG90cyBhbmQgYW5ub3RhdGlvbnMuXG4gKiBDaGlsZCBlbGVtZW50cyBvZiB0aGUgPG1vZGVsLXZpZXdlcj4gZWxlbWVudCB0aGF0IGhhdmUgYSBzbG90IG5hbWUgdGhhdFxuICogYmVnaW5zIHdpdGggXCJob3RzcG90XCIgYW5kIGRhdGEtcG9zaXRpb24gYW5kIGRhdGEtbm9ybWFsIGF0dHJpYnV0ZXMgaW5cbiAqIHRoZSBmb3JtYXQgb2YgdGhlIGNhbWVyYS10YXJnZXQgYXR0cmlidXRlIHdpbGwgYmUgYWRkZWQgdG8gdGhlIHNjZW5lIGFuZFxuICogdHJhY2sgdGhlIHNwZWNpZmllZCBtb2RlbCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IEFubm90YXRpb25NaXhpbiA9IChNb2RlbFZpZXdlckVsZW1lbnQpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjbGFzcyBBbm5vdGF0aW9uTW9kZWxWaWV3ZXJFbGVtZW50IGV4dGVuZHMgTW9kZWxWaWV3ZXJFbGVtZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgdGhpc1tfYV0gPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzW19iXSA9IChtdXRhdGlvbnMpID0+IHtcbiAgICAgICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogQmUgd2FyeSB0aGF0IGluIFNoYWR5RE9NIGNhc2VzLCB0aGUgTXV0YXRpb25SZWNvcmRcbiAgICAgICAgICAgICAgICAgICAgLy8gb25seSBoYXMgYWRkZWROb2RlcyBhbmQgcmVtb3ZlZE5vZGVzIChhbmQgbm8gb3RoZXIgZGV0YWlscykuXG4gICAgICAgICAgICAgICAgICAgIGlmICghKG11dGF0aW9uIGluc3RhbmNlb2YgTXV0YXRpb25SZWNvcmQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1skYWRkSG90c3BvdF0obm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uLnJlbW92ZWROb2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1skcmVtb3ZlSG90c3BvdF0obm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJG5lZWRzUmVuZGVyXSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpc1tfY10gPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzWyRtdXRhdGlvbkNhbGxiYWNrXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skYWRkSG90c3BvdF0odGhpcy5jaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IFNoYWR5RE9NIH0gPSBzZWxmO1xuICAgICAgICAgICAgaWYgKFNoYWR5RE9NID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRvYnNlcnZlcl0ub2JzZXJ2ZSh0aGlzLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXNbJG9ic2VydmVyXSA9XG4gICAgICAgICAgICAgICAgICAgIFNoYWR5RE9NLm9ic2VydmVDaGlsZHJlbih0aGlzLCB0aGlzWyRtdXRhdGlvbkNhbGxiYWNrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgY29uc3QgeyBTaGFkeURPTSB9ID0gc2VsZjtcbiAgICAgICAgICAgIGlmIChTaGFkeURPTSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skb2JzZXJ2ZXJdLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFNoYWR5RE9NLnVub2JzZXJ2ZUNoaWxkcmVuKHRoaXNbJG9ic2VydmVyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgWyhfYSA9ICRob3RzcG90TWFwLCBfYiA9ICRtdXRhdGlvbkNhbGxiYWNrLCBfYyA9ICRvYnNlcnZlciwgJHRpY2spXSh0aW1lLCBkZWx0YSkge1xuICAgICAgICAgICAgc3VwZXJbJHRpY2tdKHRpbWUsIGRlbHRhKTtcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpc1skc2NlbmVdO1xuICAgICAgICAgICAgY29uc3QgeyBhbm5vdGF0aW9uUmVuZGVyZXIgfSA9IHNjZW5lO1xuICAgICAgICAgICAgY29uc3QgY2FtZXJhID0gc2NlbmUuZ2V0Q2FtZXJhKCk7XG4gICAgICAgICAgICBpZiAoc2NlbmUuc2hvdWxkUmVuZGVyKCkpIHtcbiAgICAgICAgICAgICAgICBzY2VuZS51cGRhdGVIb3RzcG90cyhjYW1lcmEucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIGFubm90YXRpb25SZW5kZXJlci5kb21FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uUmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaW5jZSB0aGUgZGF0YS1wb3NpdGlvbiBhbmQgZGF0YS1ub3JtYWwgYXR0cmlidXRlcyBhcmUgbm90IG9ic2VydmVkLCB1c2VcbiAgICAgICAgICogdGhpcyBtZXRob2QgdG8gbW92ZSBhIGhvdHNwb3QuIEtlZXAgaW4gbWluZCB0aGF0IGFsbCBob3RzcG90cyB3aXRoIHRoZVxuICAgICAgICAgKiBzYW1lIHNsb3QgbmFtZSB1c2UgYSBzaW5nbGUgbG9jYXRpb24gYW5kIHRoZSBmaXJzdCBkZWZpbml0aW9uIHRha2VzXG4gICAgICAgICAqIHByZWNlZGVuY2UsIHVudGlsIHVwZGF0ZWQgd2l0aCB0aGlzIG1ldGhvZC5cbiAgICAgICAgICovXG4gICAgICAgIHVwZGF0ZUhvdHNwb3QoY29uZmlnKSB7XG4gICAgICAgICAgICBjb25zdCBob3RzcG90ID0gdGhpc1skaG90c3BvdE1hcF0uZ2V0KGNvbmZpZy5uYW1lKTtcbiAgICAgICAgICAgIGlmIChob3RzcG90ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBob3RzcG90LnVwZGF0ZVBvc2l0aW9uKGNvbmZpZy5wb3NpdGlvbik7XG4gICAgICAgICAgICBob3RzcG90LnVwZGF0ZU5vcm1hbChjb25maWcubm9ybWFsKTtcbiAgICAgICAgICAgIHRoaXNbJG5lZWRzUmVuZGVyXSgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGluLXNjZW5lIGRhdGEgYWJvdXQgYSByZXF1ZXN0ZWQgaG90c3BvdCBpbmNsdWRpbmdcbiAgICAgICAgICogaXRzIHBvc2l0aW9uIGluIHNjcmVlbiAoY2FudmFzKSBzcGFjZSBhbmQgaXRzIGN1cnJlbnQgdmlzaWJpbGl0eS5cbiAgICAgICAgICovXG4gICAgICAgIHF1ZXJ5SG90c3BvdChuYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBob3RzcG90ID0gdGhpc1skaG90c3BvdE1hcF0uZ2V0KG5hbWUpO1xuICAgICAgICAgICAgaWYgKGhvdHNwb3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0b1ZlY3RvcjNEKGhvdHNwb3QucG9zaXRpb24pO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsID0gdG9WZWN0b3IzRChob3RzcG90Lm5vcm1hbCk7XG4gICAgICAgICAgICBjb25zdCBmYWNpbmdDYW1lcmEgPSBob3RzcG90LmZhY2luZ0NhbWVyYTtcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpc1skc2NlbmVdO1xuICAgICAgICAgICAgY29uc3QgY2FtZXJhID0gc2NlbmUuZ2V0Q2FtZXJhKCk7XG4gICAgICAgICAgICBjb25zdCB2ZWN0b3IgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICAgICAgdmVjdG9yLnNldEZyb21NYXRyaXhQb3NpdGlvbihob3RzcG90Lm1hdHJpeFdvcmxkKTtcbiAgICAgICAgICAgIHZlY3Rvci5wcm9qZWN0KGNhbWVyYSk7XG4gICAgICAgICAgICBjb25zdCB3aWR0aEhhbGYgPSBzY2VuZS53aWR0aCAvIDI7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHRIYWxmID0gc2NlbmUuaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIHZlY3Rvci54ID0gKHZlY3Rvci54ICogd2lkdGhIYWxmKSArIHdpZHRoSGFsZjtcbiAgICAgICAgICAgIHZlY3Rvci55ID0gLSh2ZWN0b3IueSAqIGhlaWdodEhhbGYpICsgaGVpZ2h0SGFsZjtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhc1Bvc2l0aW9uID0gdG9WZWN0b3IzRChuZXcgVmVjdG9yMyh2ZWN0b3IueCwgdmVjdG9yLnksIHZlY3Rvci56KSk7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShjYW52YXNQb3NpdGlvbi54KSB8fFxuICAgICAgICAgICAgICAgICFOdW1iZXIuaXNGaW5pdGUoY2FudmFzUG9zaXRpb24ueSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uLCBub3JtYWwsIGNhbnZhc1Bvc2l0aW9uLCBmYWNpbmdDYW1lcmEgfTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgbW9kZWwgcG9zaXRpb24sIG5vcm1hbCBhbmQgdGV4dHVyZSBjb29yZGluYXRlXG4gICAgICAgICAqIG9mIHRoZSBwb2ludCBvbiB0aGUgbWVzaCBjb3JyZXNwb25kaW5nIHRvIHRoZSBpbnB1dCBwaXhlbCBjb29yZGluYXRlc1xuICAgICAgICAgKiBnaXZlbiByZWxhdGl2ZSB0byB0aGUgbW9kZWwtdmlld2VyIGVsZW1lbnQuIFRoZSBwb3NpdGlvbiBhbmQgbm9ybWFsXG4gICAgICAgICAqIGFyZSByZXR1cm5lZCBhcyBzdHJpbmdzIGluIHRoZSBmb3JtYXQgc3VpdGFibGUgZm9yIHB1dHRpbmcgaW4gYVxuICAgICAgICAgKiBob3RzcG90J3MgZGF0YS1wb3NpdGlvbiBhbmQgZGF0YS1ub3JtYWwgYXR0cmlidXRlcy4gSWYgdGhlIG1lc2ggaXNcbiAgICAgICAgICogbm90IGhpdCwgdGhlIHJlc3VsdCBpcyBudWxsLlxuICAgICAgICAgKi9cbiAgICAgICAgcG9zaXRpb25BbmROb3JtYWxGcm9tUG9pbnQocGl4ZWxYLCBwaXhlbFkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpc1skc2NlbmVdO1xuICAgICAgICAgICAgY29uc3QgbmRjUG9zaXRpb24gPSBzY2VuZS5nZXROREMocGl4ZWxYLCBwaXhlbFkpO1xuICAgICAgICAgICAgY29uc3QgaGl0ID0gc2NlbmUucG9zaXRpb25BbmROb3JtYWxGcm9tUG9pbnQobmRjUG9zaXRpb24pO1xuICAgICAgICAgICAgaWYgKGhpdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3b3JsZFRvTW9kZWwuY29weShzY2VuZS50YXJnZXQubWF0cml4V29ybGQpLmludmVydCgpO1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0b1ZlY3RvcjNEKGhpdC5wb3NpdGlvbi5hcHBseU1hdHJpeDQod29ybGRUb01vZGVsKSk7XG4gICAgICAgICAgICB3b3JsZFRvTW9kZWxOb3JtYWwuZ2V0Tm9ybWFsTWF0cml4KHdvcmxkVG9Nb2RlbCk7XG4gICAgICAgICAgICBjb25zdCBub3JtYWwgPSB0b1ZlY3RvcjNEKGhpdC5ub3JtYWwuYXBwbHlOb3JtYWxNYXRyaXgod29ybGRUb01vZGVsTm9ybWFsKSk7XG4gICAgICAgICAgICBsZXQgdXYgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGhpdC51diAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdXYgPSB0b1ZlY3RvcjJEKGhpdC51dik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBwb3NpdGlvbjogcG9zaXRpb24sIG5vcm1hbDogbm9ybWFsLCB1djogdXYgfTtcbiAgICAgICAgfVxuICAgICAgICBbJGFkZEhvdHNwb3RdKG5vZGUpIHtcbiAgICAgICAgICAgIGlmICghKG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJlxuICAgICAgICAgICAgICAgIG5vZGUuc2xvdC5pbmRleE9mKCdob3RzcG90JykgPT09IDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGhvdHNwb3QgPSB0aGlzWyRob3RzcG90TWFwXS5nZXQobm9kZS5zbG90KTtcbiAgICAgICAgICAgIGlmIChob3RzcG90ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBob3RzcG90LmluY3JlbWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG90c3BvdCA9IG5ldyBIb3RzcG90KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbm9kZS5zbG90LFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbm9kZS5kYXRhc2V0LnBvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICBub3JtYWw6IG5vZGUuZGF0YXNldC5ub3JtYWwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpc1skaG90c3BvdE1hcF0uc2V0KG5vZGUuc2xvdCwgaG90c3BvdCk7XG4gICAgICAgICAgICAgICAgdGhpc1skc2NlbmVdLmFkZEhvdHNwb3QoaG90c3BvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzWyRzY2VuZV0ucXVldWVSZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBbJHJlbW92ZUhvdHNwb3RdKG5vZGUpIHtcbiAgICAgICAgICAgIGlmICghKG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBob3RzcG90ID0gdGhpc1skaG90c3BvdE1hcF0uZ2V0KG5vZGUuc2xvdCk7XG4gICAgICAgICAgICBpZiAoIWhvdHNwb3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaG90c3BvdC5kZWNyZW1lbnQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5yZW1vdmVIb3RzcG90KGhvdHNwb3QpO1xuICAgICAgICAgICAgICAgIHRoaXNbJGhvdHNwb3RNYXBdLmRlbGV0ZShub2RlLnNsb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1skc2NlbmVdLnF1ZXVlUmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIEFubm90YXRpb25Nb2RlbFZpZXdlckVsZW1lbnQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ub3RhdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/annotation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/ar.js":
/*!**************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/ar.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $openIOSARQuickLook: () => (/* binding */ $openIOSARQuickLook),\n/* harmony export */   $openSceneViewer: () => (/* binding */ $openSceneViewer),\n/* harmony export */   ARMixin: () => (/* binding */ ARMixin)\n/* harmony export */ });\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/decorators.js */ \"(ssr)/./node_modules/lit/decorators.js\");\n/* harmony import */ var three_examples_jsm_exporters_USDZExporter_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three/examples/jsm/exporters/USDZExporter.js */ \"(ssr)/./node_modules/three/examples/jsm/exporters/USDZExporter.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/constants.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _styles_deserializers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/deserializers.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/deserializers.js\");\n/* harmony import */ var _three_components_ARRenderer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../three-components/ARRenderer.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/ARRenderer.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\nlet isWebXRBlocked = false;\nlet isSceneViewerBlocked = false;\nconst noArViewerSigil = '#model-viewer-no-ar-fallback';\nconst deserializeARModes = (0,_styles_deserializers_js__WEBPACK_IMPORTED_MODULE_3__.enumerationDeserializer)(['quick-look', 'scene-viewer', 'webxr', 'none']);\nconst DEFAULT_AR_MODES = 'webxr scene-viewer quick-look';\nconst ARMode = {\n    QUICK_LOOK: 'quick-look',\n    SCENE_VIEWER: 'scene-viewer',\n    WEBXR: 'webxr',\n    NONE: 'none'\n};\nconst $arButtonContainer = Symbol('arButtonContainer');\nconst $enterARWithWebXR = Symbol('enterARWithWebXR');\nconst $openSceneViewer = Symbol('openSceneViewer');\nconst $openIOSARQuickLook = Symbol('openIOSARQuickLook');\nconst $canActivateAR = Symbol('canActivateAR');\nconst $arMode = Symbol('arMode');\nconst $arModes = Symbol('arModes');\nconst $arAnchor = Symbol('arAnchor');\nconst $preload = Symbol('preload');\nconst $onARButtonContainerClick = Symbol('onARButtonContainerClick');\nconst $onARStatus = Symbol('onARStatus');\nconst $onARTracking = Symbol('onARTracking');\nconst $onARTap = Symbol('onARTap');\nconst $selectARMode = Symbol('selectARMode');\nconst $triggerLoad = Symbol('triggerLoad');\nconst ARMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    class ARModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.ar = false;\n            this.arScale = 'auto';\n            this.arPlacement = 'floor';\n            this.arModes = DEFAULT_AR_MODES;\n            this.iosSrc = null;\n            this.xrEnvironment = false;\n            this[_a] = false;\n            // TODO: Add this to the shadow root as part of this mixin's\n            // implementation:\n            this[_b] = this.shadowRoot.querySelector('.ar-button');\n            this[_c] = document.createElement('a');\n            this[_d] = new Set();\n            this[_e] = ARMode.NONE;\n            this[_f] = false;\n            this[_g] = (event) => {\n                event.preventDefault();\n                this.activateAR();\n            };\n            this[_h] = ({ status }) => {\n                if (status === _three_components_ARRenderer_js__WEBPACK_IMPORTED_MODULE_4__.ARStatus.NOT_PRESENTING ||\n                    this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.presentedScene === this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene]) {\n                    this.setAttribute('ar-status', status);\n                    this.dispatchEvent(new CustomEvent('ar-status', { detail: { status } }));\n                    if (status === _three_components_ARRenderer_js__WEBPACK_IMPORTED_MODULE_4__.ARStatus.NOT_PRESENTING) {\n                        this.removeAttribute('ar-tracking');\n                    }\n                    else if (status === _three_components_ARRenderer_js__WEBPACK_IMPORTED_MODULE_4__.ARStatus.SESSION_STARTED) {\n                        this.setAttribute('ar-tracking', _three_components_ARRenderer_js__WEBPACK_IMPORTED_MODULE_4__.ARTracking.TRACKING);\n                    }\n                }\n            };\n            this[_j] = ({ status }) => {\n                this.setAttribute('ar-tracking', status);\n                this.dispatchEvent(new CustomEvent('ar-tracking', { detail: { status } }));\n            };\n            this[_k] = (event) => {\n                if (event.data == '_apple_ar_quicklook_button_tapped') {\n                    this.dispatchEvent(new CustomEvent('quick-look-button-tapped'));\n                }\n            };\n        }\n        get canActivateAR() {\n            return this[$arMode] !== ARMode.NONE;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.addEventListener('status', this[$onARStatus]);\n            this.setAttribute('ar-status', _three_components_ARRenderer_js__WEBPACK_IMPORTED_MODULE_4__.ARStatus.NOT_PRESENTING);\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.addEventListener('tracking', this[$onARTracking]);\n            this[$arAnchor].addEventListener('message', this[$onARTap]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.removeEventListener('status', this[$onARStatus]);\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.removeEventListener('tracking', this[$onARTracking]);\n            this[$arAnchor].removeEventListener('message', this[$onARTap]);\n        }\n        update(changedProperties) {\n            super.update(changedProperties);\n            if (changedProperties.has('arScale')) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].canScale = this.arScale !== 'fixed';\n            }\n            if (changedProperties.has('arPlacement')) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].updateShadow();\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$needsRender]();\n            }\n            if (changedProperties.has('arModes')) {\n                this[$arModes] = deserializeARModes(this.arModes);\n            }\n            if (changedProperties.has('ar') || changedProperties.has('arModes') ||\n                changedProperties.has('src') || changedProperties.has('iosSrc')) {\n                this[$selectARMode]();\n            }\n        }\n        /**\n         * Activates AR. Note that for any mode that is not WebXR-based, this\n         * method most likely has to be called synchronous from a user\n         * interaction handler. Otherwise, attempts to activate modes that\n         * require user interaction will most likely be ignored.\n         */\n        async activateAR() {\n            switch (this[$arMode]) {\n                case ARMode.QUICK_LOOK:\n                    this[$openIOSARQuickLook]();\n                    break;\n                case ARMode.WEBXR:\n                    await this[$enterARWithWebXR]();\n                    break;\n                case ARMode.SCENE_VIEWER:\n                    this[$openSceneViewer]();\n                    break;\n                default:\n                    console.warn('No AR Mode can be activated. This is probably due to missing \\\nconfiguration or device capabilities');\n                    break;\n            }\n        }\n        async [(_a = $canActivateAR, _b = $arButtonContainer, _c = $arAnchor, _d = $arModes, _e = $arMode, _f = $preload, _g = $onARButtonContainerClick, _h = $onARStatus, _j = $onARTracking, _k = $onARTap, $selectARMode)]() {\n            let arMode = ARMode.NONE;\n            if (this.ar) {\n                if (this.src != null) {\n                    for (const value of this[$arModes]) {\n                        if (value === 'webxr' && _constants_js__WEBPACK_IMPORTED_MODULE_1__.IS_WEBXR_AR_CANDIDATE && !isWebXRBlocked &&\n                            await this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.supportsPresentation()) {\n                            arMode = ARMode.WEBXR;\n                            break;\n                        }\n                        if (value === 'scene-viewer' && _constants_js__WEBPACK_IMPORTED_MODULE_1__.IS_SCENEVIEWER_CANDIDATE &&\n                            !isSceneViewerBlocked) {\n                            arMode = ARMode.SCENE_VIEWER;\n                            break;\n                        }\n                        if (value === 'quick-look' && _constants_js__WEBPACK_IMPORTED_MODULE_1__.IS_AR_QUICKLOOK_CANDIDATE) {\n                            arMode = ARMode.QUICK_LOOK;\n                            break;\n                        }\n                    }\n                }\n                // The presence of ios-src overrides the absence of quick-look\n                // ar-mode.\n                if (arMode === ARMode.NONE && this.iosSrc != null &&\n                    _constants_js__WEBPACK_IMPORTED_MODULE_1__.IS_AR_QUICKLOOK_CANDIDATE) {\n                    arMode = ARMode.QUICK_LOOK;\n                }\n            }\n            if (arMode !== ARMode.NONE) {\n                this[$arButtonContainer].classList.add('enabled');\n                this[$arButtonContainer].addEventListener('click', this[$onARButtonContainerClick]);\n            }\n            else if (this[$arButtonContainer].classList.contains('enabled')) {\n                this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                this[$arButtonContainer].classList.remove('enabled');\n                // If AR went from working to not, notify the element.\n                const status = _three_components_ARRenderer_js__WEBPACK_IMPORTED_MODULE_4__.ARStatus.FAILED;\n                this.setAttribute('ar-status', status);\n                this.dispatchEvent(new CustomEvent('ar-status', { detail: { status } }));\n            }\n            this[$arMode] = arMode;\n        }\n        async [$enterARWithWebXR]() {\n            console.log('Attempting to present in AR with WebXR...');\n            await this[$triggerLoad]();\n            try {\n                this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                const { arRenderer } = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer];\n                arRenderer.placeOnWall = this.arPlacement === 'wall';\n                await arRenderer.present(this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene], this.xrEnvironment);\n            }\n            catch (error) {\n                console.warn('Error while trying to present in AR with WebXR');\n                console.error(error);\n                await this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.stopPresenting();\n                isWebXRBlocked = true;\n                console.warn('Falling back to next ar-mode');\n                await this[$selectARMode]();\n                this.activateAR();\n            }\n            finally {\n                this[$selectARMode]();\n            }\n        }\n        async [$triggerLoad]() {\n            if (!this.loaded) {\n                this[$preload] = true;\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$updateSource]();\n                await (0,_utilities_js__WEBPACK_IMPORTED_MODULE_5__.waitForEvent)(this, 'load');\n                this[$preload] = false;\n            }\n        }\n        [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$shouldAttemptPreload]() {\n            return super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$shouldAttemptPreload]() || this[$preload];\n        }\n        /**\n         * Takes a URL and a title string, and attempts to launch Scene Viewer on\n         * the current device.\n         */\n        [$openSceneViewer]() {\n            const location = self.location.toString();\n            const locationUrl = new URL(location);\n            const modelUrl = new URL(this.src, location);\n            const params = new URLSearchParams(modelUrl.search);\n            locationUrl.hash = noArViewerSigil;\n            // modelUrl can contain title/link/sound etc.\n            params.set('mode', 'ar_preferred');\n            if (!params.has('disable_occlusion')) {\n                params.set('disable_occlusion', 'true');\n            }\n            if (this.arScale === 'fixed') {\n                params.set('resizable', 'false');\n            }\n            if (this.arPlacement === 'wall') {\n                params.set('enable_vertical_placement', 'true');\n            }\n            if (params.has('sound')) {\n                const soundUrl = new URL(params.get('sound'), location);\n                params.set('sound', soundUrl.toString());\n            }\n            if (params.has('link')) {\n                const linkUrl = new URL(params.get('link'), location);\n                params.set('link', linkUrl.toString());\n            }\n            const intent = `intent://arvr.google.com/scene-viewer/1.0?${params.toString() + '&file=' +\n                encodeURIComponent(modelUrl\n                    .toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(locationUrl.toString())};end;`;\n            const undoHashChange = () => {\n                if (self.location.hash === noArViewerSigil) {\n                    isSceneViewerBlocked = true;\n                    // The new history will be the current URL with a new hash.\n                    // Go back one step so that we reset to the expected URL.\n                    // NOTE(cdata): this should not invoke any browser-level navigation\n                    // because hash-only changes modify the URL in-place without\n                    // navigating:\n                    self.history.back();\n                    console.warn('Error while trying to present in AR with Scene Viewer');\n                    console.warn('Falling back to next ar-mode');\n                    this[$selectARMode]();\n                    // Would be nice to activateAR() here, but webXR fails due to not\n                    // seeing a user activation.\n                }\n            };\n            self.addEventListener('hashchange', undoHashChange, { once: true });\n            this[$arAnchor].setAttribute('href', intent);\n            console.log('Attempting to present in AR with Scene Viewer...');\n            this[$arAnchor].click();\n        }\n        /**\n         * Takes a URL to a USDZ file and sets the appropriate fields so that\n         * Safari iOS can intent to their AR Quick Look.\n         */\n        async [$openIOSARQuickLook]() {\n            const generateUsdz = !this.iosSrc;\n            this[$arButtonContainer].classList.remove('enabled');\n            const objectURL = generateUsdz ? await this.prepareUSDZ() : this.iosSrc;\n            const modelUrl = new URL(objectURL, self.location.toString());\n            if (generateUsdz) {\n                const location = self.location.toString();\n                const locationUrl = new URL(location);\n                const srcUrl = new URL(this.src, locationUrl);\n                if (srcUrl.hash) {\n                    modelUrl.hash = srcUrl.hash;\n                }\n            }\n            if (this.arScale === 'fixed') {\n                if (modelUrl.hash) {\n                    modelUrl.hash += '&';\n                }\n                modelUrl.hash += 'allowsContentScaling=0';\n            }\n            const anchor = this[$arAnchor];\n            anchor.setAttribute('rel', 'ar');\n            const img = document.createElement('img');\n            anchor.appendChild(img);\n            anchor.setAttribute('href', modelUrl.toString());\n            if (generateUsdz) {\n                anchor.setAttribute('download', 'model.usdz');\n            }\n            // attach anchor to shadow DOM to ensure iOS16 ARQL banner click message event propagation \n            anchor.style.display = 'none';\n            if (!anchor.isConnected)\n                this.shadowRoot.appendChild(anchor);\n            console.log('Attempting to present in AR with Quick Look...');\n            anchor.click();\n            anchor.removeChild(img);\n            if (generateUsdz) {\n                URL.revokeObjectURL(objectURL);\n            }\n            this[$arButtonContainer].classList.add('enabled');\n        }\n        async prepareUSDZ() {\n            const updateSourceProgress = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$progressTracker].beginActivity();\n            await this[$triggerLoad]();\n            const { model, shadow } = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene];\n            if (model == null) {\n                return '';\n            }\n            let visible = false;\n            // Remove shadow from export\n            if (shadow != null) {\n                visible = shadow.visible;\n                shadow.visible = false;\n            }\n            updateSourceProgress(0.2);\n            const exporter = new three_examples_jsm_exporters_USDZExporter_js__WEBPACK_IMPORTED_MODULE_6__.USDZExporter();\n            const arraybuffer = await exporter.parse(model);\n            const blob = new Blob([arraybuffer], {\n                type: 'model/vnd.usdz+zip',\n            });\n            const url = URL.createObjectURL(blob);\n            updateSourceProgress(1);\n            if (shadow != null) {\n                shadow.visible = visible;\n            }\n            return url;\n        }\n    }\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Boolean, attribute: 'ar' })\n    ], ARModelViewerElement.prototype, \"ar\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'ar-scale' })\n    ], ARModelViewerElement.prototype, \"arScale\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'ar-placement' })\n    ], ARModelViewerElement.prototype, \"arPlacement\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'ar-modes' })\n    ], ARModelViewerElement.prototype, \"arModes\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'ios-src' })\n    ], ARModelViewerElement.prototype, \"iosSrc\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Boolean, attribute: 'xr-environment' })\n    ], ARModelViewerElement.prototype, \"xrEnvironment\", void 0);\n    return ARModelViewerElement;\n};\n//# sourceMappingURL=ar.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL2FyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFNBQUksSUFBSSxTQUFJO0FBQzlCO0FBQ0E7QUFDQSw2Q0FBNkMsUUFBUTtBQUNyRDtBQUNBO0FBQzZDO0FBQytCO0FBQ2lDO0FBQ3FCO0FBQzdEO0FBQ0k7QUFDMUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGlGQUF1QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsUUFBUTtBQUNsQywrQkFBK0IscUVBQVE7QUFDdkMseUJBQXlCLDREQUFTLHFDQUFxQyx5REFBTTtBQUM3RTtBQUNBLHNFQUFzRSxVQUFVLFVBQVU7QUFDMUYsbUNBQW1DLHFFQUFRO0FBQzNDO0FBQ0E7QUFDQSx3Q0FBd0MscUVBQVE7QUFDaEQseURBQXlELHVFQUFVO0FBQ25FO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixRQUFRO0FBQ2xDO0FBQ0Esb0VBQW9FLFVBQVUsVUFBVTtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNERBQVM7QUFDMUIsMkNBQTJDLHFFQUFRO0FBQ25ELGlCQUFpQiw0REFBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0REFBUztBQUMxQixpQkFBaUIsNERBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5REFBTTtBQUMzQjtBQUNBO0FBQ0EscUJBQXFCLHlEQUFNO0FBQzNCLHFCQUFxQiwrREFBWTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxnRUFBcUI7QUFDdEUsdUNBQXVDLDREQUFTO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxtRUFBd0I7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsb0VBQXlCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isb0VBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IscUVBQVE7QUFDdkM7QUFDQSxrRUFBa0UsVUFBVSxVQUFVO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYSxPQUFPLDREQUFTO0FBQ3JEO0FBQ0EsOENBQThDLHlEQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDREQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnRUFBYTtBQUNsQyxzQkFBc0IsMkRBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsU0FBUyx3RUFBcUI7QUFDOUIseUJBQXlCLHdFQUFxQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQSxpQ0FBaUMsUUFBUSxhQUFhLDJCQUEyQixrQ0FBa0MseUJBQXlCLDRDQUE0QyxJQUFJO0FBQzVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLFlBQVk7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLG1FQUFnQjtBQUM5RDtBQUNBLG9CQUFvQixnQkFBZ0IsT0FBTyx5REFBTTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxzRkFBWTtBQUM3QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLGdDQUFnQztBQUNuRDtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLHFDQUFxQztBQUN4RDtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLHlDQUF5QztBQUM1RDtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLHFDQUFxQztBQUN4RDtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLG9DQUFvQztBQUN2RDtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLDRDQUE0QztBQUMvRDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZmVhdHVyZXMvYXIuanM/MGI2MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IFVTRFpFeHBvcnRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9leHBvcnRlcnMvVVNEWkV4cG9ydGVyLmpzJztcbmltcG9ydCB7IElTX0FSX1FVSUNLTE9PS19DQU5ESURBVEUsIElTX1NDRU5FVklFV0VSX0NBTkRJREFURSwgSVNfV0VCWFJfQVJfQ0FORElEQVRFIH0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcbmltcG9ydCB7ICRuZWVkc1JlbmRlciwgJHByb2dyZXNzVHJhY2tlciwgJHJlbmRlcmVyLCAkc2NlbmUsICRzaG91bGRBdHRlbXB0UHJlbG9hZCwgJHVwZGF0ZVNvdXJjZSB9IGZyb20gJy4uL21vZGVsLXZpZXdlci1iYXNlLmpzJztcbmltcG9ydCB7IGVudW1lcmF0aW9uRGVzZXJpYWxpemVyIH0gZnJvbSAnLi4vc3R5bGVzL2Rlc2VyaWFsaXplcnMuanMnO1xuaW1wb3J0IHsgQVJTdGF0dXMsIEFSVHJhY2tpbmcgfSBmcm9tICcuLi90aHJlZS1jb21wb25lbnRzL0FSUmVuZGVyZXIuanMnO1xuaW1wb3J0IHsgd2FpdEZvckV2ZW50IH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJztcbmxldCBpc1dlYlhSQmxvY2tlZCA9IGZhbHNlO1xubGV0IGlzU2NlbmVWaWV3ZXJCbG9ja2VkID0gZmFsc2U7XG5jb25zdCBub0FyVmlld2VyU2lnaWwgPSAnI21vZGVsLXZpZXdlci1uby1hci1mYWxsYmFjayc7XG5jb25zdCBkZXNlcmlhbGl6ZUFSTW9kZXMgPSBlbnVtZXJhdGlvbkRlc2VyaWFsaXplcihbJ3F1aWNrLWxvb2snLCAnc2NlbmUtdmlld2VyJywgJ3dlYnhyJywgJ25vbmUnXSk7XG5jb25zdCBERUZBVUxUX0FSX01PREVTID0gJ3dlYnhyIHNjZW5lLXZpZXdlciBxdWljay1sb29rJztcbmNvbnN0IEFSTW9kZSA9IHtcbiAgICBRVUlDS19MT09LOiAncXVpY2stbG9vaycsXG4gICAgU0NFTkVfVklFV0VSOiAnc2NlbmUtdmlld2VyJyxcbiAgICBXRUJYUjogJ3dlYnhyJyxcbiAgICBOT05FOiAnbm9uZSdcbn07XG5jb25zdCAkYXJCdXR0b25Db250YWluZXIgPSBTeW1ib2woJ2FyQnV0dG9uQ29udGFpbmVyJyk7XG5jb25zdCAkZW50ZXJBUldpdGhXZWJYUiA9IFN5bWJvbCgnZW50ZXJBUldpdGhXZWJYUicpO1xuZXhwb3J0IGNvbnN0ICRvcGVuU2NlbmVWaWV3ZXIgPSBTeW1ib2woJ29wZW5TY2VuZVZpZXdlcicpO1xuZXhwb3J0IGNvbnN0ICRvcGVuSU9TQVJRdWlja0xvb2sgPSBTeW1ib2woJ29wZW5JT1NBUlF1aWNrTG9vaycpO1xuY29uc3QgJGNhbkFjdGl2YXRlQVIgPSBTeW1ib2woJ2NhbkFjdGl2YXRlQVInKTtcbmNvbnN0ICRhck1vZGUgPSBTeW1ib2woJ2FyTW9kZScpO1xuY29uc3QgJGFyTW9kZXMgPSBTeW1ib2woJ2FyTW9kZXMnKTtcbmNvbnN0ICRhckFuY2hvciA9IFN5bWJvbCgnYXJBbmNob3InKTtcbmNvbnN0ICRwcmVsb2FkID0gU3ltYm9sKCdwcmVsb2FkJyk7XG5jb25zdCAkb25BUkJ1dHRvbkNvbnRhaW5lckNsaWNrID0gU3ltYm9sKCdvbkFSQnV0dG9uQ29udGFpbmVyQ2xpY2snKTtcbmNvbnN0ICRvbkFSU3RhdHVzID0gU3ltYm9sKCdvbkFSU3RhdHVzJyk7XG5jb25zdCAkb25BUlRyYWNraW5nID0gU3ltYm9sKCdvbkFSVHJhY2tpbmcnKTtcbmNvbnN0ICRvbkFSVGFwID0gU3ltYm9sKCdvbkFSVGFwJyk7XG5jb25zdCAkc2VsZWN0QVJNb2RlID0gU3ltYm9sKCdzZWxlY3RBUk1vZGUnKTtcbmNvbnN0ICR0cmlnZ2VyTG9hZCA9IFN5bWJvbCgndHJpZ2dlckxvYWQnKTtcbmV4cG9ydCBjb25zdCBBUk1peGluID0gKE1vZGVsVmlld2VyRWxlbWVudCkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaztcbiAgICBjbGFzcyBBUk1vZGVsVmlld2VyRWxlbWVudCBleHRlbmRzIE1vZGVsVmlld2VyRWxlbWVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuYXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYXJTY2FsZSA9ICdhdXRvJztcbiAgICAgICAgICAgIHRoaXMuYXJQbGFjZW1lbnQgPSAnZmxvb3InO1xuICAgICAgICAgICAgdGhpcy5hck1vZGVzID0gREVGQVVMVF9BUl9NT0RFUztcbiAgICAgICAgICAgIHRoaXMuaW9zU3JjID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMueHJFbnZpcm9ubWVudCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpc1tfYV0gPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIFRPRE86IEFkZCB0aGlzIHRvIHRoZSBzaGFkb3cgcm9vdCBhcyBwYXJ0IG9mIHRoaXMgbWl4aW4nc1xuICAgICAgICAgICAgLy8gaW1wbGVtZW50YXRpb246XG4gICAgICAgICAgICB0aGlzW19iXSA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuYXItYnV0dG9uJyk7XG4gICAgICAgICAgICB0aGlzW19jXSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIHRoaXNbX2RdID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgdGhpc1tfZV0gPSBBUk1vZGUuTk9ORTtcbiAgICAgICAgICAgIHRoaXNbX2ZdID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzW19nXSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZUFSKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpc1tfaF0gPSAoeyBzdGF0dXMgfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IEFSU3RhdHVzLk5PVF9QUkVTRU5USU5HIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbJHJlbmRlcmVyXS5hclJlbmRlcmVyLnByZXNlbnRlZFNjZW5lID09PSB0aGlzWyRzY2VuZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyLXN0YXR1cycsIHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2FyLXN0YXR1cycsIHsgZGV0YWlsOiB7IHN0YXR1cyB9IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gQVJTdGF0dXMuTk9UX1BSRVNFTlRJTkcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKCdhci10cmFja2luZycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXR1cyA9PT0gQVJTdGF0dXMuU0VTU0lPTl9TVEFSVEVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXItdHJhY2tpbmcnLCBBUlRyYWNraW5nLlRSQUNLSU5HKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzW19qXSA9ICh7IHN0YXR1cyB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyLXRyYWNraW5nJywgc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdhci10cmFja2luZycsIHsgZGV0YWlsOiB7IHN0YXR1cyB9IH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzW19rXSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhID09ICdfYXBwbGVfYXJfcXVpY2tsb29rX2J1dHRvbl90YXBwZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3F1aWNrLWxvb2stYnV0dG9uLXRhcHBlZCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGdldCBjYW5BY3RpdmF0ZUFSKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbJGFyTW9kZV0gIT09IEFSTW9kZS5OT05FO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIHRoaXNbJHJlbmRlcmVyXS5hclJlbmRlcmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXR1cycsIHRoaXNbJG9uQVJTdGF0dXNdKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhci1zdGF0dXMnLCBBUlN0YXR1cy5OT1RfUFJFU0VOVElORyk7XG4gICAgICAgICAgICB0aGlzWyRyZW5kZXJlcl0uYXJSZW5kZXJlci5hZGRFdmVudExpc3RlbmVyKCd0cmFja2luZycsIHRoaXNbJG9uQVJUcmFja2luZ10pO1xuICAgICAgICAgICAgdGhpc1skYXJBbmNob3JdLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzWyRvbkFSVGFwXSk7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgdGhpc1skcmVuZGVyZXJdLmFyUmVuZGVyZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3RhdHVzJywgdGhpc1skb25BUlN0YXR1c10pO1xuICAgICAgICAgICAgdGhpc1skcmVuZGVyZXJdLmFyUmVuZGVyZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2tpbmcnLCB0aGlzWyRvbkFSVHJhY2tpbmddKTtcbiAgICAgICAgICAgIHRoaXNbJGFyQW5jaG9yXS5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpc1skb25BUlRhcF0pO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICAgICAgc3VwZXIudXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2FyU2NhbGUnKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5jYW5TY2FsZSA9IHRoaXMuYXJTY2FsZSAhPT0gJ2ZpeGVkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2FyUGxhY2VtZW50JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRzY2VuZV0udXBkYXRlU2hhZG93KCk7XG4gICAgICAgICAgICAgICAgdGhpc1skbmVlZHNSZW5kZXJdKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdhck1vZGVzJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRhck1vZGVzXSA9IGRlc2VyaWFsaXplQVJNb2Rlcyh0aGlzLmFyTW9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnYXInKSB8fCBjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2FyTW9kZXMnKSB8fFxuICAgICAgICAgICAgICAgIGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnc3JjJykgfHwgY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdpb3NTcmMnKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJHNlbGVjdEFSTW9kZV0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQWN0aXZhdGVzIEFSLiBOb3RlIHRoYXQgZm9yIGFueSBtb2RlIHRoYXQgaXMgbm90IFdlYlhSLWJhc2VkLCB0aGlzXG4gICAgICAgICAqIG1ldGhvZCBtb3N0IGxpa2VseSBoYXMgdG8gYmUgY2FsbGVkIHN5bmNocm9ub3VzIGZyb20gYSB1c2VyXG4gICAgICAgICAqIGludGVyYWN0aW9uIGhhbmRsZXIuIE90aGVyd2lzZSwgYXR0ZW1wdHMgdG8gYWN0aXZhdGUgbW9kZXMgdGhhdFxuICAgICAgICAgKiByZXF1aXJlIHVzZXIgaW50ZXJhY3Rpb24gd2lsbCBtb3N0IGxpa2VseSBiZSBpZ25vcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgYXN5bmMgYWN0aXZhdGVBUigpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpc1skYXJNb2RlXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgQVJNb2RlLlFVSUNLX0xPT0s6XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbJG9wZW5JT1NBUlF1aWNrTG9va10oKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBBUk1vZGUuV0VCWFI6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXNbJGVudGVyQVJXaXRoV2ViWFJdKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQVJNb2RlLlNDRU5FX1ZJRVdFUjpcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skb3BlblNjZW5lVmlld2VyXSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIEFSIE1vZGUgY2FuIGJlIGFjdGl2YXRlZC4gVGhpcyBpcyBwcm9iYWJseSBkdWUgdG8gbWlzc2luZyBcXFxuY29uZmlndXJhdGlvbiBvciBkZXZpY2UgY2FwYWJpbGl0aWVzJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFzeW5jIFsoX2EgPSAkY2FuQWN0aXZhdGVBUiwgX2IgPSAkYXJCdXR0b25Db250YWluZXIsIF9jID0gJGFyQW5jaG9yLCBfZCA9ICRhck1vZGVzLCBfZSA9ICRhck1vZGUsIF9mID0gJHByZWxvYWQsIF9nID0gJG9uQVJCdXR0b25Db250YWluZXJDbGljaywgX2ggPSAkb25BUlN0YXR1cywgX2ogPSAkb25BUlRyYWNraW5nLCBfayA9ICRvbkFSVGFwLCAkc2VsZWN0QVJNb2RlKV0oKSB7XG4gICAgICAgICAgICBsZXQgYXJNb2RlID0gQVJNb2RlLk5PTkU7XG4gICAgICAgICAgICBpZiAodGhpcy5hcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNyYyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpc1skYXJNb2Rlc10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3dlYnhyJyAmJiBJU19XRUJYUl9BUl9DQU5ESURBVEUgJiYgIWlzV2ViWFJCbG9ja2VkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpc1skcmVuZGVyZXJdLmFyUmVuZGVyZXIuc3VwcG9ydHNQcmVzZW50YXRpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyTW9kZSA9IEFSTW9kZS5XRUJYUjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3NjZW5lLXZpZXdlcicgJiYgSVNfU0NFTkVWSUVXRVJfQ0FORElEQVRFICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzU2NlbmVWaWV3ZXJCbG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJNb2RlID0gQVJNb2RlLlNDRU5FX1ZJRVdFUjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ3F1aWNrLWxvb2snICYmIElTX0FSX1FVSUNLTE9PS19DQU5ESURBVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhck1vZGUgPSBBUk1vZGUuUVVJQ0tfTE9PSztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUaGUgcHJlc2VuY2Ugb2YgaW9zLXNyYyBvdmVycmlkZXMgdGhlIGFic2VuY2Ugb2YgcXVpY2stbG9va1xuICAgICAgICAgICAgICAgIC8vIGFyLW1vZGUuXG4gICAgICAgICAgICAgICAgaWYgKGFyTW9kZSA9PT0gQVJNb2RlLk5PTkUgJiYgdGhpcy5pb3NTcmMgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICBJU19BUl9RVUlDS0xPT0tfQ0FORElEQVRFKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyTW9kZSA9IEFSTW9kZS5RVUlDS19MT09LO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhck1vZGUgIT09IEFSTW9kZS5OT05FKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skYXJCdXR0b25Db250YWluZXJdLmNsYXNzTGlzdC5hZGQoJ2VuYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB0aGlzWyRhckJ1dHRvbkNvbnRhaW5lcl0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzWyRvbkFSQnV0dG9uQ29udGFpbmVyQ2xpY2tdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXNbJGFyQnV0dG9uQ29udGFpbmVyXS5jbGFzc0xpc3QuY29udGFpbnMoJ2VuYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJGFyQnV0dG9uQ29udGFpbmVyXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXNbJG9uQVJCdXR0b25Db250YWluZXJDbGlja10pO1xuICAgICAgICAgICAgICAgIHRoaXNbJGFyQnV0dG9uQ29udGFpbmVyXS5jbGFzc0xpc3QucmVtb3ZlKCdlbmFibGVkJyk7XG4gICAgICAgICAgICAgICAgLy8gSWYgQVIgd2VudCBmcm9tIHdvcmtpbmcgdG8gbm90LCBub3RpZnkgdGhlIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gQVJTdGF0dXMuRkFJTEVEO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhci1zdGF0dXMnLCBzdGF0dXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2FyLXN0YXR1cycsIHsgZGV0YWlsOiB7IHN0YXR1cyB9IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNbJGFyTW9kZV0gPSBhck1vZGU7XG4gICAgICAgIH1cbiAgICAgICAgYXN5bmMgWyRlbnRlckFSV2l0aFdlYlhSXSgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHByZXNlbnQgaW4gQVIgd2l0aCBXZWJYUi4uLicpO1xuICAgICAgICAgICAgYXdhaXQgdGhpc1skdHJpZ2dlckxvYWRdKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXNbJGFyQnV0dG9uQ29udGFpbmVyXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXNbJG9uQVJCdXR0b25Db250YWluZXJDbGlja10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYXJSZW5kZXJlciB9ID0gdGhpc1skcmVuZGVyZXJdO1xuICAgICAgICAgICAgICAgIGFyUmVuZGVyZXIucGxhY2VPbldhbGwgPSB0aGlzLmFyUGxhY2VtZW50ID09PSAnd2FsbCc7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXJSZW5kZXJlci5wcmVzZW50KHRoaXNbJHNjZW5lXSwgdGhpcy54ckVudmlyb25tZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIHByZXNlbnQgaW4gQVIgd2l0aCBXZWJYUicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXNbJHJlbmRlcmVyXS5hclJlbmRlcmVyLnN0b3BQcmVzZW50aW5nKCk7XG4gICAgICAgICAgICAgICAgaXNXZWJYUkJsb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFsbGluZyBiYWNrIHRvIG5leHQgYXItbW9kZScpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXNbJHNlbGVjdEFSTW9kZV0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlQVIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRoaXNbJHNlbGVjdEFSTW9kZV0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhc3luYyBbJHRyaWdnZXJMb2FkXSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRwcmVsb2FkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpc1skdXBkYXRlU291cmNlXSgpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHdhaXRGb3JFdmVudCh0aGlzLCAnbG9hZCcpO1xuICAgICAgICAgICAgICAgIHRoaXNbJHByZWxvYWRdID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgWyRzaG91bGRBdHRlbXB0UHJlbG9hZF0oKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXJbJHNob3VsZEF0dGVtcHRQcmVsb2FkXSgpIHx8IHRoaXNbJHByZWxvYWRdO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYWtlcyBhIFVSTCBhbmQgYSB0aXRsZSBzdHJpbmcsIGFuZCBhdHRlbXB0cyB0byBsYXVuY2ggU2NlbmUgVmlld2VyIG9uXG4gICAgICAgICAqIHRoZSBjdXJyZW50IGRldmljZS5cbiAgICAgICAgICovXG4gICAgICAgIFskb3BlblNjZW5lVmlld2VyXSgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gc2VsZi5sb2NhdGlvbi50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25VcmwgPSBuZXcgVVJMKGxvY2F0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsVXJsID0gbmV3IFVSTCh0aGlzLnNyYywgbG9jYXRpb24pO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhtb2RlbFVybC5zZWFyY2gpO1xuICAgICAgICAgICAgbG9jYXRpb25VcmwuaGFzaCA9IG5vQXJWaWV3ZXJTaWdpbDtcbiAgICAgICAgICAgIC8vIG1vZGVsVXJsIGNhbiBjb250YWluIHRpdGxlL2xpbmsvc291bmQgZXRjLlxuICAgICAgICAgICAgcGFyYW1zLnNldCgnbW9kZScsICdhcl9wcmVmZXJyZWQnKTtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmhhcygnZGlzYWJsZV9vY2NsdXNpb24nKSkge1xuICAgICAgICAgICAgICAgIHBhcmFtcy5zZXQoJ2Rpc2FibGVfb2NjbHVzaW9uJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFyU2NhbGUgPT09ICdmaXhlZCcpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuc2V0KCdyZXNpemFibGUnLCAnZmFsc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFyUGxhY2VtZW50ID09PSAnd2FsbCcpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuc2V0KCdlbmFibGVfdmVydGljYWxfcGxhY2VtZW50JywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJhbXMuaGFzKCdzb3VuZCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291bmRVcmwgPSBuZXcgVVJMKHBhcmFtcy5nZXQoJ3NvdW5kJyksIGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICBwYXJhbXMuc2V0KCdzb3VuZCcsIHNvdW5kVXJsLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtcy5oYXMoJ2xpbmsnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtVcmwgPSBuZXcgVVJMKHBhcmFtcy5nZXQoJ2xpbmsnKSwgbG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIHBhcmFtcy5zZXQoJ2xpbmsnLCBsaW5rVXJsLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW50ZW50ID0gYGludGVudDovL2FydnIuZ29vZ2xlLmNvbS9zY2VuZS12aWV3ZXIvMS4wPyR7cGFyYW1zLnRvU3RyaW5nKCkgKyAnJmZpbGU9JyArXG4gICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG1vZGVsVXJsXG4gICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpKX0jSW50ZW50O3NjaGVtZT1odHRwcztwYWNrYWdlPWNvbS5nb29nbGUuYXIuY29yZTthY3Rpb249YW5kcm9pZC5pbnRlbnQuYWN0aW9uLlZJRVc7Uy5icm93c2VyX2ZhbGxiYWNrX3VybD0ke2VuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvblVybC50b1N0cmluZygpKX07ZW5kO2A7XG4gICAgICAgICAgICBjb25zdCB1bmRvSGFzaENoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5sb2NhdGlvbi5oYXNoID09PSBub0FyVmlld2VyU2lnaWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNTY2VuZVZpZXdlckJsb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbmV3IGhpc3Rvcnkgd2lsbCBiZSB0aGUgY3VycmVudCBVUkwgd2l0aCBhIG5ldyBoYXNoLlxuICAgICAgICAgICAgICAgICAgICAvLyBHbyBiYWNrIG9uZSBzdGVwIHNvIHRoYXQgd2UgcmVzZXQgdG8gdGhlIGV4cGVjdGVkIFVSTC5cbiAgICAgICAgICAgICAgICAgICAgLy8gTk9URShjZGF0YSk6IHRoaXMgc2hvdWxkIG5vdCBpbnZva2UgYW55IGJyb3dzZXItbGV2ZWwgbmF2aWdhdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIGhhc2gtb25seSBjaGFuZ2VzIG1vZGlmeSB0aGUgVVJMIGluLXBsYWNlIHdpdGhvdXRcbiAgICAgICAgICAgICAgICAgICAgLy8gbmF2aWdhdGluZzpcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oaXN0b3J5LmJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciB3aGlsZSB0cnlpbmcgdG8gcHJlc2VudCBpbiBBUiB3aXRoIFNjZW5lIFZpZXdlcicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhbGxpbmcgYmFjayB0byBuZXh0IGFyLW1vZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skc2VsZWN0QVJNb2RlXSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBXb3VsZCBiZSBuaWNlIHRvIGFjdGl2YXRlQVIoKSBoZXJlLCBidXQgd2ViWFIgZmFpbHMgZHVlIHRvIG5vdFxuICAgICAgICAgICAgICAgICAgICAvLyBzZWVpbmcgYSB1c2VyIGFjdGl2YXRpb24uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHVuZG9IYXNoQ2hhbmdlLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzWyRhckFuY2hvcl0uc2V0QXR0cmlidXRlKCdocmVmJywgaW50ZW50KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHByZXNlbnQgaW4gQVIgd2l0aCBTY2VuZSBWaWV3ZXIuLi4nKTtcbiAgICAgICAgICAgIHRoaXNbJGFyQW5jaG9yXS5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYWtlcyBhIFVSTCB0byBhIFVTRFogZmlsZSBhbmQgc2V0cyB0aGUgYXBwcm9wcmlhdGUgZmllbGRzIHNvIHRoYXRcbiAgICAgICAgICogU2FmYXJpIGlPUyBjYW4gaW50ZW50IHRvIHRoZWlyIEFSIFF1aWNrIExvb2suXG4gICAgICAgICAqL1xuICAgICAgICBhc3luYyBbJG9wZW5JT1NBUlF1aWNrTG9va10oKSB7XG4gICAgICAgICAgICBjb25zdCBnZW5lcmF0ZVVzZHogPSAhdGhpcy5pb3NTcmM7XG4gICAgICAgICAgICB0aGlzWyRhckJ1dHRvbkNvbnRhaW5lcl0uY2xhc3NMaXN0LnJlbW92ZSgnZW5hYmxlZCcpO1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0VVJMID0gZ2VuZXJhdGVVc2R6ID8gYXdhaXQgdGhpcy5wcmVwYXJlVVNEWigpIDogdGhpcy5pb3NTcmM7XG4gICAgICAgICAgICBjb25zdCBtb2RlbFVybCA9IG5ldyBVUkwob2JqZWN0VVJMLCBzZWxmLmxvY2F0aW9uLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgaWYgKGdlbmVyYXRlVXNkeikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gc2VsZi5sb2NhdGlvbi50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uVXJsID0gbmV3IFVSTChsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjVXJsID0gbmV3IFVSTCh0aGlzLnNyYywgbG9jYXRpb25VcmwpO1xuICAgICAgICAgICAgICAgIGlmIChzcmNVcmwuaGFzaCkge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbFVybC5oYXNoID0gc3JjVXJsLmhhc2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYXJTY2FsZSA9PT0gJ2ZpeGVkJykge1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbFVybC5oYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsVXJsLmhhc2ggKz0gJyYnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtb2RlbFVybC5oYXNoICs9ICdhbGxvd3NDb250ZW50U2NhbGluZz0wJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IHRoaXNbJGFyQW5jaG9yXTtcbiAgICAgICAgICAgIGFuY2hvci5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdhcicpO1xuICAgICAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICBhbmNob3IuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICAgICAgICAgIGFuY2hvci5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBtb2RlbFVybC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGlmIChnZW5lcmF0ZVVzZHopIHtcbiAgICAgICAgICAgICAgICBhbmNob3Iuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsICdtb2RlbC51c2R6Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhdHRhY2ggYW5jaG9yIHRvIHNoYWRvdyBET00gdG8gZW5zdXJlIGlPUzE2IEFSUUwgYmFubmVyIGNsaWNrIG1lc3NhZ2UgZXZlbnQgcHJvcGFnYXRpb24gXG4gICAgICAgICAgICBhbmNob3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGlmICghYW5jaG9yLmlzQ29ubmVjdGVkKVxuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChhbmNob3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgdG8gcHJlc2VudCBpbiBBUiB3aXRoIFF1aWNrIExvb2suLi4nKTtcbiAgICAgICAgICAgIGFuY2hvci5jbGljaygpO1xuICAgICAgICAgICAgYW5jaG9yLnJlbW92ZUNoaWxkKGltZyk7XG4gICAgICAgICAgICBpZiAoZ2VuZXJhdGVVc2R6KSB7XG4gICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChvYmplY3RVUkwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1skYXJCdXR0b25Db250YWluZXJdLmNsYXNzTGlzdC5hZGQoJ2VuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBhc3luYyBwcmVwYXJlVVNEWigpIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVNvdXJjZVByb2dyZXNzID0gdGhpc1skcHJvZ3Jlc3NUcmFja2VyXS5iZWdpbkFjdGl2aXR5KCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzWyR0cmlnZ2VyTG9hZF0oKTtcbiAgICAgICAgICAgIGNvbnN0IHsgbW9kZWwsIHNoYWRvdyB9ID0gdGhpc1skc2NlbmVdO1xuICAgICAgICAgICAgaWYgKG1vZGVsID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHNoYWRvdyBmcm9tIGV4cG9ydFxuICAgICAgICAgICAgaWYgKHNoYWRvdyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmlzaWJsZSA9IHNoYWRvdy52aXNpYmxlO1xuICAgICAgICAgICAgICAgIHNoYWRvdy52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVTb3VyY2VQcm9ncmVzcygwLjIpO1xuICAgICAgICAgICAgY29uc3QgZXhwb3J0ZXIgPSBuZXcgVVNEWkV4cG9ydGVyKCk7XG4gICAgICAgICAgICBjb25zdCBhcnJheWJ1ZmZlciA9IGF3YWl0IGV4cG9ydGVyLnBhcnNlKG1vZGVsKTtcbiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYXJyYXlidWZmZXJdLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21vZGVsL3ZuZC51c2R6K3ppcCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICB1cGRhdGVTb3VyY2VQcm9ncmVzcygxKTtcbiAgICAgICAgICAgIGlmIChzaGFkb3cgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNoYWRvdy52aXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiAnYXInIH0pXG4gICAgXSwgQVJNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImFyXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBhdHRyaWJ1dGU6ICdhci1zY2FsZScgfSlcbiAgICBdLCBBUk1vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwiYXJTY2FsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgYXR0cmlidXRlOiAnYXItcGxhY2VtZW50JyB9KVxuICAgIF0sIEFSTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJhclBsYWNlbWVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgYXR0cmlidXRlOiAnYXItbW9kZXMnIH0pXG4gICAgXSwgQVJNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImFyTW9kZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ2lvcy1zcmMnIH0pXG4gICAgXSwgQVJNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImlvc1NyY1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogJ3hyLWVudmlyb25tZW50JyB9KVxuICAgIF0sIEFSTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJ4ckVudmlyb25tZW50XCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIEFSTW9kZWxWaWV3ZXJFbGVtZW50O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/ar.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/controls.js":
/*!********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/controls.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $controls: () => (/* binding */ $controls),\n/* harmony export */   $fingerAnimatedContainers: () => (/* binding */ $fingerAnimatedContainers),\n/* harmony export */   $panElement: () => (/* binding */ $panElement),\n/* harmony export */   $promptAnimatedContainer: () => (/* binding */ $promptAnimatedContainer),\n/* harmony export */   $promptElement: () => (/* binding */ $promptElement),\n/* harmony export */   ControlsMixin: () => (/* binding */ ControlsMixin),\n/* harmony export */   DEFAULT_CAMERA_ORBIT: () => (/* binding */ DEFAULT_CAMERA_ORBIT),\n/* harmony export */   DEFAULT_FOV_DEG: () => (/* binding */ DEFAULT_FOV_DEG),\n/* harmony export */   DEFAULT_INTERACTION_PROMPT_THRESHOLD: () => (/* binding */ DEFAULT_INTERACTION_PROMPT_THRESHOLD),\n/* harmony export */   DEFAULT_MIN_FOV_DEG: () => (/* binding */ DEFAULT_MIN_FOV_DEG),\n/* harmony export */   INTERACTION_PROMPT: () => (/* binding */ INTERACTION_PROMPT),\n/* harmony export */   InteractionPromptStrategy: () => (/* binding */ InteractionPromptStrategy),\n/* harmony export */   InteractionPromptStyle: () => (/* binding */ InteractionPromptStyle),\n/* harmony export */   TouchAction: () => (/* binding */ TouchAction),\n/* harmony export */   cameraOrbitIntrinsics: () => (/* binding */ cameraOrbitIntrinsics),\n/* harmony export */   cameraTargetIntrinsics: () => (/* binding */ cameraTargetIntrinsics),\n/* harmony export */   fieldOfViewIntrinsics: () => (/* binding */ fieldOfViewIntrinsics)\n/* harmony export */ });\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/decorators.js */ \"(ssr)/./node_modules/lit/decorators.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../decorators.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/decorators.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _styles_conversions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/conversions.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/conversions.js\");\n/* harmony import */ var _styles_evaluators_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/evaluators.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/evaluators.js\");\n/* harmony import */ var _styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../styles/parsers.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* harmony import */ var _three_components_Damper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../three-components/Damper.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Damper.js\");\n/* harmony import */ var _three_components_SmoothControls_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../three-components/SmoothControls.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/SmoothControls.js\");\n/* harmony import */ var _utilities_animation_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utilities/animation.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities/animation.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\n\n\n\n// NOTE(cdata): The following \"animation\" timing functions are deliberately\n// being used in favor of CSS animations. In Safari 12.1 and 13, CSS animations\n// would cause the interaction prompt to glitch unexpectedly\n// @see https://github.com/google/model-viewer/issues/839\nconst PROMPT_ANIMATION_TIME = 5000;\n// For timing purposes, a \"frame\" is a timing agnostic relative unit of time\n// and a \"value\" is a target value for the Frame.\nconst wiggle = (0,_utilities_animation_js__WEBPACK_IMPORTED_MODULE_8__.timeline)({\n    initialValue: 0,\n    keyframes: [\n        { frames: 5, value: -1 },\n        { frames: 1, value: -1 },\n        { frames: 8, value: 1 },\n        { frames: 1, value: 1 },\n        { frames: 5, value: 0 },\n        { frames: 18, value: 0 }\n    ]\n});\nconst fade = (0,_utilities_animation_js__WEBPACK_IMPORTED_MODULE_8__.timeline)({\n    initialValue: 0,\n    keyframes: [\n        { frames: 1, value: 1 },\n        { frames: 5, value: 1 },\n        { frames: 1, value: 0 },\n        { frames: 6, value: 0 }\n    ]\n});\nconst DEFAULT_FOV_DEG = 30;\nconst DEFAULT_MIN_FOV_DEG = 12;\nconst DEFAULT_CAMERA_ORBIT = '0deg 75deg 105%';\nconst DEFAULT_CAMERA_TARGET = 'auto auto auto';\nconst DEFAULT_FIELD_OF_VIEW = 'auto';\nconst MINIMUM_RADIUS_RATIO = 2.2;\nconst AZIMUTHAL_QUADRANT_LABELS = ['front', 'right', 'back', 'left'];\nconst POLAR_TRIENT_LABELS = ['upper-', '', 'lower-'];\nconst DEFAULT_INTERACTION_PROMPT_THRESHOLD = 3000;\nconst INTERACTION_PROMPT = '. Use mouse, touch or arrow keys to move.';\nconst InteractionPromptStrategy = {\n    AUTO: 'auto',\n    NONE: 'none'\n};\nconst InteractionPromptStyle = {\n    BASIC: 'basic',\n    WIGGLE: 'wiggle'\n};\nconst TouchAction = {\n    PAN_Y: 'pan-y',\n    PAN_X: 'pan-x',\n    NONE: 'none'\n};\nconst fieldOfViewIntrinsics = () => {\n    return {\n        basis: [(0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_3__.degreesToRadians)((0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(DEFAULT_FOV_DEG, 'deg'))],\n        keywords: { auto: [null] }\n    };\n};\nconst minFieldOfViewIntrinsics = () => {\n    return {\n        basis: [(0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_3__.degreesToRadians)((0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(DEFAULT_MIN_FOV_DEG, 'deg'))],\n        keywords: { auto: [null] }\n    };\n};\nconst cameraOrbitIntrinsics = (() => {\n    const defaultTerms = (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.parseExpressions)(DEFAULT_CAMERA_ORBIT)[0]\n        .terms;\n    const theta = (0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_3__.normalizeUnit)(defaultTerms[0]);\n    const phi = (0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_3__.normalizeUnit)(defaultTerms[1]);\n    return (element) => {\n        const radius = element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].idealCameraDistance();\n        return {\n            basis: [theta, phi, (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(radius, 'm')],\n            keywords: { auto: [null, null, (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(105, '%')] }\n        };\n    };\n})();\nconst minCameraOrbitIntrinsics = (element) => {\n    const radius = MINIMUM_RADIUS_RATIO * element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].boundingSphere.radius;\n    return {\n        basis: [\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(-Infinity, 'rad'),\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(Math.PI / 8, 'rad'),\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(radius, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst maxCameraOrbitIntrinsics = (element) => {\n    const orbitIntrinsics = cameraOrbitIntrinsics(element);\n    const evaluator = new _styles_evaluators_js__WEBPACK_IMPORTED_MODULE_4__.StyleEvaluator([], orbitIntrinsics);\n    const defaultRadius = evaluator.evaluate()[2];\n    return {\n        basis: [\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(Infinity, 'rad'),\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(Math.PI - Math.PI / 8, 'rad'),\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(defaultRadius, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst cameraTargetIntrinsics = (element) => {\n    const center = element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].boundingBox.getCenter(new three__WEBPACK_IMPORTED_MODULE_9__.Vector3());\n    return {\n        basis: [\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(center.x, 'm'),\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(center.y, 'm'),\n            (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_5__.numberNode)(center.z, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst HALF_PI = Math.PI / 2.0;\nconst THIRD_PI = Math.PI / 3.0;\nconst QUARTER_PI = HALF_PI / 2.0;\nconst TAU = 2.0 * Math.PI;\nconst $controls = Symbol('controls');\nconst $panElement = Symbol('panElement');\nconst $promptElement = Symbol('promptElement');\nconst $promptAnimatedContainer = Symbol('promptAnimatedContainer');\nconst $fingerAnimatedContainers = Symbol('fingerAnimatedContainers');\nconst $deferInteractionPrompt = Symbol('deferInteractionPrompt');\nconst $updateAria = Symbol('updateAria');\nconst $updateCameraForRadius = Symbol('updateCameraForRadius');\nconst $onChange = Symbol('onChange');\nconst $onPointerChange = Symbol('onPointerChange');\nconst $waitingToPromptUser = Symbol('waitingToPromptUser');\nconst $userHasInteracted = Symbol('userHasInteracted');\nconst $promptElementVisibleTime = Symbol('promptElementVisibleTime');\nconst $lastPromptOffset = Symbol('lastPromptOffset');\nconst $lastSpherical = Symbol('lastSpherical');\nconst $jumpCamera = Symbol('jumpCamera');\nconst $initialized = Symbol('initialized');\nconst $maintainThetaPhi = Symbol('maintainThetaPhi');\nconst $syncCameraOrbit = Symbol('syncCameraOrbit');\nconst $syncFieldOfView = Symbol('syncFieldOfView');\nconst $syncCameraTarget = Symbol('syncCameraTarget');\nconst $syncMinCameraOrbit = Symbol('syncMinCameraOrbit');\nconst $syncMaxCameraOrbit = Symbol('syncMaxCameraOrbit');\nconst $syncMinFieldOfView = Symbol('syncMinFieldOfView');\nconst $syncMaxFieldOfView = Symbol('syncMaxFieldOfView');\nconst ControlsMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n    class ControlsModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.cameraControls = false;\n            this.cameraOrbit = DEFAULT_CAMERA_ORBIT;\n            this.cameraTarget = DEFAULT_CAMERA_TARGET;\n            this.fieldOfView = DEFAULT_FIELD_OF_VIEW;\n            this.minCameraOrbit = 'auto';\n            this.maxCameraOrbit = 'auto';\n            this.minFieldOfView = 'auto';\n            this.maxFieldOfView = 'auto';\n            this.interactionPromptThreshold = DEFAULT_INTERACTION_PROMPT_THRESHOLD;\n            this.interactionPrompt = InteractionPromptStrategy.AUTO;\n            this.interactionPromptStyle = InteractionPromptStyle.WIGGLE;\n            this.orbitSensitivity = 1;\n            this.touchAction = TouchAction.NONE;\n            this.disableZoom = false;\n            this.disablePan = false;\n            this.disableTap = false;\n            this.interpolationDecay = _three_components_Damper_js__WEBPACK_IMPORTED_MODULE_6__.DECAY_MILLISECONDS;\n            this[_a] = this.shadowRoot.querySelector('.interaction-prompt');\n            this[_b] = this.shadowRoot.querySelector('#prompt');\n            this[_c] = [\n                this.shadowRoot.querySelector('#finger0'),\n                this.shadowRoot.querySelector('#finger1')\n            ];\n            this[_d] = this.shadowRoot.querySelector('.pan-target');\n            this[_e] = 0;\n            this[_f] = Infinity;\n            this[_g] = false;\n            this[_h] = false;\n            this[_j] = new _three_components_SmoothControls_js__WEBPACK_IMPORTED_MODULE_7__.SmoothControls(this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].camera, this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$userInputElement], this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene]);\n            this[_k] = new three__WEBPACK_IMPORTED_MODULE_9__.Spherical();\n            this[_l] = false;\n            this[_m] = false;\n            this[_o] = false;\n            this[_p] = ({ source }) => {\n                this[$updateAria]();\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$needsRender]();\n                if (source === _three_components_SmoothControls_js__WEBPACK_IMPORTED_MODULE_7__.ChangeSource.USER_INTERACTION) {\n                    this[$userHasInteracted] = true;\n                    this[$deferInteractionPrompt]();\n                }\n                this.dispatchEvent(new CustomEvent('camera-change', { detail: { source } }));\n            };\n            this[_q] = (event) => {\n                if (event.type === 'pointer-change-start') {\n                    this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$container].classList.add('pointer-tumbling');\n                }\n                else {\n                    this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$container].classList.remove('pointer-tumbling');\n                }\n            };\n        }\n        get inputSensitivity() {\n            return this[$controls].inputSensitivity;\n        }\n        set inputSensitivity(value) {\n            this[$controls].inputSensitivity = value;\n        }\n        getCameraOrbit() {\n            const { theta, phi, radius } = this[$lastSpherical];\n            return {\n                theta,\n                phi,\n                radius,\n                toString() {\n                    return `${this.theta}rad ${this.phi}rad ${this.radius}m`;\n                }\n            };\n        }\n        getCameraTarget() {\n            return (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.toVector3D)(this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].isPresenting ? this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.target :\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].getTarget());\n        }\n        getFieldOfView() {\n            return this[$controls].getFieldOfView();\n        }\n        // Provided so user code does not have to parse these from attributes.\n        getMinimumFieldOfView() {\n            return this[$controls].options.minimumFieldOfView;\n        }\n        getMaximumFieldOfView() {\n            return this[$controls].options.maximumFieldOfView;\n        }\n        getIdealAspect() {\n            return this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].idealAspect;\n        }\n        jumpCameraToGoal() {\n            this[$jumpCamera] = true;\n            this.requestUpdate($jumpCamera, false);\n        }\n        resetInteractionPrompt() {\n            this[$lastPromptOffset] = 0;\n            this[$promptElementVisibleTime] = Infinity;\n            this[$userHasInteracted] = false;\n            this[$waitingToPromptUser] =\n                this.interactionPrompt === InteractionPromptStrategy.AUTO &&\n                    this.cameraControls;\n        }\n        zoom(keyPresses) {\n            const event = new WheelEvent('wheel', { deltaY: -30 * keyPresses });\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$userInputElement].dispatchEvent(event);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$controls].addEventListener('change', this[$onChange]);\n            this[$controls].addEventListener('pointer-change-start', this[$onPointerChange]);\n            this[$controls].addEventListener('pointer-change-end', this[$onPointerChange]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$controls].removeEventListener('change', this[$onChange]);\n            this[$controls].removeEventListener('pointer-change-start', this[$onPointerChange]);\n            this[$controls].removeEventListener('pointer-change-end', this[$onPointerChange]);\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            const controls = this[$controls];\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene];\n            if (changedProperties.has('cameraControls')) {\n                if (this.cameraControls) {\n                    controls.enableInteraction();\n                    if (this.interactionPrompt === InteractionPromptStrategy.AUTO) {\n                        this[$waitingToPromptUser] = true;\n                    }\n                }\n                else {\n                    controls.disableInteraction();\n                    this[$deferInteractionPrompt]();\n                }\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$userInputElement].setAttribute('aria-label', this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$ariaLabel]);\n            }\n            if (changedProperties.has('disableZoom')) {\n                controls.disableZoom = this.disableZoom;\n            }\n            if (changedProperties.has('disablePan')) {\n                controls.enablePan = !this.disablePan;\n            }\n            if (changedProperties.has('disableTap')) {\n                controls.enableTap = !this.disableTap;\n            }\n            if (changedProperties.has('interactionPrompt') ||\n                changedProperties.has('cameraControls') ||\n                changedProperties.has('src')) {\n                if (this.interactionPrompt === InteractionPromptStrategy.AUTO &&\n                    this.cameraControls && !this[$userHasInteracted]) {\n                    this[$waitingToPromptUser] = true;\n                }\n                else {\n                    this[$deferInteractionPrompt]();\n                }\n            }\n            if (changedProperties.has('interactionPromptStyle')) {\n                this[$promptAnimatedContainer].style.opacity =\n                    this.interactionPromptStyle == InteractionPromptStyle.BASIC ? '1' :\n                        '0';\n            }\n            if (changedProperties.has('touchAction')) {\n                const touchAction = this.touchAction;\n                controls.applyOptions({ touchAction });\n                controls.updateTouchActionStyle();\n            }\n            if (changedProperties.has('orbitSensitivity')) {\n                controls.orbitSensitivity = this.orbitSensitivity;\n            }\n            if (changedProperties.has('interpolationDecay')) {\n                controls.setDamperDecayTime(this.interpolationDecay);\n                scene.setTargetDamperDecayTime(this.interpolationDecay);\n            }\n            if (this[$jumpCamera] === true) {\n                Promise.resolve().then(() => {\n                    controls.jumpToGoal();\n                    scene.jumpToGoal();\n                    this[$jumpCamera] = false;\n                });\n            }\n        }\n        async updateFraming() {\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene];\n            const oldFramedFoV = scene.adjustedFoV(scene.framedFoVDeg);\n            await scene.updateFraming();\n            const newFramedFoV = scene.adjustedFoV(scene.framedFoVDeg);\n            const zoom = this[$controls].getFieldOfView() / oldFramedFoV;\n            this[$controls].setFieldOfView(newFramedFoV * zoom);\n            this[$maintainThetaPhi] = true;\n            this.requestUpdate('maxFieldOfView');\n            this.requestUpdate('fieldOfView');\n            this.requestUpdate('minCameraOrbit');\n            this.requestUpdate('maxCameraOrbit');\n            this.requestUpdate('cameraOrbit');\n            await this.updateComplete;\n        }\n        interact(duration, finger0, finger1) {\n            const inputElement = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$userInputElement];\n            const fingerElements = this[$fingerAnimatedContainers];\n            if (fingerElements[0].style.opacity === '1') {\n                console.warn('interact() failed because an existing interaction is running.');\n                return;\n            }\n            const xy = new Array();\n            xy.push({ x: (0,_utilities_animation_js__WEBPACK_IMPORTED_MODULE_8__.timeline)(finger0.x), y: (0,_utilities_animation_js__WEBPACK_IMPORTED_MODULE_8__.timeline)(finger0.y) });\n            const positions = [{ x: xy[0].x(0), y: xy[0].y(0) }];\n            if (finger1 != null) {\n                xy.push({ x: (0,_utilities_animation_js__WEBPACK_IMPORTED_MODULE_8__.timeline)(finger1.x), y: (0,_utilities_animation_js__WEBPACK_IMPORTED_MODULE_8__.timeline)(finger1.y) });\n                positions.push({ x: xy[1].x(0), y: xy[1].y(0) });\n            }\n            let startTime = performance.now();\n            const { width, height } = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene];\n            const dispatchTouches = (type) => {\n                for (const [i, position] of positions.entries()) {\n                    const { style } = fingerElements[i];\n                    style.transform = `translateX(${width * position.x}px) translateY(${height * position.y}px)`;\n                    if (type === 'pointerdown') {\n                        style.opacity = '1';\n                    }\n                    else if (type === 'pointerup') {\n                        style.opacity = '0';\n                    }\n                    const init = {\n                        pointerId: i - 5678,\n                        pointerType: 'touch',\n                        target: inputElement,\n                        clientX: width * position.x,\n                        clientY: height * position.y,\n                        altKey: true // flag that this is not a user interaction\n                    };\n                    inputElement.dispatchEvent(new PointerEvent(type, init));\n                }\n            };\n            const moveTouches = () => {\n                // Cancel interaction if something else moves the camera or input is\n                // removed from the DOM.\n                const { changeSource } = this[$controls];\n                if (changeSource !== _three_components_SmoothControls_js__WEBPACK_IMPORTED_MODULE_7__.ChangeSource.AUTOMATIC ||\n                    !inputElement.isConnected) {\n                    for (const fingerElement of this[$fingerAnimatedContainers]) {\n                        fingerElement.style.opacity = '0';\n                    }\n                    dispatchTouches('pointercancel');\n                    this.dispatchEvent(new CustomEvent('interact-stopped', { detail: { source: changeSource } }));\n                    document.removeEventListener('visibilitychange', onVisibilityChange);\n                    return;\n                }\n                const time = Math.min(1, (performance.now() - startTime) / duration);\n                for (const [i, position] of positions.entries()) {\n                    position.x = xy[i].x(time);\n                    position.y = xy[i].y(time);\n                }\n                dispatchTouches('pointermove');\n                if (time < 1) {\n                    requestAnimationFrame(moveTouches);\n                }\n                else {\n                    dispatchTouches('pointerup');\n                    this.dispatchEvent(new CustomEvent('interact-stopped', { detail: { source: changeSource } }));\n                    document.removeEventListener('visibilitychange', onVisibilityChange);\n                }\n            };\n            const onVisibilityChange = () => {\n                let elapsed = 0;\n                if (document.visibilityState === 'hidden') {\n                    elapsed = performance.now() - startTime;\n                }\n                else {\n                    startTime = performance.now() - elapsed;\n                }\n            };\n            document.addEventListener('visibilitychange', onVisibilityChange);\n            dispatchTouches('pointerdown');\n            requestAnimationFrame(moveTouches);\n        }\n        [(_a = $promptElement, _b = $promptAnimatedContainer, _c = $fingerAnimatedContainers, _d = $panElement, _e = $lastPromptOffset, _f = $promptElementVisibleTime, _g = $userHasInteracted, _h = $waitingToPromptUser, _j = $controls, _k = $lastSpherical, _l = $jumpCamera, _m = $initialized, _o = $maintainThetaPhi, $syncFieldOfView)](style) {\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene];\n            scene.framedFoVDeg = style[0] * 180 / Math.PI;\n            this[$controls].setFieldOfView(scene.adjustedFoV(scene.framedFoVDeg));\n        }\n        [$syncCameraOrbit](style) {\n            const controls = this[$controls];\n            if (this[$maintainThetaPhi]) {\n                const { theta, phi } = this.getCameraOrbit();\n                style[0] = theta;\n                style[1] = phi;\n                this[$maintainThetaPhi] = false;\n            }\n            controls.changeSource = _three_components_SmoothControls_js__WEBPACK_IMPORTED_MODULE_7__.ChangeSource.NONE;\n            controls.setOrbit(style[0], style[1], style[2]);\n        }\n        [$syncMinCameraOrbit](style) {\n            this[$controls].applyOptions({\n                minimumAzimuthalAngle: style[0],\n                minimumPolarAngle: style[1],\n                minimumRadius: style[2]\n            });\n            this.jumpCameraToGoal();\n        }\n        [$syncMaxCameraOrbit](style) {\n            this[$controls].applyOptions({\n                maximumAzimuthalAngle: style[0],\n                maximumPolarAngle: style[1],\n                maximumRadius: style[2]\n            });\n            this[$updateCameraForRadius](style[2]);\n            this.jumpCameraToGoal();\n        }\n        [$syncMinFieldOfView](style) {\n            this[$controls].applyOptions({ minimumFieldOfView: style[0] * 180 / Math.PI });\n            this.jumpCameraToGoal();\n        }\n        [$syncMaxFieldOfView](style) {\n            const fov = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].adjustedFoV(style[0] * 180 / Math.PI);\n            this[$controls].applyOptions({ maximumFieldOfView: fov });\n            this.jumpCameraToGoal();\n        }\n        [$syncCameraTarget](style) {\n            const [x, y, z] = style;\n            if (!this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.isPresenting) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].setTarget(x, y, z);\n            }\n            this[$controls].changeSource = _three_components_SmoothControls_js__WEBPACK_IMPORTED_MODULE_7__.ChangeSource.NONE;\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].arRenderer.updateTarget();\n        }\n        [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$tick](time, delta) {\n            super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$tick](time, delta);\n            if (this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].isPresenting || !this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$getModelIsVisible]()) {\n                return;\n            }\n            const controls = this[$controls];\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene];\n            const now = performance.now();\n            if (this[$waitingToPromptUser]) {\n                if (this.loaded &&\n                    now > this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$loadedTime] + this.interactionPromptThreshold) {\n                    this[$waitingToPromptUser] = false;\n                    this[$promptElementVisibleTime] = now;\n                    this[$promptElement].classList.add('visible');\n                }\n            }\n            if (isFinite(this[$promptElementVisibleTime]) &&\n                this.interactionPromptStyle === InteractionPromptStyle.WIGGLE) {\n                const animationTime = ((now - this[$promptElementVisibleTime]) / PROMPT_ANIMATION_TIME) %\n                    1;\n                const offset = wiggle(animationTime);\n                const opacity = fade(animationTime);\n                this[$promptAnimatedContainer].style.opacity = `${opacity}`;\n                if (offset !== this[$lastPromptOffset]) {\n                    const xOffset = offset * scene.width * 0.05;\n                    const deltaTheta = (offset - this[$lastPromptOffset]) * Math.PI / 16;\n                    this[$promptAnimatedContainer].style.transform =\n                        `translateX(${xOffset}px)`;\n                    controls.changeSource = _three_components_SmoothControls_js__WEBPACK_IMPORTED_MODULE_7__.ChangeSource.AUTOMATIC;\n                    controls.adjustOrbit(deltaTheta, 0, 0);\n                    this[$lastPromptOffset] = offset;\n                }\n            }\n            controls.update(time, delta);\n            if (scene.updateTarget(delta)) {\n                this[$onChange]({ type: 'change', source: controls.changeSource });\n            }\n        }\n        [$deferInteractionPrompt]() {\n            // Effectively cancel the timer waiting for user interaction:\n            this[$waitingToPromptUser] = false;\n            this[$promptElement].classList.remove('visible');\n            this[$promptElementVisibleTime] = Infinity;\n        }\n        /**\n         * Updates the camera's near and far planes to enclose the scene when\n         * orbiting at the supplied radius.\n         */\n        [$updateCameraForRadius](radius) {\n            const maximumRadius = Math.max(this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].boundingSphere.radius, radius);\n            const near = 0;\n            const far = 2 * maximumRadius;\n            this[$controls].updateNearFar(near, far);\n        }\n        [$updateAria]() {\n            const { theta, phi } = this[$controls].getCameraSpherical(this[$lastSpherical]);\n            const azimuthalQuadrant = (4 + Math.floor(((theta % TAU) + QUARTER_PI) / HALF_PI)) % 4;\n            const polarTrient = Math.floor(phi / THIRD_PI);\n            const azimuthalQuadrantLabel = AZIMUTHAL_QUADRANT_LABELS[azimuthalQuadrant];\n            const polarTrientLabel = POLAR_TRIENT_LABELS[polarTrient];\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$updateStatus](`View from stage ${polarTrientLabel}${azimuthalQuadrantLabel}`);\n        }\n        get [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$ariaLabel]() {\n            return super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$ariaLabel] +\n                (this.cameraControls ? INTERACTION_PROMPT : '');\n        }\n        async [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$onResize](event) {\n            const controls = this[$controls];\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene];\n            const oldFramedFoV = scene.adjustedFoV(scene.framedFoVDeg);\n            // The super of $onResize may update the scene's adjustedFoV, so we\n            // compare the before and after to calculate the proper zoom.\n            super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$onResize](event);\n            const fovRatio = scene.adjustedFoV(scene.framedFoVDeg) / oldFramedFoV;\n            const fov = controls.getFieldOfView() * (isFinite(fovRatio) ? fovRatio : 1);\n            controls.updateAspect(this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].aspect);\n            this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n            await this.updateComplete;\n            this[$controls].setFieldOfView(fov);\n            this.jumpCameraToGoal();\n        }\n        [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$onModelLoad]() {\n            super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$onModelLoad]();\n            if (this[$initialized]) {\n                this[$maintainThetaPhi] = true;\n            }\n            else {\n                this[$initialized] = true;\n            }\n            this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n            this.requestUpdate('fieldOfView', this.fieldOfView);\n            this.requestUpdate('minCameraOrbit', this.minCameraOrbit);\n            this.requestUpdate('maxCameraOrbit', this.maxCameraOrbit);\n            this.requestUpdate('cameraOrbit', this.cameraOrbit);\n            this.requestUpdate('cameraTarget', this.cameraTarget);\n            this.jumpCameraToGoal();\n        }\n    }\n    _p = $onChange, _q = $onPointerChange;\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Boolean, attribute: 'camera-controls' })\n    ], ControlsModelViewerElement.prototype, \"cameraControls\", void 0);\n    __decorate([\n        (0,_decorators_js__WEBPACK_IMPORTED_MODULE_1__.style)({\n            intrinsics: cameraOrbitIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncCameraOrbit\n        }),\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"cameraOrbit\", void 0);\n    __decorate([\n        (0,_decorators_js__WEBPACK_IMPORTED_MODULE_1__.style)({\n            intrinsics: cameraTargetIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncCameraTarget\n        }),\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'camera-target', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"cameraTarget\", void 0);\n    __decorate([\n        (0,_decorators_js__WEBPACK_IMPORTED_MODULE_1__.style)({\n            intrinsics: fieldOfViewIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncFieldOfView\n        }),\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"fieldOfView\", void 0);\n    __decorate([\n        (0,_decorators_js__WEBPACK_IMPORTED_MODULE_1__.style)({\n            intrinsics: minCameraOrbitIntrinsics,\n            updateHandler: $syncMinCameraOrbit\n        }),\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'min-camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"minCameraOrbit\", void 0);\n    __decorate([\n        (0,_decorators_js__WEBPACK_IMPORTED_MODULE_1__.style)({\n            intrinsics: maxCameraOrbitIntrinsics,\n            updateHandler: $syncMaxCameraOrbit\n        }),\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'max-camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"maxCameraOrbit\", void 0);\n    __decorate([\n        (0,_decorators_js__WEBPACK_IMPORTED_MODULE_1__.style)({\n            intrinsics: minFieldOfViewIntrinsics,\n            updateHandler: $syncMinFieldOfView\n        }),\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'min-field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"minFieldOfView\", void 0);\n    __decorate([\n        (0,_decorators_js__WEBPACK_IMPORTED_MODULE_1__.style)({ intrinsics: fieldOfViewIntrinsics, updateHandler: $syncMaxFieldOfView }),\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'max-field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"maxFieldOfView\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Number, attribute: 'interaction-prompt-threshold' })\n    ], ControlsModelViewerElement.prototype, \"interactionPromptThreshold\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'interaction-prompt' })\n    ], ControlsModelViewerElement.prototype, \"interactionPrompt\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'interaction-prompt-style' })\n    ], ControlsModelViewerElement.prototype, \"interactionPromptStyle\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Number, attribute: 'orbit-sensitivity' })\n    ], ControlsModelViewerElement.prototype, \"orbitSensitivity\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'touch-action' })\n    ], ControlsModelViewerElement.prototype, \"touchAction\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Boolean, attribute: 'disable-zoom' })\n    ], ControlsModelViewerElement.prototype, \"disableZoom\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Boolean, attribute: 'disable-pan' })\n    ], ControlsModelViewerElement.prototype, \"disablePan\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Boolean, attribute: 'disable-tap' })\n    ], ControlsModelViewerElement.prototype, \"disableTap\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Number, attribute: 'interpolation-decay' })\n    ], ControlsModelViewerElement.prototype, \"interpolationDecay\", void 0);\n    return ControlsModelViewerElement;\n};\n//# sourceMappingURL=controls.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL2NvbnRyb2xzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsU0FBSSxJQUFJLFNBQUk7QUFDOUI7QUFDQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDNkM7QUFDRjtBQUNGO0FBQ3dLO0FBQ3RJO0FBQ2xCO0FBQ1c7QUFDRDtBQUNrQjtBQUNoQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsaUVBQVE7QUFDdkI7QUFDQTtBQUNBLFVBQVUsc0JBQXNCO0FBQ2hDLFVBQVUsc0JBQXNCO0FBQ2hDLFVBQVUscUJBQXFCO0FBQy9CLFVBQVUscUJBQXFCO0FBQy9CLFVBQVUscUJBQXFCO0FBQy9CLFVBQVU7QUFDVjtBQUNBLENBQUM7QUFDRCxhQUFhLGlFQUFRO0FBQ3JCO0FBQ0E7QUFDQSxVQUFVLHFCQUFxQjtBQUMvQixVQUFVLHFCQUFxQjtBQUMvQixVQUFVLHFCQUFxQjtBQUMvQixVQUFVO0FBQ1Y7QUFDQSxDQUFDO0FBQ007QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxnQkFBZ0Isd0VBQWdCLENBQUMsOERBQVU7QUFDM0Msb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdFQUFnQixDQUFDLDhEQUFVO0FBQzNDLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ087QUFDUCx5QkFBeUIsb0VBQWdCO0FBQ3pDO0FBQ0Esa0JBQWtCLHFFQUFhO0FBQy9CLGdCQUFnQixxRUFBYTtBQUM3QjtBQUNBLCtCQUErQix5REFBTTtBQUNyQztBQUNBLGdDQUFnQyw4REFBVTtBQUMxQyx3QkFBd0IsbUJBQW1CLDhEQUFVO0FBQ3JEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxrREFBa0QseURBQU07QUFDeEQ7QUFDQTtBQUNBLFlBQVksOERBQVU7QUFDdEIsWUFBWSw4REFBVTtBQUN0QixZQUFZLDhEQUFVO0FBQ3RCO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGlFQUFjO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQVU7QUFDdEIsWUFBWSw4REFBVTtBQUN0QixZQUFZLDhEQUFVO0FBQ3RCO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDTztBQUNQLDJCQUEyQix5REFBTSw0QkFBNEIsMENBQU87QUFDcEU7QUFDQTtBQUNBLFlBQVksOERBQVU7QUFDdEIsWUFBWSw4REFBVTtBQUN0QixZQUFZLDhEQUFVO0FBQ3RCO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLDJFQUFrQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtFQUFjLE1BQU0seURBQU0sZUFBZSxvRUFBaUIsUUFBUSx5REFBTTtBQUNuRywyQkFBMkIsNENBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFFBQVE7QUFDbEM7QUFDQSxxQkFBcUIsK0RBQVk7QUFDakMsK0JBQStCLDZFQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxVQUFVLFVBQVU7QUFDMUY7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZEQUFVO0FBQ25DO0FBQ0E7QUFDQSx5QkFBeUIsNkRBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsV0FBVyxNQUFNLFNBQVMsTUFBTSxZQUFZO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGlFQUFVLE1BQU0sNERBQVMsc0JBQXNCLDREQUFTO0FBQzNFLHFCQUFxQix5REFBTTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseURBQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCwwQkFBMEI7QUFDOUUsaUJBQWlCLG9FQUFpQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5REFBTTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9FQUFpQixrQ0FBa0MsNkRBQVU7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsYUFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5REFBTTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLG9FQUFpQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsR0FBRyxpRUFBUSxnQkFBZ0IsaUVBQVEsYUFBYTtBQUN0RSxpQ0FBaUMsOEJBQThCO0FBQy9EO0FBQ0EsMEJBQTBCLEdBQUcsaUVBQVEsZ0JBQWdCLGlFQUFRLGFBQWE7QUFDMUUsaUNBQWlDLDhCQUE4QjtBQUMvRDtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQixPQUFPLHlEQUFNO0FBQ2pEO0FBQ0E7QUFDQSw0QkFBNEIsUUFBUTtBQUNwQyxvREFBb0QsbUJBQW1CLGlCQUFpQixvQkFBb0I7QUFDNUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDLHFDQUFxQyw2RUFBWTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLFVBQVUsd0JBQXdCO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsVUFBVSx3QkFBd0I7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5REFBTTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyw2RUFBWTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyw4Q0FBOEM7QUFDekY7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlEQUFNO0FBQ25DLDJDQUEyQyx5QkFBeUI7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNERBQVM7QUFDL0IscUJBQXFCLHlEQUFNO0FBQzNCO0FBQ0EsMkNBQTJDLDZFQUFZO0FBQ3ZELGlCQUFpQiw0REFBUztBQUMxQjtBQUNBLFNBQVMsd0RBQUs7QUFDZCxrQkFBa0Isd0RBQUs7QUFDdkIscUJBQXFCLDREQUFTLHdCQUF3QixxRUFBa0I7QUFDeEU7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHlEQUFNO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4REFBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLFFBQVE7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsUUFBUTtBQUM5Qyw0Q0FBNEMsNkVBQVk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLCtDQUErQztBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCx5REFBTTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0VBQWEscUJBQXFCLGlCQUFpQixFQUFFLHVCQUF1QjtBQUM3RjtBQUNBLGFBQWEsNkRBQVU7QUFDdkIseUJBQXlCLDZEQUFVO0FBQ25DO0FBQ0E7QUFDQSxlQUFlLDREQUFTO0FBQ3hCO0FBQ0EsK0JBQStCLHlEQUFNO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw0REFBUztBQUMzQjtBQUNBO0FBQ0EsdUNBQXVDLHlEQUFNO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLCtEQUFZO0FBQ3JCLGtCQUFrQiwrREFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLDZDQUE2QztBQUNoRTtBQUNBO0FBQ0EsUUFBUSxxREFBSztBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRLDJEQUFRLEdBQUcsaUVBQWlFO0FBQ3BGO0FBQ0E7QUFDQSxRQUFRLHFEQUFLO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVEsMkRBQVEsR0FBRyxrRUFBa0U7QUFDckY7QUFDQTtBQUNBLFFBQVEscURBQUs7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUSwyREFBUSxHQUFHLGtFQUFrRTtBQUNyRjtBQUNBO0FBQ0EsUUFBUSxxREFBSztBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUSwyREFBUSxHQUFHLHFFQUFxRTtBQUN4RjtBQUNBO0FBQ0EsUUFBUSxxREFBSztBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUSwyREFBUSxHQUFHLHFFQUFxRTtBQUN4RjtBQUNBO0FBQ0EsUUFBUSxxREFBSztBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUSwyREFBUSxHQUFHLHNFQUFzRTtBQUN6RjtBQUNBO0FBQ0EsUUFBUSxxREFBSyxHQUFHLHVFQUF1RTtBQUN2RixRQUFRLDJEQUFRLEdBQUcsc0VBQXNFO0FBQ3pGO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcseURBQXlEO0FBQzVFO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcsK0NBQStDO0FBQ2xFO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcscURBQXFEO0FBQ3hFO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcsOENBQThDO0FBQ2pFO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcseUNBQXlDO0FBQzVEO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcsMENBQTBDO0FBQzdEO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcseUNBQXlDO0FBQzVEO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcseUNBQXlDO0FBQzVEO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcsZ0RBQWdEO0FBQ25FO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9mZWF0dXJlcy9jb250cm9scy5qcz8xMDE5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgU3BoZXJpY2FsLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgc3R5bGUgfSBmcm9tICcuLi9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7ICRhcmlhTGFiZWwsICRjb250YWluZXIsICRnZXRNb2RlbElzVmlzaWJsZSwgJGxvYWRlZFRpbWUsICRuZWVkc1JlbmRlciwgJG9uTW9kZWxMb2FkLCAkb25SZXNpemUsICRyZW5kZXJlciwgJHNjZW5lLCAkdGljaywgJHVwZGF0ZVN0YXR1cywgJHVzZXJJbnB1dEVsZW1lbnQsIHRvVmVjdG9yM0QgfSBmcm9tICcuLi9tb2RlbC12aWV3ZXItYmFzZS5qcyc7XG5pbXBvcnQgeyBkZWdyZWVzVG9SYWRpYW5zLCBub3JtYWxpemVVbml0IH0gZnJvbSAnLi4vc3R5bGVzL2NvbnZlcnNpb25zLmpzJztcbmltcG9ydCB7IFN0eWxlRXZhbHVhdG9yIH0gZnJvbSAnLi4vc3R5bGVzL2V2YWx1YXRvcnMuanMnO1xuaW1wb3J0IHsgbnVtYmVyTm9kZSwgcGFyc2VFeHByZXNzaW9ucyB9IGZyb20gJy4uL3N0eWxlcy9wYXJzZXJzLmpzJztcbmltcG9ydCB7IERFQ0FZX01JTExJU0VDT05EUyB9IGZyb20gJy4uL3RocmVlLWNvbXBvbmVudHMvRGFtcGVyLmpzJztcbmltcG9ydCB7IENoYW5nZVNvdXJjZSwgU21vb3RoQ29udHJvbHMgfSBmcm9tICcuLi90aHJlZS1jb21wb25lbnRzL1Ntb290aENvbnRyb2xzLmpzJztcbmltcG9ydCB7IHRpbWVsaW5lIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2FuaW1hdGlvbi5qcyc7XG4vLyBOT1RFKGNkYXRhKTogVGhlIGZvbGxvd2luZyBcImFuaW1hdGlvblwiIHRpbWluZyBmdW5jdGlvbnMgYXJlIGRlbGliZXJhdGVseVxuLy8gYmVpbmcgdXNlZCBpbiBmYXZvciBvZiBDU1MgYW5pbWF0aW9ucy4gSW4gU2FmYXJpIDEyLjEgYW5kIDEzLCBDU1MgYW5pbWF0aW9uc1xuLy8gd291bGQgY2F1c2UgdGhlIGludGVyYWN0aW9uIHByb21wdCB0byBnbGl0Y2ggdW5leHBlY3RlZGx5XG4vLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvbW9kZWwtdmlld2VyL2lzc3Vlcy84MzlcbmNvbnN0IFBST01QVF9BTklNQVRJT05fVElNRSA9IDUwMDA7XG4vLyBGb3IgdGltaW5nIHB1cnBvc2VzLCBhIFwiZnJhbWVcIiBpcyBhIHRpbWluZyBhZ25vc3RpYyByZWxhdGl2ZSB1bml0IG9mIHRpbWVcbi8vIGFuZCBhIFwidmFsdWVcIiBpcyBhIHRhcmdldCB2YWx1ZSBmb3IgdGhlIEZyYW1lLlxuY29uc3Qgd2lnZ2xlID0gdGltZWxpbmUoe1xuICAgIGluaXRpYWxWYWx1ZTogMCxcbiAgICBrZXlmcmFtZXM6IFtcbiAgICAgICAgeyBmcmFtZXM6IDUsIHZhbHVlOiAtMSB9LFxuICAgICAgICB7IGZyYW1lczogMSwgdmFsdWU6IC0xIH0sXG4gICAgICAgIHsgZnJhbWVzOiA4LCB2YWx1ZTogMSB9LFxuICAgICAgICB7IGZyYW1lczogMSwgdmFsdWU6IDEgfSxcbiAgICAgICAgeyBmcmFtZXM6IDUsIHZhbHVlOiAwIH0sXG4gICAgICAgIHsgZnJhbWVzOiAxOCwgdmFsdWU6IDAgfVxuICAgIF1cbn0pO1xuY29uc3QgZmFkZSA9IHRpbWVsaW5lKHtcbiAgICBpbml0aWFsVmFsdWU6IDAsXG4gICAga2V5ZnJhbWVzOiBbXG4gICAgICAgIHsgZnJhbWVzOiAxLCB2YWx1ZTogMSB9LFxuICAgICAgICB7IGZyYW1lczogNSwgdmFsdWU6IDEgfSxcbiAgICAgICAgeyBmcmFtZXM6IDEsIHZhbHVlOiAwIH0sXG4gICAgICAgIHsgZnJhbWVzOiA2LCB2YWx1ZTogMCB9XG4gICAgXVxufSk7XG5leHBvcnQgY29uc3QgREVGQVVMVF9GT1ZfREVHID0gMzA7XG5leHBvcnQgY29uc3QgREVGQVVMVF9NSU5fRk9WX0RFRyA9IDEyO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ0FNRVJBX09SQklUID0gJzBkZWcgNzVkZWcgMTA1JSc7XG5jb25zdCBERUZBVUxUX0NBTUVSQV9UQVJHRVQgPSAnYXV0byBhdXRvIGF1dG8nO1xuY29uc3QgREVGQVVMVF9GSUVMRF9PRl9WSUVXID0gJ2F1dG8nO1xuY29uc3QgTUlOSU1VTV9SQURJVVNfUkFUSU8gPSAyLjI7XG5jb25zdCBBWklNVVRIQUxfUVVBRFJBTlRfTEFCRUxTID0gWydmcm9udCcsICdyaWdodCcsICdiYWNrJywgJ2xlZnQnXTtcbmNvbnN0IFBPTEFSX1RSSUVOVF9MQUJFTFMgPSBbJ3VwcGVyLScsICcnLCAnbG93ZXItJ107XG5leHBvcnQgY29uc3QgREVGQVVMVF9JTlRFUkFDVElPTl9QUk9NUFRfVEhSRVNIT0xEID0gMzAwMDtcbmV4cG9ydCBjb25zdCBJTlRFUkFDVElPTl9QUk9NUFQgPSAnLiBVc2UgbW91c2UsIHRvdWNoIG9yIGFycm93IGtleXMgdG8gbW92ZS4nO1xuZXhwb3J0IGNvbnN0IEludGVyYWN0aW9uUHJvbXB0U3RyYXRlZ3kgPSB7XG4gICAgQVVUTzogJ2F1dG8nLFxuICAgIE5PTkU6ICdub25lJ1xufTtcbmV4cG9ydCBjb25zdCBJbnRlcmFjdGlvblByb21wdFN0eWxlID0ge1xuICAgIEJBU0lDOiAnYmFzaWMnLFxuICAgIFdJR0dMRTogJ3dpZ2dsZSdcbn07XG5leHBvcnQgY29uc3QgVG91Y2hBY3Rpb24gPSB7XG4gICAgUEFOX1k6ICdwYW4teScsXG4gICAgUEFOX1g6ICdwYW4teCcsXG4gICAgTk9ORTogJ25vbmUnXG59O1xuZXhwb3J0IGNvbnN0IGZpZWxkT2ZWaWV3SW50cmluc2ljcyA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiYXNpczogW2RlZ3JlZXNUb1JhZGlhbnMobnVtYmVyTm9kZShERUZBVUxUX0ZPVl9ERUcsICdkZWcnKSldLFxuICAgICAgICBrZXl3b3JkczogeyBhdXRvOiBbbnVsbF0gfVxuICAgIH07XG59O1xuY29uc3QgbWluRmllbGRPZlZpZXdJbnRyaW5zaWNzID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGJhc2lzOiBbZGVncmVlc1RvUmFkaWFucyhudW1iZXJOb2RlKERFRkFVTFRfTUlOX0ZPVl9ERUcsICdkZWcnKSldLFxuICAgICAgICBrZXl3b3JkczogeyBhdXRvOiBbbnVsbF0gfVxuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IGNhbWVyYU9yYml0SW50cmluc2ljcyA9ICgoKSA9PiB7XG4gICAgY29uc3QgZGVmYXVsdFRlcm1zID0gcGFyc2VFeHByZXNzaW9ucyhERUZBVUxUX0NBTUVSQV9PUkJJVClbMF1cbiAgICAgICAgLnRlcm1zO1xuICAgIGNvbnN0IHRoZXRhID0gbm9ybWFsaXplVW5pdChkZWZhdWx0VGVybXNbMF0pO1xuICAgIGNvbnN0IHBoaSA9IG5vcm1hbGl6ZVVuaXQoZGVmYXVsdFRlcm1zWzFdKTtcbiAgICByZXR1cm4gKGVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgcmFkaXVzID0gZWxlbWVudFskc2NlbmVdLmlkZWFsQ2FtZXJhRGlzdGFuY2UoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJhc2lzOiBbdGhldGEsIHBoaSwgbnVtYmVyTm9kZShyYWRpdXMsICdtJyldLFxuICAgICAgICAgICAga2V5d29yZHM6IHsgYXV0bzogW251bGwsIG51bGwsIG51bWJlck5vZGUoMTA1LCAnJScpXSB9XG4gICAgICAgIH07XG4gICAgfTtcbn0pKCk7XG5jb25zdCBtaW5DYW1lcmFPcmJpdEludHJpbnNpY3MgPSAoZWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IHJhZGl1cyA9IE1JTklNVU1fUkFESVVTX1JBVElPICogZWxlbWVudFskc2NlbmVdLmJvdW5kaW5nU3BoZXJlLnJhZGl1cztcbiAgICByZXR1cm4ge1xuICAgICAgICBiYXNpczogW1xuICAgICAgICAgICAgbnVtYmVyTm9kZSgtSW5maW5pdHksICdyYWQnKSxcbiAgICAgICAgICAgIG51bWJlck5vZGUoTWF0aC5QSSAvIDgsICdyYWQnKSxcbiAgICAgICAgICAgIG51bWJlck5vZGUocmFkaXVzLCAnbScpXG4gICAgICAgIF0sXG4gICAgICAgIGtleXdvcmRzOiB7IGF1dG86IFtudWxsLCBudWxsLCBudWxsXSB9XG4gICAgfTtcbn07XG5jb25zdCBtYXhDYW1lcmFPcmJpdEludHJpbnNpY3MgPSAoZWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IG9yYml0SW50cmluc2ljcyA9IGNhbWVyYU9yYml0SW50cmluc2ljcyhlbGVtZW50KTtcbiAgICBjb25zdCBldmFsdWF0b3IgPSBuZXcgU3R5bGVFdmFsdWF0b3IoW10sIG9yYml0SW50cmluc2ljcyk7XG4gICAgY29uc3QgZGVmYXVsdFJhZGl1cyA9IGV2YWx1YXRvci5ldmFsdWF0ZSgpWzJdO1xuICAgIHJldHVybiB7XG4gICAgICAgIGJhc2lzOiBbXG4gICAgICAgICAgICBudW1iZXJOb2RlKEluZmluaXR5LCAncmFkJyksXG4gICAgICAgICAgICBudW1iZXJOb2RlKE1hdGguUEkgLSBNYXRoLlBJIC8gOCwgJ3JhZCcpLFxuICAgICAgICAgICAgbnVtYmVyTm9kZShkZWZhdWx0UmFkaXVzLCAnbScpXG4gICAgICAgIF0sXG4gICAgICAgIGtleXdvcmRzOiB7IGF1dG86IFtudWxsLCBudWxsLCBudWxsXSB9XG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgY2FtZXJhVGFyZ2V0SW50cmluc2ljcyA9IChlbGVtZW50KSA9PiB7XG4gICAgY29uc3QgY2VudGVyID0gZWxlbWVudFskc2NlbmVdLmJvdW5kaW5nQm94LmdldENlbnRlcihuZXcgVmVjdG9yMygpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBiYXNpczogW1xuICAgICAgICAgICAgbnVtYmVyTm9kZShjZW50ZXIueCwgJ20nKSxcbiAgICAgICAgICAgIG51bWJlck5vZGUoY2VudGVyLnksICdtJyksXG4gICAgICAgICAgICBudW1iZXJOb2RlKGNlbnRlci56LCAnbScpXG4gICAgICAgIF0sXG4gICAgICAgIGtleXdvcmRzOiB7IGF1dG86IFtudWxsLCBudWxsLCBudWxsXSB9XG4gICAgfTtcbn07XG5jb25zdCBIQUxGX1BJID0gTWF0aC5QSSAvIDIuMDtcbmNvbnN0IFRISVJEX1BJID0gTWF0aC5QSSAvIDMuMDtcbmNvbnN0IFFVQVJURVJfUEkgPSBIQUxGX1BJIC8gMi4wO1xuY29uc3QgVEFVID0gMi4wICogTWF0aC5QSTtcbmV4cG9ydCBjb25zdCAkY29udHJvbHMgPSBTeW1ib2woJ2NvbnRyb2xzJyk7XG5leHBvcnQgY29uc3QgJHBhbkVsZW1lbnQgPSBTeW1ib2woJ3BhbkVsZW1lbnQnKTtcbmV4cG9ydCBjb25zdCAkcHJvbXB0RWxlbWVudCA9IFN5bWJvbCgncHJvbXB0RWxlbWVudCcpO1xuZXhwb3J0IGNvbnN0ICRwcm9tcHRBbmltYXRlZENvbnRhaW5lciA9IFN5bWJvbCgncHJvbXB0QW5pbWF0ZWRDb250YWluZXInKTtcbmV4cG9ydCBjb25zdCAkZmluZ2VyQW5pbWF0ZWRDb250YWluZXJzID0gU3ltYm9sKCdmaW5nZXJBbmltYXRlZENvbnRhaW5lcnMnKTtcbmNvbnN0ICRkZWZlckludGVyYWN0aW9uUHJvbXB0ID0gU3ltYm9sKCdkZWZlckludGVyYWN0aW9uUHJvbXB0Jyk7XG5jb25zdCAkdXBkYXRlQXJpYSA9IFN5bWJvbCgndXBkYXRlQXJpYScpO1xuY29uc3QgJHVwZGF0ZUNhbWVyYUZvclJhZGl1cyA9IFN5bWJvbCgndXBkYXRlQ2FtZXJhRm9yUmFkaXVzJyk7XG5jb25zdCAkb25DaGFuZ2UgPSBTeW1ib2woJ29uQ2hhbmdlJyk7XG5jb25zdCAkb25Qb2ludGVyQ2hhbmdlID0gU3ltYm9sKCdvblBvaW50ZXJDaGFuZ2UnKTtcbmNvbnN0ICR3YWl0aW5nVG9Qcm9tcHRVc2VyID0gU3ltYm9sKCd3YWl0aW5nVG9Qcm9tcHRVc2VyJyk7XG5jb25zdCAkdXNlckhhc0ludGVyYWN0ZWQgPSBTeW1ib2woJ3VzZXJIYXNJbnRlcmFjdGVkJyk7XG5jb25zdCAkcHJvbXB0RWxlbWVudFZpc2libGVUaW1lID0gU3ltYm9sKCdwcm9tcHRFbGVtZW50VmlzaWJsZVRpbWUnKTtcbmNvbnN0ICRsYXN0UHJvbXB0T2Zmc2V0ID0gU3ltYm9sKCdsYXN0UHJvbXB0T2Zmc2V0Jyk7XG5jb25zdCAkbGFzdFNwaGVyaWNhbCA9IFN5bWJvbCgnbGFzdFNwaGVyaWNhbCcpO1xuY29uc3QgJGp1bXBDYW1lcmEgPSBTeW1ib2woJ2p1bXBDYW1lcmEnKTtcbmNvbnN0ICRpbml0aWFsaXplZCA9IFN5bWJvbCgnaW5pdGlhbGl6ZWQnKTtcbmNvbnN0ICRtYWludGFpblRoZXRhUGhpID0gU3ltYm9sKCdtYWludGFpblRoZXRhUGhpJyk7XG5jb25zdCAkc3luY0NhbWVyYU9yYml0ID0gU3ltYm9sKCdzeW5jQ2FtZXJhT3JiaXQnKTtcbmNvbnN0ICRzeW5jRmllbGRPZlZpZXcgPSBTeW1ib2woJ3N5bmNGaWVsZE9mVmlldycpO1xuY29uc3QgJHN5bmNDYW1lcmFUYXJnZXQgPSBTeW1ib2woJ3N5bmNDYW1lcmFUYXJnZXQnKTtcbmNvbnN0ICRzeW5jTWluQ2FtZXJhT3JiaXQgPSBTeW1ib2woJ3N5bmNNaW5DYW1lcmFPcmJpdCcpO1xuY29uc3QgJHN5bmNNYXhDYW1lcmFPcmJpdCA9IFN5bWJvbCgnc3luY01heENhbWVyYU9yYml0Jyk7XG5jb25zdCAkc3luY01pbkZpZWxkT2ZWaWV3ID0gU3ltYm9sKCdzeW5jTWluRmllbGRPZlZpZXcnKTtcbmNvbnN0ICRzeW5jTWF4RmllbGRPZlZpZXcgPSBTeW1ib2woJ3N5bmNNYXhGaWVsZE9mVmlldycpO1xuZXhwb3J0IGNvbnN0IENvbnRyb2xzTWl4aW4gPSAoTW9kZWxWaWV3ZXJFbGVtZW50KSA9PiB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbCwgX20sIF9vLCBfcCwgX3E7XG4gICAgY2xhc3MgQ29udHJvbHNNb2RlbFZpZXdlckVsZW1lbnQgZXh0ZW5kcyBNb2RlbFZpZXdlckVsZW1lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYUNvbnRyb2xzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYU9yYml0ID0gREVGQVVMVF9DQU1FUkFfT1JCSVQ7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYVRhcmdldCA9IERFRkFVTFRfQ0FNRVJBX1RBUkdFVDtcbiAgICAgICAgICAgIHRoaXMuZmllbGRPZlZpZXcgPSBERUZBVUxUX0ZJRUxEX09GX1ZJRVc7XG4gICAgICAgICAgICB0aGlzLm1pbkNhbWVyYU9yYml0ID0gJ2F1dG8nO1xuICAgICAgICAgICAgdGhpcy5tYXhDYW1lcmFPcmJpdCA9ICdhdXRvJztcbiAgICAgICAgICAgIHRoaXMubWluRmllbGRPZlZpZXcgPSAnYXV0byc7XG4gICAgICAgICAgICB0aGlzLm1heEZpZWxkT2ZWaWV3ID0gJ2F1dG8nO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvblByb21wdFRocmVzaG9sZCA9IERFRkFVTFRfSU5URVJBQ1RJT05fUFJPTVBUX1RIUkVTSE9MRDtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25Qcm9tcHQgPSBJbnRlcmFjdGlvblByb21wdFN0cmF0ZWd5LkFVVE87XG4gICAgICAgICAgICB0aGlzLmludGVyYWN0aW9uUHJvbXB0U3R5bGUgPSBJbnRlcmFjdGlvblByb21wdFN0eWxlLldJR0dMRTtcbiAgICAgICAgICAgIHRoaXMub3JiaXRTZW5zaXRpdml0eSA9IDE7XG4gICAgICAgICAgICB0aGlzLnRvdWNoQWN0aW9uID0gVG91Y2hBY3Rpb24uTk9ORTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVpvb20gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVBhbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlVGFwID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmludGVycG9sYXRpb25EZWNheSA9IERFQ0FZX01JTExJU0VDT05EUztcbiAgICAgICAgICAgIHRoaXNbX2FdID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5pbnRlcmFjdGlvbi1wcm9tcHQnKTtcbiAgICAgICAgICAgIHRoaXNbX2JdID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNwcm9tcHQnKTtcbiAgICAgICAgICAgIHRoaXNbX2NdID0gW1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcjZmluZ2VyMCcpLFxuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcjZmluZ2VyMScpXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgdGhpc1tfZF0gPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLnBhbi10YXJnZXQnKTtcbiAgICAgICAgICAgIHRoaXNbX2VdID0gMDtcbiAgICAgICAgICAgIHRoaXNbX2ZdID0gSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzW19nXSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpc1tfaF0gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXNbX2pdID0gbmV3IFNtb290aENvbnRyb2xzKHRoaXNbJHNjZW5lXS5jYW1lcmEsIHRoaXNbJHVzZXJJbnB1dEVsZW1lbnRdLCB0aGlzWyRzY2VuZV0pO1xuICAgICAgICAgICAgdGhpc1tfa10gPSBuZXcgU3BoZXJpY2FsKCk7XG4gICAgICAgICAgICB0aGlzW19sXSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpc1tfbV0gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXNbX29dID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzW19wXSA9ICh7IHNvdXJjZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpc1skdXBkYXRlQXJpYV0oKTtcbiAgICAgICAgICAgICAgICB0aGlzWyRuZWVkc1JlbmRlcl0oKTtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlID09PSBDaGFuZ2VTb3VyY2UuVVNFUl9JTlRFUkFDVElPTikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyR1c2VySGFzSW50ZXJhY3RlZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRkZWZlckludGVyYWN0aW9uUHJvbXB0XSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdjYW1lcmEtY2hhbmdlJywgeyBkZXRhaWw6IHsgc291cmNlIH0gfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXNbX3FdID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdwb2ludGVyLWNoYW5nZS1zdGFydCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skY29udGFpbmVyXS5jbGFzc0xpc3QuYWRkKCdwb2ludGVyLXR1bWJsaW5nJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRjb250YWluZXJdLmNsYXNzTGlzdC5yZW1vdmUoJ3BvaW50ZXItdHVtYmxpbmcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGdldCBpbnB1dFNlbnNpdGl2aXR5KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbJGNvbnRyb2xzXS5pbnB1dFNlbnNpdGl2aXR5O1xuICAgICAgICB9XG4gICAgICAgIHNldCBpbnB1dFNlbnNpdGl2aXR5KHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzWyRjb250cm9sc10uaW5wdXRTZW5zaXRpdml0eSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGdldENhbWVyYU9yYml0KCkge1xuICAgICAgICAgICAgY29uc3QgeyB0aGV0YSwgcGhpLCByYWRpdXMgfSA9IHRoaXNbJGxhc3RTcGhlcmljYWxdO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aGV0YSxcbiAgICAgICAgICAgICAgICBwaGksXG4gICAgICAgICAgICAgICAgcmFkaXVzLFxuICAgICAgICAgICAgICAgIHRvU3RyaW5nKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7dGhpcy50aGV0YX1yYWQgJHt0aGlzLnBoaX1yYWQgJHt0aGlzLnJhZGl1c31tYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGdldENhbWVyYVRhcmdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0b1ZlY3RvcjNEKHRoaXNbJHJlbmRlcmVyXS5pc1ByZXNlbnRpbmcgPyB0aGlzWyRyZW5kZXJlcl0uYXJSZW5kZXJlci50YXJnZXQgOlxuICAgICAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5nZXRUYXJnZXQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0RmllbGRPZlZpZXcoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skY29udHJvbHNdLmdldEZpZWxkT2ZWaWV3KCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJvdmlkZWQgc28gdXNlciBjb2RlIGRvZXMgbm90IGhhdmUgdG8gcGFyc2UgdGhlc2UgZnJvbSBhdHRyaWJ1dGVzLlxuICAgICAgICBnZXRNaW5pbXVtRmllbGRPZlZpZXcoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skY29udHJvbHNdLm9wdGlvbnMubWluaW11bUZpZWxkT2ZWaWV3O1xuICAgICAgICB9XG4gICAgICAgIGdldE1heGltdW1GaWVsZE9mVmlldygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzWyRjb250cm9sc10ub3B0aW9ucy5tYXhpbXVtRmllbGRPZlZpZXc7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0SWRlYWxBc3BlY3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skc2NlbmVdLmlkZWFsQXNwZWN0O1xuICAgICAgICB9XG4gICAgICAgIGp1bXBDYW1lcmFUb0dvYWwoKSB7XG4gICAgICAgICAgICB0aGlzWyRqdW1wQ2FtZXJhXSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoJGp1bXBDYW1lcmEsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXNldEludGVyYWN0aW9uUHJvbXB0KCkge1xuICAgICAgICAgICAgdGhpc1skbGFzdFByb21wdE9mZnNldF0gPSAwO1xuICAgICAgICAgICAgdGhpc1skcHJvbXB0RWxlbWVudFZpc2libGVUaW1lXSA9IEluZmluaXR5O1xuICAgICAgICAgICAgdGhpc1skdXNlckhhc0ludGVyYWN0ZWRdID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzWyR3YWl0aW5nVG9Qcm9tcHRVc2VyXSA9XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvblByb21wdCA9PT0gSW50ZXJhY3Rpb25Qcm9tcHRTdHJhdGVneS5BVVRPICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhQ29udHJvbHM7XG4gICAgICAgIH1cbiAgICAgICAgem9vbShrZXlQcmVzc2VzKSB7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBXaGVlbEV2ZW50KCd3aGVlbCcsIHsgZGVsdGFZOiAtMzAgKiBrZXlQcmVzc2VzIH0pO1xuICAgICAgICAgICAgdGhpc1skdXNlcklucHV0RWxlbWVudF0uZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgdGhpc1skY29udHJvbHNdLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXNbJG9uQ2hhbmdlXSk7XG4gICAgICAgICAgICB0aGlzWyRjb250cm9sc10uYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlci1jaGFuZ2Utc3RhcnQnLCB0aGlzWyRvblBvaW50ZXJDaGFuZ2VdKTtcbiAgICAgICAgICAgIHRoaXNbJGNvbnRyb2xzXS5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyLWNoYW5nZS1lbmQnLCB0aGlzWyRvblBvaW50ZXJDaGFuZ2VdKTtcbiAgICAgICAgfVxuICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICB0aGlzWyRjb250cm9sc10ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpc1skb25DaGFuZ2VdKTtcbiAgICAgICAgICAgIHRoaXNbJGNvbnRyb2xzXS5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyLWNoYW5nZS1zdGFydCcsIHRoaXNbJG9uUG9pbnRlckNoYW5nZV0pO1xuICAgICAgICAgICAgdGhpc1skY29udHJvbHNdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXItY2hhbmdlLWVuZCcsIHRoaXNbJG9uUG9pbnRlckNoYW5nZV0pO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHN1cGVyLnVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSB0aGlzWyRjb250cm9sc107XG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXNbJHNjZW5lXTtcbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2NhbWVyYUNvbnRyb2xzJykpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW1lcmFDb250cm9scykge1xuICAgICAgICAgICAgICAgICAgICBjb250cm9scy5lbmFibGVJbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnRlcmFjdGlvblByb21wdCA9PT0gSW50ZXJhY3Rpb25Qcm9tcHRTdHJhdGVneS5BVVRPKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWyR3YWl0aW5nVG9Qcm9tcHRVc2VyXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmRpc2FibGVJbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRkZWZlckludGVyYWN0aW9uUHJvbXB0XSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzWyR1c2VySW5wdXRFbGVtZW50XS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzWyRhcmlhTGFiZWxdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2Rpc2FibGVab29tJykpIHtcbiAgICAgICAgICAgICAgICBjb250cm9scy5kaXNhYmxlWm9vbSA9IHRoaXMuZGlzYWJsZVpvb207XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdkaXNhYmxlUGFuJykpIHtcbiAgICAgICAgICAgICAgICBjb250cm9scy5lbmFibGVQYW4gPSAhdGhpcy5kaXNhYmxlUGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnZGlzYWJsZVRhcCcpKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbHMuZW5hYmxlVGFwID0gIXRoaXMuZGlzYWJsZVRhcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2ludGVyYWN0aW9uUHJvbXB0JykgfHxcbiAgICAgICAgICAgICAgICBjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2NhbWVyYUNvbnRyb2xzJykgfHxcbiAgICAgICAgICAgICAgICBjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ3NyYycpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJhY3Rpb25Qcm9tcHQgPT09IEludGVyYWN0aW9uUHJvbXB0U3RyYXRlZ3kuQVVUTyAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYUNvbnRyb2xzICYmICF0aGlzWyR1c2VySGFzSW50ZXJhY3RlZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skd2FpdGluZ1RvUHJvbXB0VXNlcl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skZGVmZXJJbnRlcmFjdGlvblByb21wdF0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdpbnRlcmFjdGlvblByb21wdFN0eWxlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRwcm9tcHRBbmltYXRlZENvbnRhaW5lcl0uc3R5bGUub3BhY2l0eSA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJhY3Rpb25Qcm9tcHRTdHlsZSA9PSBJbnRlcmFjdGlvblByb21wdFN0eWxlLkJBU0lDID8gJzEnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICcwJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ3RvdWNoQWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b3VjaEFjdGlvbiA9IHRoaXMudG91Y2hBY3Rpb247XG4gICAgICAgICAgICAgICAgY29udHJvbHMuYXBwbHlPcHRpb25zKHsgdG91Y2hBY3Rpb24gfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbHMudXBkYXRlVG91Y2hBY3Rpb25TdHlsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnb3JiaXRTZW5zaXRpdml0eScpKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbHMub3JiaXRTZW5zaXRpdml0eSA9IHRoaXMub3JiaXRTZW5zaXRpdml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2ludGVycG9sYXRpb25EZWNheScpKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbHMuc2V0RGFtcGVyRGVjYXlUaW1lKHRoaXMuaW50ZXJwb2xhdGlvbkRlY2F5KTtcbiAgICAgICAgICAgICAgICBzY2VuZS5zZXRUYXJnZXREYW1wZXJEZWNheVRpbWUodGhpcy5pbnRlcnBvbGF0aW9uRGVjYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXNbJGp1bXBDYW1lcmFdID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmp1bXBUb0dvYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUuanVtcFRvR29hbCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRqdW1wQ2FtZXJhXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFzeW5jIHVwZGF0ZUZyYW1pbmcoKSB7XG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXNbJHNjZW5lXTtcbiAgICAgICAgICAgIGNvbnN0IG9sZEZyYW1lZEZvViA9IHNjZW5lLmFkanVzdGVkRm9WKHNjZW5lLmZyYW1lZEZvVkRlZyk7XG4gICAgICAgICAgICBhd2FpdCBzY2VuZS51cGRhdGVGcmFtaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBuZXdGcmFtZWRGb1YgPSBzY2VuZS5hZGp1c3RlZEZvVihzY2VuZS5mcmFtZWRGb1ZEZWcpO1xuICAgICAgICAgICAgY29uc3Qgem9vbSA9IHRoaXNbJGNvbnRyb2xzXS5nZXRGaWVsZE9mVmlldygpIC8gb2xkRnJhbWVkRm9WO1xuICAgICAgICAgICAgdGhpc1skY29udHJvbHNdLnNldEZpZWxkT2ZWaWV3KG5ld0ZyYW1lZEZvViAqIHpvb20pO1xuICAgICAgICAgICAgdGhpc1skbWFpbnRhaW5UaGV0YVBoaV0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCdtYXhGaWVsZE9mVmlldycpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCdmaWVsZE9mVmlldycpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCdtaW5DYW1lcmFPcmJpdCcpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCdtYXhDYW1lcmFPcmJpdCcpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCdjYW1lcmFPcmJpdCcpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVDb21wbGV0ZTtcbiAgICAgICAgfVxuICAgICAgICBpbnRlcmFjdChkdXJhdGlvbiwgZmluZ2VyMCwgZmluZ2VyMSkge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gdGhpc1skdXNlcklucHV0RWxlbWVudF07XG4gICAgICAgICAgICBjb25zdCBmaW5nZXJFbGVtZW50cyA9IHRoaXNbJGZpbmdlckFuaW1hdGVkQ29udGFpbmVyc107XG4gICAgICAgICAgICBpZiAoZmluZ2VyRWxlbWVudHNbMF0uc3R5bGUub3BhY2l0eSA9PT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdpbnRlcmFjdCgpIGZhaWxlZCBiZWNhdXNlIGFuIGV4aXN0aW5nIGludGVyYWN0aW9uIGlzIHJ1bm5pbmcuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeHkgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgIHh5LnB1c2goeyB4OiB0aW1lbGluZShmaW5nZXIwLngpLCB5OiB0aW1lbGluZShmaW5nZXIwLnkpIH0pO1xuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25zID0gW3sgeDogeHlbMF0ueCgwKSwgeTogeHlbMF0ueSgwKSB9XTtcbiAgICAgICAgICAgIGlmIChmaW5nZXIxICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB4eS5wdXNoKHsgeDogdGltZWxpbmUoZmluZ2VyMS54KSwgeTogdGltZWxpbmUoZmluZ2VyMS55KSB9KTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaCh7IHg6IHh5WzFdLngoMCksIHk6IHh5WzFdLnkoMCkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXNbJHNjZW5lXTtcbiAgICAgICAgICAgIGNvbnN0IGRpc3BhdGNoVG91Y2hlcyA9ICh0eXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaSwgcG9zaXRpb25dIG9mIHBvc2l0aW9ucy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzdHlsZSB9ID0gZmluZ2VyRWxlbWVudHNbaV07XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7d2lkdGggKiBwb3NpdGlvbi54fXB4KSB0cmFuc2xhdGVZKCR7aGVpZ2h0ICogcG9zaXRpb24ueX1weClgO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3BvaW50ZXJkb3duJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAncG9pbnRlcnVwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbml0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRlcklkOiBpIC0gNTY3OCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXJUeXBlOiAndG91Y2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBpbnB1dEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRYOiB3aWR0aCAqIHBvc2l0aW9uLngsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRZOiBoZWlnaHQgKiBwb3NpdGlvbi55LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0S2V5OiB0cnVlIC8vIGZsYWcgdGhhdCB0aGlzIGlzIG5vdCBhIHVzZXIgaW50ZXJhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IFBvaW50ZXJFdmVudCh0eXBlLCBpbml0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IG1vdmVUb3VjaGVzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENhbmNlbCBpbnRlcmFjdGlvbiBpZiBzb21ldGhpbmcgZWxzZSBtb3ZlcyB0aGUgY2FtZXJhIG9yIGlucHV0IGlzXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlZCBmcm9tIHRoZSBET00uXG4gICAgICAgICAgICAgICAgY29uc3QgeyBjaGFuZ2VTb3VyY2UgfSA9IHRoaXNbJGNvbnRyb2xzXTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbmdlU291cmNlICE9PSBDaGFuZ2VTb3VyY2UuQVVUT01BVElDIHx8XG4gICAgICAgICAgICAgICAgICAgICFpbnB1dEVsZW1lbnQuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaW5nZXJFbGVtZW50IG9mIHRoaXNbJGZpbmdlckFuaW1hdGVkQ29udGFpbmVyc10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmdlckVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaFRvdWNoZXMoJ3BvaW50ZXJjYW5jZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnaW50ZXJhY3Qtc3RvcHBlZCcsIHsgZGV0YWlsOiB7IHNvdXJjZTogY2hhbmdlU291cmNlIH0gfSkpO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lID0gTWF0aC5taW4oMSwgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lKSAvIGR1cmF0aW9uKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtpLCBwb3NpdGlvbl0gb2YgcG9zaXRpb25zLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi54ID0geHlbaV0ueCh0aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ueSA9IHh5W2ldLnkodGltZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpc3BhdGNoVG91Y2hlcygncG9pbnRlcm1vdmUnKTtcbiAgICAgICAgICAgICAgICBpZiAodGltZSA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG1vdmVUb3VjaGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoVG91Y2hlcygncG9pbnRlcnVwJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2ludGVyYWN0LXN0b3BwZWQnLCB7IGRldGFpbDogeyBzb3VyY2U6IGNoYW5nZVNvdXJjZSB9IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIG9uVmlzaWJpbGl0eUNoYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IG9uVmlzaWJpbGl0eUNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZWxhcHNlZCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxhcHNlZCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBlbGFwc2VkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgb25WaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgICAgICAgIGRpc3BhdGNoVG91Y2hlcygncG9pbnRlcmRvd24nKTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShtb3ZlVG91Y2hlcyk7XG4gICAgICAgIH1cbiAgICAgICAgWyhfYSA9ICRwcm9tcHRFbGVtZW50LCBfYiA9ICRwcm9tcHRBbmltYXRlZENvbnRhaW5lciwgX2MgPSAkZmluZ2VyQW5pbWF0ZWRDb250YWluZXJzLCBfZCA9ICRwYW5FbGVtZW50LCBfZSA9ICRsYXN0UHJvbXB0T2Zmc2V0LCBfZiA9ICRwcm9tcHRFbGVtZW50VmlzaWJsZVRpbWUsIF9nID0gJHVzZXJIYXNJbnRlcmFjdGVkLCBfaCA9ICR3YWl0aW5nVG9Qcm9tcHRVc2VyLCBfaiA9ICRjb250cm9scywgX2sgPSAkbGFzdFNwaGVyaWNhbCwgX2wgPSAkanVtcENhbWVyYSwgX20gPSAkaW5pdGlhbGl6ZWQsIF9vID0gJG1haW50YWluVGhldGFQaGksICRzeW5jRmllbGRPZlZpZXcpXShzdHlsZSkge1xuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzWyRzY2VuZV07XG4gICAgICAgICAgICBzY2VuZS5mcmFtZWRGb1ZEZWcgPSBzdHlsZVswXSAqIDE4MCAvIE1hdGguUEk7XG4gICAgICAgICAgICB0aGlzWyRjb250cm9sc10uc2V0RmllbGRPZlZpZXcoc2NlbmUuYWRqdXN0ZWRGb1Yoc2NlbmUuZnJhbWVkRm9WRGVnKSk7XG4gICAgICAgIH1cbiAgICAgICAgWyRzeW5jQ2FtZXJhT3JiaXRdKHN0eWxlKSB7XG4gICAgICAgICAgICBjb25zdCBjb250cm9scyA9IHRoaXNbJGNvbnRyb2xzXTtcbiAgICAgICAgICAgIGlmICh0aGlzWyRtYWludGFpblRoZXRhUGhpXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdGhldGEsIHBoaSB9ID0gdGhpcy5nZXRDYW1lcmFPcmJpdCgpO1xuICAgICAgICAgICAgICAgIHN0eWxlWzBdID0gdGhldGE7XG4gICAgICAgICAgICAgICAgc3R5bGVbMV0gPSBwaGk7XG4gICAgICAgICAgICAgICAgdGhpc1skbWFpbnRhaW5UaGV0YVBoaV0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xzLmNoYW5nZVNvdXJjZSA9IENoYW5nZVNvdXJjZS5OT05FO1xuICAgICAgICAgICAgY29udHJvbHMuc2V0T3JiaXQoc3R5bGVbMF0sIHN0eWxlWzFdLCBzdHlsZVsyXSk7XG4gICAgICAgIH1cbiAgICAgICAgWyRzeW5jTWluQ2FtZXJhT3JiaXRdKHN0eWxlKSB7XG4gICAgICAgICAgICB0aGlzWyRjb250cm9sc10uYXBwbHlPcHRpb25zKHtcbiAgICAgICAgICAgICAgICBtaW5pbXVtQXppbXV0aGFsQW5nbGU6IHN0eWxlWzBdLFxuICAgICAgICAgICAgICAgIG1pbmltdW1Qb2xhckFuZ2xlOiBzdHlsZVsxXSxcbiAgICAgICAgICAgICAgICBtaW5pbXVtUmFkaXVzOiBzdHlsZVsyXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmp1bXBDYW1lcmFUb0dvYWwoKTtcbiAgICAgICAgfVxuICAgICAgICBbJHN5bmNNYXhDYW1lcmFPcmJpdF0oc3R5bGUpIHtcbiAgICAgICAgICAgIHRoaXNbJGNvbnRyb2xzXS5hcHBseU9wdGlvbnMoe1xuICAgICAgICAgICAgICAgIG1heGltdW1BemltdXRoYWxBbmdsZTogc3R5bGVbMF0sXG4gICAgICAgICAgICAgICAgbWF4aW11bVBvbGFyQW5nbGU6IHN0eWxlWzFdLFxuICAgICAgICAgICAgICAgIG1heGltdW1SYWRpdXM6IHN0eWxlWzJdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXNbJHVwZGF0ZUNhbWVyYUZvclJhZGl1c10oc3R5bGVbMl0pO1xuICAgICAgICAgICAgdGhpcy5qdW1wQ2FtZXJhVG9Hb2FsKCk7XG4gICAgICAgIH1cbiAgICAgICAgWyRzeW5jTWluRmllbGRPZlZpZXddKHN0eWxlKSB7XG4gICAgICAgICAgICB0aGlzWyRjb250cm9sc10uYXBwbHlPcHRpb25zKHsgbWluaW11bUZpZWxkT2ZWaWV3OiBzdHlsZVswXSAqIDE4MCAvIE1hdGguUEkgfSk7XG4gICAgICAgICAgICB0aGlzLmp1bXBDYW1lcmFUb0dvYWwoKTtcbiAgICAgICAgfVxuICAgICAgICBbJHN5bmNNYXhGaWVsZE9mVmlld10oc3R5bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdiA9IHRoaXNbJHNjZW5lXS5hZGp1c3RlZEZvVihzdHlsZVswXSAqIDE4MCAvIE1hdGguUEkpO1xuICAgICAgICAgICAgdGhpc1skY29udHJvbHNdLmFwcGx5T3B0aW9ucyh7IG1heGltdW1GaWVsZE9mVmlldzogZm92IH0pO1xuICAgICAgICAgICAgdGhpcy5qdW1wQ2FtZXJhVG9Hb2FsKCk7XG4gICAgICAgIH1cbiAgICAgICAgWyRzeW5jQ2FtZXJhVGFyZ2V0XShzdHlsZSkge1xuICAgICAgICAgICAgY29uc3QgW3gsIHksIHpdID0gc3R5bGU7XG4gICAgICAgICAgICBpZiAoIXRoaXNbJHJlbmRlcmVyXS5hclJlbmRlcmVyLmlzUHJlc2VudGluZykge1xuICAgICAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5zZXRUYXJnZXQoeCwgeSwgeik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzWyRjb250cm9sc10uY2hhbmdlU291cmNlID0gQ2hhbmdlU291cmNlLk5PTkU7XG4gICAgICAgICAgICB0aGlzWyRyZW5kZXJlcl0uYXJSZW5kZXJlci51cGRhdGVUYXJnZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBbJHRpY2tdKHRpbWUsIGRlbHRhKSB7XG4gICAgICAgICAgICBzdXBlclskdGlja10odGltZSwgZGVsdGEpO1xuICAgICAgICAgICAgaWYgKHRoaXNbJHJlbmRlcmVyXS5pc1ByZXNlbnRpbmcgfHwgIXRoaXNbJGdldE1vZGVsSXNWaXNpYmxlXSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSB0aGlzWyRjb250cm9sc107XG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXNbJHNjZW5lXTtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgaWYgKHRoaXNbJHdhaXRpbmdUb1Byb21wdFVzZXJdKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZGVkICYmXG4gICAgICAgICAgICAgICAgICAgIG5vdyA+IHRoaXNbJGxvYWRlZFRpbWVdICsgdGhpcy5pbnRlcmFjdGlvblByb21wdFRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyR3YWl0aW5nVG9Qcm9tcHRVc2VyXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRwcm9tcHRFbGVtZW50VmlzaWJsZVRpbWVdID0gbm93O1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRwcm9tcHRFbGVtZW50XS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRmluaXRlKHRoaXNbJHByb21wdEVsZW1lbnRWaXNpYmxlVGltZV0pICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGlvblByb21wdFN0eWxlID09PSBJbnRlcmFjdGlvblByb21wdFN0eWxlLldJR0dMRSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvblRpbWUgPSAoKG5vdyAtIHRoaXNbJHByb21wdEVsZW1lbnRWaXNpYmxlVGltZV0pIC8gUFJPTVBUX0FOSU1BVElPTl9USU1FKSAlXG4gICAgICAgICAgICAgICAgICAgIDE7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gd2lnZ2xlKGFuaW1hdGlvblRpbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wYWNpdHkgPSBmYWRlKGFuaW1hdGlvblRpbWUpO1xuICAgICAgICAgICAgICAgIHRoaXNbJHByb21wdEFuaW1hdGVkQ29udGFpbmVyXS5zdHlsZS5vcGFjaXR5ID0gYCR7b3BhY2l0eX1gO1xuICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgIT09IHRoaXNbJGxhc3RQcm9tcHRPZmZzZXRdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHhPZmZzZXQgPSBvZmZzZXQgKiBzY2VuZS53aWR0aCAqIDAuMDU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhVGhldGEgPSAob2Zmc2V0IC0gdGhpc1skbGFzdFByb21wdE9mZnNldF0pICogTWF0aC5QSSAvIDE2O1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRwcm9tcHRBbmltYXRlZENvbnRhaW5lcl0uc3R5bGUudHJhbnNmb3JtID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGB0cmFuc2xhdGVYKCR7eE9mZnNldH1weClgO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9scy5jaGFuZ2VTb3VyY2UgPSBDaGFuZ2VTb3VyY2UuQVVUT01BVElDO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9scy5hZGp1c3RPcmJpdChkZWx0YVRoZXRhLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skbGFzdFByb21wdE9mZnNldF0gPSBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbHMudXBkYXRlKHRpbWUsIGRlbHRhKTtcbiAgICAgICAgICAgIGlmIChzY2VuZS51cGRhdGVUYXJnZXQoZGVsdGEpKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skb25DaGFuZ2VdKHsgdHlwZTogJ2NoYW5nZScsIHNvdXJjZTogY29udHJvbHMuY2hhbmdlU291cmNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFskZGVmZXJJbnRlcmFjdGlvblByb21wdF0oKSB7XG4gICAgICAgICAgICAvLyBFZmZlY3RpdmVseSBjYW5jZWwgdGhlIHRpbWVyIHdhaXRpbmcgZm9yIHVzZXIgaW50ZXJhY3Rpb246XG4gICAgICAgICAgICB0aGlzWyR3YWl0aW5nVG9Qcm9tcHRVc2VyXSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpc1skcHJvbXB0RWxlbWVudF0uY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICAgICAgdGhpc1skcHJvbXB0RWxlbWVudFZpc2libGVUaW1lXSA9IEluZmluaXR5O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGVzIHRoZSBjYW1lcmEncyBuZWFyIGFuZCBmYXIgcGxhbmVzIHRvIGVuY2xvc2UgdGhlIHNjZW5lIHdoZW5cbiAgICAgICAgICogb3JiaXRpbmcgYXQgdGhlIHN1cHBsaWVkIHJhZGl1cy5cbiAgICAgICAgICovXG4gICAgICAgIFskdXBkYXRlQ2FtZXJhRm9yUmFkaXVzXShyYWRpdXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1heGltdW1SYWRpdXMgPSBNYXRoLm1heCh0aGlzWyRzY2VuZV0uYm91bmRpbmdTcGhlcmUucmFkaXVzLCByYWRpdXMpO1xuICAgICAgICAgICAgY29uc3QgbmVhciA9IDA7XG4gICAgICAgICAgICBjb25zdCBmYXIgPSAyICogbWF4aW11bVJhZGl1cztcbiAgICAgICAgICAgIHRoaXNbJGNvbnRyb2xzXS51cGRhdGVOZWFyRmFyKG5lYXIsIGZhcik7XG4gICAgICAgIH1cbiAgICAgICAgWyR1cGRhdGVBcmlhXSgpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdGhldGEsIHBoaSB9ID0gdGhpc1skY29udHJvbHNdLmdldENhbWVyYVNwaGVyaWNhbCh0aGlzWyRsYXN0U3BoZXJpY2FsXSk7XG4gICAgICAgICAgICBjb25zdCBhemltdXRoYWxRdWFkcmFudCA9ICg0ICsgTWF0aC5mbG9vcigoKHRoZXRhICUgVEFVKSArIFFVQVJURVJfUEkpIC8gSEFMRl9QSSkpICUgNDtcbiAgICAgICAgICAgIGNvbnN0IHBvbGFyVHJpZW50ID0gTWF0aC5mbG9vcihwaGkgLyBUSElSRF9QSSk7XG4gICAgICAgICAgICBjb25zdCBhemltdXRoYWxRdWFkcmFudExhYmVsID0gQVpJTVVUSEFMX1FVQURSQU5UX0xBQkVMU1themltdXRoYWxRdWFkcmFudF07XG4gICAgICAgICAgICBjb25zdCBwb2xhclRyaWVudExhYmVsID0gUE9MQVJfVFJJRU5UX0xBQkVMU1twb2xhclRyaWVudF07XG4gICAgICAgICAgICB0aGlzWyR1cGRhdGVTdGF0dXNdKGBWaWV3IGZyb20gc3RhZ2UgJHtwb2xhclRyaWVudExhYmVsfSR7YXppbXV0aGFsUXVhZHJhbnRMYWJlbH1gKTtcbiAgICAgICAgfVxuICAgICAgICBnZXQgWyRhcmlhTGFiZWxdKCkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyWyRhcmlhTGFiZWxdICtcbiAgICAgICAgICAgICAgICAodGhpcy5jYW1lcmFDb250cm9scyA/IElOVEVSQUNUSU9OX1BST01QVCA6ICcnKTtcbiAgICAgICAgfVxuICAgICAgICBhc3luYyBbJG9uUmVzaXplXShldmVudCkge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSB0aGlzWyRjb250cm9sc107XG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXNbJHNjZW5lXTtcbiAgICAgICAgICAgIGNvbnN0IG9sZEZyYW1lZEZvViA9IHNjZW5lLmFkanVzdGVkRm9WKHNjZW5lLmZyYW1lZEZvVkRlZyk7XG4gICAgICAgICAgICAvLyBUaGUgc3VwZXIgb2YgJG9uUmVzaXplIG1heSB1cGRhdGUgdGhlIHNjZW5lJ3MgYWRqdXN0ZWRGb1YsIHNvIHdlXG4gICAgICAgICAgICAvLyBjb21wYXJlIHRoZSBiZWZvcmUgYW5kIGFmdGVyIHRvIGNhbGN1bGF0ZSB0aGUgcHJvcGVyIHpvb20uXG4gICAgICAgICAgICBzdXBlclskb25SZXNpemVdKGV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGZvdlJhdGlvID0gc2NlbmUuYWRqdXN0ZWRGb1Yoc2NlbmUuZnJhbWVkRm9WRGVnKSAvIG9sZEZyYW1lZEZvVjtcbiAgICAgICAgICAgIGNvbnN0IGZvdiA9IGNvbnRyb2xzLmdldEZpZWxkT2ZWaWV3KCkgKiAoaXNGaW5pdGUoZm92UmF0aW8pID8gZm92UmF0aW8gOiAxKTtcbiAgICAgICAgICAgIGNvbnRyb2xzLnVwZGF0ZUFzcGVjdCh0aGlzWyRzY2VuZV0uYXNwZWN0KTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgnbWF4RmllbGRPZlZpZXcnLCB0aGlzLm1heEZpZWxkT2ZWaWV3KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ29tcGxldGU7XG4gICAgICAgICAgICB0aGlzWyRjb250cm9sc10uc2V0RmllbGRPZlZpZXcoZm92KTtcbiAgICAgICAgICAgIHRoaXMuanVtcENhbWVyYVRvR29hbCgpO1xuICAgICAgICB9XG4gICAgICAgIFskb25Nb2RlbExvYWRdKCkge1xuICAgICAgICAgICAgc3VwZXJbJG9uTW9kZWxMb2FkXSgpO1xuICAgICAgICAgICAgaWYgKHRoaXNbJGluaXRpYWxpemVkXSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJG1haW50YWluVGhldGFQaGldID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXNbJGluaXRpYWxpemVkXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoJ21heEZpZWxkT2ZWaWV3JywgdGhpcy5tYXhGaWVsZE9mVmlldyk7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoJ2ZpZWxkT2ZWaWV3JywgdGhpcy5maWVsZE9mVmlldyk7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoJ21pbkNhbWVyYU9yYml0JywgdGhpcy5taW5DYW1lcmFPcmJpdCk7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoJ21heENhbWVyYU9yYml0JywgdGhpcy5tYXhDYW1lcmFPcmJpdCk7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoJ2NhbWVyYU9yYml0JywgdGhpcy5jYW1lcmFPcmJpdCk7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVcGRhdGUoJ2NhbWVyYVRhcmdldCcsIHRoaXMuY2FtZXJhVGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuanVtcENhbWVyYVRvR29hbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9wID0gJG9uQ2hhbmdlLCBfcSA9ICRvblBvaW50ZXJDaGFuZ2U7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiAnY2FtZXJhLWNvbnRyb2xzJyB9KVxuICAgIF0sIENvbnRyb2xzTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJjYW1lcmFDb250cm9sc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICBpbnRyaW5zaWNzOiBjYW1lcmFPcmJpdEludHJpbnNpY3MsXG4gICAgICAgICAgICBvYnNlcnZlRWZmZWN0czogdHJ1ZSxcbiAgICAgICAgICAgIHVwZGF0ZUhhbmRsZXI6ICRzeW5jQ2FtZXJhT3JiaXRcbiAgICAgICAgfSksXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBhdHRyaWJ1dGU6ICdjYW1lcmEtb3JiaXQnLCBoYXNDaGFuZ2VkOiAoKSA9PiB0cnVlIH0pXG4gICAgXSwgQ29udHJvbHNNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImNhbWVyYU9yYml0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgIGludHJpbnNpY3M6IGNhbWVyYVRhcmdldEludHJpbnNpY3MsXG4gICAgICAgICAgICBvYnNlcnZlRWZmZWN0czogdHJ1ZSxcbiAgICAgICAgICAgIHVwZGF0ZUhhbmRsZXI6ICRzeW5jQ2FtZXJhVGFyZ2V0XG4gICAgICAgIH0pLFxuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgYXR0cmlidXRlOiAnY2FtZXJhLXRhcmdldCcsIGhhc0NoYW5nZWQ6ICgpID0+IHRydWUgfSlcbiAgICBdLCBDb250cm9sc01vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwiY2FtZXJhVGFyZ2V0XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgIGludHJpbnNpY3M6IGZpZWxkT2ZWaWV3SW50cmluc2ljcyxcbiAgICAgICAgICAgIG9ic2VydmVFZmZlY3RzOiB0cnVlLFxuICAgICAgICAgICAgdXBkYXRlSGFuZGxlcjogJHN5bmNGaWVsZE9mVmlld1xuICAgICAgICB9KSxcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ2ZpZWxkLW9mLXZpZXcnLCBoYXNDaGFuZ2VkOiAoKSA9PiB0cnVlIH0pXG4gICAgXSwgQ29udHJvbHNNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImZpZWxkT2ZWaWV3XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHN0eWxlKHtcbiAgICAgICAgICAgIGludHJpbnNpY3M6IG1pbkNhbWVyYU9yYml0SW50cmluc2ljcyxcbiAgICAgICAgICAgIHVwZGF0ZUhhbmRsZXI6ICRzeW5jTWluQ2FtZXJhT3JiaXRcbiAgICAgICAgfSksXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBhdHRyaWJ1dGU6ICdtaW4tY2FtZXJhLW9yYml0JywgaGFzQ2hhbmdlZDogKCkgPT4gdHJ1ZSB9KVxuICAgIF0sIENvbnRyb2xzTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJtaW5DYW1lcmFPcmJpdFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzdHlsZSh7XG4gICAgICAgICAgICBpbnRyaW5zaWNzOiBtYXhDYW1lcmFPcmJpdEludHJpbnNpY3MsXG4gICAgICAgICAgICB1cGRhdGVIYW5kbGVyOiAkc3luY01heENhbWVyYU9yYml0XG4gICAgICAgIH0pLFxuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgYXR0cmlidXRlOiAnbWF4LWNhbWVyYS1vcmJpdCcsIGhhc0NoYW5nZWQ6ICgpID0+IHRydWUgfSlcbiAgICBdLCBDb250cm9sc01vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwibWF4Q2FtZXJhT3JiaXRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgc3R5bGUoe1xuICAgICAgICAgICAgaW50cmluc2ljczogbWluRmllbGRPZlZpZXdJbnRyaW5zaWNzLFxuICAgICAgICAgICAgdXBkYXRlSGFuZGxlcjogJHN5bmNNaW5GaWVsZE9mVmlld1xuICAgICAgICB9KSxcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ21pbi1maWVsZC1vZi12aWV3JywgaGFzQ2hhbmdlZDogKCkgPT4gdHJ1ZSB9KVxuICAgIF0sIENvbnRyb2xzTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJtaW5GaWVsZE9mVmlld1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzdHlsZSh7IGludHJpbnNpY3M6IGZpZWxkT2ZWaWV3SW50cmluc2ljcywgdXBkYXRlSGFuZGxlcjogJHN5bmNNYXhGaWVsZE9mVmlldyB9KSxcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ21heC1maWVsZC1vZi12aWV3JywgaGFzQ2hhbmdlZDogKCkgPT4gdHJ1ZSB9KVxuICAgIF0sIENvbnRyb2xzTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJtYXhGaWVsZE9mVmlld1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IE51bWJlciwgYXR0cmlidXRlOiAnaW50ZXJhY3Rpb24tcHJvbXB0LXRocmVzaG9sZCcgfSlcbiAgICBdLCBDb250cm9sc01vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwiaW50ZXJhY3Rpb25Qcm9tcHRUaHJlc2hvbGRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ2ludGVyYWN0aW9uLXByb21wdCcgfSlcbiAgICBdLCBDb250cm9sc01vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwiaW50ZXJhY3Rpb25Qcm9tcHRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ2ludGVyYWN0aW9uLXByb21wdC1zdHlsZScgfSlcbiAgICBdLCBDb250cm9sc01vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwiaW50ZXJhY3Rpb25Qcm9tcHRTdHlsZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IE51bWJlciwgYXR0cmlidXRlOiAnb3JiaXQtc2Vuc2l0aXZpdHknIH0pXG4gICAgXSwgQ29udHJvbHNNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcIm9yYml0U2Vuc2l0aXZpdHlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ3RvdWNoLWFjdGlvbicgfSlcbiAgICBdLCBDb250cm9sc01vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwidG91Y2hBY3Rpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6ICdkaXNhYmxlLXpvb20nIH0pXG4gICAgXSwgQ29udHJvbHNNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImRpc2FibGVab29tXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgYXR0cmlidXRlOiAnZGlzYWJsZS1wYW4nIH0pXG4gICAgXSwgQ29udHJvbHNNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImRpc2FibGVQYW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6ICdkaXNhYmxlLXRhcCcgfSlcbiAgICBdLCBDb250cm9sc01vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwiZGlzYWJsZVRhcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IE51bWJlciwgYXR0cmlidXRlOiAnaW50ZXJwb2xhdGlvbi1kZWNheScgfSlcbiAgICBdLCBDb250cm9sc01vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwiaW50ZXJwb2xhdGlvbkRlY2F5XCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIENvbnRyb2xzTW9kZWxWaWV3ZXJFbGVtZW50O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRyb2xzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/controls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/environment.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/environment.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $currentBackground: () => (/* binding */ $currentBackground),\n/* harmony export */   $currentEnvironmentMap: () => (/* binding */ $currentEnvironmentMap),\n/* harmony export */   $updateEnvironment: () => (/* binding */ $updateEnvironment),\n/* harmony export */   BASE_OPACITY: () => (/* binding */ BASE_OPACITY),\n/* harmony export */   EnvironmentMixin: () => (/* binding */ EnvironmentMixin)\n/* harmony export */ });\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/decorators.js */ \"(ssr)/./node_modules/lit/decorators.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\nconst BASE_OPACITY = 0.5;\nconst DEFAULT_SHADOW_INTENSITY = 0.0;\nconst DEFAULT_SHADOW_SOFTNESS = 1.0;\nconst DEFAULT_EXPOSURE = 1.0;\nconst $currentEnvironmentMap = Symbol('currentEnvironmentMap');\nconst $currentBackground = Symbol('currentBackground');\nconst $updateEnvironment = Symbol('updateEnvironment');\nconst $cancelEnvironmentUpdate = Symbol('cancelEnvironmentUpdate');\nconst EnvironmentMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class EnvironmentModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.environmentImage = null;\n            this.skyboxImage = null;\n            this.shadowIntensity = DEFAULT_SHADOW_INTENSITY;\n            this.shadowSoftness = DEFAULT_SHADOW_SOFTNESS;\n            this.exposure = DEFAULT_EXPOSURE;\n            this[_a] = null;\n            this[_b] = null;\n            this[_c] = null;\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('shadowIntensity')) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].setShadowIntensity(this.shadowIntensity * BASE_OPACITY);\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n            }\n            if (changedProperties.has('shadowSoftness')) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].setShadowSoftness(this.shadowSoftness);\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n            }\n            if (changedProperties.has('exposure')) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].exposure = this.exposure;\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n            }\n            if ((changedProperties.has('environmentImage') ||\n                changedProperties.has('skyboxImage')) &&\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$shouldAttemptPreload]()) {\n                this[$updateEnvironment]();\n            }\n        }\n        hasBakedShadow() {\n            return this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].bakedShadows.size > 0;\n        }\n        async [(_a = $currentEnvironmentMap, _b = $currentBackground, _c = $cancelEnvironmentUpdate, $updateEnvironment)]() {\n            const { skyboxImage, environmentImage } = this;\n            if (this[$cancelEnvironmentUpdate] != null) {\n                this[$cancelEnvironmentUpdate]();\n                this[$cancelEnvironmentUpdate] = null;\n            }\n            const { textureUtils } = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$renderer];\n            if (textureUtils == null) {\n                return;\n            }\n            const updateEnvProgress = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$progressTracker].beginActivity();\n            try {\n                const { environmentMap, skybox } = await textureUtils.generateEnvironmentMapAndSkybox((0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.deserializeUrl)(skyboxImage), environmentImage, (progress) => updateEnvProgress((0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(progress, 0, 1)));\n                if (this[$currentEnvironmentMap] !== environmentMap) {\n                    this[$currentEnvironmentMap] = environmentMap;\n                    this.dispatchEvent(new CustomEvent('environment-change'));\n                }\n                if (skybox != null) {\n                    // When using the same environment and skybox, use the environment as\n                    // it gives HDR filtering.\n                    this[$currentBackground] =\n                        skybox.name === environmentMap.name ? environmentMap : skybox;\n                }\n                else {\n                    this[$currentBackground] = null;\n                }\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].setEnvironmentAndSkybox(this[$currentEnvironmentMap], this[$currentBackground]);\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].dispatchEvent({ type: 'envmap-update' });\n            }\n            catch (errorOrPromise) {\n                if (errorOrPromise instanceof Error) {\n                    this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].setEnvironmentAndSkybox(null, null);\n                    throw errorOrPromise;\n                }\n            }\n            finally {\n                updateEnvProgress(1.0);\n            }\n        }\n    }\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'environment-image' })\n    ], EnvironmentModelViewerElement.prototype, \"environmentImage\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'skybox-image' })\n    ], EnvironmentModelViewerElement.prototype, \"skyboxImage\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Number, attribute: 'shadow-intensity' })\n    ], EnvironmentModelViewerElement.prototype, \"shadowIntensity\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Number, attribute: 'shadow-softness' })\n    ], EnvironmentModelViewerElement.prototype, \"shadowSoftness\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({\n            type: Number,\n        })\n    ], EnvironmentModelViewerElement.prototype, \"exposure\", void 0);\n    return EnvironmentModelViewerElement;\n};\n//# sourceMappingURL=environment.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL2Vudmlyb25tZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFJLElBQUksU0FBSTtBQUM5QjtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTtBQUM2QztBQUNzRTtBQUMzRDtBQUNqRDtBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5REFBTTtBQUMzQixxQkFBcUIsK0RBQVk7QUFDakM7QUFDQTtBQUNBLHFCQUFxQix5REFBTTtBQUMzQixxQkFBcUIsK0RBQVk7QUFDakM7QUFDQTtBQUNBLHFCQUFxQix5REFBTTtBQUMzQixxQkFBcUIsK0RBQVk7QUFDakM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHdFQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5REFBTTtBQUM5QjtBQUNBO0FBQ0Esb0JBQW9CLGdDQUFnQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixlQUFlLE9BQU8sNERBQVM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLG1FQUFnQjtBQUMzRDtBQUNBLHdCQUF3Qix5QkFBeUIscURBQXFELDZEQUFjLGlFQUFpRSxvREFBSztBQUMxTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix5REFBTTtBQUMzQixxQkFBcUIseURBQU0sa0JBQWtCLHVCQUF1QjtBQUNwRTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseURBQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLDhDQUE4QztBQUNqRTtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLHlDQUF5QztBQUM1RDtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLDZDQUE2QztBQUNoRTtBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLDRDQUE0QztBQUMvRDtBQUNBO0FBQ0EsUUFBUSwyREFBUTtBQUNoQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZmVhdHVyZXMvZW52aXJvbm1lbnQuanM/YjI5MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7ICRuZWVkc1JlbmRlciwgJHByb2dyZXNzVHJhY2tlciwgJHJlbmRlcmVyLCAkc2NlbmUsICRzaG91bGRBdHRlbXB0UHJlbG9hZCB9IGZyb20gJy4uL21vZGVsLXZpZXdlci1iYXNlLmpzJztcbmltcG9ydCB7IGNsYW1wLCBkZXNlcmlhbGl6ZVVybCB9IGZyb20gJy4uL3V0aWxpdGllcy5qcyc7XG5leHBvcnQgY29uc3QgQkFTRV9PUEFDSVRZID0gMC41O1xuY29uc3QgREVGQVVMVF9TSEFET1dfSU5URU5TSVRZID0gMC4wO1xuY29uc3QgREVGQVVMVF9TSEFET1dfU09GVE5FU1MgPSAxLjA7XG5jb25zdCBERUZBVUxUX0VYUE9TVVJFID0gMS4wO1xuZXhwb3J0IGNvbnN0ICRjdXJyZW50RW52aXJvbm1lbnRNYXAgPSBTeW1ib2woJ2N1cnJlbnRFbnZpcm9ubWVudE1hcCcpO1xuZXhwb3J0IGNvbnN0ICRjdXJyZW50QmFja2dyb3VuZCA9IFN5bWJvbCgnY3VycmVudEJhY2tncm91bmQnKTtcbmV4cG9ydCBjb25zdCAkdXBkYXRlRW52aXJvbm1lbnQgPSBTeW1ib2woJ3VwZGF0ZUVudmlyb25tZW50Jyk7XG5jb25zdCAkY2FuY2VsRW52aXJvbm1lbnRVcGRhdGUgPSBTeW1ib2woJ2NhbmNlbEVudmlyb25tZW50VXBkYXRlJyk7XG5leHBvcnQgY29uc3QgRW52aXJvbm1lbnRNaXhpbiA9IChNb2RlbFZpZXdlckVsZW1lbnQpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjbGFzcyBFbnZpcm9ubWVudE1vZGVsVmlld2VyRWxlbWVudCBleHRlbmRzIE1vZGVsVmlld2VyRWxlbWVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuZW52aXJvbm1lbnRJbWFnZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNreWJveEltYWdlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc2hhZG93SW50ZW5zaXR5ID0gREVGQVVMVF9TSEFET1dfSU5URU5TSVRZO1xuICAgICAgICAgICAgdGhpcy5zaGFkb3dTb2Z0bmVzcyA9IERFRkFVTFRfU0hBRE9XX1NPRlRORVNTO1xuICAgICAgICAgICAgdGhpcy5leHBvc3VyZSA9IERFRkFVTFRfRVhQT1NVUkU7XG4gICAgICAgICAgICB0aGlzW19hXSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzW19iXSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzW19jXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICAgICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdzaGFkb3dJbnRlbnNpdHknKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5zZXRTaGFkb3dJbnRlbnNpdHkodGhpcy5zaGFkb3dJbnRlbnNpdHkgKiBCQVNFX09QQUNJVFkpO1xuICAgICAgICAgICAgICAgIHRoaXNbJG5lZWRzUmVuZGVyXSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnc2hhZG93U29mdG5lc3MnKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5zZXRTaGFkb3dTb2Z0bmVzcyh0aGlzLnNoYWRvd1NvZnRuZXNzKTtcbiAgICAgICAgICAgICAgICB0aGlzWyRuZWVkc1JlbmRlcl0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2V4cG9zdXJlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRzY2VuZV0uZXhwb3N1cmUgPSB0aGlzLmV4cG9zdXJlO1xuICAgICAgICAgICAgICAgIHRoaXNbJG5lZWRzUmVuZGVyXSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2Vudmlyb25tZW50SW1hZ2UnKSB8fFxuICAgICAgICAgICAgICAgIGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnc2t5Ym94SW1hZ2UnKSkgJiZcbiAgICAgICAgICAgICAgICB0aGlzWyRzaG91bGRBdHRlbXB0UHJlbG9hZF0oKSkge1xuICAgICAgICAgICAgICAgIHRoaXNbJHVwZGF0ZUVudmlyb25tZW50XSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGhhc0Jha2VkU2hhZG93KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbJHNjZW5lXS5iYWtlZFNoYWRvd3Muc2l6ZSA+IDA7XG4gICAgICAgIH1cbiAgICAgICAgYXN5bmMgWyhfYSA9ICRjdXJyZW50RW52aXJvbm1lbnRNYXAsIF9iID0gJGN1cnJlbnRCYWNrZ3JvdW5kLCBfYyA9ICRjYW5jZWxFbnZpcm9ubWVudFVwZGF0ZSwgJHVwZGF0ZUVudmlyb25tZW50KV0oKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNreWJveEltYWdlLCBlbnZpcm9ubWVudEltYWdlIH0gPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoaXNbJGNhbmNlbEVudmlyb25tZW50VXBkYXRlXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skY2FuY2VsRW52aXJvbm1lbnRVcGRhdGVdKCk7XG4gICAgICAgICAgICAgICAgdGhpc1skY2FuY2VsRW52aXJvbm1lbnRVcGRhdGVdID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgdGV4dHVyZVV0aWxzIH0gPSB0aGlzWyRyZW5kZXJlcl07XG4gICAgICAgICAgICBpZiAodGV4dHVyZVV0aWxzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVFbnZQcm9ncmVzcyA9IHRoaXNbJHByb2dyZXNzVHJhY2tlcl0uYmVnaW5BY3Rpdml0eSgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGVudmlyb25tZW50TWFwLCBza3lib3ggfSA9IGF3YWl0IHRleHR1cmVVdGlscy5nZW5lcmF0ZUVudmlyb25tZW50TWFwQW5kU2t5Ym94KGRlc2VyaWFsaXplVXJsKHNreWJveEltYWdlKSwgZW52aXJvbm1lbnRJbWFnZSwgKHByb2dyZXNzKSA9PiB1cGRhdGVFbnZQcm9ncmVzcyhjbGFtcChwcm9ncmVzcywgMCwgMSkpKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpc1skY3VycmVudEVudmlyb25tZW50TWFwXSAhPT0gZW52aXJvbm1lbnRNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skY3VycmVudEVudmlyb25tZW50TWFwXSA9IGVudmlyb25tZW50TWFwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdlbnZpcm9ubWVudC1jaGFuZ2UnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChza3lib3ggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHVzaW5nIHRoZSBzYW1lIGVudmlyb25tZW50IGFuZCBza3lib3gsIHVzZSB0aGUgZW52aXJvbm1lbnQgYXNcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQgZ2l2ZXMgSERSIGZpbHRlcmluZy5cbiAgICAgICAgICAgICAgICAgICAgdGhpc1skY3VycmVudEJhY2tncm91bmRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNreWJveC5uYW1lID09PSBlbnZpcm9ubWVudE1hcC5uYW1lID8gZW52aXJvbm1lbnRNYXAgOiBza3lib3g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRjdXJyZW50QmFja2dyb3VuZF0gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzWyRzY2VuZV0uc2V0RW52aXJvbm1lbnRBbmRTa3lib3godGhpc1skY3VycmVudEVudmlyb25tZW50TWFwXSwgdGhpc1skY3VycmVudEJhY2tncm91bmRdKTtcbiAgICAgICAgICAgICAgICB0aGlzWyRzY2VuZV0uZGlzcGF0Y2hFdmVudCh7IHR5cGU6ICdlbnZtYXAtdXBkYXRlJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvck9yUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvck9yUHJvbWlzZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5zZXRFbnZpcm9ubWVudEFuZFNreWJveChudWxsLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JPclByb21pc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRW52UHJvZ3Jlc3MoMS4wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ2Vudmlyb25tZW50LWltYWdlJyB9KVxuICAgIF0sIEVudmlyb25tZW50TW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJlbnZpcm9ubWVudEltYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogU3RyaW5nLCBhdHRyaWJ1dGU6ICdza3lib3gtaW1hZ2UnIH0pXG4gICAgXSwgRW52aXJvbm1lbnRNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcInNreWJveEltYWdlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIHByb3BlcnR5KHsgdHlwZTogTnVtYmVyLCBhdHRyaWJ1dGU6ICdzaGFkb3ctaW50ZW5zaXR5JyB9KVxuICAgIF0sIEVudmlyb25tZW50TW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJzaGFkb3dJbnRlbnNpdHlcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBOdW1iZXIsIGF0dHJpYnV0ZTogJ3NoYWRvdy1zb2Z0bmVzcycgfSlcbiAgICBdLCBFbnZpcm9ubWVudE1vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwic2hhZG93U29mdG5lc3NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoe1xuICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICB9KVxuICAgIF0sIEVudmlyb25tZW50TW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJleHBvc3VyZVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBFbnZpcm9ubWVudE1vZGVsVmlld2VyRWxlbWVudDtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbnZpcm9ubWVudC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/environment.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/loading.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/loading.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $defaultPosterElement: () => (/* binding */ $defaultPosterElement),\n/* harmony export */   $defaultProgressBarElement: () => (/* binding */ $defaultProgressBarElement),\n/* harmony export */   $posterContainerElement: () => (/* binding */ $posterContainerElement),\n/* harmony export */   LoadingMixin: () => (/* binding */ LoadingMixin),\n/* harmony export */   POSTER_TRANSITION_TIME: () => (/* binding */ POSTER_TRANSITION_TIME),\n/* harmony export */   PROGRESS_BAR_UPDATE_THRESHOLD: () => (/* binding */ PROGRESS_BAR_UPDATE_THRESHOLD)\n/* harmony export */ });\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/decorators.js */ \"(ssr)/./node_modules/lit/decorators.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../three-components/CachingGLTFLoader.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/CachingGLTFLoader.js\");\n/* harmony import */ var _three_components_Renderer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../three-components/Renderer.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Renderer.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\nconst POSTER_TRANSITION_TIME = 300;\nconst PROGRESS_BAR_UPDATE_THRESHOLD = 100;\nconst DEFAULT_DRACO_DECODER_LOCATION = 'https://www.gstatic.com/draco/versioned/decoders/1.4.1/';\nconst DEFAULT_KTX2_TRANSCODER_LOCATION = 'https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/';\nconst RevealStrategy = {\n    AUTO: 'auto',\n    MANUAL: 'manual'\n};\nconst LoadingStrategy = {\n    AUTO: 'auto',\n    LAZY: 'lazy',\n    EAGER: 'eager'\n};\nconst $defaultProgressBarElement = Symbol('defaultProgressBarElement');\nconst $posterContainerElement = Symbol('posterContainerElement');\nconst $defaultPosterElement = Symbol('defaultPosterElement');\nconst $shouldDismissPoster = Symbol('shouldDismissPoster');\nconst $hidePoster = Symbol('hidePoster');\nconst $modelIsRevealed = Symbol('modelIsRevealed');\nconst $updateProgressBar = Symbol('updateProgressBar');\nconst $ariaLabelCallToAction = Symbol('ariaLabelCallToAction');\nconst $onProgress = Symbol('onProgress');\n/**\n * LoadingMixin implements features related to lazy loading, as well as\n * presentation details related to the pre-load / pre-render presentation of a\n * <model-viewer>\n *\n * This mixin implements support for models with DRACO-compressed meshes.\n * The DRACO decoder will be loaded on-demand if a glTF that uses the DRACO mesh\n * compression extension is encountered.\n *\n * By default, the DRACO decoder will be loaded from a Google CDN. It is\n * possible to customize where the decoder is loaded from by defining a global\n * configuration option for `<model-viewer>` like so:\n *\n * ```html\n * <script>\n * self.ModelViewerElement = self.ModelViewerElement || {};\n * self.ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration strategy must be performed *before* the\n * first `<model-viewer>` element is created in the browser. The configuration\n * can be done anywhere, but the easiest way to ensure it is done at the right\n * time is to do it in the `<head>` of the HTML document. This is the\n * recommended way to set the location because it is most compatible with\n * scenarios where the `<model-viewer>` library is lazily loaded.\n *\n * If you absolutely have to set the DRACO decoder location *after* the first\n * `<model-viewer>` element is created, you can do it this way:\n *\n * ```html\n * <script>\n * const ModelViewerElement = customElements.get('model-viewer');\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration approach will not work until *after*\n * `<model-viewer>` is defined in the browser. Also note that this configuration\n * *must* be set *before* the first DRACO model is fully loaded.\n *\n * It is recommended that users who intend to take advantage of DRACO mesh\n * compression consider whether or not it is acceptable for their use case to\n * have code side-loaded from a Google CDN. If it is not acceptable, then the\n * location must be customized before loading any DRACO models in order to cause\n * the decoder to be loaded from an alternative, acceptable location.\n */\nconst LoadingMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    class LoadingModelViewerElement extends ModelViewerElement {\n        constructor(...args) {\n            super(...args);\n            /**\n             * A URL pointing to the image to use as a poster in scenarios where the\n             * <model-viewer> is not ready to reveal a rendered model to the viewer.\n             */\n            this.poster = null;\n            /**\n             * An enumerable attribute describing under what conditions the\n             * <model-viewer> should reveal a model to the viewer.\n             *\n             * The default value is \"auto\". The only supported alternative values is\n             * \"manual\".\n             */\n            this.reveal = RevealStrategy.AUTO;\n            /**\n             * An enumerable attribute describing under what conditions the\n             * <model-viewer> should preload a model.\n             *\n             * The default value is \"auto\". The only supported alternative values are\n             * \"lazy\" and \"eager\". Auto is equivalent to lazy, which loads the model\n             * when it is near the viewport for reveal = \"auto\", and when interacted\n             * with for reveal = \"interaction\". Eager loads the model immediately.\n             */\n            this.loading = LoadingStrategy.AUTO;\n            this[_a] = false;\n            this[_b] = false;\n            // TODO: Add this to the shadow root as part of this mixin's\n            // implementation:\n            this[_c] = this.shadowRoot.querySelector('.slot.poster');\n            this[_d] = this.shadowRoot.querySelector('#default-poster');\n            this[_e] = this.shadowRoot.querySelector('#default-progress-bar > .bar');\n            this[_f] = this[$defaultPosterElement].getAttribute('aria-label');\n            this[_g] = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_4__.throttle)((progress) => {\n                const parentNode = this[$defaultProgressBarElement].parentNode;\n                requestAnimationFrame(() => {\n                    this[$defaultProgressBarElement].style.transform =\n                        `scaleX(${progress})`;\n                    if (progress === 0) {\n                        // NOTE(cdata): We remove and re-append the progress bar in this\n                        // condition so that the progress bar does not appear to\n                        // transition backwards from the right when we reset to 0 (or\n                        // otherwise <1) progress after having already reached 1 progress\n                        // previously.\n                        parentNode.removeChild(this[$defaultProgressBarElement]);\n                        parentNode.appendChild(this[$defaultProgressBarElement]);\n                    }\n                    // NOTE(cdata): IE11 does not properly respect the second parameter\n                    // of classList.toggle, which this implementation originally used.\n                    // @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11865865/\n                    if (progress === 1.0) {\n                        this[$defaultProgressBarElement].classList.add('hide');\n                    }\n                    else {\n                        this[$defaultProgressBarElement].classList.remove('hide');\n                    }\n                });\n            }, PROGRESS_BAR_UPDATE_THRESHOLD);\n            this[_h] = (event) => {\n                const progress = event.detail.totalProgress;\n                if (progress === 1.0) {\n                    this[$updateProgressBar].flush();\n                    if (this.loaded &&\n                        (this[$shouldDismissPoster] ||\n                            this.reveal === RevealStrategy.AUTO)) {\n                        this[$hidePoster]();\n                    }\n                }\n                this[$updateProgressBar](progress);\n                this.dispatchEvent(new CustomEvent('progress', { detail: { totalProgress: progress } }));\n            };\n            const ModelViewerElement = self.ModelViewerElement || {};\n            const dracoDecoderLocation = ModelViewerElement.dracoDecoderLocation ||\n                DEFAULT_DRACO_DECODER_LOCATION;\n            _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.setDRACODecoderLocation(dracoDecoderLocation);\n            const ktx2TranscoderLocation = ModelViewerElement.ktx2TranscoderLocation ||\n                DEFAULT_KTX2_TRANSCODER_LOCATION;\n            _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.setKTX2TranscoderLocation(ktx2TranscoderLocation);\n            if (ModelViewerElement.meshoptDecoderLocation) {\n                _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.setMeshoptDecoderLocation(ModelViewerElement.meshoptDecoderLocation);\n            }\n        }\n        static set dracoDecoderLocation(value) {\n            _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.setDRACODecoderLocation(value);\n        }\n        static get dracoDecoderLocation() {\n            return _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.getDRACODecoderLocation();\n        }\n        static set ktx2TranscoderLocation(value) {\n            _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.setKTX2TranscoderLocation(value);\n        }\n        static get ktx2TranscoderLocation() {\n            return _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.getKTX2TranscoderLocation();\n        }\n        static set meshoptDecoderLocation(value) {\n            _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.setMeshoptDecoderLocation(value);\n        }\n        static get meshoptDecoderLocation() {\n            return _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.CachingGLTFLoader.getMeshoptDecoderLocation();\n        }\n        /**\n         * If provided, the callback will be passed each resource URL before a\n         * request is sent. The callback may return the original URL, or a new URL\n         * to override loading behavior. This behavior can be used to load assets\n         * from .ZIP files, drag-and-drop APIs, and Data URIs.\n         */\n        static mapURLs(callback) {\n            _three_components_Renderer_js__WEBPACK_IMPORTED_MODULE_3__.Renderer.singleton.loader[_three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_2__.$loader].manager.setURLModifier(callback);\n        }\n        /**\n         * Dismisses the poster, causing the model to load and render if\n         * necessary. This is currently effectively the same as interacting with\n         * the poster via user input.\n         */\n        dismissPoster() {\n            if (this.loaded) {\n                this[$hidePoster]();\n            }\n            else {\n                this[$shouldDismissPoster] = true;\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$updateSource]();\n            }\n        }\n        /**\n         * Displays the poster, hiding the 3D model. If this is called after the 3D\n         * model has been revealed, then it must be dismissed by a call to\n         * dismissPoster().\n         */\n        showPoster() {\n            const posterContainerElement = this[$posterContainerElement];\n            if (posterContainerElement.classList.contains('show')) {\n                return;\n            }\n            posterContainerElement.classList.add('show');\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$userInputElement].classList.remove('show');\n            const defaultPosterElement = this[$defaultPosterElement];\n            defaultPosterElement.removeAttribute('tabindex');\n            defaultPosterElement.removeAttribute('aria-hidden');\n            const oldVisibility = this.modelIsVisible;\n            this[$modelIsRevealed] = false;\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$announceModelVisibility](oldVisibility);\n        }\n        /**\n         * Returns the model's bounding box dimensions in meters, independent of\n         * turntable rotation.\n         */\n        getDimensions() {\n            return (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.toVector3D)(this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].size);\n        }\n        getBoundingBoxCenter() {\n            return (0,_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.toVector3D)(this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene].boundingBox.getCenter(new three__WEBPACK_IMPORTED_MODULE_5__.Vector3()));\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this.showPoster();\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$progressTracker].addEventListener('progress', this[$onProgress]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$progressTracker].removeEventListener('progress', this[$onProgress]);\n        }\n        async updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('poster') && this.poster != null) {\n                this[$defaultPosterElement].style.backgroundImage =\n                    `url(${this.poster})`;\n            }\n            if (changedProperties.has('alt')) {\n                this[$defaultPosterElement].setAttribute('aria-label', this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$altDefaulted]);\n            }\n            if (changedProperties.has('reveal') || changedProperties.has('loading')) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$updateSource]();\n            }\n        }\n        [(_a = $modelIsRevealed, _b = $shouldDismissPoster, _c = $posterContainerElement, _d = $defaultPosterElement, _e = $defaultProgressBarElement, _f = $ariaLabelCallToAction, _g = $updateProgressBar, _h = $onProgress, _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$shouldAttemptPreload)]() {\n            return !!this.src &&\n                (this[$shouldDismissPoster] ||\n                    this.loading === LoadingStrategy.EAGER ||\n                    (this.reveal === RevealStrategy.AUTO && this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$isElementInViewport]));\n        }\n        [$hidePoster]() {\n            this[$shouldDismissPoster] = false;\n            const posterContainerElement = this[$posterContainerElement];\n            if (!posterContainerElement.classList.contains('show')) {\n                return;\n            }\n            posterContainerElement.classList.remove('show');\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$userInputElement].classList.add('show');\n            const oldVisibility = this.modelIsVisible;\n            this[$modelIsRevealed] = true;\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$announceModelVisibility](oldVisibility);\n            const root = this.getRootNode();\n            // If the <model-viewer> is still focused, forward the focus to\n            // the canvas that has just been revealed\n            if (root && root.activeElement === this) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$userInputElement].focus();\n            }\n            // Ensure that the poster is no longer focusable or visible to\n            // screen readers\n            const defaultPosterElement = this[$defaultPosterElement];\n            defaultPosterElement.setAttribute('aria-hidden', 'true');\n            defaultPosterElement.tabIndex = -1;\n            this.dispatchEvent(new CustomEvent('poster-dismissed'));\n        }\n        [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$getModelIsVisible]() {\n            return super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$getModelIsVisible]() && this[$modelIsRevealed];\n        }\n    }\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String })\n    ], LoadingModelViewerElement.prototype, \"poster\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String })\n    ], LoadingModelViewerElement.prototype, \"reveal\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String })\n    ], LoadingModelViewerElement.prototype, \"loading\", void 0);\n    return LoadingModelViewerElement;\n};\n//# sourceMappingURL=loading.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL2xvYWRpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFJLElBQUksU0FBSTtBQUM5QjtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTtBQUM2QztBQUNiO0FBQzJMO0FBQ3JJO0FBQzNCO0FBQ2hCO0FBQ3BDO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdURBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFNBQVM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFVBQVUsMkJBQTJCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxRkFBaUI7QUFDN0I7QUFDQTtBQUNBLFlBQVkscUZBQWlCO0FBQzdCO0FBQ0EsZ0JBQWdCLHFGQUFpQjtBQUNqQztBQUNBO0FBQ0E7QUFDQSxZQUFZLHFGQUFpQjtBQUM3QjtBQUNBO0FBQ0EsbUJBQW1CLHFGQUFpQjtBQUNwQztBQUNBO0FBQ0EsWUFBWSxxRkFBaUI7QUFDN0I7QUFDQTtBQUNBLG1CQUFtQixxRkFBaUI7QUFDcEM7QUFDQTtBQUNBLFlBQVkscUZBQWlCO0FBQzdCO0FBQ0E7QUFDQSxtQkFBbUIscUZBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1FQUFRLGtCQUFrQiwyRUFBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0VBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0VBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkVBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixpRUFBVSxNQUFNLHlEQUFNO0FBQ3pDO0FBQ0E7QUFDQSxtQkFBbUIsaUVBQVUsTUFBTSx5REFBTSw0QkFBNEIsMENBQU87QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsbUVBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtRUFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixZQUFZO0FBQ3ZDO0FBQ0E7QUFDQSw0RUFBNEUsZ0VBQWE7QUFDekY7QUFDQTtBQUNBLHFCQUFxQixnRUFBYTtBQUNsQztBQUNBO0FBQ0EsK05BQStOLHdFQUFxQjtBQUNwUDtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsdUVBQW9CO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0VBQWlCO0FBQ2xDO0FBQ0E7QUFDQSxpQkFBaUIsMkVBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG9FQUFpQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxxRUFBa0I7QUFDM0IseUJBQXlCLHFFQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcsY0FBYztBQUNqQztBQUNBO0FBQ0EsUUFBUSwyREFBUSxHQUFHLGNBQWM7QUFDakM7QUFDQTtBQUNBLFFBQVEsMkRBQVEsR0FBRyxjQUFjO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9mZWF0dXJlcy9sb2FkaW5nLmpzPzMzMjIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgcHJvcGVydHkgfSBmcm9tICdsaXQvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgJGFsdERlZmF1bHRlZCwgJGFubm91bmNlTW9kZWxWaXNpYmlsaXR5LCAkZ2V0TW9kZWxJc1Zpc2libGUsICRpc0VsZW1lbnRJblZpZXdwb3J0LCAkcHJvZ3Jlc3NUcmFja2VyLCAkc2NlbmUsICRzaG91bGRBdHRlbXB0UHJlbG9hZCwgJHVwZGF0ZVNvdXJjZSwgJHVzZXJJbnB1dEVsZW1lbnQsIHRvVmVjdG9yM0QgfSBmcm9tICcuLi9tb2RlbC12aWV3ZXItYmFzZS5qcyc7XG5pbXBvcnQgeyAkbG9hZGVyLCBDYWNoaW5nR0xURkxvYWRlciB9IGZyb20gJy4uL3RocmVlLWNvbXBvbmVudHMvQ2FjaGluZ0dMVEZMb2FkZXIuanMnO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuLi90aHJlZS1jb21wb25lbnRzL1JlbmRlcmVyLmpzJztcbmltcG9ydCB7IHRocm90dGxlIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJztcbmV4cG9ydCBjb25zdCBQT1NURVJfVFJBTlNJVElPTl9USU1FID0gMzAwO1xuZXhwb3J0IGNvbnN0IFBST0dSRVNTX0JBUl9VUERBVEVfVEhSRVNIT0xEID0gMTAwO1xuY29uc3QgREVGQVVMVF9EUkFDT19ERUNPREVSX0xPQ0FUSU9OID0gJ2h0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2RyYWNvL3ZlcnNpb25lZC9kZWNvZGVycy8xLjQuMS8nO1xuY29uc3QgREVGQVVMVF9LVFgyX1RSQU5TQ09ERVJfTE9DQVRJT04gPSAnaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vYmFzaXMtdW5pdmVyc2FsL3ZlcnNpb25lZC8yMDIxLTA0LTE1LWJhMWMzZTQvJztcbmNvbnN0IFJldmVhbFN0cmF0ZWd5ID0ge1xuICAgIEFVVE86ICdhdXRvJyxcbiAgICBNQU5VQUw6ICdtYW51YWwnXG59O1xuY29uc3QgTG9hZGluZ1N0cmF0ZWd5ID0ge1xuICAgIEFVVE86ICdhdXRvJyxcbiAgICBMQVpZOiAnbGF6eScsXG4gICAgRUFHRVI6ICdlYWdlcidcbn07XG5leHBvcnQgY29uc3QgJGRlZmF1bHRQcm9ncmVzc0JhckVsZW1lbnQgPSBTeW1ib2woJ2RlZmF1bHRQcm9ncmVzc0JhckVsZW1lbnQnKTtcbmV4cG9ydCBjb25zdCAkcG9zdGVyQ29udGFpbmVyRWxlbWVudCA9IFN5bWJvbCgncG9zdGVyQ29udGFpbmVyRWxlbWVudCcpO1xuZXhwb3J0IGNvbnN0ICRkZWZhdWx0UG9zdGVyRWxlbWVudCA9IFN5bWJvbCgnZGVmYXVsdFBvc3RlckVsZW1lbnQnKTtcbmNvbnN0ICRzaG91bGREaXNtaXNzUG9zdGVyID0gU3ltYm9sKCdzaG91bGREaXNtaXNzUG9zdGVyJyk7XG5jb25zdCAkaGlkZVBvc3RlciA9IFN5bWJvbCgnaGlkZVBvc3RlcicpO1xuY29uc3QgJG1vZGVsSXNSZXZlYWxlZCA9IFN5bWJvbCgnbW9kZWxJc1JldmVhbGVkJyk7XG5jb25zdCAkdXBkYXRlUHJvZ3Jlc3NCYXIgPSBTeW1ib2woJ3VwZGF0ZVByb2dyZXNzQmFyJyk7XG5jb25zdCAkYXJpYUxhYmVsQ2FsbFRvQWN0aW9uID0gU3ltYm9sKCdhcmlhTGFiZWxDYWxsVG9BY3Rpb24nKTtcbmNvbnN0ICRvblByb2dyZXNzID0gU3ltYm9sKCdvblByb2dyZXNzJyk7XG4vKipcbiAqIExvYWRpbmdNaXhpbiBpbXBsZW1lbnRzIGZlYXR1cmVzIHJlbGF0ZWQgdG8gbGF6eSBsb2FkaW5nLCBhcyB3ZWxsIGFzXG4gKiBwcmVzZW50YXRpb24gZGV0YWlscyByZWxhdGVkIHRvIHRoZSBwcmUtbG9hZCAvIHByZS1yZW5kZXIgcHJlc2VudGF0aW9uIG9mIGFcbiAqIDxtb2RlbC12aWV3ZXI+XG4gKlxuICogVGhpcyBtaXhpbiBpbXBsZW1lbnRzIHN1cHBvcnQgZm9yIG1vZGVscyB3aXRoIERSQUNPLWNvbXByZXNzZWQgbWVzaGVzLlxuICogVGhlIERSQUNPIGRlY29kZXIgd2lsbCBiZSBsb2FkZWQgb24tZGVtYW5kIGlmIGEgZ2xURiB0aGF0IHVzZXMgdGhlIERSQUNPIG1lc2hcbiAqIGNvbXByZXNzaW9uIGV4dGVuc2lvbiBpcyBlbmNvdW50ZXJlZC5cbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGUgRFJBQ08gZGVjb2RlciB3aWxsIGJlIGxvYWRlZCBmcm9tIGEgR29vZ2xlIENETi4gSXQgaXNcbiAqIHBvc3NpYmxlIHRvIGN1c3RvbWl6ZSB3aGVyZSB0aGUgZGVjb2RlciBpcyBsb2FkZWQgZnJvbSBieSBkZWZpbmluZyBhIGdsb2JhbFxuICogY29uZmlndXJhdGlvbiBvcHRpb24gZm9yIGA8bW9kZWwtdmlld2VyPmAgbGlrZSBzbzpcbiAqXG4gKiBgYGBodG1sXG4gKiA8c2NyaXB0PlxuICogc2VsZi5Nb2RlbFZpZXdlckVsZW1lbnQgPSBzZWxmLk1vZGVsVmlld2VyRWxlbWVudCB8fCB7fTtcbiAqIHNlbGYuTW9kZWxWaWV3ZXJFbGVtZW50LmRyYWNvRGVjb2RlckxvY2F0aW9uID1cbiAqICAgICAnaHR0cDovL2V4YW1wbGUuY29tL2xvY2F0aW9uL29mL2RyYWNvL2RlY29kZXIvZmlsZXMvJztcbiAqIDwvc2NyaXB0PlxuICogYGBgXG4gKlxuICogTm90ZSB0aGF0IHRoZSBhYm92ZSBjb25maWd1cmF0aW9uIHN0cmF0ZWd5IG11c3QgYmUgcGVyZm9ybWVkICpiZWZvcmUqIHRoZVxuICogZmlyc3QgYDxtb2RlbC12aWV3ZXI+YCBlbGVtZW50IGlzIGNyZWF0ZWQgaW4gdGhlIGJyb3dzZXIuIFRoZSBjb25maWd1cmF0aW9uXG4gKiBjYW4gYmUgZG9uZSBhbnl3aGVyZSwgYnV0IHRoZSBlYXNpZXN0IHdheSB0byBlbnN1cmUgaXQgaXMgZG9uZSBhdCB0aGUgcmlnaHRcbiAqIHRpbWUgaXMgdG8gZG8gaXQgaW4gdGhlIGA8aGVhZD5gIG9mIHRoZSBIVE1MIGRvY3VtZW50LiBUaGlzIGlzIHRoZVxuICogcmVjb21tZW5kZWQgd2F5IHRvIHNldCB0aGUgbG9jYXRpb24gYmVjYXVzZSBpdCBpcyBtb3N0IGNvbXBhdGlibGUgd2l0aFxuICogc2NlbmFyaW9zIHdoZXJlIHRoZSBgPG1vZGVsLXZpZXdlcj5gIGxpYnJhcnkgaXMgbGF6aWx5IGxvYWRlZC5cbiAqXG4gKiBJZiB5b3UgYWJzb2x1dGVseSBoYXZlIHRvIHNldCB0aGUgRFJBQ08gZGVjb2RlciBsb2NhdGlvbiAqYWZ0ZXIqIHRoZSBmaXJzdFxuICogYDxtb2RlbC12aWV3ZXI+YCBlbGVtZW50IGlzIGNyZWF0ZWQsIHlvdSBjYW4gZG8gaXQgdGhpcyB3YXk6XG4gKlxuICogYGBgaHRtbFxuICogPHNjcmlwdD5cbiAqIGNvbnN0IE1vZGVsVmlld2VyRWxlbWVudCA9IGN1c3RvbUVsZW1lbnRzLmdldCgnbW9kZWwtdmlld2VyJyk7XG4gKiBNb2RlbFZpZXdlckVsZW1lbnQuZHJhY29EZWNvZGVyTG9jYXRpb24gPVxuICogICAgICdodHRwOi8vZXhhbXBsZS5jb20vbG9jYXRpb24vb2YvZHJhY28vZGVjb2Rlci9maWxlcy8nO1xuICogPC9zY3JpcHQ+XG4gKiBgYGBcbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGFib3ZlIGNvbmZpZ3VyYXRpb24gYXBwcm9hY2ggd2lsbCBub3Qgd29yayB1bnRpbCAqYWZ0ZXIqXG4gKiBgPG1vZGVsLXZpZXdlcj5gIGlzIGRlZmluZWQgaW4gdGhlIGJyb3dzZXIuIEFsc28gbm90ZSB0aGF0IHRoaXMgY29uZmlndXJhdGlvblxuICogKm11c3QqIGJlIHNldCAqYmVmb3JlKiB0aGUgZmlyc3QgRFJBQ08gbW9kZWwgaXMgZnVsbHkgbG9hZGVkLlxuICpcbiAqIEl0IGlzIHJlY29tbWVuZGVkIHRoYXQgdXNlcnMgd2hvIGludGVuZCB0byB0YWtlIGFkdmFudGFnZSBvZiBEUkFDTyBtZXNoXG4gKiBjb21wcmVzc2lvbiBjb25zaWRlciB3aGV0aGVyIG9yIG5vdCBpdCBpcyBhY2NlcHRhYmxlIGZvciB0aGVpciB1c2UgY2FzZSB0b1xuICogaGF2ZSBjb2RlIHNpZGUtbG9hZGVkIGZyb20gYSBHb29nbGUgQ0ROLiBJZiBpdCBpcyBub3QgYWNjZXB0YWJsZSwgdGhlbiB0aGVcbiAqIGxvY2F0aW9uIG11c3QgYmUgY3VzdG9taXplZCBiZWZvcmUgbG9hZGluZyBhbnkgRFJBQ08gbW9kZWxzIGluIG9yZGVyIHRvIGNhdXNlXG4gKiB0aGUgZGVjb2RlciB0byBiZSBsb2FkZWQgZnJvbSBhbiBhbHRlcm5hdGl2ZSwgYWNjZXB0YWJsZSBsb2NhdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IExvYWRpbmdNaXhpbiA9IChNb2RlbFZpZXdlckVsZW1lbnQpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xuICAgIGNsYXNzIExvYWRpbmdNb2RlbFZpZXdlckVsZW1lbnQgZXh0ZW5kcyBNb2RlbFZpZXdlckVsZW1lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICAgICAgICBzdXBlciguLi5hcmdzKTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQSBVUkwgcG9pbnRpbmcgdG8gdGhlIGltYWdlIHRvIHVzZSBhcyBhIHBvc3RlciBpbiBzY2VuYXJpb3Mgd2hlcmUgdGhlXG4gICAgICAgICAgICAgKiA8bW9kZWwtdmlld2VyPiBpcyBub3QgcmVhZHkgdG8gcmV2ZWFsIGEgcmVuZGVyZWQgbW9kZWwgdG8gdGhlIHZpZXdlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5wb3N0ZXIgPSBudWxsO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBbiBlbnVtZXJhYmxlIGF0dHJpYnV0ZSBkZXNjcmliaW5nIHVuZGVyIHdoYXQgY29uZGl0aW9ucyB0aGVcbiAgICAgICAgICAgICAqIDxtb2RlbC12aWV3ZXI+IHNob3VsZCByZXZlYWwgYSBtb2RlbCB0byB0aGUgdmlld2VyLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIFwiYXV0b1wiLiBUaGUgb25seSBzdXBwb3J0ZWQgYWx0ZXJuYXRpdmUgdmFsdWVzIGlzXG4gICAgICAgICAgICAgKiBcIm1hbnVhbFwiLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLnJldmVhbCA9IFJldmVhbFN0cmF0ZWd5LkFVVE87XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFuIGVudW1lcmFibGUgYXR0cmlidXRlIGRlc2NyaWJpbmcgdW5kZXIgd2hhdCBjb25kaXRpb25zIHRoZVxuICAgICAgICAgICAgICogPG1vZGVsLXZpZXdlcj4gc2hvdWxkIHByZWxvYWQgYSBtb2RlbC5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBcImF1dG9cIi4gVGhlIG9ubHkgc3VwcG9ydGVkIGFsdGVybmF0aXZlIHZhbHVlcyBhcmVcbiAgICAgICAgICAgICAqIFwibGF6eVwiIGFuZCBcImVhZ2VyXCIuIEF1dG8gaXMgZXF1aXZhbGVudCB0byBsYXp5LCB3aGljaCBsb2FkcyB0aGUgbW9kZWxcbiAgICAgICAgICAgICAqIHdoZW4gaXQgaXMgbmVhciB0aGUgdmlld3BvcnQgZm9yIHJldmVhbCA9IFwiYXV0b1wiLCBhbmQgd2hlbiBpbnRlcmFjdGVkXG4gICAgICAgICAgICAgKiB3aXRoIGZvciByZXZlYWwgPSBcImludGVyYWN0aW9uXCIuIEVhZ2VyIGxvYWRzIHRoZSBtb2RlbCBpbW1lZGlhdGVseS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gTG9hZGluZ1N0cmF0ZWd5LkFVVE87XG4gICAgICAgICAgICB0aGlzW19hXSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpc1tfYl0gPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIFRPRE86IEFkZCB0aGlzIHRvIHRoZSBzaGFkb3cgcm9vdCBhcyBwYXJ0IG9mIHRoaXMgbWl4aW4nc1xuICAgICAgICAgICAgLy8gaW1wbGVtZW50YXRpb246XG4gICAgICAgICAgICB0aGlzW19jXSA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuc2xvdC5wb3N0ZXInKTtcbiAgICAgICAgICAgIHRoaXNbX2RdID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNkZWZhdWx0LXBvc3RlcicpO1xuICAgICAgICAgICAgdGhpc1tfZV0gPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignI2RlZmF1bHQtcHJvZ3Jlc3MtYmFyID4gLmJhcicpO1xuICAgICAgICAgICAgdGhpc1tfZl0gPSB0aGlzWyRkZWZhdWx0UG9zdGVyRWxlbWVudF0uZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XG4gICAgICAgICAgICB0aGlzW19nXSA9IHRocm90dGxlKChwcm9ncmVzcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudE5vZGUgPSB0aGlzWyRkZWZhdWx0UHJvZ3Jlc3NCYXJFbGVtZW50XS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbJGRlZmF1bHRQcm9ncmVzc0JhckVsZW1lbnRdLnN0eWxlLnRyYW5zZm9ybSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBgc2NhbGVYKCR7cHJvZ3Jlc3N9KWA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9ncmVzcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URShjZGF0YSk6IFdlIHJlbW92ZSBhbmQgcmUtYXBwZW5kIHRoZSBwcm9ncmVzcyBiYXIgaW4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uZGl0aW9uIHNvIHRoYXQgdGhlIHByb2dyZXNzIGJhciBkb2VzIG5vdCBhcHBlYXIgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zaXRpb24gYmFja3dhcmRzIGZyb20gdGhlIHJpZ2h0IHdoZW4gd2UgcmVzZXQgdG8gMCAob3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSA8MSkgcHJvZ3Jlc3MgYWZ0ZXIgaGF2aW5nIGFscmVhZHkgcmVhY2hlZCAxIHByb2dyZXNzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmV2aW91c2x5LlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzWyRkZWZhdWx0UHJvZ3Jlc3NCYXJFbGVtZW50XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXNbJGRlZmF1bHRQcm9ncmVzc0JhckVsZW1lbnRdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBOT1RFKGNkYXRhKTogSUUxMSBkb2VzIG5vdCBwcm9wZXJseSByZXNwZWN0IHRoZSBzZWNvbmQgcGFyYW1ldGVyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mIGNsYXNzTGlzdC50b2dnbGUsIHdoaWNoIHRoaXMgaW1wbGVtZW50YXRpb24gb3JpZ2luYWxseSB1c2VkLlxuICAgICAgICAgICAgICAgICAgICAvLyBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vaXNzdWVzLzExODY1ODY1L1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPT09IDEuMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1skZGVmYXVsdFByb2dyZXNzQmFyRWxlbWVudF0uY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1skZGVmYXVsdFByb2dyZXNzQmFyRWxlbWVudF0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBQUk9HUkVTU19CQVJfVVBEQVRFX1RIUkVTSE9MRCk7XG4gICAgICAgICAgICB0aGlzW19oXSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gZXZlbnQuZGV0YWlsLnRvdGFsUHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgaWYgKHByb2dyZXNzID09PSAxLjApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skdXBkYXRlUHJvZ3Jlc3NCYXJdLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvYWRlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXNbJHNob3VsZERpc21pc3NQb3N0ZXJdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXZlYWwgPT09IFJldmVhbFN0cmF0ZWd5LkFVVE8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWyRoaWRlUG9zdGVyXSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXNbJHVwZGF0ZVByb2dyZXNzQmFyXShwcm9ncmVzcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncHJvZ3Jlc3MnLCB7IGRldGFpbDogeyB0b3RhbFByb2dyZXNzOiBwcm9ncmVzcyB9IH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBNb2RlbFZpZXdlckVsZW1lbnQgPSBzZWxmLk1vZGVsVmlld2VyRWxlbWVudCB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IGRyYWNvRGVjb2RlckxvY2F0aW9uID0gTW9kZWxWaWV3ZXJFbGVtZW50LmRyYWNvRGVjb2RlckxvY2F0aW9uIHx8XG4gICAgICAgICAgICAgICAgREVGQVVMVF9EUkFDT19ERUNPREVSX0xPQ0FUSU9OO1xuICAgICAgICAgICAgQ2FjaGluZ0dMVEZMb2FkZXIuc2V0RFJBQ09EZWNvZGVyTG9jYXRpb24oZHJhY29EZWNvZGVyTG9jYXRpb24pO1xuICAgICAgICAgICAgY29uc3Qga3R4MlRyYW5zY29kZXJMb2NhdGlvbiA9IE1vZGVsVmlld2VyRWxlbWVudC5rdHgyVHJhbnNjb2RlckxvY2F0aW9uIHx8XG4gICAgICAgICAgICAgICAgREVGQVVMVF9LVFgyX1RSQU5TQ09ERVJfTE9DQVRJT047XG4gICAgICAgICAgICBDYWNoaW5nR0xURkxvYWRlci5zZXRLVFgyVHJhbnNjb2RlckxvY2F0aW9uKGt0eDJUcmFuc2NvZGVyTG9jYXRpb24pO1xuICAgICAgICAgICAgaWYgKE1vZGVsVmlld2VyRWxlbWVudC5tZXNob3B0RGVjb2RlckxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgQ2FjaGluZ0dMVEZMb2FkZXIuc2V0TWVzaG9wdERlY29kZXJMb2NhdGlvbihNb2RlbFZpZXdlckVsZW1lbnQubWVzaG9wdERlY29kZXJMb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHNldCBkcmFjb0RlY29kZXJMb2NhdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgQ2FjaGluZ0dMVEZMb2FkZXIuc2V0RFJBQ09EZWNvZGVyTG9jYXRpb24odmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXQgZHJhY29EZWNvZGVyTG9jYXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQ2FjaGluZ0dMVEZMb2FkZXIuZ2V0RFJBQ09EZWNvZGVyTG9jYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgc2V0IGt0eDJUcmFuc2NvZGVyTG9jYXRpb24odmFsdWUpIHtcbiAgICAgICAgICAgIENhY2hpbmdHTFRGTG9hZGVyLnNldEtUWDJUcmFuc2NvZGVyTG9jYXRpb24odmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRpYyBnZXQga3R4MlRyYW5zY29kZXJMb2NhdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBDYWNoaW5nR0xURkxvYWRlci5nZXRLVFgyVHJhbnNjb2RlckxvY2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGljIHNldCBtZXNob3B0RGVjb2RlckxvY2F0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBDYWNoaW5nR0xURkxvYWRlci5zZXRNZXNob3B0RGVjb2RlckxvY2F0aW9uKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0aWMgZ2V0IG1lc2hvcHREZWNvZGVyTG9jYXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gQ2FjaGluZ0dMVEZMb2FkZXIuZ2V0TWVzaG9wdERlY29kZXJMb2NhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGNhbGxiYWNrIHdpbGwgYmUgcGFzc2VkIGVhY2ggcmVzb3VyY2UgVVJMIGJlZm9yZSBhXG4gICAgICAgICAqIHJlcXVlc3QgaXMgc2VudC4gVGhlIGNhbGxiYWNrIG1heSByZXR1cm4gdGhlIG9yaWdpbmFsIFVSTCwgb3IgYSBuZXcgVVJMXG4gICAgICAgICAqIHRvIG92ZXJyaWRlIGxvYWRpbmcgYmVoYXZpb3IuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIHVzZWQgdG8gbG9hZCBhc3NldHNcbiAgICAgICAgICogZnJvbSAuWklQIGZpbGVzLCBkcmFnLWFuZC1kcm9wIEFQSXMsIGFuZCBEYXRhIFVSSXMuXG4gICAgICAgICAqL1xuICAgICAgICBzdGF0aWMgbWFwVVJMcyhjYWxsYmFjaykge1xuICAgICAgICAgICAgUmVuZGVyZXIuc2luZ2xldG9uLmxvYWRlclskbG9hZGVyXS5tYW5hZ2VyLnNldFVSTE1vZGlmaWVyKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzbWlzc2VzIHRoZSBwb3N0ZXIsIGNhdXNpbmcgdGhlIG1vZGVsIHRvIGxvYWQgYW5kIHJlbmRlciBpZlxuICAgICAgICAgKiBuZWNlc3NhcnkuIFRoaXMgaXMgY3VycmVudGx5IGVmZmVjdGl2ZWx5IHRoZSBzYW1lIGFzIGludGVyYWN0aW5nIHdpdGhcbiAgICAgICAgICogdGhlIHBvc3RlciB2aWEgdXNlciBpbnB1dC5cbiAgICAgICAgICovXG4gICAgICAgIGRpc21pc3NQb3N0ZXIoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRoaWRlUG9zdGVyXSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpc1skc2hvdWxkRGlzbWlzc1Bvc3Rlcl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXNbJHVwZGF0ZVNvdXJjZV0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzcGxheXMgdGhlIHBvc3RlciwgaGlkaW5nIHRoZSAzRCBtb2RlbC4gSWYgdGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIDNEXG4gICAgICAgICAqIG1vZGVsIGhhcyBiZWVuIHJldmVhbGVkLCB0aGVuIGl0IG11c3QgYmUgZGlzbWlzc2VkIGJ5IGEgY2FsbCB0b1xuICAgICAgICAgKiBkaXNtaXNzUG9zdGVyKCkuXG4gICAgICAgICAqL1xuICAgICAgICBzaG93UG9zdGVyKCkge1xuICAgICAgICAgICAgY29uc3QgcG9zdGVyQ29udGFpbmVyRWxlbWVudCA9IHRoaXNbJHBvc3RlckNvbnRhaW5lckVsZW1lbnRdO1xuICAgICAgICAgICAgaWYgKHBvc3RlckNvbnRhaW5lckVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3N0ZXJDb250YWluZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgICAgIHRoaXNbJHVzZXJJbnB1dEVsZW1lbnRdLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRQb3N0ZXJFbGVtZW50ID0gdGhpc1skZGVmYXVsdFBvc3RlckVsZW1lbnRdO1xuICAgICAgICAgICAgZGVmYXVsdFBvc3RlckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgZGVmYXVsdFBvc3RlckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuICAgICAgICAgICAgY29uc3Qgb2xkVmlzaWJpbGl0eSA9IHRoaXMubW9kZWxJc1Zpc2libGU7XG4gICAgICAgICAgICB0aGlzWyRtb2RlbElzUmV2ZWFsZWRdID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzWyRhbm5vdW5jZU1vZGVsVmlzaWJpbGl0eV0ob2xkVmlzaWJpbGl0eSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIG1vZGVsJ3MgYm91bmRpbmcgYm94IGRpbWVuc2lvbnMgaW4gbWV0ZXJzLCBpbmRlcGVuZGVudCBvZlxuICAgICAgICAgKiB0dXJudGFibGUgcm90YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICBnZXREaW1lbnNpb25zKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRvVmVjdG9yM0QodGhpc1skc2NlbmVdLnNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGdldEJvdW5kaW5nQm94Q2VudGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRvVmVjdG9yM0QodGhpc1skc2NlbmVdLmJvdW5kaW5nQm94LmdldENlbnRlcihuZXcgVmVjdG9yMygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgdGhpcy5zaG93UG9zdGVyKCk7XG4gICAgICAgICAgICB0aGlzWyRwcm9ncmVzc1RyYWNrZXJdLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgdGhpc1skb25Qcm9ncmVzc10pO1xuICAgICAgICB9XG4gICAgICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIHRoaXNbJHByb2dyZXNzVHJhY2tlcl0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCB0aGlzWyRvblByb2dyZXNzXSk7XG4gICAgICAgIH1cbiAgICAgICAgYXN5bmMgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICAgICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdwb3N0ZXInKSAmJiB0aGlzLnBvc3RlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skZGVmYXVsdFBvc3RlckVsZW1lbnRdLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9XG4gICAgICAgICAgICAgICAgICAgIGB1cmwoJHt0aGlzLnBvc3Rlcn0pYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2FsdCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skZGVmYXVsdFBvc3RlckVsZW1lbnRdLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXNbJGFsdERlZmF1bHRlZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygncmV2ZWFsJykgfHwgY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdsb2FkaW5nJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyR1cGRhdGVTb3VyY2VdKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgWyhfYSA9ICRtb2RlbElzUmV2ZWFsZWQsIF9iID0gJHNob3VsZERpc21pc3NQb3N0ZXIsIF9jID0gJHBvc3RlckNvbnRhaW5lckVsZW1lbnQsIF9kID0gJGRlZmF1bHRQb3N0ZXJFbGVtZW50LCBfZSA9ICRkZWZhdWx0UHJvZ3Jlc3NCYXJFbGVtZW50LCBfZiA9ICRhcmlhTGFiZWxDYWxsVG9BY3Rpb24sIF9nID0gJHVwZGF0ZVByb2dyZXNzQmFyLCBfaCA9ICRvblByb2dyZXNzLCAkc2hvdWxkQXR0ZW1wdFByZWxvYWQpXSgpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuc3JjICYmXG4gICAgICAgICAgICAgICAgKHRoaXNbJHNob3VsZERpc21pc3NQb3N0ZXJdIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9PT0gTG9hZGluZ1N0cmF0ZWd5LkVBR0VSIHx8XG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnJldmVhbCA9PT0gUmV2ZWFsU3RyYXRlZ3kuQVVUTyAmJiB0aGlzWyRpc0VsZW1lbnRJblZpZXdwb3J0XSkpO1xuICAgICAgICB9XG4gICAgICAgIFskaGlkZVBvc3Rlcl0oKSB7XG4gICAgICAgICAgICB0aGlzWyRzaG91bGREaXNtaXNzUG9zdGVyXSA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgcG9zdGVyQ29udGFpbmVyRWxlbWVudCA9IHRoaXNbJHBvc3RlckNvbnRhaW5lckVsZW1lbnRdO1xuICAgICAgICAgICAgaWYgKCFwb3N0ZXJDb250YWluZXJFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zdGVyQ29udGFpbmVyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgICAgICB0aGlzWyR1c2VySW5wdXRFbGVtZW50XS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICAgICAgICBjb25zdCBvbGRWaXNpYmlsaXR5ID0gdGhpcy5tb2RlbElzVmlzaWJsZTtcbiAgICAgICAgICAgIHRoaXNbJG1vZGVsSXNSZXZlYWxlZF0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpc1skYW5ub3VuY2VNb2RlbFZpc2liaWxpdHldKG9sZFZpc2liaWxpdHkpO1xuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuZ2V0Um9vdE5vZGUoKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSA8bW9kZWwtdmlld2VyPiBpcyBzdGlsbCBmb2N1c2VkLCBmb3J3YXJkIHRoZSBmb2N1cyB0b1xuICAgICAgICAgICAgLy8gdGhlIGNhbnZhcyB0aGF0IGhhcyBqdXN0IGJlZW4gcmV2ZWFsZWRcbiAgICAgICAgICAgIGlmIChyb290ICYmIHJvb3QuYWN0aXZlRWxlbWVudCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHRoaXNbJHVzZXJJbnB1dEVsZW1lbnRdLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgcG9zdGVyIGlzIG5vIGxvbmdlciBmb2N1c2FibGUgb3IgdmlzaWJsZSB0b1xuICAgICAgICAgICAgLy8gc2NyZWVuIHJlYWRlcnNcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRQb3N0ZXJFbGVtZW50ID0gdGhpc1skZGVmYXVsdFBvc3RlckVsZW1lbnRdO1xuICAgICAgICAgICAgZGVmYXVsdFBvc3RlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgICAgICBkZWZhdWx0UG9zdGVyRWxlbWVudC50YWJJbmRleCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncG9zdGVyLWRpc21pc3NlZCcpKTtcbiAgICAgICAgfVxuICAgICAgICBbJGdldE1vZGVsSXNWaXNpYmxlXSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlclskZ2V0TW9kZWxJc1Zpc2libGVdKCkgJiYgdGhpc1skbW9kZWxJc1JldmVhbGVkXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcbiAgICBdLCBMb2FkaW5nTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJwb3N0ZXJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcbiAgICBdLCBMb2FkaW5nTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJyZXZlYWxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcbiAgICBdLCBMb2FkaW5nTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJsb2FkaW5nXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIExvYWRpbmdNb2RlbFZpZXdlckVsZW1lbnQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9hZGluZy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/loading.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $currentGLTF: () => (/* binding */ $currentGLTF),\n/* harmony export */   $model: () => (/* binding */ $model),\n/* harmony export */   $originalGltfJson: () => (/* binding */ $originalGltfJson),\n/* harmony export */   SceneGraphMixin: () => (/* binding */ SceneGraphMixin)\n/* harmony export */ });\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/decorators.js */ \"(ssr)/./node_modules/lit/decorators.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_exporters_GLTFExporter_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three/examples/jsm/exporters/GLTFExporter.js */ \"(ssr)/./node_modules/three/examples/jsm/exporters/GLTFExporter.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _three_components_gltf_instance_VariantMaterialExporterPlugin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../three-components/gltf-instance/VariantMaterialExporterPlugin */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/VariantMaterialExporterPlugin.js\");\n/* harmony import */ var _scene_graph_model_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scene-graph/model.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/model.js\");\n/* harmony import */ var _scene_graph_texture__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scene-graph/texture */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/texture.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n\n\nconst $currentGLTF = Symbol('currentGLTF');\nconst $originalGltfJson = Symbol('originalGltfJson');\nconst $model = Symbol('model');\nconst $getOnUpdateMethod = Symbol('getOnUpdateMethod');\nconst $textureLoader = Symbol('textureLoader');\n/**\n * SceneGraphMixin manages exposes a model API in order to support operations on\n * the <model-viewer> scene graph.\n */\nconst SceneGraphMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d;\n    class SceneGraphModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this[_a] = undefined;\n            this[_b] = null;\n            this[_c] = new three__WEBPACK_IMPORTED_MODULE_5__.TextureLoader();\n            this[_d] = null;\n            this.variantName = null;\n            this.orientation = '0 0 0';\n            this.scale = '1 1 1';\n        }\n        // Scene-graph API:\n        /** @export */\n        get model() {\n            return this[$model];\n        }\n        get availableVariants() {\n            return this.model ? this.model[_scene_graph_model_js__WEBPACK_IMPORTED_MODULE_3__.$availableVariants]() : [];\n        }\n        /**\n         * Returns a deep copy of the gltf JSON as loaded. It will not reflect\n         * changes to the scene-graph, nor will editing it have any effect.\n         */\n        get originalGltfJson() {\n            return this[$originalGltfJson];\n        }\n        [(_a = $model, _b = $currentGLTF, _c = $textureLoader, _d = $originalGltfJson, $getOnUpdateMethod)]() {\n            return () => {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n            };\n        }\n        async createTexture(uri, type = 'image/png') {\n            const currentGLTF = this[$currentGLTF];\n            const texture = await new Promise((resolve) => this[$textureLoader].load(uri, resolve));\n            if (!currentGLTF || !texture) {\n                return null;\n            }\n            // Applies default settings.\n            texture.encoding = three__WEBPACK_IMPORTED_MODULE_5__.sRGBEncoding;\n            texture.wrapS = three__WEBPACK_IMPORTED_MODULE_5__.RepeatWrapping;\n            texture.wrapT = three__WEBPACK_IMPORTED_MODULE_5__.RepeatWrapping;\n            texture.flipY = false;\n            texture.userData.mimeType = type;\n            return new _scene_graph_texture__WEBPACK_IMPORTED_MODULE_4__.Texture(this[$getOnUpdateMethod](), texture);\n        }\n        async updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('variantName')) {\n                const updateVariantProgress = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$progressTracker].beginActivity();\n                updateVariantProgress(0.1);\n                const model = this[$model];\n                const { variantName } = this;\n                if (model != null) {\n                    await model[_scene_graph_model_js__WEBPACK_IMPORTED_MODULE_3__.$switchVariant](variantName);\n                    this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n                    this.dispatchEvent(new CustomEvent('variant-applied'));\n                }\n                updateVariantProgress(1.0);\n            }\n            if (changedProperties.has('orientation') ||\n                changedProperties.has('scale')) {\n                if (!this.loaded) {\n                    return;\n                }\n                const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene];\n                scene.applyTransform();\n                scene.updateBoundingBox();\n                scene.updateShadow();\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$renderer].arRenderer.onUpdateScene();\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$needsRender]();\n            }\n        }\n        [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$onModelLoad]() {\n            super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$onModelLoad]();\n            const { currentGLTF } = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene];\n            if (currentGLTF != null) {\n                const { correlatedSceneGraph } = currentGLTF;\n                if (correlatedSceneGraph != null &&\n                    currentGLTF !== this[$currentGLTF]) {\n                    this[$model] =\n                        new _scene_graph_model_js__WEBPACK_IMPORTED_MODULE_3__.Model(correlatedSceneGraph, this[$getOnUpdateMethod]());\n                    this[$originalGltfJson] =\n                        JSON.parse(JSON.stringify(correlatedSceneGraph.gltf));\n                }\n                // KHR_materials_variants extension spec:\n                // https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_variants\n                if ('variants' in currentGLTF.userData) {\n                    this.requestUpdate('variantName');\n                }\n            }\n            this[$currentGLTF] = currentGLTF;\n        }\n        /** @export */\n        async exportScene(options) {\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene];\n            return new Promise(async (resolve, reject) => {\n                // Defaults\n                const opts = {\n                    binary: true,\n                    onlyVisible: true,\n                    maxTextureSize: Infinity,\n                    includeCustomExtensions: false,\n                    forceIndices: false\n                };\n                Object.assign(opts, options);\n                // Not configurable\n                opts.animations = scene.animations;\n                opts.truncateDrawRange = true;\n                const shadow = scene.shadow;\n                let visible = false;\n                // Remove shadow from export\n                if (shadow != null) {\n                    visible = shadow.visible;\n                    shadow.visible = false;\n                }\n                await this[$model][_scene_graph_model_js__WEBPACK_IMPORTED_MODULE_3__.$prepareVariantsForExport]();\n                const exporter = new three_examples_jsm_exporters_GLTFExporter_js__WEBPACK_IMPORTED_MODULE_6__.GLTFExporter()\n                    .register((writer) => new _three_components_gltf_instance_VariantMaterialExporterPlugin__WEBPACK_IMPORTED_MODULE_2__[\"default\"](writer));\n                exporter.parse(scene.model, (gltf) => {\n                    return resolve(new Blob([opts.binary ? gltf : JSON.stringify(gltf)], {\n                        type: opts.binary ? 'application/octet-stream' :\n                            'application/json'\n                    }));\n                }, () => {\n                    return reject('glTF export failed');\n                }, opts);\n                if (shadow != null) {\n                    shadow.visible = visible;\n                }\n            });\n        }\n        materialFromPoint(pixelX, pixelY) {\n            const scene = this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$scene];\n            const ndcCoords = scene.getNDC(pixelX, pixelY);\n            scene.raycaster.setFromCamera(ndcCoords, scene.getCamera());\n            return this[$model][_scene_graph_model_js__WEBPACK_IMPORTED_MODULE_3__.$materialFromPoint](scene.raycaster);\n        }\n    }\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'variant-name' })\n    ], SceneGraphModelViewerElement.prototype, \"variantName\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'orientation' })\n    ], SceneGraphModelViewerElement.prototype, \"orientation\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'scale' })\n    ], SceneGraphModelViewerElement.prototype, \"scale\", void 0);\n    return SceneGraphModelViewerElement;\n};\n//# sourceMappingURL=scene-graph.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixTQUFJLElBQUksU0FBSTtBQUM5QjtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTtBQUM2QztBQUN1QjtBQUNRO0FBQzhCO0FBQ1c7QUFDYTtBQUM1RDtBQUMvRDtBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixnREFBYTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHFFQUFrQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiwrREFBWTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsK0NBQVk7QUFDM0MsNEJBQTRCLGlEQUFjO0FBQzFDLDRCQUE0QixpREFBYztBQUMxQztBQUNBO0FBQ0EsdUJBQXVCLHlEQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxtRUFBZ0I7QUFDbkU7QUFDQTtBQUNBLHdCQUF3QixjQUFjO0FBQ3RDO0FBQ0EsZ0NBQWdDLGlFQUFjO0FBQzlDLHlCQUF5QiwrREFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMseURBQU07QUFDekM7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDREQUFTO0FBQzlCLHFCQUFxQiwrREFBWTtBQUNqQztBQUNBO0FBQ0EsU0FBUywrREFBWTtBQUNyQixrQkFBa0IsK0RBQVk7QUFDOUIsb0JBQW9CLGNBQWMsT0FBTyx5REFBTTtBQUMvQztBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdEQUFLO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHlEQUFNO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNEVBQXlCO0FBQzVELHFDQUFxQyxzRkFBWTtBQUNqRCw4Q0FBOEMscUdBQXNDO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLCtCQUErQix5REFBTTtBQUNyQztBQUNBO0FBQ0EsZ0NBQWdDLHFFQUFrQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcseUNBQXlDO0FBQzVEO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcsd0NBQXdDO0FBQzNEO0FBQ0E7QUFDQSxRQUFRLDJEQUFRLEdBQUcsa0NBQWtDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9mZWF0dXJlcy9zY2VuZS1ncmFwaC5qcz9mMjNiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgUmVwZWF0V3JhcHBpbmcsIHNSR0JFbmNvZGluZywgVGV4dHVyZUxvYWRlciB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7IEdMVEZFeHBvcnRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9leHBvcnRlcnMvR0xURkV4cG9ydGVyLmpzJztcbmltcG9ydCB7ICRuZWVkc1JlbmRlciwgJG9uTW9kZWxMb2FkLCAkcHJvZ3Jlc3NUcmFja2VyLCAkcmVuZGVyZXIsICRzY2VuZSB9IGZyb20gJy4uL21vZGVsLXZpZXdlci1iYXNlLmpzJztcbmltcG9ydCBHTFRGRXhwb3J0ZXJNYXRlcmlhbHNWYXJpYW50c0V4dGVuc2lvbiBmcm9tICcuLi90aHJlZS1jb21wb25lbnRzL2dsdGYtaW5zdGFuY2UvVmFyaWFudE1hdGVyaWFsRXhwb3J0ZXJQbHVnaW4nO1xuaW1wb3J0IHsgJGF2YWlsYWJsZVZhcmlhbnRzLCAkbWF0ZXJpYWxGcm9tUG9pbnQsICRwcmVwYXJlVmFyaWFudHNGb3JFeHBvcnQsICRzd2l0Y2hWYXJpYW50LCBNb2RlbCB9IGZyb20gJy4vc2NlbmUtZ3JhcGgvbW9kZWwuanMnO1xuaW1wb3J0IHsgVGV4dHVyZSBhcyBNb2RlbFZpZXdlclRleHR1cmUgfSBmcm9tICcuL3NjZW5lLWdyYXBoL3RleHR1cmUnO1xuZXhwb3J0IGNvbnN0ICRjdXJyZW50R0xURiA9IFN5bWJvbCgnY3VycmVudEdMVEYnKTtcbmV4cG9ydCBjb25zdCAkb3JpZ2luYWxHbHRmSnNvbiA9IFN5bWJvbCgnb3JpZ2luYWxHbHRmSnNvbicpO1xuZXhwb3J0IGNvbnN0ICRtb2RlbCA9IFN5bWJvbCgnbW9kZWwnKTtcbmNvbnN0ICRnZXRPblVwZGF0ZU1ldGhvZCA9IFN5bWJvbCgnZ2V0T25VcGRhdGVNZXRob2QnKTtcbmNvbnN0ICR0ZXh0dXJlTG9hZGVyID0gU3ltYm9sKCd0ZXh0dXJlTG9hZGVyJyk7XG4vKipcbiAqIFNjZW5lR3JhcGhNaXhpbiBtYW5hZ2VzIGV4cG9zZXMgYSBtb2RlbCBBUEkgaW4gb3JkZXIgdG8gc3VwcG9ydCBvcGVyYXRpb25zIG9uXG4gKiB0aGUgPG1vZGVsLXZpZXdlcj4gc2NlbmUgZ3JhcGguXG4gKi9cbmV4cG9ydCBjb25zdCBTY2VuZUdyYXBoTWl4aW4gPSAoTW9kZWxWaWV3ZXJFbGVtZW50KSA9PiB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNsYXNzIFNjZW5lR3JhcGhNb2RlbFZpZXdlckVsZW1lbnQgZXh0ZW5kcyBNb2RlbFZpZXdlckVsZW1lbnQge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzW19hXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXNbX2JdID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXNbX2NdID0gbmV3IFRleHR1cmVMb2FkZXIoKTtcbiAgICAgICAgICAgIHRoaXNbX2RdID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudmFyaWFudE5hbWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5vcmllbnRhdGlvbiA9ICcwIDAgMCc7XG4gICAgICAgICAgICB0aGlzLnNjYWxlID0gJzEgMSAxJztcbiAgICAgICAgfVxuICAgICAgICAvLyBTY2VuZS1ncmFwaCBBUEk6XG4gICAgICAgIC8qKiBAZXhwb3J0ICovXG4gICAgICAgIGdldCBtb2RlbCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzWyRtb2RlbF07XG4gICAgICAgIH1cbiAgICAgICAgZ2V0IGF2YWlsYWJsZVZhcmlhbnRzKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwgPyB0aGlzLm1vZGVsWyRhdmFpbGFibGVWYXJpYW50c10oKSA6IFtdO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgZGVlcCBjb3B5IG9mIHRoZSBnbHRmIEpTT04gYXMgbG9hZGVkLiBJdCB3aWxsIG5vdCByZWZsZWN0XG4gICAgICAgICAqIGNoYW5nZXMgdG8gdGhlIHNjZW5lLWdyYXBoLCBub3Igd2lsbCBlZGl0aW5nIGl0IGhhdmUgYW55IGVmZmVjdC5cbiAgICAgICAgICovXG4gICAgICAgIGdldCBvcmlnaW5hbEdsdGZKc29uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbJG9yaWdpbmFsR2x0Zkpzb25dO1xuICAgICAgICB9XG4gICAgICAgIFsoX2EgPSAkbW9kZWwsIF9iID0gJGN1cnJlbnRHTFRGLCBfYyA9ICR0ZXh0dXJlTG9hZGVyLCBfZCA9ICRvcmlnaW5hbEdsdGZKc29uLCAkZ2V0T25VcGRhdGVNZXRob2QpXSgpIHtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpc1skbmVlZHNSZW5kZXJdKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGFzeW5jIGNyZWF0ZVRleHR1cmUodXJpLCB0eXBlID0gJ2ltYWdlL3BuZycpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRHTFRGID0gdGhpc1skY3VycmVudEdMVEZdO1xuICAgICAgICAgICAgY29uc3QgdGV4dHVyZSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzWyR0ZXh0dXJlTG9hZGVyXS5sb2FkKHVyaSwgcmVzb2x2ZSkpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50R0xURiB8fCAhdGV4dHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQXBwbGllcyBkZWZhdWx0IHNldHRpbmdzLlxuICAgICAgICAgICAgdGV4dHVyZS5lbmNvZGluZyA9IHNSR0JFbmNvZGluZztcbiAgICAgICAgICAgIHRleHR1cmUud3JhcFMgPSBSZXBlYXRXcmFwcGluZztcbiAgICAgICAgICAgIHRleHR1cmUud3JhcFQgPSBSZXBlYXRXcmFwcGluZztcbiAgICAgICAgICAgIHRleHR1cmUuZmxpcFkgPSBmYWxzZTtcbiAgICAgICAgICAgIHRleHR1cmUudXNlckRhdGEubWltZVR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNb2RlbFZpZXdlclRleHR1cmUodGhpc1skZ2V0T25VcGRhdGVNZXRob2RdKCksIHRleHR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGFzeW5jIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHN1cGVyLnVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygndmFyaWFudE5hbWUnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVZhcmlhbnRQcm9ncmVzcyA9IHRoaXNbJHByb2dyZXNzVHJhY2tlcl0uYmVnaW5BY3Rpdml0eSgpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVZhcmlhbnRQcm9ncmVzcygwLjEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gdGhpc1skbW9kZWxdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFyaWFudE5hbWUgfSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbW9kZWxbJHN3aXRjaFZhcmlhbnRdKHZhcmlhbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skbmVlZHNSZW5kZXJdKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3ZhcmlhbnQtYXBwbGllZCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFyaWFudFByb2dyZXNzKDEuMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdvcmllbnRhdGlvbicpIHx8XG4gICAgICAgICAgICAgICAgY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdzY2FsZScpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpc1skc2NlbmVdO1xuICAgICAgICAgICAgICAgIHNjZW5lLmFwcGx5VHJhbnNmb3JtKCk7XG4gICAgICAgICAgICAgICAgc2NlbmUudXBkYXRlQm91bmRpbmdCb3goKTtcbiAgICAgICAgICAgICAgICBzY2VuZS51cGRhdGVTaGFkb3coKTtcbiAgICAgICAgICAgICAgICB0aGlzWyRyZW5kZXJlcl0uYXJSZW5kZXJlci5vblVwZGF0ZVNjZW5lKCk7XG4gICAgICAgICAgICAgICAgdGhpc1skbmVlZHNSZW5kZXJdKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgWyRvbk1vZGVsTG9hZF0oKSB7XG4gICAgICAgICAgICBzdXBlclskb25Nb2RlbExvYWRdKCk7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbnRHTFRGIH0gPSB0aGlzWyRzY2VuZV07XG4gICAgICAgICAgICBpZiAoY3VycmVudEdMVEYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY29ycmVsYXRlZFNjZW5lR3JhcGggfSA9IGN1cnJlbnRHTFRGO1xuICAgICAgICAgICAgICAgIGlmIChjb3JyZWxhdGVkU2NlbmVHcmFwaCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRHTFRGICE9PSB0aGlzWyRjdXJyZW50R0xURl0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1skbW9kZWxdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNb2RlbChjb3JyZWxhdGVkU2NlbmVHcmFwaCwgdGhpc1skZ2V0T25VcGRhdGVNZXRob2RdKCkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRvcmlnaW5hbEdsdGZKc29uXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvcnJlbGF0ZWRTY2VuZUdyYXBoLmdsdGYpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gS0hSX21hdGVyaWFsc192YXJpYW50cyBleHRlbnNpb24gc3BlYzpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3ZhcmlhbnRzXG4gICAgICAgICAgICAgICAgaWYgKCd2YXJpYW50cycgaW4gY3VycmVudEdMVEYudXNlckRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKCd2YXJpYW50TmFtZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNbJGN1cnJlbnRHTFRGXSA9IGN1cnJlbnRHTFRGO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBAZXhwb3J0ICovXG4gICAgICAgIGFzeW5jIGV4cG9ydFNjZW5lKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpc1skc2NlbmVdO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBEZWZhdWx0c1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmFyeTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgb25seVZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1heFRleHR1cmVTaXplOiBJbmZpbml0eSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUN1c3RvbUV4dGVuc2lvbnM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBmb3JjZUluZGljZXM6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9wdHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIC8vIE5vdCBjb25maWd1cmFibGVcbiAgICAgICAgICAgICAgICBvcHRzLmFuaW1hdGlvbnMgPSBzY2VuZS5hbmltYXRpb25zO1xuICAgICAgICAgICAgICAgIG9wdHMudHJ1bmNhdGVEcmF3UmFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoYWRvdyA9IHNjZW5lLnNoYWRvdztcbiAgICAgICAgICAgICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBzaGFkb3cgZnJvbSBleHBvcnRcbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZSA9IHNoYWRvdy52aXNpYmxlO1xuICAgICAgICAgICAgICAgICAgICBzaGFkb3cudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzWyRtb2RlbF1bJHByZXBhcmVWYXJpYW50c0ZvckV4cG9ydF0oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBleHBvcnRlciA9IG5ldyBHTFRGRXhwb3J0ZXIoKVxuICAgICAgICAgICAgICAgICAgICAucmVnaXN0ZXIoKHdyaXRlcikgPT4gbmV3IEdMVEZFeHBvcnRlck1hdGVyaWFsc1ZhcmlhbnRzRXh0ZW5zaW9uKHdyaXRlcikpO1xuICAgICAgICAgICAgICAgIGV4cG9ydGVyLnBhcnNlKHNjZW5lLm1vZGVsLCAoZ2x0ZikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShuZXcgQmxvYihbb3B0cy5iaW5hcnkgPyBnbHRmIDogSlNPTi5zdHJpbmdpZnkoZ2x0ZildLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBvcHRzLmJpbmFyeSA/ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgnZ2xURiBleHBvcnQgZmFpbGVkJyk7XG4gICAgICAgICAgICAgICAgfSwgb3B0cyk7XG4gICAgICAgICAgICAgICAgaWYgKHNoYWRvdyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYWRvdy52aXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBtYXRlcmlhbEZyb21Qb2ludChwaXhlbFgsIHBpeGVsWSkge1xuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzWyRzY2VuZV07XG4gICAgICAgICAgICBjb25zdCBuZGNDb29yZHMgPSBzY2VuZS5nZXROREMocGl4ZWxYLCBwaXhlbFkpO1xuICAgICAgICAgICAgc2NlbmUucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobmRjQ29vcmRzLCBzY2VuZS5nZXRDYW1lcmEoKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skbW9kZWxdWyRtYXRlcmlhbEZyb21Qb2ludF0oc2NlbmUucmF5Y2FzdGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ3ZhcmlhbnQtbmFtZScgfSlcbiAgICBdLCBTY2VuZUdyYXBoTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJ2YXJpYW50TmFtZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgYXR0cmlidXRlOiAnb3JpZW50YXRpb24nIH0pXG4gICAgXSwgU2NlbmVHcmFwaE1vZGVsVmlld2VyRWxlbWVudC5wcm90b3R5cGUsIFwib3JpZW50YXRpb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcsIGF0dHJpYnV0ZTogJ3NjYWxlJyB9KVxuICAgIF0sIFNjZW5lR3JhcGhNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcInNjYWxlXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIFNjZW5lR3JhcGhNb2RlbFZpZXdlckVsZW1lbnQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NlbmUtZ3JhcGguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/image.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/image.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $applyTexture: () => (/* binding */ $applyTexture),\n/* harmony export */   $threeTexture: () => (/* binding */ $threeTexture),\n/* harmony export */   Image: () => (/* binding */ Image)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _three_components_Renderer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../three-components/Renderer.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Renderer.js\");\n/* harmony import */ var _three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./three-dom-element.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\nconst quadMaterial = new three__WEBPACK_IMPORTED_MODULE_3__.MeshBasicMaterial();\nconst quad = new three__WEBPACK_IMPORTED_MODULE_3__.PlaneGeometry(2, 2);\nlet adhocNum = 0;\nconst $threeTexture = Symbol('threeTexture');\nconst $applyTexture = Symbol('applyTexture');\n/**\n * Image facade implementation for Three.js textures\n */\nclass Image extends _three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.ThreeDOMElement {\n    get [$threeTexture]() {\n        var _a;\n        console.assert(this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects] != null && this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects].size > 0, 'Image correlated object is undefined');\n        return (_a = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects]) === null || _a === void 0 ? void 0 : _a.values().next().value;\n    }\n    constructor(onUpdate, texture, gltfImage) {\n        gltfImage = gltfImage !== null && gltfImage !== void 0 ? gltfImage : {\n            name: (texture && texture.image && texture.image.src) ?\n                texture.image.src.split('/').pop() :\n                'adhoc_image',\n            uri: (texture && texture.image && texture.image.src) ?\n                texture.image.src :\n                'adhoc_image' + adhocNum++\n        };\n        super(onUpdate, gltfImage, new Set(texture ? [texture] : []));\n    }\n    get name() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].name || '';\n    }\n    get uri() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].uri;\n    }\n    get bufferView() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].bufferView;\n    }\n    get type() {\n        return this.uri != null ? 'external' : 'embedded';\n    }\n    set name(name) {\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].name = name;\n    }\n    async createThumbnail(width, height) {\n        const scene = new three__WEBPACK_IMPORTED_MODULE_3__.Scene();\n        quadMaterial.map = this[$threeTexture];\n        const mesh = new three__WEBPACK_IMPORTED_MODULE_3__.Mesh(quad, quadMaterial);\n        scene.add(mesh);\n        const camera = new three__WEBPACK_IMPORTED_MODULE_3__.OrthographicCamera(-1, 1, 1, -1, 0, 1);\n        const { threeRenderer } = _three_components_Renderer_js__WEBPACK_IMPORTED_MODULE_1__.Renderer.singleton;\n        const renderTarget = new three__WEBPACK_IMPORTED_MODULE_3__.WebGLRenderTarget(width, height);\n        threeRenderer.setRenderTarget(renderTarget);\n        threeRenderer.render(scene, camera);\n        threeRenderer.setRenderTarget(null);\n        const buffer = new Uint8Array(width * height * 4);\n        threeRenderer.readRenderTargetPixels(renderTarget, 0, 0, width, height, buffer);\n        _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.blobCanvas.width = width;\n        _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.blobCanvas.height = height;\n        const blobContext = _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.blobCanvas.getContext('2d');\n        const imageData = blobContext.createImageData(width, height);\n        imageData.data.set(buffer);\n        blobContext.putImageData(imageData, 0, 0);\n        return new Promise(async (resolve, reject) => {\n            _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_0__.blobCanvas.toBlob(blob => {\n                if (!blob) {\n                    return reject('Failed to capture thumbnail.');\n                }\n                resolve(URL.createObjectURL(blob));\n            }, 'image/png');\n        });\n    }\n}\n//# sourceMappingURL=image.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL2ltYWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzZHO0FBQ3JEO0FBQ007QUFDOEI7QUFDNUYseUJBQXlCLG9EQUFpQjtBQUMxQyxpQkFBaUIsZ0RBQWE7QUFDOUI7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ08sb0JBQW9CLGtFQUFlO0FBQzFDO0FBQ0E7QUFDQSw0QkFBNEIscUVBQWtCLGtCQUFrQixxRUFBa0I7QUFDbEYsMEJBQTBCLHFFQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBYTtBQUNqQztBQUNBO0FBQ0Esb0JBQW9CLGdFQUFhO0FBQ2pDO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0VBQWE7QUFDMUI7QUFDQTtBQUNBLDBCQUEwQix3Q0FBSztBQUMvQjtBQUNBLHlCQUF5Qix1Q0FBSTtBQUM3QjtBQUNBLDJCQUEyQixxREFBa0I7QUFDN0MsZ0JBQWdCLGdCQUFnQixFQUFFLG1FQUFRO0FBQzFDLGlDQUFpQyxvREFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNkRBQVU7QUFDbEIsUUFBUSw2REFBVTtBQUNsQiw0QkFBNEIsNkRBQVU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDZEQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL2ltYWdlLmpzPzgxMzQiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgTWVzaCwgTWVzaEJhc2ljTWF0ZXJpYWwsIE9ydGhvZ3JhcGhpY0NhbWVyYSwgUGxhbmVHZW9tZXRyeSwgU2NlbmUsIFdlYkdMUmVuZGVyVGFyZ2V0IH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgYmxvYkNhbnZhcyB9IGZyb20gJy4uLy4uL21vZGVsLXZpZXdlci1iYXNlLmpzJztcbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSAnLi4vLi4vdGhyZWUtY29tcG9uZW50cy9SZW5kZXJlci5qcyc7XG5pbXBvcnQgeyAkY29ycmVsYXRlZE9iamVjdHMsICRzb3VyY2VPYmplY3QsIFRocmVlRE9NRWxlbWVudCB9IGZyb20gJy4vdGhyZWUtZG9tLWVsZW1lbnQuanMnO1xuY29uc3QgcXVhZE1hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKCk7XG5jb25zdCBxdWFkID0gbmV3IFBsYW5lR2VvbWV0cnkoMiwgMik7XG5sZXQgYWRob2NOdW0gPSAwO1xuZXhwb3J0IGNvbnN0ICR0aHJlZVRleHR1cmUgPSBTeW1ib2woJ3RocmVlVGV4dHVyZScpO1xuZXhwb3J0IGNvbnN0ICRhcHBseVRleHR1cmUgPSBTeW1ib2woJ2FwcGx5VGV4dHVyZScpO1xuLyoqXG4gKiBJbWFnZSBmYWNhZGUgaW1wbGVtZW50YXRpb24gZm9yIFRocmVlLmpzIHRleHR1cmVzXG4gKi9cbmV4cG9ydCBjbGFzcyBJbWFnZSBleHRlbmRzIFRocmVlRE9NRWxlbWVudCB7XG4gICAgZ2V0IFskdGhyZWVUZXh0dXJlXSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zb2xlLmFzc2VydCh0aGlzWyRjb3JyZWxhdGVkT2JqZWN0c10gIT0gbnVsbCAmJiB0aGlzWyRjb3JyZWxhdGVkT2JqZWN0c10uc2l6ZSA+IDAsICdJbWFnZSBjb3JyZWxhdGVkIG9iamVjdCBpcyB1bmRlZmluZWQnKTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXNbJGNvcnJlbGF0ZWRPYmplY3RzXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob25VcGRhdGUsIHRleHR1cmUsIGdsdGZJbWFnZSkge1xuICAgICAgICBnbHRmSW1hZ2UgPSBnbHRmSW1hZ2UgIT09IG51bGwgJiYgZ2x0ZkltYWdlICE9PSB2b2lkIDAgPyBnbHRmSW1hZ2UgOiB7XG4gICAgICAgICAgICBuYW1lOiAodGV4dHVyZSAmJiB0ZXh0dXJlLmltYWdlICYmIHRleHR1cmUuaW1hZ2Uuc3JjKSA/XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5pbWFnZS5zcmMuc3BsaXQoJy8nKS5wb3AoKSA6XG4gICAgICAgICAgICAgICAgJ2FkaG9jX2ltYWdlJyxcbiAgICAgICAgICAgIHVyaTogKHRleHR1cmUgJiYgdGV4dHVyZS5pbWFnZSAmJiB0ZXh0dXJlLmltYWdlLnNyYykgP1xuICAgICAgICAgICAgICAgIHRleHR1cmUuaW1hZ2Uuc3JjIDpcbiAgICAgICAgICAgICAgICAnYWRob2NfaW1hZ2UnICsgYWRob2NOdW0rK1xuICAgICAgICB9O1xuICAgICAgICBzdXBlcihvblVwZGF0ZSwgZ2x0ZkltYWdlLCBuZXcgU2V0KHRleHR1cmUgPyBbdGV4dHVyZV0gOiBbXSkpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHNvdXJjZU9iamVjdF0ubmFtZSB8fCAnJztcbiAgICB9XG4gICAgZ2V0IHVyaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHNvdXJjZU9iamVjdF0udXJpO1xuICAgIH1cbiAgICBnZXQgYnVmZmVyVmlldygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHNvdXJjZU9iamVjdF0uYnVmZmVyVmlldztcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVyaSAhPSBudWxsID8gJ2V4dGVybmFsJyA6ICdlbWJlZGRlZCc7XG4gICAgfVxuICAgIHNldCBuYW1lKG5hbWUpIHtcbiAgICAgICAgdGhpc1skc291cmNlT2JqZWN0XS5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlVGh1bWJuYWlsKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBuZXcgU2NlbmUoKTtcbiAgICAgICAgcXVhZE1hdGVyaWFsLm1hcCA9IHRoaXNbJHRocmVlVGV4dHVyZV07XG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgTWVzaChxdWFkLCBxdWFkTWF0ZXJpYWwpO1xuICAgICAgICBzY2VuZS5hZGQobWVzaCk7XG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBPcnRob2dyYXBoaWNDYW1lcmEoLTEsIDEsIDEsIC0xLCAwLCAxKTtcbiAgICAgICAgY29uc3QgeyB0aHJlZVJlbmRlcmVyIH0gPSBSZW5kZXJlci5zaW5nbGV0b247XG4gICAgICAgIGNvbnN0IHJlbmRlclRhcmdldCA9IG5ldyBXZWJHTFJlbmRlclRhcmdldCh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhyZWVSZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQocmVuZGVyVGFyZ2V0KTtcbiAgICAgICAgdGhyZWVSZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gICAgICAgIHRocmVlUmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KG51bGwpO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheSh3aWR0aCAqIGhlaWdodCAqIDQpO1xuICAgICAgICB0aHJlZVJlbmRlcmVyLnJlYWRSZW5kZXJUYXJnZXRQaXhlbHMocmVuZGVyVGFyZ2V0LCAwLCAwLCB3aWR0aCwgaGVpZ2h0LCBidWZmZXIpO1xuICAgICAgICBibG9iQ2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIGJsb2JDYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBjb25zdCBibG9iQ29udGV4dCA9IGJsb2JDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gYmxvYkNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBpbWFnZURhdGEuZGF0YS5zZXQoYnVmZmVyKTtcbiAgICAgICAgYmxvYkNvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBibG9iQ2FudmFzLnRvQmxvYihibG9iID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgnRmFpbGVkIHRvIGNhcHR1cmUgdGh1bWJuYWlsLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYikpO1xuICAgICAgICAgICAgfSwgJ2ltYWdlL3BuZycpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/image.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/material.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/material.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $ensureMaterialIsLoaded: () => (/* binding */ $ensureMaterialIsLoaded),\n/* harmony export */   $getLoadedMaterial: () => (/* binding */ $getLoadedMaterial),\n/* harmony export */   $gltfIndex: () => (/* binding */ $gltfIndex),\n/* harmony export */   $lazyLoadGLTFInfo: () => (/* binding */ $lazyLoadGLTFInfo),\n/* harmony export */   $setActive: () => (/* binding */ $setActive),\n/* harmony export */   $variantIndices: () => (/* binding */ $variantIndices),\n/* harmony export */   $variantSet: () => (/* binding */ $variantSet),\n/* harmony export */   Material: () => (/* binding */ Material)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _pbr_metallic_roughness_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pbr-metallic-roughness.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/pbr-metallic-roughness.js\");\n/* harmony import */ var _texture_info_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./texture-info.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/texture-info.js\");\n/* harmony import */ var _three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./three-dom-element.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a;\n\n\n\n\nconst $pbrMetallicRoughness = Symbol('pbrMetallicRoughness');\nconst $normalTexture = Symbol('normalTexture');\nconst $occlusionTexture = Symbol('occlusionTexture');\nconst $emissiveTexture = Symbol('emissiveTexture');\nconst $backingThreeMaterial = Symbol('backingThreeMaterial');\nconst $applyAlphaCutoff = Symbol('applyAlphaCutoff');\nconst $lazyLoadGLTFInfo = Symbol('lazyLoadGLTFInfo');\nconst $initialize = Symbol('initialize');\nconst $getLoadedMaterial = Symbol('getLoadedMaterial');\nconst $ensureMaterialIsLoaded = Symbol('ensureMaterialIsLoaded');\nconst $gltfIndex = Symbol('gltfIndex');\nconst $setActive = Symbol('setActive');\nconst $variantIndices = Symbol('variantIndices');\nconst $isActive = Symbol('isActive');\nconst $variantSet = Symbol('variantSet');\nconst $modelVariants = Symbol('modelVariants');\n/**\n * Material facade implementation for Three.js materials\n */\nclass Material extends _three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.ThreeDOMElement {\n    constructor(onUpdate, gltf, gltfMaterial, gltfIndex, isActive, modelVariants, correlatedMaterials, lazyLoadInfo = undefined) {\n        super(onUpdate, gltfMaterial, correlatedMaterials);\n        this[_a] = new Set();\n        this[$gltfIndex] = gltfIndex;\n        this[$isActive] = isActive;\n        this[$modelVariants] = modelVariants;\n        if (lazyLoadInfo == null) {\n            this[$initialize](gltf);\n        }\n        else {\n            this[$lazyLoadGLTFInfo] = lazyLoadInfo;\n        }\n    }\n    get [(_a = $variantSet, $backingThreeMaterial)]() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects]\n            .values()\n            .next()\n            .value;\n    }\n    [$initialize](gltf) {\n        const onUpdate = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$onUpdate];\n        const gltfMaterial = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject];\n        const correlatedMaterials = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects];\n        if (gltfMaterial.extensions &&\n            gltfMaterial.extensions['KHR_materials_pbrSpecularGlossiness']) {\n            console.warn(`Material ${gltfMaterial.name} uses a deprecated extension\n          \"KHR_materials_pbrSpecularGlossiness\", please use\n          \"pbrMetallicRoughness\" instead. Specular Glossiness materials are\n          currently supported for rendering, but not for our scene-graph API,\n          nor for auto-generation of USDZ for Quick Look.`);\n        }\n        if (gltfMaterial.pbrMetallicRoughness == null) {\n            gltfMaterial.pbrMetallicRoughness = {};\n        }\n        this[$pbrMetallicRoughness] = new _pbr_metallic_roughness_js__WEBPACK_IMPORTED_MODULE_0__.PBRMetallicRoughness(onUpdate, gltf, gltfMaterial.pbrMetallicRoughness, correlatedMaterials);\n        if (gltfMaterial.emissiveFactor == null) {\n            gltfMaterial.emissiveFactor = [0, 0, 0];\n        }\n        if (gltfMaterial.doubleSided == null) {\n            gltfMaterial.doubleSided = false;\n        }\n        if (gltfMaterial.alphaMode == null) {\n            gltfMaterial.alphaMode = 'OPAQUE';\n        }\n        if (gltfMaterial.alphaCutoff == null) {\n            gltfMaterial.alphaCutoff = 0.5;\n        }\n        const { normalTexture: gltfNormalTexture, occlusionTexture: gltfOcclusionTexture, emissiveTexture: gltfEmissiveTexture } = gltfMaterial;\n        const { normalMap, aoMap, emissiveMap } = correlatedMaterials.values().next().value;\n        this[$normalTexture] = new _texture_info_js__WEBPACK_IMPORTED_MODULE_1__.TextureInfo(onUpdate, _texture_info_js__WEBPACK_IMPORTED_MODULE_1__.TextureUsage.Normal, normalMap, correlatedMaterials, gltf, gltfNormalTexture ? gltfNormalTexture : null);\n        this[$occlusionTexture] = new _texture_info_js__WEBPACK_IMPORTED_MODULE_1__.TextureInfo(onUpdate, _texture_info_js__WEBPACK_IMPORTED_MODULE_1__.TextureUsage.Occlusion, aoMap, correlatedMaterials, gltf, gltfOcclusionTexture ? gltfOcclusionTexture : null);\n        this[$emissiveTexture] = new _texture_info_js__WEBPACK_IMPORTED_MODULE_1__.TextureInfo(onUpdate, _texture_info_js__WEBPACK_IMPORTED_MODULE_1__.TextureUsage.Emissive, emissiveMap, correlatedMaterials, gltf, gltfEmissiveTexture ? gltfEmissiveTexture : null);\n    }\n    async [$getLoadedMaterial]() {\n        if (this[$lazyLoadGLTFInfo] != null) {\n            const { set, material } = await this[$lazyLoadGLTFInfo].doLazyLoad();\n            // Fills in the missing data.\n            this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects] = set;\n            this[$initialize](this[$lazyLoadGLTFInfo].gltf);\n            // Releases lazy load info.\n            this[$lazyLoadGLTFInfo] = undefined;\n            // Redefines the method as a noop method.\n            this.ensureLoaded = async () => { };\n            return material;\n        }\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects].values().next().value;\n    }\n    [$ensureMaterialIsLoaded]() {\n        if (this[$lazyLoadGLTFInfo] == null) {\n            return;\n        }\n        throw new Error(`Material \"${this.name}\" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material.`);\n    }\n    async ensureLoaded() {\n        await this[$getLoadedMaterial]();\n    }\n    get isLoaded() {\n        return this[$lazyLoadGLTFInfo] == null;\n    }\n    get isActive() {\n        return this[$isActive];\n    }\n    [$setActive](isActive) {\n        this[$isActive] = isActive;\n    }\n    get name() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].name;\n    }\n    set name(name) {\n        const sourceMaterial = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject];\n        if (sourceMaterial != null) {\n            sourceMaterial.name = name;\n        }\n        if (this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects] != null) {\n            for (const threeMaterial of this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects]) {\n                threeMaterial.name = name;\n            }\n        }\n    }\n    get pbrMetallicRoughness() {\n        this[$ensureMaterialIsLoaded]();\n        return this[$pbrMetallicRoughness];\n    }\n    get normalTexture() {\n        this[$ensureMaterialIsLoaded]();\n        return this[$normalTexture];\n    }\n    get occlusionTexture() {\n        this[$ensureMaterialIsLoaded]();\n        return this[$occlusionTexture];\n    }\n    get emissiveTexture() {\n        this[$ensureMaterialIsLoaded]();\n        return this[$emissiveTexture];\n    }\n    get emissiveFactor() {\n        this[$ensureMaterialIsLoaded]();\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].emissiveFactor;\n    }\n    get index() {\n        return this[$gltfIndex];\n    }\n    [$variantIndices]() {\n        return this[$variantSet];\n    }\n    hasVariant(name) {\n        const variantData = this[$modelVariants].get(name);\n        return variantData != null && this[$variantSet].has(variantData.index);\n    }\n    setEmissiveFactor(rgb) {\n        this[$ensureMaterialIsLoaded]();\n        const color = new three__WEBPACK_IMPORTED_MODULE_3__.Color();\n        if (rgb instanceof Array) {\n            color.fromArray(rgb);\n        }\n        else {\n            color.set(rgb).convertSRGBToLinear();\n        }\n        for (const material of this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects]) {\n            material.emissive.set(color);\n        }\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].emissiveFactor =\n            color.toArray();\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$onUpdate]();\n    }\n    [$applyAlphaCutoff]() {\n        this[$ensureMaterialIsLoaded]();\n        const gltfMaterial = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject];\n        for (const material of this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects]) {\n            if (this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].alphaMode === 'MASK') {\n                material.alphaTest = gltfMaterial.alphaCutoff;\n            }\n            else {\n                material.alphaTest = undefined;\n            }\n            material.needsUpdate = true;\n        }\n    }\n    setAlphaCutoff(cutoff) {\n        this[$ensureMaterialIsLoaded]();\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].alphaCutoff = cutoff;\n        this[$applyAlphaCutoff]();\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$onUpdate]();\n    }\n    getAlphaCutoff() {\n        this[$ensureMaterialIsLoaded]();\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].alphaCutoff;\n    }\n    setDoubleSided(doubleSided) {\n        this[$ensureMaterialIsLoaded]();\n        for (const material of this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects]) {\n            // When double-sided is disabled gltf spec dictates that Back-Face culling\n            // must be disabled, in three.js parlance that would mean FrontSide\n            // rendering only.\n            // https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#double-sided\n            material.side = doubleSided ? three__WEBPACK_IMPORTED_MODULE_3__.DoubleSide : three__WEBPACK_IMPORTED_MODULE_3__.FrontSide;\n            material.needsUpdate = true;\n        }\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].doubleSided = doubleSided;\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$onUpdate]();\n    }\n    getDoubleSided() {\n        this[$ensureMaterialIsLoaded]();\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].doubleSided;\n    }\n    setAlphaMode(alphaMode) {\n        this[$ensureMaterialIsLoaded]();\n        const enableTransparency = (material, enabled) => {\n            material.transparent = enabled;\n            material.depthWrite = !enabled;\n        };\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].alphaMode = alphaMode;\n        for (const material of this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects]) {\n            enableTransparency(material, alphaMode === 'BLEND');\n            this[$applyAlphaCutoff]();\n            material.needsUpdate = true;\n        }\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$onUpdate]();\n    }\n    getAlphaMode() {\n        this[$ensureMaterialIsLoaded]();\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].alphaMode;\n    }\n}\n//# sourceMappingURL=material.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL21hdGVyaWFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNxRDtBQUNjO0FBQ0w7QUFDeUM7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTyx1QkFBdUIsa0VBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxRUFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw0REFBUztBQUN2QyxrQ0FBa0MsZ0VBQWE7QUFDL0MseUNBQXlDLHFFQUFrQjtBQUMzRDtBQUNBO0FBQ0EscUNBQXFDLG1CQUFtQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLDRFQUFvQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUhBQWlIO0FBQ2pJLGdCQUFnQixnQ0FBZ0M7QUFDaEQsbUNBQW1DLHlEQUFXLFdBQVcsMERBQVk7QUFDckUsc0NBQXNDLHlEQUFXLFdBQVcsMERBQVk7QUFDeEUscUNBQXFDLHlEQUFXLFdBQVcsMERBQVk7QUFDdkU7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBLGlCQUFpQixxRUFBa0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUVBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsVUFBVTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQWE7QUFDakM7QUFDQTtBQUNBLG9DQUFvQyxnRUFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIscUVBQWtCO0FBQ25DLDZDQUE2QyxxRUFBa0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsd0NBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHFFQUFrQjtBQUN0RDtBQUNBO0FBQ0EsYUFBYSxnRUFBYTtBQUMxQjtBQUNBLGFBQWEsNERBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGdFQUFhO0FBQy9DLG9DQUFvQyxxRUFBa0I7QUFDdEQscUJBQXFCLGdFQUFhO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnRUFBYTtBQUMxQjtBQUNBLGFBQWEsNERBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdFQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxxRUFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsNkNBQVUsR0FBRyw0Q0FBUztBQUNoRTtBQUNBO0FBQ0EsYUFBYSxnRUFBYTtBQUMxQixhQUFhLDREQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0VBQWE7QUFDMUIsb0NBQW9DLHFFQUFrQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNERBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdFQUFhO0FBQ2pDO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZmVhdHVyZXMvc2NlbmUtZ3JhcGgvbWF0ZXJpYWwuanM/ZGY3MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgX2E7XG5pbXBvcnQgeyBDb2xvciwgRG91YmxlU2lkZSwgRnJvbnRTaWRlIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgUEJSTWV0YWxsaWNSb3VnaG5lc3MgfSBmcm9tICcuL3Bici1tZXRhbGxpYy1yb3VnaG5lc3MuanMnO1xuaW1wb3J0IHsgVGV4dHVyZUluZm8sIFRleHR1cmVVc2FnZSB9IGZyb20gJy4vdGV4dHVyZS1pbmZvLmpzJztcbmltcG9ydCB7ICRjb3JyZWxhdGVkT2JqZWN0cywgJG9uVXBkYXRlLCAkc291cmNlT2JqZWN0LCBUaHJlZURPTUVsZW1lbnQgfSBmcm9tICcuL3RocmVlLWRvbS1lbGVtZW50LmpzJztcbmNvbnN0ICRwYnJNZXRhbGxpY1JvdWdobmVzcyA9IFN5bWJvbCgncGJyTWV0YWxsaWNSb3VnaG5lc3MnKTtcbmNvbnN0ICRub3JtYWxUZXh0dXJlID0gU3ltYm9sKCdub3JtYWxUZXh0dXJlJyk7XG5jb25zdCAkb2NjbHVzaW9uVGV4dHVyZSA9IFN5bWJvbCgnb2NjbHVzaW9uVGV4dHVyZScpO1xuY29uc3QgJGVtaXNzaXZlVGV4dHVyZSA9IFN5bWJvbCgnZW1pc3NpdmVUZXh0dXJlJyk7XG5jb25zdCAkYmFja2luZ1RocmVlTWF0ZXJpYWwgPSBTeW1ib2woJ2JhY2tpbmdUaHJlZU1hdGVyaWFsJyk7XG5jb25zdCAkYXBwbHlBbHBoYUN1dG9mZiA9IFN5bWJvbCgnYXBwbHlBbHBoYUN1dG9mZicpO1xuZXhwb3J0IGNvbnN0ICRsYXp5TG9hZEdMVEZJbmZvID0gU3ltYm9sKCdsYXp5TG9hZEdMVEZJbmZvJyk7XG5jb25zdCAkaW5pdGlhbGl6ZSA9IFN5bWJvbCgnaW5pdGlhbGl6ZScpO1xuZXhwb3J0IGNvbnN0ICRnZXRMb2FkZWRNYXRlcmlhbCA9IFN5bWJvbCgnZ2V0TG9hZGVkTWF0ZXJpYWwnKTtcbmV4cG9ydCBjb25zdCAkZW5zdXJlTWF0ZXJpYWxJc0xvYWRlZCA9IFN5bWJvbCgnZW5zdXJlTWF0ZXJpYWxJc0xvYWRlZCcpO1xuZXhwb3J0IGNvbnN0ICRnbHRmSW5kZXggPSBTeW1ib2woJ2dsdGZJbmRleCcpO1xuZXhwb3J0IGNvbnN0ICRzZXRBY3RpdmUgPSBTeW1ib2woJ3NldEFjdGl2ZScpO1xuZXhwb3J0IGNvbnN0ICR2YXJpYW50SW5kaWNlcyA9IFN5bWJvbCgndmFyaWFudEluZGljZXMnKTtcbmNvbnN0ICRpc0FjdGl2ZSA9IFN5bWJvbCgnaXNBY3RpdmUnKTtcbmV4cG9ydCBjb25zdCAkdmFyaWFudFNldCA9IFN5bWJvbCgndmFyaWFudFNldCcpO1xuY29uc3QgJG1vZGVsVmFyaWFudHMgPSBTeW1ib2woJ21vZGVsVmFyaWFudHMnKTtcbi8qKlxuICogTWF0ZXJpYWwgZmFjYWRlIGltcGxlbWVudGF0aW9uIGZvciBUaHJlZS5qcyBtYXRlcmlhbHNcbiAqL1xuZXhwb3J0IGNsYXNzIE1hdGVyaWFsIGV4dGVuZHMgVGhyZWVET01FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvblVwZGF0ZSwgZ2x0ZiwgZ2x0Zk1hdGVyaWFsLCBnbHRmSW5kZXgsIGlzQWN0aXZlLCBtb2RlbFZhcmlhbnRzLCBjb3JyZWxhdGVkTWF0ZXJpYWxzLCBsYXp5TG9hZEluZm8gPSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3VwZXIob25VcGRhdGUsIGdsdGZNYXRlcmlhbCwgY29ycmVsYXRlZE1hdGVyaWFscyk7XG4gICAgICAgIHRoaXNbX2FdID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzWyRnbHRmSW5kZXhdID0gZ2x0ZkluZGV4O1xuICAgICAgICB0aGlzWyRpc0FjdGl2ZV0gPSBpc0FjdGl2ZTtcbiAgICAgICAgdGhpc1skbW9kZWxWYXJpYW50c10gPSBtb2RlbFZhcmlhbnRzO1xuICAgICAgICBpZiAobGF6eUxvYWRJbmZvID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXNbJGluaXRpYWxpemVdKGdsdGYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpc1skbGF6eUxvYWRHTFRGSW5mb10gPSBsYXp5TG9hZEluZm87XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IFsoX2EgPSAkdmFyaWFudFNldCwgJGJhY2tpbmdUaHJlZU1hdGVyaWFsKV0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRjb3JyZWxhdGVkT2JqZWN0c11cbiAgICAgICAgICAgIC52YWx1ZXMoKVxuICAgICAgICAgICAgLm5leHQoKVxuICAgICAgICAgICAgLnZhbHVlO1xuICAgIH1cbiAgICBbJGluaXRpYWxpemVdKGdsdGYpIHtcbiAgICAgICAgY29uc3Qgb25VcGRhdGUgPSB0aGlzWyRvblVwZGF0ZV07XG4gICAgICAgIGNvbnN0IGdsdGZNYXRlcmlhbCA9IHRoaXNbJHNvdXJjZU9iamVjdF07XG4gICAgICAgIGNvbnN0IGNvcnJlbGF0ZWRNYXRlcmlhbHMgPSB0aGlzWyRjb3JyZWxhdGVkT2JqZWN0c107XG4gICAgICAgIGlmIChnbHRmTWF0ZXJpYWwuZXh0ZW5zaW9ucyAmJlxuICAgICAgICAgICAgZ2x0Zk1hdGVyaWFsLmV4dGVuc2lvbnNbJ0tIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzJ10pIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgTWF0ZXJpYWwgJHtnbHRmTWF0ZXJpYWwubmFtZX0gdXNlcyBhIGRlcHJlY2F0ZWQgZXh0ZW5zaW9uXG4gICAgICAgICAgXCJLSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzc1wiLCBwbGVhc2UgdXNlXG4gICAgICAgICAgXCJwYnJNZXRhbGxpY1JvdWdobmVzc1wiIGluc3RlYWQuIFNwZWN1bGFyIEdsb3NzaW5lc3MgbWF0ZXJpYWxzIGFyZVxuICAgICAgICAgIGN1cnJlbnRseSBzdXBwb3J0ZWQgZm9yIHJlbmRlcmluZywgYnV0IG5vdCBmb3Igb3VyIHNjZW5lLWdyYXBoIEFQSSxcbiAgICAgICAgICBub3IgZm9yIGF1dG8tZ2VuZXJhdGlvbiBvZiBVU0RaIGZvciBRdWljayBMb29rLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbHRmTWF0ZXJpYWwucGJyTWV0YWxsaWNSb3VnaG5lc3MgPT0gbnVsbCkge1xuICAgICAgICAgICAgZ2x0Zk1hdGVyaWFsLnBick1ldGFsbGljUm91Z2huZXNzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1skcGJyTWV0YWxsaWNSb3VnaG5lc3NdID0gbmV3IFBCUk1ldGFsbGljUm91Z2huZXNzKG9uVXBkYXRlLCBnbHRmLCBnbHRmTWF0ZXJpYWwucGJyTWV0YWxsaWNSb3VnaG5lc3MsIGNvcnJlbGF0ZWRNYXRlcmlhbHMpO1xuICAgICAgICBpZiAoZ2x0Zk1hdGVyaWFsLmVtaXNzaXZlRmFjdG9yID09IG51bGwpIHtcbiAgICAgICAgICAgIGdsdGZNYXRlcmlhbC5lbWlzc2l2ZUZhY3RvciA9IFswLCAwLCAwXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2x0Zk1hdGVyaWFsLmRvdWJsZVNpZGVkID09IG51bGwpIHtcbiAgICAgICAgICAgIGdsdGZNYXRlcmlhbC5kb3VibGVTaWRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbHRmTWF0ZXJpYWwuYWxwaGFNb2RlID09IG51bGwpIHtcbiAgICAgICAgICAgIGdsdGZNYXRlcmlhbC5hbHBoYU1vZGUgPSAnT1BBUVVFJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2x0Zk1hdGVyaWFsLmFscGhhQ3V0b2ZmID09IG51bGwpIHtcbiAgICAgICAgICAgIGdsdGZNYXRlcmlhbC5hbHBoYUN1dG9mZiA9IDAuNTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG5vcm1hbFRleHR1cmU6IGdsdGZOb3JtYWxUZXh0dXJlLCBvY2NsdXNpb25UZXh0dXJlOiBnbHRmT2NjbHVzaW9uVGV4dHVyZSwgZW1pc3NpdmVUZXh0dXJlOiBnbHRmRW1pc3NpdmVUZXh0dXJlIH0gPSBnbHRmTWF0ZXJpYWw7XG4gICAgICAgIGNvbnN0IHsgbm9ybWFsTWFwLCBhb01hcCwgZW1pc3NpdmVNYXAgfSA9IGNvcnJlbGF0ZWRNYXRlcmlhbHMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICB0aGlzWyRub3JtYWxUZXh0dXJlXSA9IG5ldyBUZXh0dXJlSW5mbyhvblVwZGF0ZSwgVGV4dHVyZVVzYWdlLk5vcm1hbCwgbm9ybWFsTWFwLCBjb3JyZWxhdGVkTWF0ZXJpYWxzLCBnbHRmLCBnbHRmTm9ybWFsVGV4dHVyZSA/IGdsdGZOb3JtYWxUZXh0dXJlIDogbnVsbCk7XG4gICAgICAgIHRoaXNbJG9jY2x1c2lvblRleHR1cmVdID0gbmV3IFRleHR1cmVJbmZvKG9uVXBkYXRlLCBUZXh0dXJlVXNhZ2UuT2NjbHVzaW9uLCBhb01hcCwgY29ycmVsYXRlZE1hdGVyaWFscywgZ2x0ZiwgZ2x0Zk9jY2x1c2lvblRleHR1cmUgPyBnbHRmT2NjbHVzaW9uVGV4dHVyZSA6IG51bGwpO1xuICAgICAgICB0aGlzWyRlbWlzc2l2ZVRleHR1cmVdID0gbmV3IFRleHR1cmVJbmZvKG9uVXBkYXRlLCBUZXh0dXJlVXNhZ2UuRW1pc3NpdmUsIGVtaXNzaXZlTWFwLCBjb3JyZWxhdGVkTWF0ZXJpYWxzLCBnbHRmLCBnbHRmRW1pc3NpdmVUZXh0dXJlID8gZ2x0ZkVtaXNzaXZlVGV4dHVyZSA6IG51bGwpO1xuICAgIH1cbiAgICBhc3luYyBbJGdldExvYWRlZE1hdGVyaWFsXSgpIHtcbiAgICAgICAgaWYgKHRoaXNbJGxhenlMb2FkR0xURkluZm9dICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgc2V0LCBtYXRlcmlhbCB9ID0gYXdhaXQgdGhpc1skbGF6eUxvYWRHTFRGSW5mb10uZG9MYXp5TG9hZCgpO1xuICAgICAgICAgICAgLy8gRmlsbHMgaW4gdGhlIG1pc3NpbmcgZGF0YS5cbiAgICAgICAgICAgIHRoaXNbJGNvcnJlbGF0ZWRPYmplY3RzXSA9IHNldDtcbiAgICAgICAgICAgIHRoaXNbJGluaXRpYWxpemVdKHRoaXNbJGxhenlMb2FkR0xURkluZm9dLmdsdGYpO1xuICAgICAgICAgICAgLy8gUmVsZWFzZXMgbGF6eSBsb2FkIGluZm8uXG4gICAgICAgICAgICB0aGlzWyRsYXp5TG9hZEdMVEZJbmZvXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIC8vIFJlZGVmaW5lcyB0aGUgbWV0aG9kIGFzIGEgbm9vcCBtZXRob2QuXG4gICAgICAgICAgICB0aGlzLmVuc3VyZUxvYWRlZCA9IGFzeW5jICgpID0+IHsgfTtcbiAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpc1skY29ycmVsYXRlZE9iamVjdHNdLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICB9XG4gICAgWyRlbnN1cmVNYXRlcmlhbElzTG9hZGVkXSgpIHtcbiAgICAgICAgaWYgKHRoaXNbJGxhenlMb2FkR0xURkluZm9dID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hdGVyaWFsIFwiJHt0aGlzLm5hbWV9XCIgaGFzIG5vdCBiZWVuIGxvYWRlZCwgY2FsbCAnYXdhaXRcbiAgICBteU1hdGVyaWFsLmVuc3VyZUxvYWRlZCgpJyBiZWZvcmUgdXNpbmcgYW4gdW5sb2FkZWQgbWF0ZXJpYWwuYCk7XG4gICAgfVxuICAgIGFzeW5jIGVuc3VyZUxvYWRlZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpc1skZ2V0TG9hZGVkTWF0ZXJpYWxdKCk7XG4gICAgfVxuICAgIGdldCBpc0xvYWRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJGxhenlMb2FkR0xURkluZm9dID09IG51bGw7XG4gICAgfVxuICAgIGdldCBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJGlzQWN0aXZlXTtcbiAgICB9XG4gICAgWyRzZXRBY3RpdmVdKGlzQWN0aXZlKSB7XG4gICAgICAgIHRoaXNbJGlzQWN0aXZlXSA9IGlzQWN0aXZlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHNvdXJjZU9iamVjdF0ubmFtZTtcbiAgICB9XG4gICAgc2V0IG5hbWUobmFtZSkge1xuICAgICAgICBjb25zdCBzb3VyY2VNYXRlcmlhbCA9IHRoaXNbJHNvdXJjZU9iamVjdF07XG4gICAgICAgIGlmIChzb3VyY2VNYXRlcmlhbCAhPSBudWxsKSB7XG4gICAgICAgICAgICBzb3VyY2VNYXRlcmlhbC5uYW1lID0gbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpc1skY29ycmVsYXRlZE9iamVjdHNdICE9IG51bGwpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGhyZWVNYXRlcmlhbCBvZiB0aGlzWyRjb3JyZWxhdGVkT2JqZWN0c10pIHtcbiAgICAgICAgICAgICAgICB0aHJlZU1hdGVyaWFsLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBwYnJNZXRhbGxpY1JvdWdobmVzcygpIHtcbiAgICAgICAgdGhpc1skZW5zdXJlTWF0ZXJpYWxJc0xvYWRlZF0oKTtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHBick1ldGFsbGljUm91Z2huZXNzXTtcbiAgICB9XG4gICAgZ2V0IG5vcm1hbFRleHR1cmUoKSB7XG4gICAgICAgIHRoaXNbJGVuc3VyZU1hdGVyaWFsSXNMb2FkZWRdKCk7XG4gICAgICAgIHJldHVybiB0aGlzWyRub3JtYWxUZXh0dXJlXTtcbiAgICB9XG4gICAgZ2V0IG9jY2x1c2lvblRleHR1cmUoKSB7XG4gICAgICAgIHRoaXNbJGVuc3VyZU1hdGVyaWFsSXNMb2FkZWRdKCk7XG4gICAgICAgIHJldHVybiB0aGlzWyRvY2NsdXNpb25UZXh0dXJlXTtcbiAgICB9XG4gICAgZ2V0IGVtaXNzaXZlVGV4dHVyZSgpIHtcbiAgICAgICAgdGhpc1skZW5zdXJlTWF0ZXJpYWxJc0xvYWRlZF0oKTtcbiAgICAgICAgcmV0dXJuIHRoaXNbJGVtaXNzaXZlVGV4dHVyZV07XG4gICAgfVxuICAgIGdldCBlbWlzc2l2ZUZhY3RvcigpIHtcbiAgICAgICAgdGhpc1skZW5zdXJlTWF0ZXJpYWxJc0xvYWRlZF0oKTtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHNvdXJjZU9iamVjdF0uZW1pc3NpdmVGYWN0b3I7XG4gICAgfVxuICAgIGdldCBpbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJGdsdGZJbmRleF07XG4gICAgfVxuICAgIFskdmFyaWFudEluZGljZXNdKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skdmFyaWFudFNldF07XG4gICAgfVxuICAgIGhhc1ZhcmlhbnQobmFtZSkge1xuICAgICAgICBjb25zdCB2YXJpYW50RGF0YSA9IHRoaXNbJG1vZGVsVmFyaWFudHNdLmdldChuYW1lKTtcbiAgICAgICAgcmV0dXJuIHZhcmlhbnREYXRhICE9IG51bGwgJiYgdGhpc1skdmFyaWFudFNldF0uaGFzKHZhcmlhbnREYXRhLmluZGV4KTtcbiAgICB9XG4gICAgc2V0RW1pc3NpdmVGYWN0b3IocmdiKSB7XG4gICAgICAgIHRoaXNbJGVuc3VyZU1hdGVyaWFsSXNMb2FkZWRdKCk7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gbmV3IENvbG9yKCk7XG4gICAgICAgIGlmIChyZ2IgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgY29sb3IuZnJvbUFycmF5KHJnYik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb2xvci5zZXQocmdiKS5jb252ZXJ0U1JHQlRvTGluZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBtYXRlcmlhbCBvZiB0aGlzWyRjb3JyZWxhdGVkT2JqZWN0c10pIHtcbiAgICAgICAgICAgIG1hdGVyaWFsLmVtaXNzaXZlLnNldChjb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1skc291cmNlT2JqZWN0XS5lbWlzc2l2ZUZhY3RvciA9XG4gICAgICAgICAgICBjb2xvci50b0FycmF5KCk7XG4gICAgICAgIHRoaXNbJG9uVXBkYXRlXSgpO1xuICAgIH1cbiAgICBbJGFwcGx5QWxwaGFDdXRvZmZdKCkge1xuICAgICAgICB0aGlzWyRlbnN1cmVNYXRlcmlhbElzTG9hZGVkXSgpO1xuICAgICAgICBjb25zdCBnbHRmTWF0ZXJpYWwgPSB0aGlzWyRzb3VyY2VPYmplY3RdO1xuICAgICAgICBmb3IgKGNvbnN0IG1hdGVyaWFsIG9mIHRoaXNbJGNvcnJlbGF0ZWRPYmplY3RzXSkge1xuICAgICAgICAgICAgaWYgKHRoaXNbJHNvdXJjZU9iamVjdF0uYWxwaGFNb2RlID09PSAnTUFTSycpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYVRlc3QgPSBnbHRmTWF0ZXJpYWwuYWxwaGFDdXRvZmY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5hbHBoYVRlc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0QWxwaGFDdXRvZmYoY3V0b2ZmKSB7XG4gICAgICAgIHRoaXNbJGVuc3VyZU1hdGVyaWFsSXNMb2FkZWRdKCk7XG4gICAgICAgIHRoaXNbJHNvdXJjZU9iamVjdF0uYWxwaGFDdXRvZmYgPSBjdXRvZmY7XG4gICAgICAgIHRoaXNbJGFwcGx5QWxwaGFDdXRvZmZdKCk7XG4gICAgICAgIHRoaXNbJG9uVXBkYXRlXSgpO1xuICAgIH1cbiAgICBnZXRBbHBoYUN1dG9mZigpIHtcbiAgICAgICAgdGhpc1skZW5zdXJlTWF0ZXJpYWxJc0xvYWRlZF0oKTtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHNvdXJjZU9iamVjdF0uYWxwaGFDdXRvZmY7XG4gICAgfVxuICAgIHNldERvdWJsZVNpZGVkKGRvdWJsZVNpZGVkKSB7XG4gICAgICAgIHRoaXNbJGVuc3VyZU1hdGVyaWFsSXNMb2FkZWRdKCk7XG4gICAgICAgIGZvciAoY29uc3QgbWF0ZXJpYWwgb2YgdGhpc1skY29ycmVsYXRlZE9iamVjdHNdKSB7XG4gICAgICAgICAgICAvLyBXaGVuIGRvdWJsZS1zaWRlZCBpcyBkaXNhYmxlZCBnbHRmIHNwZWMgZGljdGF0ZXMgdGhhdCBCYWNrLUZhY2UgY3VsbGluZ1xuICAgICAgICAgICAgLy8gbXVzdCBiZSBkaXNhYmxlZCwgaW4gdGhyZWUuanMgcGFybGFuY2UgdGhhdCB3b3VsZCBtZWFuIEZyb250U2lkZVxuICAgICAgICAgICAgLy8gcmVuZGVyaW5nIG9ubHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjZG91YmxlLXNpZGVkXG4gICAgICAgICAgICBtYXRlcmlhbC5zaWRlID0gZG91YmxlU2lkZWQgPyBEb3VibGVTaWRlIDogRnJvbnRTaWRlO1xuICAgICAgICAgICAgbWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbJHNvdXJjZU9iamVjdF0uZG91YmxlU2lkZWQgPSBkb3VibGVTaWRlZDtcbiAgICAgICAgdGhpc1skb25VcGRhdGVdKCk7XG4gICAgfVxuICAgIGdldERvdWJsZVNpZGVkKCkge1xuICAgICAgICB0aGlzWyRlbnN1cmVNYXRlcmlhbElzTG9hZGVkXSgpO1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlT2JqZWN0XS5kb3VibGVTaWRlZDtcbiAgICB9XG4gICAgc2V0QWxwaGFNb2RlKGFscGhhTW9kZSkge1xuICAgICAgICB0aGlzWyRlbnN1cmVNYXRlcmlhbElzTG9hZGVkXSgpO1xuICAgICAgICBjb25zdCBlbmFibGVUcmFuc3BhcmVuY3kgPSAobWF0ZXJpYWwsIGVuYWJsZWQpID0+IHtcbiAgICAgICAgICAgIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gZW5hYmxlZDtcbiAgICAgICAgICAgIG1hdGVyaWFsLmRlcHRoV3JpdGUgPSAhZW5hYmxlZDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpc1skc291cmNlT2JqZWN0XS5hbHBoYU1vZGUgPSBhbHBoYU1vZGU7XG4gICAgICAgIGZvciAoY29uc3QgbWF0ZXJpYWwgb2YgdGhpc1skY29ycmVsYXRlZE9iamVjdHNdKSB7XG4gICAgICAgICAgICBlbmFibGVUcmFuc3BhcmVuY3kobWF0ZXJpYWwsIGFscGhhTW9kZSA9PT0gJ0JMRU5EJyk7XG4gICAgICAgICAgICB0aGlzWyRhcHBseUFscGhhQ3V0b2ZmXSgpO1xuICAgICAgICAgICAgbWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbJG9uVXBkYXRlXSgpO1xuICAgIH1cbiAgICBnZXRBbHBoYU1vZGUoKSB7XG4gICAgICAgIHRoaXNbJGVuc3VyZU1hdGVyaWFsSXNMb2FkZWRdKCk7XG4gICAgICAgIHJldHVybiB0aGlzWyRzb3VyY2VPYmplY3RdLmFscGhhTW9kZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRlcmlhbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/material.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/model.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/model.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $availableVariants: () => (/* binding */ $availableVariants),\n/* harmony export */   $correlatedSceneGraph: () => (/* binding */ $correlatedSceneGraph),\n/* harmony export */   $loadVariant: () => (/* binding */ $loadVariant),\n/* harmony export */   $materialFromPoint: () => (/* binding */ $materialFromPoint),\n/* harmony export */   $materials: () => (/* binding */ $materials),\n/* harmony export */   $materialsFromPoint: () => (/* binding */ $materialsFromPoint),\n/* harmony export */   $prepareVariantsForExport: () => (/* binding */ $prepareVariantsForExport),\n/* harmony export */   $primitivesList: () => (/* binding */ $primitivesList),\n/* harmony export */   $switchVariant: () => (/* binding */ $switchVariant),\n/* harmony export */   $threeScene: () => (/* binding */ $threeScene),\n/* harmony export */   $variantData: () => (/* binding */ $variantData),\n/* harmony export */   LazyLoader: () => (/* binding */ LazyLoader),\n/* harmony export */   Model: () => (/* binding */ Model)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _material_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./material.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/material.js\");\n/* harmony import */ var _nodes_primitive_node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nodes/primitive-node.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/nodes/primitive-node.js\");\n/* harmony import */ var _three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./three-dom-element.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b, _c, _d, _e, _f;\n\n\n\n\nconst $materials = Symbol('materials');\nconst $hierarchy = Symbol('hierarchy');\nconst $roots = Symbol('roots');\nconst $primitivesList = Symbol('primitives');\nconst $loadVariant = Symbol('loadVariant');\nconst $correlatedSceneGraph = Symbol('correlatedSceneGraph');\nconst $prepareVariantsForExport = Symbol('prepareVariantsForExport');\nconst $switchVariant = Symbol('switchVariant');\nconst $threeScene = Symbol('threeScene');\nconst $materialsFromPoint = Symbol('materialsFromPoint');\nconst $materialFromPoint = Symbol('materialFromPoint');\nconst $variantData = Symbol('variantData');\nconst $availableVariants = Symbol('availableVariants');\nconst $modelOnUpdate = Symbol('modelOnUpdate');\nconst $cloneMaterial = Symbol('cloneMaterial');\n// Holds onto temporary scene context information needed to perform lazy loading\n// of a resource.\nclass LazyLoader {\n    constructor(gltf, gltfElementMap, mapKey, doLazyLoad) {\n        this.gltf = gltf;\n        this.gltfElementMap = gltfElementMap;\n        this.mapKey = mapKey;\n        this.doLazyLoad = doLazyLoad;\n    }\n}\n/**\n * A Model facades the top-level GLTF object returned by Three.js' GLTFLoader.\n * Currently, the model only bothers itself with the materials in the Three.js\n * scene graph.\n */\nclass Model {\n    constructor(correlatedSceneGraph, onUpdate = () => { }) {\n        this[_a] = new Array();\n        this[_b] = new Array();\n        this[_c] = new Array();\n        this[_d] = new Array();\n        this[_e] = () => { };\n        this[_f] = new Map();\n        this[$modelOnUpdate] = onUpdate;\n        this[$correlatedSceneGraph] = correlatedSceneGraph;\n        const { gltf, threeGLTF, gltfElementMap } = correlatedSceneGraph;\n        this[$threeScene] = threeGLTF.scene;\n        for (const [i, material] of gltf.materials.entries()) {\n            const correlatedMaterial = gltfElementMap.get(material);\n            if (correlatedMaterial != null) {\n                this[$materials].push(new _material_js__WEBPACK_IMPORTED_MODULE_0__.Material(onUpdate, gltf, material, i, true, this[$variantData], correlatedMaterial));\n            }\n            else {\n                const elementArray = gltf['materials'] || [];\n                const gltfMaterialDef = elementArray[i];\n                // Loads the three.js material.\n                const capturedMatIndex = i;\n                const materialLoadCallback = async () => {\n                    const threeMaterial = await threeGLTF.parser.getDependency('material', capturedMatIndex);\n                    // Adds correlation, maps the variant gltf-def to the\n                    // three material set containing the variant material.\n                    const threeMaterialSet = new Set();\n                    gltfElementMap.set(gltfMaterialDef, threeMaterialSet);\n                    threeMaterialSet.add(threeMaterial);\n                    return { set: threeMaterialSet, material: threeMaterial };\n                };\n                // Configures the material for lazy loading.\n                this[$materials].push(new _material_js__WEBPACK_IMPORTED_MODULE_0__.Material(onUpdate, gltf, gltfMaterialDef, i, false, this[$variantData], correlatedMaterial, new LazyLoader(gltf, gltfElementMap, gltfMaterialDef, materialLoadCallback)));\n            }\n        }\n        // Creates a hierarchy of Nodes. Allows not just for switching which\n        // material is applied to a mesh but also exposes a way to provide API\n        // for switching materials and general assignment/modification.\n        // Prepares for scene iteration.\n        const parentMap = new Map();\n        const nodeStack = new Array();\n        for (const object of threeGLTF.scene.children) {\n            nodeStack.push(object);\n        }\n        // Walks the hierarchy and creates a node tree.\n        while (nodeStack.length > 0) {\n            const object = nodeStack.pop();\n            let node = null;\n            if (object instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh) {\n                node = new _nodes_primitive_node_js__WEBPACK_IMPORTED_MODULE_1__.PrimitiveNode(object, this.materials, this[$variantData], correlatedSceneGraph);\n                this[$primitivesList].push(node);\n            }\n            else {\n                node = new _nodes_primitive_node_js__WEBPACK_IMPORTED_MODULE_1__.Node(object.name);\n            }\n            const parent = parentMap.get(object);\n            if (parent != null) {\n                parent[_nodes_primitive_node_js__WEBPACK_IMPORTED_MODULE_1__.$children].push(node);\n            }\n            else {\n                this[$roots].push(node);\n            }\n            this[$hierarchy].push(node);\n            for (const child of object.children) {\n                nodeStack.push(child);\n                parentMap.set(object, node);\n            }\n        }\n    }\n    /**\n     * Materials are listed in the order of the GLTF materials array, plus a\n     * default material at the end if one is used.\n     *\n     * TODO(#1003): How do we handle non-active scenes?\n     */\n    get materials() {\n        return this[$materials];\n    }\n    [(_a = $materials, _b = $hierarchy, _c = $roots, _d = $primitivesList, _e = $modelOnUpdate, _f = $variantData, $availableVariants)]() {\n        const variants = Array.from(this[$variantData].values());\n        variants.sort((a, b) => {\n            return a.index - b.index;\n        });\n        return variants.map((data) => {\n            return data.name;\n        });\n    }\n    getMaterialByName(name) {\n        const matches = this[$materials].filter(material => {\n            return material.name === name;\n        });\n        if (matches.length > 0) {\n            return matches[0];\n        }\n        return null;\n    }\n    /**\n     * Intersects a ray with the Model and returns a list of materials whose\n     * objects were intersected.\n     */\n    [$materialsFromPoint](raycaster) {\n        const hits = raycaster.intersectObject(this[$threeScene], true);\n        // Map the object hits to primitives and then to the active material of\n        // the primitive.\n        return hits.map((hit) => {\n            const found = this[$hierarchy].find((node) => {\n                if (node instanceof _nodes_primitive_node_js__WEBPACK_IMPORTED_MODULE_1__.PrimitiveNode) {\n                    const primitive = node;\n                    if (primitive.mesh === hit.object) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (found != null) {\n                return found.getActiveMaterial();\n            }\n            return null;\n        });\n    }\n    /**\n     * Intersects a ray with the Model and returns the first material whose\n     * object was intersected.\n     */\n    [$materialFromPoint](raycaster) {\n        const materials = this[$materialsFromPoint](raycaster);\n        if (materials.length > 0) {\n            return materials[0];\n        }\n        return null;\n    }\n    /**\n     * Switches model variant to the variant name provided, or switches to\n     * default/initial materials if 'null' is provided.\n     */\n    async [$switchVariant](variantName) {\n        for (const primitive of this[$primitivesList]) {\n            await primitive.enableVariant(variantName);\n        }\n        for (const material of this.materials) {\n            material[_material_js__WEBPACK_IMPORTED_MODULE_0__.$setActive](false);\n        }\n        // Marks the materials that are now in use after the variant switch.\n        for (const primitive of this[$primitivesList]) {\n            this.materials[primitive.getActiveMaterial().index][_material_js__WEBPACK_IMPORTED_MODULE_0__.$setActive](true);\n        }\n    }\n    async [$prepareVariantsForExport]() {\n        const promises = new Array();\n        for (const primitive of this[$primitivesList]) {\n            promises.push(primitive.instantiateVariants());\n        }\n        await Promise.all(promises);\n    }\n    [$cloneMaterial](index, newMaterialName) {\n        const material = this.materials[index];\n        if (!material.isLoaded) {\n            console.error(`Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material.`);\n        }\n        const threeMaterialSet = material[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$correlatedObjects];\n        // clones the gltf material data and updates the material name.\n        const gltfSourceMaterial = JSON.parse(JSON.stringify(material[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject]));\n        gltfSourceMaterial.name = newMaterialName;\n        // Adds the source material clone to the gltf def.\n        const gltf = this[$correlatedSceneGraph].gltf;\n        gltf.materials.push(gltfSourceMaterial);\n        const clonedSet = new Set();\n        for (const [i, threeMaterial] of threeMaterialSet.entries()) {\n            const clone = threeMaterial.clone();\n            clone.name =\n                newMaterialName + (threeMaterialSet.size > 1 ? '_inst' + i : '');\n            clonedSet.add(clone);\n        }\n        const clonedMaterial = new _material_js__WEBPACK_IMPORTED_MODULE_0__.Material(this[$modelOnUpdate], this[$correlatedSceneGraph].gltf, gltfSourceMaterial, this[$materials].length, false, // Cloned as inactive.\n        this[$variantData], clonedSet);\n        this[$materials].push(clonedMaterial);\n        return clonedMaterial;\n    }\n    createMaterialInstanceForVariant(originalMaterialIndex, newMaterialName, variantName, activateVariant = true) {\n        let variantMaterialInstance = null;\n        for (const primitive of this[$primitivesList]) {\n            const variantData = this[$variantData].get(variantName);\n            // Skips the primitive if the variant already exists.\n            if (variantData != null && primitive.variantInfo.has(variantData.index)) {\n                continue;\n            }\n            // Skips the primitive if the source/original material does not exist.\n            if (primitive.getMaterial(originalMaterialIndex) == null) {\n                continue;\n            }\n            if (!this.hasVariant(variantName)) {\n                this.createVariant(variantName);\n            }\n            if (variantMaterialInstance == null) {\n                variantMaterialInstance =\n                    this[$cloneMaterial](originalMaterialIndex, newMaterialName);\n            }\n            primitive.addVariant(variantMaterialInstance, variantName);\n        }\n        if (activateVariant && variantMaterialInstance != null) {\n            variantMaterialInstance[_material_js__WEBPACK_IMPORTED_MODULE_0__.$setActive](true);\n            this.materials[originalMaterialIndex][_material_js__WEBPACK_IMPORTED_MODULE_0__.$setActive](false);\n            for (const primitive of this[$primitivesList]) {\n                primitive.enableVariant(variantName);\n            }\n        }\n        return variantMaterialInstance;\n    }\n    createVariant(variantName) {\n        if (!this[$variantData].has(variantName)) {\n            // Adds the name if it's not already in the list.\n            this[$variantData].set(variantName, { name: variantName, index: this[$variantData].size });\n        }\n        else {\n            console.warn(`Variant '${variantName}'' already exists`);\n        }\n    }\n    hasVariant(variantName) {\n        return this[$variantData].has(variantName);\n    }\n    setMaterialToVariant(materialIndex, targetVariantName) {\n        if (this[$availableVariants]().find(name => name === targetVariantName) ==\n            null) {\n            console.warn(`Can't add material to '${targetVariantName}', the variant does not exist.'`);\n            return;\n        }\n        if (materialIndex < 0 || materialIndex >= this.materials.length) {\n            console.error(`setMaterialToVariant(): materialIndex is out of bounds.`);\n            return;\n        }\n        for (const primitive of this[$primitivesList]) {\n            const material = primitive.getMaterial(materialIndex);\n            // Ensures the material exists on the primitive before setting it to a\n            // variant.\n            if (material != null) {\n                primitive.addVariant(material, targetVariantName);\n            }\n        }\n    }\n    updateVariantName(currentName, newName) {\n        const variantData = this[$variantData].get(currentName);\n        if (variantData == null) {\n            return;\n        }\n        variantData.name = newName;\n        this[$variantData].set(newName, variantData);\n        this[$variantData].delete(currentName);\n    }\n    deleteVariant(variantName) {\n        const variant = this[$variantData].get(variantName);\n        if (variant == null) {\n            return;\n        }\n        for (const material of this.materials) {\n            if (material.hasVariant(variantName)) {\n                material[_material_js__WEBPACK_IMPORTED_MODULE_0__.$variantSet].delete(variant.index);\n            }\n        }\n        for (const primitive of this[$primitivesList]) {\n            primitive.deleteVariant(variant.index);\n        }\n        this[$variantData].delete(variantName);\n    }\n}\n//# sourceMappingURL=model.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL21vZGVsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzZCO0FBQ3FDO0FBQ1M7QUFDQTtBQUNwRTtBQUNQO0FBQ0E7QUFDTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDBEQUEwRDtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtDQUFrQztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxrREFBUTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsMENBQTBDLGtEQUFRO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx1Q0FBSTtBQUN0QywyQkFBMkIsbUVBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDBEQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrREFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsbUVBQWE7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvREFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0Usb0RBQVU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHFFQUFrQjtBQUM1RDtBQUNBLHNFQUFzRSxnRUFBYTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGtEQUFRO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msb0RBQVU7QUFDOUMsa0RBQWtELG9EQUFVO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxtREFBbUQ7QUFDckc7QUFDQTtBQUNBLHFDQUFxQyxZQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsa0JBQWtCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZmVhdHVyZXMvc2NlbmUtZ3JhcGgvbW9kZWwuanM/YWJiYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbmltcG9ydCB7IE1lc2ggfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgeyAkc2V0QWN0aXZlLCAkdmFyaWFudFNldCwgTWF0ZXJpYWwgfSBmcm9tICcuL21hdGVyaWFsLmpzJztcbmltcG9ydCB7ICRjaGlsZHJlbiwgTm9kZSwgUHJpbWl0aXZlTm9kZSB9IGZyb20gJy4vbm9kZXMvcHJpbWl0aXZlLW5vZGUuanMnO1xuaW1wb3J0IHsgJGNvcnJlbGF0ZWRPYmplY3RzLCAkc291cmNlT2JqZWN0IH0gZnJvbSAnLi90aHJlZS1kb20tZWxlbWVudC5qcyc7XG5leHBvcnQgY29uc3QgJG1hdGVyaWFscyA9IFN5bWJvbCgnbWF0ZXJpYWxzJyk7XG5jb25zdCAkaGllcmFyY2h5ID0gU3ltYm9sKCdoaWVyYXJjaHknKTtcbmNvbnN0ICRyb290cyA9IFN5bWJvbCgncm9vdHMnKTtcbmV4cG9ydCBjb25zdCAkcHJpbWl0aXZlc0xpc3QgPSBTeW1ib2woJ3ByaW1pdGl2ZXMnKTtcbmV4cG9ydCBjb25zdCAkbG9hZFZhcmlhbnQgPSBTeW1ib2woJ2xvYWRWYXJpYW50Jyk7XG5leHBvcnQgY29uc3QgJGNvcnJlbGF0ZWRTY2VuZUdyYXBoID0gU3ltYm9sKCdjb3JyZWxhdGVkU2NlbmVHcmFwaCcpO1xuZXhwb3J0IGNvbnN0ICRwcmVwYXJlVmFyaWFudHNGb3JFeHBvcnQgPSBTeW1ib2woJ3ByZXBhcmVWYXJpYW50c0ZvckV4cG9ydCcpO1xuZXhwb3J0IGNvbnN0ICRzd2l0Y2hWYXJpYW50ID0gU3ltYm9sKCdzd2l0Y2hWYXJpYW50Jyk7XG5leHBvcnQgY29uc3QgJHRocmVlU2NlbmUgPSBTeW1ib2woJ3RocmVlU2NlbmUnKTtcbmV4cG9ydCBjb25zdCAkbWF0ZXJpYWxzRnJvbVBvaW50ID0gU3ltYm9sKCdtYXRlcmlhbHNGcm9tUG9pbnQnKTtcbmV4cG9ydCBjb25zdCAkbWF0ZXJpYWxGcm9tUG9pbnQgPSBTeW1ib2woJ21hdGVyaWFsRnJvbVBvaW50Jyk7XG5leHBvcnQgY29uc3QgJHZhcmlhbnREYXRhID0gU3ltYm9sKCd2YXJpYW50RGF0YScpO1xuZXhwb3J0IGNvbnN0ICRhdmFpbGFibGVWYXJpYW50cyA9IFN5bWJvbCgnYXZhaWxhYmxlVmFyaWFudHMnKTtcbmNvbnN0ICRtb2RlbE9uVXBkYXRlID0gU3ltYm9sKCdtb2RlbE9uVXBkYXRlJyk7XG5jb25zdCAkY2xvbmVNYXRlcmlhbCA9IFN5bWJvbCgnY2xvbmVNYXRlcmlhbCcpO1xuLy8gSG9sZHMgb250byB0ZW1wb3Jhcnkgc2NlbmUgY29udGV4dCBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gcGVyZm9ybSBsYXp5IGxvYWRpbmdcbi8vIG9mIGEgcmVzb3VyY2UuXG5leHBvcnQgY2xhc3MgTGF6eUxvYWRlciB7XG4gICAgY29uc3RydWN0b3IoZ2x0ZiwgZ2x0ZkVsZW1lbnRNYXAsIG1hcEtleSwgZG9MYXp5TG9hZCkge1xuICAgICAgICB0aGlzLmdsdGYgPSBnbHRmO1xuICAgICAgICB0aGlzLmdsdGZFbGVtZW50TWFwID0gZ2x0ZkVsZW1lbnRNYXA7XG4gICAgICAgIHRoaXMubWFwS2V5ID0gbWFwS2V5O1xuICAgICAgICB0aGlzLmRvTGF6eUxvYWQgPSBkb0xhenlMb2FkO1xuICAgIH1cbn1cbi8qKlxuICogQSBNb2RlbCBmYWNhZGVzIHRoZSB0b3AtbGV2ZWwgR0xURiBvYmplY3QgcmV0dXJuZWQgYnkgVGhyZWUuanMnIEdMVEZMb2FkZXIuXG4gKiBDdXJyZW50bHksIHRoZSBtb2RlbCBvbmx5IGJvdGhlcnMgaXRzZWxmIHdpdGggdGhlIG1hdGVyaWFscyBpbiB0aGUgVGhyZWUuanNcbiAqIHNjZW5lIGdyYXBoLlxuICovXG5leHBvcnQgY2xhc3MgTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKGNvcnJlbGF0ZWRTY2VuZUdyYXBoLCBvblVwZGF0ZSA9ICgpID0+IHsgfSkge1xuICAgICAgICB0aGlzW19hXSA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzW19iXSA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzW19jXSA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzW19kXSA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzW19lXSA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpc1tfZl0gPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXNbJG1vZGVsT25VcGRhdGVdID0gb25VcGRhdGU7XG4gICAgICAgIHRoaXNbJGNvcnJlbGF0ZWRTY2VuZUdyYXBoXSA9IGNvcnJlbGF0ZWRTY2VuZUdyYXBoO1xuICAgICAgICBjb25zdCB7IGdsdGYsIHRocmVlR0xURiwgZ2x0ZkVsZW1lbnRNYXAgfSA9IGNvcnJlbGF0ZWRTY2VuZUdyYXBoO1xuICAgICAgICB0aGlzWyR0aHJlZVNjZW5lXSA9IHRocmVlR0xURi5zY2VuZTtcbiAgICAgICAgZm9yIChjb25zdCBbaSwgbWF0ZXJpYWxdIG9mIGdsdGYubWF0ZXJpYWxzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgY29ycmVsYXRlZE1hdGVyaWFsID0gZ2x0ZkVsZW1lbnRNYXAuZ2V0KG1hdGVyaWFsKTtcbiAgICAgICAgICAgIGlmIChjb3JyZWxhdGVkTWF0ZXJpYWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXNbJG1hdGVyaWFsc10ucHVzaChuZXcgTWF0ZXJpYWwob25VcGRhdGUsIGdsdGYsIG1hdGVyaWFsLCBpLCB0cnVlLCB0aGlzWyR2YXJpYW50RGF0YV0sIGNvcnJlbGF0ZWRNYXRlcmlhbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudEFycmF5ID0gZ2x0ZlsnbWF0ZXJpYWxzJ10gfHwgW107XG4gICAgICAgICAgICAgICAgY29uc3QgZ2x0Zk1hdGVyaWFsRGVmID0gZWxlbWVudEFycmF5W2ldO1xuICAgICAgICAgICAgICAgIC8vIExvYWRzIHRoZSB0aHJlZS5qcyBtYXRlcmlhbC5cbiAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlZE1hdEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbExvYWRDYWxsYmFjayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhyZWVNYXRlcmlhbCA9IGF3YWl0IHRocmVlR0xURi5wYXJzZXIuZ2V0RGVwZW5kZW5jeSgnbWF0ZXJpYWwnLCBjYXB0dXJlZE1hdEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkcyBjb3JyZWxhdGlvbiwgbWFwcyB0aGUgdmFyaWFudCBnbHRmLWRlZiB0byB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhyZWUgbWF0ZXJpYWwgc2V0IGNvbnRhaW5pbmcgdGhlIHZhcmlhbnQgbWF0ZXJpYWwuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRocmVlTWF0ZXJpYWxTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIGdsdGZFbGVtZW50TWFwLnNldChnbHRmTWF0ZXJpYWxEZWYsIHRocmVlTWF0ZXJpYWxTZXQpO1xuICAgICAgICAgICAgICAgICAgICB0aHJlZU1hdGVyaWFsU2V0LmFkZCh0aHJlZU1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc2V0OiB0aHJlZU1hdGVyaWFsU2V0LCBtYXRlcmlhbDogdGhyZWVNYXRlcmlhbCB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gQ29uZmlndXJlcyB0aGUgbWF0ZXJpYWwgZm9yIGxhenkgbG9hZGluZy5cbiAgICAgICAgICAgICAgICB0aGlzWyRtYXRlcmlhbHNdLnB1c2gobmV3IE1hdGVyaWFsKG9uVXBkYXRlLCBnbHRmLCBnbHRmTWF0ZXJpYWxEZWYsIGksIGZhbHNlLCB0aGlzWyR2YXJpYW50RGF0YV0sIGNvcnJlbGF0ZWRNYXRlcmlhbCwgbmV3IExhenlMb2FkZXIoZ2x0ZiwgZ2x0ZkVsZW1lbnRNYXAsIGdsdGZNYXRlcmlhbERlZiwgbWF0ZXJpYWxMb2FkQ2FsbGJhY2spKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlcyBhIGhpZXJhcmNoeSBvZiBOb2Rlcy4gQWxsb3dzIG5vdCBqdXN0IGZvciBzd2l0Y2hpbmcgd2hpY2hcbiAgICAgICAgLy8gbWF0ZXJpYWwgaXMgYXBwbGllZCB0byBhIG1lc2ggYnV0IGFsc28gZXhwb3NlcyBhIHdheSB0byBwcm92aWRlIEFQSVxuICAgICAgICAvLyBmb3Igc3dpdGNoaW5nIG1hdGVyaWFscyBhbmQgZ2VuZXJhbCBhc3NpZ25tZW50L21vZGlmaWNhdGlvbi5cbiAgICAgICAgLy8gUHJlcGFyZXMgZm9yIHNjZW5lIGl0ZXJhdGlvbi5cbiAgICAgICAgY29uc3QgcGFyZW50TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBub2RlU3RhY2sgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgZm9yIChjb25zdCBvYmplY3Qgb2YgdGhyZWVHTFRGLnNjZW5lLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBub2RlU3RhY2sucHVzaChvYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdhbGtzIHRoZSBoaWVyYXJjaHkgYW5kIGNyZWF0ZXMgYSBub2RlIHRyZWUuXG4gICAgICAgIHdoaWxlIChub2RlU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0ID0gbm9kZVN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgbGV0IG5vZGUgPSBudWxsO1xuICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIE1lc2gpIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbmV3IFByaW1pdGl2ZU5vZGUob2JqZWN0LCB0aGlzLm1hdGVyaWFscywgdGhpc1skdmFyaWFudERhdGFdLCBjb3JyZWxhdGVkU2NlbmVHcmFwaCk7XG4gICAgICAgICAgICAgICAgdGhpc1skcHJpbWl0aXZlc0xpc3RdLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbmV3IE5vZGUob2JqZWN0Lm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gcGFyZW50TWFwLmdldChvYmplY3QpO1xuICAgICAgICAgICAgaWYgKHBhcmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50WyRjaGlsZHJlbl0ucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXNbJHJvb3RzXS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1skaGllcmFyY2h5XS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBvYmplY3QuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBub2RlU3RhY2sucHVzaChjaGlsZCk7XG4gICAgICAgICAgICAgICAgcGFyZW50TWFwLnNldChvYmplY3QsIG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hdGVyaWFscyBhcmUgbGlzdGVkIGluIHRoZSBvcmRlciBvZiB0aGUgR0xURiBtYXRlcmlhbHMgYXJyYXksIHBsdXMgYVxuICAgICAqIGRlZmF1bHQgbWF0ZXJpYWwgYXQgdGhlIGVuZCBpZiBvbmUgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oIzEwMDMpOiBIb3cgZG8gd2UgaGFuZGxlIG5vbi1hY3RpdmUgc2NlbmVzP1xuICAgICAqL1xuICAgIGdldCBtYXRlcmlhbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRtYXRlcmlhbHNdO1xuICAgIH1cbiAgICBbKF9hID0gJG1hdGVyaWFscywgX2IgPSAkaGllcmFyY2h5LCBfYyA9ICRyb290cywgX2QgPSAkcHJpbWl0aXZlc0xpc3QsIF9lID0gJG1vZGVsT25VcGRhdGUsIF9mID0gJHZhcmlhbnREYXRhLCAkYXZhaWxhYmxlVmFyaWFudHMpXSgpIHtcbiAgICAgICAgY29uc3QgdmFyaWFudHMgPSBBcnJheS5mcm9tKHRoaXNbJHZhcmlhbnREYXRhXS52YWx1ZXMoKSk7XG4gICAgICAgIHZhcmlhbnRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB2YXJpYW50cy5tYXAoKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhLm5hbWU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRNYXRlcmlhbEJ5TmFtZShuYW1lKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB0aGlzWyRtYXRlcmlhbHNdLmZpbHRlcihtYXRlcmlhbCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbWF0ZXJpYWwubmFtZSA9PT0gbmFtZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnNlY3RzIGEgcmF5IHdpdGggdGhlIE1vZGVsIGFuZCByZXR1cm5zIGEgbGlzdCBvZiBtYXRlcmlhbHMgd2hvc2VcbiAgICAgKiBvYmplY3RzIHdlcmUgaW50ZXJzZWN0ZWQuXG4gICAgICovXG4gICAgWyRtYXRlcmlhbHNGcm9tUG9pbnRdKHJheWNhc3Rlcikge1xuICAgICAgICBjb25zdCBoaXRzID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdCh0aGlzWyR0aHJlZVNjZW5lXSwgdHJ1ZSk7XG4gICAgICAgIC8vIE1hcCB0aGUgb2JqZWN0IGhpdHMgdG8gcHJpbWl0aXZlcyBhbmQgdGhlbiB0byB0aGUgYWN0aXZlIG1hdGVyaWFsIG9mXG4gICAgICAgIC8vIHRoZSBwcmltaXRpdmUuXG4gICAgICAgIHJldHVybiBoaXRzLm1hcCgoaGl0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmb3VuZCA9IHRoaXNbJGhpZXJhcmNoeV0uZmluZCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgUHJpbWl0aXZlTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmltaXRpdmUgPSBub2RlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJpbWl0aXZlLm1lc2ggPT09IGhpdC5vYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGZvdW5kICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQuZ2V0QWN0aXZlTWF0ZXJpYWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJzZWN0cyBhIHJheSB3aXRoIHRoZSBNb2RlbCBhbmQgcmV0dXJucyB0aGUgZmlyc3QgbWF0ZXJpYWwgd2hvc2VcbiAgICAgKiBvYmplY3Qgd2FzIGludGVyc2VjdGVkLlxuICAgICAqL1xuICAgIFskbWF0ZXJpYWxGcm9tUG9pbnRdKHJheWNhc3Rlcikge1xuICAgICAgICBjb25zdCBtYXRlcmlhbHMgPSB0aGlzWyRtYXRlcmlhbHNGcm9tUG9pbnRdKHJheWNhc3Rlcik7XG4gICAgICAgIGlmIChtYXRlcmlhbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGVyaWFsc1swXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3dpdGNoZXMgbW9kZWwgdmFyaWFudCB0byB0aGUgdmFyaWFudCBuYW1lIHByb3ZpZGVkLCBvciBzd2l0Y2hlcyB0b1xuICAgICAqIGRlZmF1bHQvaW5pdGlhbCBtYXRlcmlhbHMgaWYgJ251bGwnIGlzIHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGFzeW5jIFskc3dpdGNoVmFyaWFudF0odmFyaWFudE5hbWUpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcmltaXRpdmUgb2YgdGhpc1skcHJpbWl0aXZlc0xpc3RdKSB7XG4gICAgICAgICAgICBhd2FpdCBwcmltaXRpdmUuZW5hYmxlVmFyaWFudCh2YXJpYW50TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBtYXRlcmlhbCBvZiB0aGlzLm1hdGVyaWFscykge1xuICAgICAgICAgICAgbWF0ZXJpYWxbJHNldEFjdGl2ZV0oZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE1hcmtzIHRoZSBtYXRlcmlhbHMgdGhhdCBhcmUgbm93IGluIHVzZSBhZnRlciB0aGUgdmFyaWFudCBzd2l0Y2guXG4gICAgICAgIGZvciAoY29uc3QgcHJpbWl0aXZlIG9mIHRoaXNbJHByaW1pdGl2ZXNMaXN0XSkge1xuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHNbcHJpbWl0aXZlLmdldEFjdGl2ZU1hdGVyaWFsKCkuaW5kZXhdWyRzZXRBY3RpdmVdKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIFskcHJlcGFyZVZhcmlhbnRzRm9yRXhwb3J0XSgpIHtcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgZm9yIChjb25zdCBwcmltaXRpdmUgb2YgdGhpc1skcHJpbWl0aXZlc0xpc3RdKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHByaW1pdGl2ZS5pbnN0YW50aWF0ZVZhcmlhbnRzKCkpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICB9XG4gICAgWyRjbG9uZU1hdGVyaWFsXShpbmRleCwgbmV3TWF0ZXJpYWxOYW1lKSB7XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbHNbaW5kZXhdO1xuICAgICAgICBpZiAoIW1hdGVyaWFsLmlzTG9hZGVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDbG9uaW5nIGFuIHVubG9hZGVkIG1hdGVyaWFsLFxuICAgICAgICAgICBjYWxsICdtYXRlcmlhbC5lbnN1cmVMb2FkZWQoKSBiZWZvcmUgY2xvbmluZyB0aGUgbWF0ZXJpYWwuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGhyZWVNYXRlcmlhbFNldCA9IG1hdGVyaWFsWyRjb3JyZWxhdGVkT2JqZWN0c107XG4gICAgICAgIC8vIGNsb25lcyB0aGUgZ2x0ZiBtYXRlcmlhbCBkYXRhIGFuZCB1cGRhdGVzIHRoZSBtYXRlcmlhbCBuYW1lLlxuICAgICAgICBjb25zdCBnbHRmU291cmNlTWF0ZXJpYWwgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG1hdGVyaWFsWyRzb3VyY2VPYmplY3RdKSk7XG4gICAgICAgIGdsdGZTb3VyY2VNYXRlcmlhbC5uYW1lID0gbmV3TWF0ZXJpYWxOYW1lO1xuICAgICAgICAvLyBBZGRzIHRoZSBzb3VyY2UgbWF0ZXJpYWwgY2xvbmUgdG8gdGhlIGdsdGYgZGVmLlxuICAgICAgICBjb25zdCBnbHRmID0gdGhpc1skY29ycmVsYXRlZFNjZW5lR3JhcGhdLmdsdGY7XG4gICAgICAgIGdsdGYubWF0ZXJpYWxzLnB1c2goZ2x0ZlNvdXJjZU1hdGVyaWFsKTtcbiAgICAgICAgY29uc3QgY2xvbmVkU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IFtpLCB0aHJlZU1hdGVyaWFsXSBvZiB0aHJlZU1hdGVyaWFsU2V0LmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgY2xvbmUgPSB0aHJlZU1hdGVyaWFsLmNsb25lKCk7XG4gICAgICAgICAgICBjbG9uZS5uYW1lID1cbiAgICAgICAgICAgICAgICBuZXdNYXRlcmlhbE5hbWUgKyAodGhyZWVNYXRlcmlhbFNldC5zaXplID4gMSA/ICdfaW5zdCcgKyBpIDogJycpO1xuICAgICAgICAgICAgY2xvbmVkU2V0LmFkZChjbG9uZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xvbmVkTWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwodGhpc1skbW9kZWxPblVwZGF0ZV0sIHRoaXNbJGNvcnJlbGF0ZWRTY2VuZUdyYXBoXS5nbHRmLCBnbHRmU291cmNlTWF0ZXJpYWwsIHRoaXNbJG1hdGVyaWFsc10ubGVuZ3RoLCBmYWxzZSwgLy8gQ2xvbmVkIGFzIGluYWN0aXZlLlxuICAgICAgICB0aGlzWyR2YXJpYW50RGF0YV0sIGNsb25lZFNldCk7XG4gICAgICAgIHRoaXNbJG1hdGVyaWFsc10ucHVzaChjbG9uZWRNYXRlcmlhbCk7XG4gICAgICAgIHJldHVybiBjbG9uZWRNYXRlcmlhbDtcbiAgICB9XG4gICAgY3JlYXRlTWF0ZXJpYWxJbnN0YW5jZUZvclZhcmlhbnQob3JpZ2luYWxNYXRlcmlhbEluZGV4LCBuZXdNYXRlcmlhbE5hbWUsIHZhcmlhbnROYW1lLCBhY3RpdmF0ZVZhcmlhbnQgPSB0cnVlKSB7XG4gICAgICAgIGxldCB2YXJpYW50TWF0ZXJpYWxJbnN0YW5jZSA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgcHJpbWl0aXZlIG9mIHRoaXNbJHByaW1pdGl2ZXNMaXN0XSkge1xuICAgICAgICAgICAgY29uc3QgdmFyaWFudERhdGEgPSB0aGlzWyR2YXJpYW50RGF0YV0uZ2V0KHZhcmlhbnROYW1lKTtcbiAgICAgICAgICAgIC8vIFNraXBzIHRoZSBwcmltaXRpdmUgaWYgdGhlIHZhcmlhbnQgYWxyZWFkeSBleGlzdHMuXG4gICAgICAgICAgICBpZiAodmFyaWFudERhdGEgIT0gbnVsbCAmJiBwcmltaXRpdmUudmFyaWFudEluZm8uaGFzKHZhcmlhbnREYXRhLmluZGV4KSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2tpcHMgdGhlIHByaW1pdGl2ZSBpZiB0aGUgc291cmNlL29yaWdpbmFsIG1hdGVyaWFsIGRvZXMgbm90IGV4aXN0LlxuICAgICAgICAgICAgaWYgKHByaW1pdGl2ZS5nZXRNYXRlcmlhbChvcmlnaW5hbE1hdGVyaWFsSW5kZXgpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNWYXJpYW50KHZhcmlhbnROYW1lKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVmFyaWFudCh2YXJpYW50TmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFyaWFudE1hdGVyaWFsSW5zdGFuY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhcmlhbnRNYXRlcmlhbEluc3RhbmNlID1cbiAgICAgICAgICAgICAgICAgICAgdGhpc1skY2xvbmVNYXRlcmlhbF0ob3JpZ2luYWxNYXRlcmlhbEluZGV4LCBuZXdNYXRlcmlhbE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJpbWl0aXZlLmFkZFZhcmlhbnQodmFyaWFudE1hdGVyaWFsSW5zdGFuY2UsIHZhcmlhbnROYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aXZhdGVWYXJpYW50ICYmIHZhcmlhbnRNYXRlcmlhbEluc3RhbmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhcmlhbnRNYXRlcmlhbEluc3RhbmNlWyRzZXRBY3RpdmVdKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHNbb3JpZ2luYWxNYXRlcmlhbEluZGV4XVskc2V0QWN0aXZlXShmYWxzZSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByaW1pdGl2ZSBvZiB0aGlzWyRwcmltaXRpdmVzTGlzdF0pIHtcbiAgICAgICAgICAgICAgICBwcmltaXRpdmUuZW5hYmxlVmFyaWFudCh2YXJpYW50TmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhcmlhbnRNYXRlcmlhbEluc3RhbmNlO1xuICAgIH1cbiAgICBjcmVhdGVWYXJpYW50KHZhcmlhbnROYW1lKSB7XG4gICAgICAgIGlmICghdGhpc1skdmFyaWFudERhdGFdLmhhcyh2YXJpYW50TmFtZSkpIHtcbiAgICAgICAgICAgIC8vIEFkZHMgdGhlIG5hbWUgaWYgaXQncyBub3QgYWxyZWFkeSBpbiB0aGUgbGlzdC5cbiAgICAgICAgICAgIHRoaXNbJHZhcmlhbnREYXRhXS5zZXQodmFyaWFudE5hbWUsIHsgbmFtZTogdmFyaWFudE5hbWUsIGluZGV4OiB0aGlzWyR2YXJpYW50RGF0YV0uc2l6ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgVmFyaWFudCAnJHt2YXJpYW50TmFtZX0nJyBhbHJlYWR5IGV4aXN0c2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhc1ZhcmlhbnQodmFyaWFudE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHZhcmlhbnREYXRhXS5oYXModmFyaWFudE5hbWUpO1xuICAgIH1cbiAgICBzZXRNYXRlcmlhbFRvVmFyaWFudChtYXRlcmlhbEluZGV4LCB0YXJnZXRWYXJpYW50TmFtZSkge1xuICAgICAgICBpZiAodGhpc1skYXZhaWxhYmxlVmFyaWFudHNdKCkuZmluZChuYW1lID0+IG5hbWUgPT09IHRhcmdldFZhcmlhbnROYW1lKSA9PVxuICAgICAgICAgICAgbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBDYW4ndCBhZGQgbWF0ZXJpYWwgdG8gJyR7dGFyZ2V0VmFyaWFudE5hbWV9JywgdGhlIHZhcmlhbnQgZG9lcyBub3QgZXhpc3QuJ2ApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRlcmlhbEluZGV4IDwgMCB8fCBtYXRlcmlhbEluZGV4ID49IHRoaXMubWF0ZXJpYWxzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgc2V0TWF0ZXJpYWxUb1ZhcmlhbnQoKTogbWF0ZXJpYWxJbmRleCBpcyBvdXQgb2YgYm91bmRzLmApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcHJpbWl0aXZlIG9mIHRoaXNbJHByaW1pdGl2ZXNMaXN0XSkge1xuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBwcmltaXRpdmUuZ2V0TWF0ZXJpYWwobWF0ZXJpYWxJbmRleCk7XG4gICAgICAgICAgICAvLyBFbnN1cmVzIHRoZSBtYXRlcmlhbCBleGlzdHMgb24gdGhlIHByaW1pdGl2ZSBiZWZvcmUgc2V0dGluZyBpdCB0byBhXG4gICAgICAgICAgICAvLyB2YXJpYW50LlxuICAgICAgICAgICAgaWYgKG1hdGVyaWFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwcmltaXRpdmUuYWRkVmFyaWFudChtYXRlcmlhbCwgdGFyZ2V0VmFyaWFudE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVZhcmlhbnROYW1lKGN1cnJlbnROYW1lLCBuZXdOYW1lKSB7XG4gICAgICAgIGNvbnN0IHZhcmlhbnREYXRhID0gdGhpc1skdmFyaWFudERhdGFdLmdldChjdXJyZW50TmFtZSk7XG4gICAgICAgIGlmICh2YXJpYW50RGF0YSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyaWFudERhdGEubmFtZSA9IG5ld05hbWU7XG4gICAgICAgIHRoaXNbJHZhcmlhbnREYXRhXS5zZXQobmV3TmFtZSwgdmFyaWFudERhdGEpO1xuICAgICAgICB0aGlzWyR2YXJpYW50RGF0YV0uZGVsZXRlKGN1cnJlbnROYW1lKTtcbiAgICB9XG4gICAgZGVsZXRlVmFyaWFudCh2YXJpYW50TmFtZSkge1xuICAgICAgICBjb25zdCB2YXJpYW50ID0gdGhpc1skdmFyaWFudERhdGFdLmdldCh2YXJpYW50TmFtZSk7XG4gICAgICAgIGlmICh2YXJpYW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IG1hdGVyaWFsIG9mIHRoaXMubWF0ZXJpYWxzKSB7XG4gICAgICAgICAgICBpZiAobWF0ZXJpYWwuaGFzVmFyaWFudCh2YXJpYW50TmFtZSkpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFskdmFyaWFudFNldF0uZGVsZXRlKHZhcmlhbnQuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcHJpbWl0aXZlIG9mIHRoaXNbJHByaW1pdGl2ZXNMaXN0XSkge1xuICAgICAgICAgICAgcHJpbWl0aXZlLmRlbGV0ZVZhcmlhbnQodmFyaWFudC5pbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1skdmFyaWFudERhdGFdLmRlbGV0ZSh2YXJpYW50TmFtZSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kZWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/model.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/nodes/primitive-node.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/nodes/primitive-node.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $activeMaterialIdx: () => (/* binding */ $activeMaterialIdx),\n/* harmony export */   $children: () => (/* binding */ $children),\n/* harmony export */   $initialMaterialIdx: () => (/* binding */ $initialMaterialIdx),\n/* harmony export */   $loadVariant: () => (/* binding */ $loadVariant),\n/* harmony export */   $prepareVariantsForExport: () => (/* binding */ $prepareVariantsForExport),\n/* harmony export */   $primitives: () => (/* binding */ $primitives),\n/* harmony export */   $switchVariant: () => (/* binding */ $switchVariant),\n/* harmony export */   Node: () => (/* binding */ Node),\n/* harmony export */   PrimitiveNode: () => (/* binding */ PrimitiveNode)\n/* harmony export */ });\n/* harmony import */ var _material_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../material.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/material.js\");\n/* harmony import */ var _three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../three-dom-element.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js\");\nvar _a, _b, _c, _d, _e;\n\n\nconst $materials = Symbol('materials');\nconst $variantToMaterialMap = Symbol('variantToMaterialMap');\nconst $modelVariants = Symbol('modelVariants');\nconst $mesh = Symbol('mesh');\nconst $primitives = Symbol('primitives');\nconst $loadVariant = Symbol('loadVariant');\nconst $prepareVariantsForExport = Symbol('prepareVariantsForExport');\nconst $switchVariant = Symbol('switchVariant');\nconst $children = Symbol('children');\nconst $initialMaterialIdx = Symbol('initialMaterialIdx');\nconst $activeMaterialIdx = Symbol('activeMaterialIdx');\n// Defines the base level node methods and data.\nclass Node {\n    constructor(name) {\n        this.name = '';\n        this[_a] = new Array();\n        this.name = name;\n    }\n}\n_a = $children;\n// Represents a primitive in a glTF mesh.\nclass PrimitiveNode extends Node {\n    constructor(mesh, mvMaterials, modelVariants, correlatedSceneGraph) {\n        super(mesh.name);\n        // Maps glTF material index number to a material that this primitive supports.\n        this[_b] = new Map();\n        // Maps variant index to material.\n        this[_c] = new Map();\n        this[_d] = 0;\n        this[_e] = 0;\n        this[$mesh] = mesh;\n        const { gltf, threeGLTF, threeObjectMap } = correlatedSceneGraph;\n        this[$modelVariants] = modelVariants;\n        this.mesh.userData.variantData = modelVariants;\n        // Captures the primitive's initial material.\n        const materialMappings = threeObjectMap.get(mesh.material);\n        if (materialMappings.materials != null) {\n            this[$initialMaterialIdx] = this[$activeMaterialIdx] =\n                materialMappings.materials;\n        }\n        else {\n            console.error(`Primitive (${mesh.name}) missing initial material reference.`);\n        }\n        // Gets the mesh index from the node.\n        const associations = mesh.userData.associations ||\n            {};\n        if (associations.meshes == null) {\n            console.error('Mesh is missing primitive index association');\n            return;\n        }\n        // The gltf mesh array to sample from.\n        const meshElementArray = gltf['meshes'] || [];\n        // List of primitives under the mesh.\n        const gltfPrimitives = (meshElementArray[associations.meshes].primitives || []);\n        const gltfPrimitive = gltfPrimitives[associations.primitives];\n        if (gltfPrimitive == null) {\n            console.error('Mesh primitive definition is missing.');\n            return;\n        }\n        // Maps the gltfPrimitive default to a material.\n        if (gltfPrimitive.material != null) {\n            this[$materials].set(gltfPrimitive.material, mvMaterials[gltfPrimitive.material]);\n        }\n        else {\n            const defaultIdx = mvMaterials.findIndex((mat) => {\n                return mat.name === 'Default';\n            });\n            if (defaultIdx >= 0) {\n                this[$materials].set(defaultIdx, mvMaterials[defaultIdx]);\n            }\n            else {\n                console.warn('gltfPrimitive has no material!');\n            }\n        }\n        if (gltfPrimitive.extensions &&\n            gltfPrimitive.extensions['KHR_materials_variants']) {\n            const variantsExtension = gltfPrimitive.extensions['KHR_materials_variants'];\n            const extensions = threeGLTF.parser.json.extensions;\n            const variantNames = extensions['KHR_materials_variants'].variants;\n            // Provides definition now that we know there are variants to\n            // support.\n            for (const mapping of variantsExtension.mappings) {\n                const mvMaterial = mvMaterials[mapping.material];\n                // Maps variant indices to Materials.\n                this[$materials].set(mapping.material, mvMaterial);\n                for (const variant of mapping.variants) {\n                    const { name } = variantNames[variant];\n                    this[$variantToMaterialMap].set(variant, mvMaterial);\n                    // Provides variant info for material self lookup.\n                    mvMaterial[_material_js__WEBPACK_IMPORTED_MODULE_0__.$variantIndices]().add(variant);\n                    // Updates the models variant data.\n                    if (!modelVariants.has(name)) {\n                        modelVariants.set(name, { name, index: variant });\n                    }\n                }\n            }\n        }\n    }\n    get mesh() {\n        return this[$mesh];\n    }\n    async setActiveMaterial(material) {\n        const mvMaterial = this[$materials].get(material);\n        if (mvMaterial != null) {\n            this.mesh.material = await mvMaterial[_material_js__WEBPACK_IMPORTED_MODULE_0__.$getLoadedMaterial]();\n            this[$activeMaterialIdx] = material;\n        }\n        return this.mesh.material;\n    }\n    getActiveMaterial() {\n        return this[$materials].get(this[$activeMaterialIdx]);\n    }\n    getMaterial(index) {\n        return this[$materials].get(index);\n    }\n    async enableVariant(name) {\n        if (name == null) {\n            return this.setActiveMaterial(this[$initialMaterialIdx]);\n        }\n        if (this[$variantToMaterialMap] != null && this[$modelVariants].has(name)) {\n            const modelVariants = this[$modelVariants].get(name);\n            return this.enableVariantHelper(modelVariants.index);\n        }\n        return null;\n    }\n    async enableVariantHelper(index) {\n        if (this[$variantToMaterialMap] != null && index != null) {\n            const material = this[$variantToMaterialMap].get(index);\n            if (material != null) {\n                return this.setActiveMaterial(material.index);\n            }\n        }\n        return null;\n    }\n    async instantiateVariants() {\n        if (this[$variantToMaterialMap] == null) {\n            return;\n        }\n        for (const index of this[$variantToMaterialMap].keys()) {\n            const variantMaterial = this.mesh.userData.variantMaterials.get(index);\n            if (variantMaterial.material != null) {\n                continue;\n            }\n            const threeMaterial = await this.enableVariantHelper(index);\n            if (threeMaterial != null) {\n                variantMaterial.material = threeMaterial;\n            }\n        }\n    }\n    get variantInfo() {\n        return this[$variantToMaterialMap];\n    }\n    addVariant(materialVariant, variantName) {\n        if (!this.ensureVariantIsUnused(variantName)) {\n            return false;\n        }\n        // Adds the variant to the model variants if needed.\n        if (!this[$modelVariants].has(variantName)) {\n            this[$modelVariants].set(variantName, { name: variantName, index: this[$modelVariants].size });\n        }\n        const modelVariantData = this[$modelVariants].get(variantName);\n        const variantIndex = modelVariantData.index;\n        // Updates materials mapped to the variant.\n        materialVariant[_material_js__WEBPACK_IMPORTED_MODULE_0__.$variantIndices]().add(variantIndex);\n        // Updates internal mappings.\n        this[$variantToMaterialMap].set(variantIndex, materialVariant);\n        this[$materials].set(materialVariant.index, materialVariant);\n        this.updateVariantUserData(variantIndex, materialVariant);\n        return true;\n    }\n    deleteVariant(variantIndex) {\n        if (this.variantInfo.has(variantIndex)) {\n            this.variantInfo.delete(variantIndex);\n            const userDataMap = this.mesh.userData.variantMaterials;\n            if (userDataMap != null) {\n                userDataMap.delete(variantIndex);\n            }\n        }\n    }\n    updateVariantUserData(variantIndex, materialVariant) {\n        // Adds variants name to material variants set.\n        materialVariant[_material_js__WEBPACK_IMPORTED_MODULE_0__.$variantIndices]().add(variantIndex);\n        this.mesh.userData.variantData = this[$modelVariants];\n        // Updates import data (see VariantMaterialLoaderPlugin.ts).\n        this.mesh.userData.variantMaterials = this.mesh.userData.variantMaterials ||\n            new Map();\n        const map = this.mesh.userData.variantMaterials;\n        map.set(variantIndex, {\n            material: materialVariant[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$correlatedObjects].values().next().value,\n            gltfMaterialIndex: materialVariant.index,\n        });\n    }\n    ensureVariantIsUnused(variantName) {\n        const modelVariants = this[$modelVariants].get(variantName);\n        if (modelVariants != null && this.variantInfo.has(modelVariants.index)) {\n            console.warn(`Primitive cannot add variant '${variantName}' for this material, it already exists.`);\n            return false;\n        }\n        return true;\n    }\n}\n_b = $materials, _c = $variantToMaterialMap, _d = $initialMaterialIdx, _e = $activeMaterialIdx;\n//# sourceMappingURL=primitive-node.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL25vZGVzL3ByaW1pdGl2ZS1ub2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDcUU7QUFDUjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ1A7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrQ0FBa0M7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFVBQVU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLE9BQU87QUFDbkM7QUFDQTtBQUNBLCtCQUErQix5REFBZTtBQUM5QztBQUNBO0FBQ0Esa0RBQWtELHNCQUFzQjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDREQUFrQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELHFEQUFxRDtBQUN6RztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5REFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlEQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxxRUFBa0I7QUFDeEQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsWUFBWTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZmVhdHVyZXMvc2NlbmUtZ3JhcGgvbm9kZXMvcHJpbWl0aXZlLW5vZGUuanM/MDk5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuaW1wb3J0IHsgJGdldExvYWRlZE1hdGVyaWFsLCAkdmFyaWFudEluZGljZXMgfSBmcm9tICcuLi9tYXRlcmlhbC5qcyc7XG5pbXBvcnQgeyAkY29ycmVsYXRlZE9iamVjdHMgfSBmcm9tICcuLi90aHJlZS1kb20tZWxlbWVudC5qcyc7XG5jb25zdCAkbWF0ZXJpYWxzID0gU3ltYm9sKCdtYXRlcmlhbHMnKTtcbmNvbnN0ICR2YXJpYW50VG9NYXRlcmlhbE1hcCA9IFN5bWJvbCgndmFyaWFudFRvTWF0ZXJpYWxNYXAnKTtcbmNvbnN0ICRtb2RlbFZhcmlhbnRzID0gU3ltYm9sKCdtb2RlbFZhcmlhbnRzJyk7XG5jb25zdCAkbWVzaCA9IFN5bWJvbCgnbWVzaCcpO1xuZXhwb3J0IGNvbnN0ICRwcmltaXRpdmVzID0gU3ltYm9sKCdwcmltaXRpdmVzJyk7XG5leHBvcnQgY29uc3QgJGxvYWRWYXJpYW50ID0gU3ltYm9sKCdsb2FkVmFyaWFudCcpO1xuZXhwb3J0IGNvbnN0ICRwcmVwYXJlVmFyaWFudHNGb3JFeHBvcnQgPSBTeW1ib2woJ3ByZXBhcmVWYXJpYW50c0ZvckV4cG9ydCcpO1xuZXhwb3J0IGNvbnN0ICRzd2l0Y2hWYXJpYW50ID0gU3ltYm9sKCdzd2l0Y2hWYXJpYW50Jyk7XG5leHBvcnQgY29uc3QgJGNoaWxkcmVuID0gU3ltYm9sKCdjaGlsZHJlbicpO1xuZXhwb3J0IGNvbnN0ICRpbml0aWFsTWF0ZXJpYWxJZHggPSBTeW1ib2woJ2luaXRpYWxNYXRlcmlhbElkeCcpO1xuZXhwb3J0IGNvbnN0ICRhY3RpdmVNYXRlcmlhbElkeCA9IFN5bWJvbCgnYWN0aXZlTWF0ZXJpYWxJZHgnKTtcbi8vIERlZmluZXMgdGhlIGJhc2UgbGV2ZWwgbm9kZSBtZXRob2RzIGFuZCBkYXRhLlxuZXhwb3J0IGNsYXNzIE5vZGUge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gJyc7XG4gICAgICAgIHRoaXNbX2FdID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfVxufVxuX2EgPSAkY2hpbGRyZW47XG4vLyBSZXByZXNlbnRzIGEgcHJpbWl0aXZlIGluIGEgZ2xURiBtZXNoLlxuZXhwb3J0IGNsYXNzIFByaW1pdGl2ZU5vZGUgZXh0ZW5kcyBOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNoLCBtdk1hdGVyaWFscywgbW9kZWxWYXJpYW50cywgY29ycmVsYXRlZFNjZW5lR3JhcGgpIHtcbiAgICAgICAgc3VwZXIobWVzaC5uYW1lKTtcbiAgICAgICAgLy8gTWFwcyBnbFRGIG1hdGVyaWFsIGluZGV4IG51bWJlciB0byBhIG1hdGVyaWFsIHRoYXQgdGhpcyBwcmltaXRpdmUgc3VwcG9ydHMuXG4gICAgICAgIHRoaXNbX2JdID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyBNYXBzIHZhcmlhbnQgaW5kZXggdG8gbWF0ZXJpYWwuXG4gICAgICAgIHRoaXNbX2NdID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzW19kXSA9IDA7XG4gICAgICAgIHRoaXNbX2VdID0gMDtcbiAgICAgICAgdGhpc1skbWVzaF0gPSBtZXNoO1xuICAgICAgICBjb25zdCB7IGdsdGYsIHRocmVlR0xURiwgdGhyZWVPYmplY3RNYXAgfSA9IGNvcnJlbGF0ZWRTY2VuZUdyYXBoO1xuICAgICAgICB0aGlzWyRtb2RlbFZhcmlhbnRzXSA9IG1vZGVsVmFyaWFudHM7XG4gICAgICAgIHRoaXMubWVzaC51c2VyRGF0YS52YXJpYW50RGF0YSA9IG1vZGVsVmFyaWFudHM7XG4gICAgICAgIC8vIENhcHR1cmVzIHRoZSBwcmltaXRpdmUncyBpbml0aWFsIG1hdGVyaWFsLlxuICAgICAgICBjb25zdCBtYXRlcmlhbE1hcHBpbmdzID0gdGhyZWVPYmplY3RNYXAuZ2V0KG1lc2gubWF0ZXJpYWwpO1xuICAgICAgICBpZiAobWF0ZXJpYWxNYXBwaW5ncy5tYXRlcmlhbHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpc1skaW5pdGlhbE1hdGVyaWFsSWR4XSA9IHRoaXNbJGFjdGl2ZU1hdGVyaWFsSWR4XSA9XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxNYXBwaW5ncy5tYXRlcmlhbHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBQcmltaXRpdmUgKCR7bWVzaC5uYW1lfSkgbWlzc2luZyBpbml0aWFsIG1hdGVyaWFsIHJlZmVyZW5jZS5gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBHZXRzIHRoZSBtZXNoIGluZGV4IGZyb20gdGhlIG5vZGUuXG4gICAgICAgIGNvbnN0IGFzc29jaWF0aW9ucyA9IG1lc2gudXNlckRhdGEuYXNzb2NpYXRpb25zIHx8XG4gICAgICAgICAgICB7fTtcbiAgICAgICAgaWYgKGFzc29jaWF0aW9ucy5tZXNoZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWVzaCBpcyBtaXNzaW5nIHByaW1pdGl2ZSBpbmRleCBhc3NvY2lhdGlvbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBnbHRmIG1lc2ggYXJyYXkgdG8gc2FtcGxlIGZyb20uXG4gICAgICAgIGNvbnN0IG1lc2hFbGVtZW50QXJyYXkgPSBnbHRmWydtZXNoZXMnXSB8fCBbXTtcbiAgICAgICAgLy8gTGlzdCBvZiBwcmltaXRpdmVzIHVuZGVyIHRoZSBtZXNoLlxuICAgICAgICBjb25zdCBnbHRmUHJpbWl0aXZlcyA9IChtZXNoRWxlbWVudEFycmF5W2Fzc29jaWF0aW9ucy5tZXNoZXNdLnByaW1pdGl2ZXMgfHwgW10pO1xuICAgICAgICBjb25zdCBnbHRmUHJpbWl0aXZlID0gZ2x0ZlByaW1pdGl2ZXNbYXNzb2NpYXRpb25zLnByaW1pdGl2ZXNdO1xuICAgICAgICBpZiAoZ2x0ZlByaW1pdGl2ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNZXNoIHByaW1pdGl2ZSBkZWZpbml0aW9uIGlzIG1pc3NpbmcuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFwcyB0aGUgZ2x0ZlByaW1pdGl2ZSBkZWZhdWx0IHRvIGEgbWF0ZXJpYWwuXG4gICAgICAgIGlmIChnbHRmUHJpbWl0aXZlLm1hdGVyaWFsICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXNbJG1hdGVyaWFsc10uc2V0KGdsdGZQcmltaXRpdmUubWF0ZXJpYWwsIG12TWF0ZXJpYWxzW2dsdGZQcmltaXRpdmUubWF0ZXJpYWxdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRJZHggPSBtdk1hdGVyaWFscy5maW5kSW5kZXgoKG1hdCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXQubmFtZSA9PT0gJ0RlZmF1bHQnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZGVmYXVsdElkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skbWF0ZXJpYWxzXS5zZXQoZGVmYXVsdElkeCwgbXZNYXRlcmlhbHNbZGVmYXVsdElkeF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdnbHRmUHJpbWl0aXZlIGhhcyBubyBtYXRlcmlhbCEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2x0ZlByaW1pdGl2ZS5leHRlbnNpb25zICYmXG4gICAgICAgICAgICBnbHRmUHJpbWl0aXZlLmV4dGVuc2lvbnNbJ0tIUl9tYXRlcmlhbHNfdmFyaWFudHMnXSkge1xuICAgICAgICAgICAgY29uc3QgdmFyaWFudHNFeHRlbnNpb24gPSBnbHRmUHJpbWl0aXZlLmV4dGVuc2lvbnNbJ0tIUl9tYXRlcmlhbHNfdmFyaWFudHMnXTtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSB0aHJlZUdMVEYucGFyc2VyLmpzb24uZXh0ZW5zaW9ucztcbiAgICAgICAgICAgIGNvbnN0IHZhcmlhbnROYW1lcyA9IGV4dGVuc2lvbnNbJ0tIUl9tYXRlcmlhbHNfdmFyaWFudHMnXS52YXJpYW50cztcbiAgICAgICAgICAgIC8vIFByb3ZpZGVzIGRlZmluaXRpb24gbm93IHRoYXQgd2Uga25vdyB0aGVyZSBhcmUgdmFyaWFudHMgdG9cbiAgICAgICAgICAgIC8vIHN1cHBvcnQuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1hcHBpbmcgb2YgdmFyaWFudHNFeHRlbnNpb24ubWFwcGluZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtdk1hdGVyaWFsID0gbXZNYXRlcmlhbHNbbWFwcGluZy5tYXRlcmlhbF07XG4gICAgICAgICAgICAgICAgLy8gTWFwcyB2YXJpYW50IGluZGljZXMgdG8gTWF0ZXJpYWxzLlxuICAgICAgICAgICAgICAgIHRoaXNbJG1hdGVyaWFsc10uc2V0KG1hcHBpbmcubWF0ZXJpYWwsIG12TWF0ZXJpYWwpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFyaWFudCBvZiBtYXBwaW5nLnZhcmlhbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSB9ID0gdmFyaWFudE5hbWVzW3ZhcmlhbnRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyR2YXJpYW50VG9NYXRlcmlhbE1hcF0uc2V0KHZhcmlhbnQsIG12TWF0ZXJpYWwpO1xuICAgICAgICAgICAgICAgICAgICAvLyBQcm92aWRlcyB2YXJpYW50IGluZm8gZm9yIG1hdGVyaWFsIHNlbGYgbG9va3VwLlxuICAgICAgICAgICAgICAgICAgICBtdk1hdGVyaWFsWyR2YXJpYW50SW5kaWNlc10oKS5hZGQodmFyaWFudCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZXMgdGhlIG1vZGVscyB2YXJpYW50IGRhdGEuXG4gICAgICAgICAgICAgICAgICAgIGlmICghbW9kZWxWYXJpYW50cy5oYXMobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsVmFyaWFudHMuc2V0KG5hbWUsIHsgbmFtZSwgaW5kZXg6IHZhcmlhbnQgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG1lc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRtZXNoXTtcbiAgICB9XG4gICAgYXN5bmMgc2V0QWN0aXZlTWF0ZXJpYWwobWF0ZXJpYWwpIHtcbiAgICAgICAgY29uc3QgbXZNYXRlcmlhbCA9IHRoaXNbJG1hdGVyaWFsc10uZ2V0KG1hdGVyaWFsKTtcbiAgICAgICAgaWYgKG12TWF0ZXJpYWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5tZXNoLm1hdGVyaWFsID0gYXdhaXQgbXZNYXRlcmlhbFskZ2V0TG9hZGVkTWF0ZXJpYWxdKCk7XG4gICAgICAgICAgICB0aGlzWyRhY3RpdmVNYXRlcmlhbElkeF0gPSBtYXRlcmlhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5tZXNoLm1hdGVyaWFsO1xuICAgIH1cbiAgICBnZXRBY3RpdmVNYXRlcmlhbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJG1hdGVyaWFsc10uZ2V0KHRoaXNbJGFjdGl2ZU1hdGVyaWFsSWR4XSk7XG4gICAgfVxuICAgIGdldE1hdGVyaWFsKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRtYXRlcmlhbHNdLmdldChpbmRleCk7XG4gICAgfVxuICAgIGFzeW5jIGVuYWJsZVZhcmlhbnQobmFtZSkge1xuICAgICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRBY3RpdmVNYXRlcmlhbCh0aGlzWyRpbml0aWFsTWF0ZXJpYWxJZHhdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpc1skdmFyaWFudFRvTWF0ZXJpYWxNYXBdICE9IG51bGwgJiYgdGhpc1skbW9kZWxWYXJpYW50c10uaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBtb2RlbFZhcmlhbnRzID0gdGhpc1skbW9kZWxWYXJpYW50c10uZ2V0KG5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlVmFyaWFudEhlbHBlcihtb2RlbFZhcmlhbnRzLmluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgZW5hYmxlVmFyaWFudEhlbHBlcihpbmRleCkge1xuICAgICAgICBpZiAodGhpc1skdmFyaWFudFRvTWF0ZXJpYWxNYXBdICE9IG51bGwgJiYgaW5kZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzWyR2YXJpYW50VG9NYXRlcmlhbE1hcF0uZ2V0KGluZGV4KTtcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0QWN0aXZlTWF0ZXJpYWwobWF0ZXJpYWwuaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBhc3luYyBpbnN0YW50aWF0ZVZhcmlhbnRzKCkge1xuICAgICAgICBpZiAodGhpc1skdmFyaWFudFRvTWF0ZXJpYWxNYXBdID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIHRoaXNbJHZhcmlhbnRUb01hdGVyaWFsTWFwXS5rZXlzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhcmlhbnRNYXRlcmlhbCA9IHRoaXMubWVzaC51c2VyRGF0YS52YXJpYW50TWF0ZXJpYWxzLmdldChpbmRleCk7XG4gICAgICAgICAgICBpZiAodmFyaWFudE1hdGVyaWFsLm1hdGVyaWFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRocmVlTWF0ZXJpYWwgPSBhd2FpdCB0aGlzLmVuYWJsZVZhcmlhbnRIZWxwZXIoaW5kZXgpO1xuICAgICAgICAgICAgaWYgKHRocmVlTWF0ZXJpYWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhcmlhbnRNYXRlcmlhbC5tYXRlcmlhbCA9IHRocmVlTWF0ZXJpYWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHZhcmlhbnRJbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skdmFyaWFudFRvTWF0ZXJpYWxNYXBdO1xuICAgIH1cbiAgICBhZGRWYXJpYW50KG1hdGVyaWFsVmFyaWFudCwgdmFyaWFudE5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuc3VyZVZhcmlhbnRJc1VudXNlZCh2YXJpYW50TmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGRzIHRoZSB2YXJpYW50IHRvIHRoZSBtb2RlbCB2YXJpYW50cyBpZiBuZWVkZWQuXG4gICAgICAgIGlmICghdGhpc1skbW9kZWxWYXJpYW50c10uaGFzKHZhcmlhbnROYW1lKSkge1xuICAgICAgICAgICAgdGhpc1skbW9kZWxWYXJpYW50c10uc2V0KHZhcmlhbnROYW1lLCB7IG5hbWU6IHZhcmlhbnROYW1lLCBpbmRleDogdGhpc1skbW9kZWxWYXJpYW50c10uc2l6ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbFZhcmlhbnREYXRhID0gdGhpc1skbW9kZWxWYXJpYW50c10uZ2V0KHZhcmlhbnROYW1lKTtcbiAgICAgICAgY29uc3QgdmFyaWFudEluZGV4ID0gbW9kZWxWYXJpYW50RGF0YS5pbmRleDtcbiAgICAgICAgLy8gVXBkYXRlcyBtYXRlcmlhbHMgbWFwcGVkIHRvIHRoZSB2YXJpYW50LlxuICAgICAgICBtYXRlcmlhbFZhcmlhbnRbJHZhcmlhbnRJbmRpY2VzXSgpLmFkZCh2YXJpYW50SW5kZXgpO1xuICAgICAgICAvLyBVcGRhdGVzIGludGVybmFsIG1hcHBpbmdzLlxuICAgICAgICB0aGlzWyR2YXJpYW50VG9NYXRlcmlhbE1hcF0uc2V0KHZhcmlhbnRJbmRleCwgbWF0ZXJpYWxWYXJpYW50KTtcbiAgICAgICAgdGhpc1skbWF0ZXJpYWxzXS5zZXQobWF0ZXJpYWxWYXJpYW50LmluZGV4LCBtYXRlcmlhbFZhcmlhbnQpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhcmlhbnRVc2VyRGF0YSh2YXJpYW50SW5kZXgsIG1hdGVyaWFsVmFyaWFudCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBkZWxldGVWYXJpYW50KHZhcmlhbnRJbmRleCkge1xuICAgICAgICBpZiAodGhpcy52YXJpYW50SW5mby5oYXModmFyaWFudEluZGV4KSkge1xuICAgICAgICAgICAgdGhpcy52YXJpYW50SW5mby5kZWxldGUodmFyaWFudEluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJEYXRhTWFwID0gdGhpcy5tZXNoLnVzZXJEYXRhLnZhcmlhbnRNYXRlcmlhbHM7XG4gICAgICAgICAgICBpZiAodXNlckRhdGFNYXAgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHVzZXJEYXRhTWFwLmRlbGV0ZSh2YXJpYW50SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVZhcmlhbnRVc2VyRGF0YSh2YXJpYW50SW5kZXgsIG1hdGVyaWFsVmFyaWFudCkge1xuICAgICAgICAvLyBBZGRzIHZhcmlhbnRzIG5hbWUgdG8gbWF0ZXJpYWwgdmFyaWFudHMgc2V0LlxuICAgICAgICBtYXRlcmlhbFZhcmlhbnRbJHZhcmlhbnRJbmRpY2VzXSgpLmFkZCh2YXJpYW50SW5kZXgpO1xuICAgICAgICB0aGlzLm1lc2gudXNlckRhdGEudmFyaWFudERhdGEgPSB0aGlzWyRtb2RlbFZhcmlhbnRzXTtcbiAgICAgICAgLy8gVXBkYXRlcyBpbXBvcnQgZGF0YSAoc2VlIFZhcmlhbnRNYXRlcmlhbExvYWRlclBsdWdpbi50cykuXG4gICAgICAgIHRoaXMubWVzaC51c2VyRGF0YS52YXJpYW50TWF0ZXJpYWxzID0gdGhpcy5tZXNoLnVzZXJEYXRhLnZhcmlhbnRNYXRlcmlhbHMgfHxcbiAgICAgICAgICAgIG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgbWFwID0gdGhpcy5tZXNoLnVzZXJEYXRhLnZhcmlhbnRNYXRlcmlhbHM7XG4gICAgICAgIG1hcC5zZXQodmFyaWFudEluZGV4LCB7XG4gICAgICAgICAgICBtYXRlcmlhbDogbWF0ZXJpYWxWYXJpYW50WyRjb3JyZWxhdGVkT2JqZWN0c10udmFsdWVzKCkubmV4dCgpLnZhbHVlLFxuICAgICAgICAgICAgZ2x0Zk1hdGVyaWFsSW5kZXg6IG1hdGVyaWFsVmFyaWFudC5pbmRleCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVuc3VyZVZhcmlhbnRJc1VudXNlZCh2YXJpYW50TmFtZSkge1xuICAgICAgICBjb25zdCBtb2RlbFZhcmlhbnRzID0gdGhpc1skbW9kZWxWYXJpYW50c10uZ2V0KHZhcmlhbnROYW1lKTtcbiAgICAgICAgaWYgKG1vZGVsVmFyaWFudHMgIT0gbnVsbCAmJiB0aGlzLnZhcmlhbnRJbmZvLmhhcyhtb2RlbFZhcmlhbnRzLmluZGV4KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBQcmltaXRpdmUgY2Fubm90IGFkZCB2YXJpYW50ICcke3ZhcmlhbnROYW1lfScgZm9yIHRoaXMgbWF0ZXJpYWwsIGl0IGFscmVhZHkgZXhpc3RzLmApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbl9iID0gJG1hdGVyaWFscywgX2MgPSAkdmFyaWFudFRvTWF0ZXJpYWxNYXAsIF9kID0gJGluaXRpYWxNYXRlcmlhbElkeCwgX2UgPSAkYWN0aXZlTWF0ZXJpYWxJZHg7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcmltaXRpdmUtbm9kZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/nodes/primitive-node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/pbr-metallic-roughness.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/pbr-metallic-roughness.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PBRMetallicRoughness: () => (/* binding */ PBRMetallicRoughness)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _texture_info_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./texture-info.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/texture-info.js\");\n/* harmony import */ var _three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./three-dom-element.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\nconst $threeMaterials = Symbol('threeMaterials');\nconst $baseColorTexture = Symbol('baseColorTexture');\nconst $metallicRoughnessTexture = Symbol('metallicRoughnessTexture');\n/**\n * PBR material properties facade implementation for Three.js materials\n */\nclass PBRMetallicRoughness extends _three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.ThreeDOMElement {\n    constructor(onUpdate, gltf, pbrMetallicRoughness, correlatedMaterials) {\n        super(onUpdate, pbrMetallicRoughness, correlatedMaterials);\n        // Assign glTF default values\n        if (pbrMetallicRoughness.baseColorFactor == null) {\n            pbrMetallicRoughness.baseColorFactor = [1, 1, 1, 1];\n        }\n        if (pbrMetallicRoughness.roughnessFactor == null) {\n            pbrMetallicRoughness.roughnessFactor = 1;\n        }\n        if (pbrMetallicRoughness.metallicFactor == null) {\n            pbrMetallicRoughness.metallicFactor = 1;\n        }\n        const { baseColorTexture: gltfBaseColorTexture, metallicRoughnessTexture: gltfMetallicRoughnessTexture } = pbrMetallicRoughness;\n        const { map, metalnessMap } = correlatedMaterials.values().next().value;\n        this[$baseColorTexture] = new _texture_info_js__WEBPACK_IMPORTED_MODULE_0__.TextureInfo(onUpdate, _texture_info_js__WEBPACK_IMPORTED_MODULE_0__.TextureUsage.Base, map, correlatedMaterials, gltf, gltfBaseColorTexture ? gltfBaseColorTexture : null);\n        this[$metallicRoughnessTexture] = new _texture_info_js__WEBPACK_IMPORTED_MODULE_0__.TextureInfo(onUpdate, _texture_info_js__WEBPACK_IMPORTED_MODULE_0__.TextureUsage.MetallicRoughness, metalnessMap, correlatedMaterials, gltf, gltfMetallicRoughnessTexture ? gltfMetallicRoughnessTexture : null);\n    }\n    get [$threeMaterials]() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$correlatedObjects];\n    }\n    get baseColorFactor() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject]\n            .baseColorFactor;\n    }\n    get metallicFactor() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject]\n            .metallicFactor;\n    }\n    get roughnessFactor() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject]\n            .roughnessFactor;\n    }\n    get baseColorTexture() {\n        return this[$baseColorTexture];\n    }\n    get metallicRoughnessTexture() {\n        return this[$metallicRoughnessTexture];\n    }\n    setBaseColorFactor(rgba) {\n        const color = new three__WEBPACK_IMPORTED_MODULE_2__.Color();\n        if (rgba instanceof Array) {\n            color.fromArray(rgba);\n        }\n        else {\n            color.set(rgba).convertSRGBToLinear();\n        }\n        for (const material of this[$threeMaterials]) {\n            material.color.set(color);\n            if (rgba instanceof Array) {\n                material.opacity = (rgba)[3];\n            }\n            else {\n                rgba = [0, 0, 0, material.opacity];\n                color.toArray(rgba);\n            }\n        }\n        const pbrMetallicRoughness = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject];\n        pbrMetallicRoughness.baseColorFactor = rgba;\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$onUpdate]();\n    }\n    setMetallicFactor(value) {\n        for (const material of this[$threeMaterials]) {\n            material.metalness = value;\n        }\n        const pbrMetallicRoughness = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject];\n        pbrMetallicRoughness.metallicFactor = value;\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$onUpdate]();\n    }\n    setRoughnessFactor(value) {\n        for (const material of this[$threeMaterials]) {\n            material.roughness = value;\n        }\n        const pbrMetallicRoughness = this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject];\n        pbrMetallicRoughness.roughnessFactor = value;\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$onUpdate]();\n    }\n}\n//# sourceMappingURL=pbr-metallic-roughness.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL3Bici1tZXRhbGxpYy1yb3VnaG5lc3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDOEI7QUFDZ0M7QUFDeUM7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sbUNBQW1DLGtFQUFlO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixpR0FBaUc7QUFDakgsZ0JBQWdCLG9CQUFvQjtBQUNwQyxzQ0FBc0MseURBQVcsV0FBVywwREFBWTtBQUN4RSw4Q0FBOEMseURBQVcsV0FBVywwREFBWTtBQUNoRjtBQUNBO0FBQ0Esb0JBQW9CLHFFQUFrQjtBQUN0QztBQUNBO0FBQ0Esb0JBQW9CLGdFQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBYTtBQUNqQztBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdDQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdFQUFhO0FBQ3ZEO0FBQ0EsYUFBYSw0REFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdFQUFhO0FBQ3ZEO0FBQ0EsYUFBYSw0REFBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdFQUFhO0FBQ3ZEO0FBQ0EsYUFBYSw0REFBUztBQUN0QjtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL3Bici1tZXRhbGxpYy1yb3VnaG5lc3MuanM/ODE4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7IFRleHR1cmVJbmZvLCBUZXh0dXJlVXNhZ2UgfSBmcm9tICcuL3RleHR1cmUtaW5mby5qcyc7XG5pbXBvcnQgeyAkY29ycmVsYXRlZE9iamVjdHMsICRvblVwZGF0ZSwgJHNvdXJjZU9iamVjdCwgVGhyZWVET01FbGVtZW50IH0gZnJvbSAnLi90aHJlZS1kb20tZWxlbWVudC5qcyc7XG5jb25zdCAkdGhyZWVNYXRlcmlhbHMgPSBTeW1ib2woJ3RocmVlTWF0ZXJpYWxzJyk7XG5jb25zdCAkYmFzZUNvbG9yVGV4dHVyZSA9IFN5bWJvbCgnYmFzZUNvbG9yVGV4dHVyZScpO1xuY29uc3QgJG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSA9IFN5bWJvbCgnbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlJyk7XG4vKipcbiAqIFBCUiBtYXRlcmlhbCBwcm9wZXJ0aWVzIGZhY2FkZSBpbXBsZW1lbnRhdGlvbiBmb3IgVGhyZWUuanMgbWF0ZXJpYWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBQQlJNZXRhbGxpY1JvdWdobmVzcyBleHRlbmRzIFRocmVlRE9NRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3Iob25VcGRhdGUsIGdsdGYsIHBick1ldGFsbGljUm91Z2huZXNzLCBjb3JyZWxhdGVkTWF0ZXJpYWxzKSB7XG4gICAgICAgIHN1cGVyKG9uVXBkYXRlLCBwYnJNZXRhbGxpY1JvdWdobmVzcywgY29ycmVsYXRlZE1hdGVyaWFscyk7XG4gICAgICAgIC8vIEFzc2lnbiBnbFRGIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIGlmIChwYnJNZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3IgPT0gbnVsbCkge1xuICAgICAgICAgICAgcGJyTWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yID0gWzEsIDEsIDEsIDFdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYnJNZXRhbGxpY1JvdWdobmVzcy5yb3VnaG5lc3NGYWN0b3IgPT0gbnVsbCkge1xuICAgICAgICAgICAgcGJyTWV0YWxsaWNSb3VnaG5lc3Mucm91Z2huZXNzRmFjdG9yID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGJyTWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNGYWN0b3IgPT0gbnVsbCkge1xuICAgICAgICAgICAgcGJyTWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNGYWN0b3IgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgYmFzZUNvbG9yVGV4dHVyZTogZ2x0ZkJhc2VDb2xvclRleHR1cmUsIG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZTogZ2x0Zk1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSB9ID0gcGJyTWV0YWxsaWNSb3VnaG5lc3M7XG4gICAgICAgIGNvbnN0IHsgbWFwLCBtZXRhbG5lc3NNYXAgfSA9IGNvcnJlbGF0ZWRNYXRlcmlhbHMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICB0aGlzWyRiYXNlQ29sb3JUZXh0dXJlXSA9IG5ldyBUZXh0dXJlSW5mbyhvblVwZGF0ZSwgVGV4dHVyZVVzYWdlLkJhc2UsIG1hcCwgY29ycmVsYXRlZE1hdGVyaWFscywgZ2x0ZiwgZ2x0ZkJhc2VDb2xvclRleHR1cmUgPyBnbHRmQmFzZUNvbG9yVGV4dHVyZSA6IG51bGwpO1xuICAgICAgICB0aGlzWyRtZXRhbGxpY1JvdWdobmVzc1RleHR1cmVdID0gbmV3IFRleHR1cmVJbmZvKG9uVXBkYXRlLCBUZXh0dXJlVXNhZ2UuTWV0YWxsaWNSb3VnaG5lc3MsIG1ldGFsbmVzc01hcCwgY29ycmVsYXRlZE1hdGVyaWFscywgZ2x0ZiwgZ2x0Zk1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSA/IGdsdGZNZXRhbGxpY1JvdWdobmVzc1RleHR1cmUgOiBudWxsKTtcbiAgICB9XG4gICAgZ2V0IFskdGhyZWVNYXRlcmlhbHNdKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skY29ycmVsYXRlZE9iamVjdHNdO1xuICAgIH1cbiAgICBnZXQgYmFzZUNvbG9yRmFjdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlT2JqZWN0XVxuICAgICAgICAgICAgLmJhc2VDb2xvckZhY3RvcjtcbiAgICB9XG4gICAgZ2V0IG1ldGFsbGljRmFjdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlT2JqZWN0XVxuICAgICAgICAgICAgLm1ldGFsbGljRmFjdG9yO1xuICAgIH1cbiAgICBnZXQgcm91Z2huZXNzRmFjdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlT2JqZWN0XVxuICAgICAgICAgICAgLnJvdWdobmVzc0ZhY3RvcjtcbiAgICB9XG4gICAgZ2V0IGJhc2VDb2xvclRleHR1cmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRiYXNlQ29sb3JUZXh0dXJlXTtcbiAgICB9XG4gICAgZ2V0IG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZV07XG4gICAgfVxuICAgIHNldEJhc2VDb2xvckZhY3RvcihyZ2JhKSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gbmV3IENvbG9yKCk7XG4gICAgICAgIGlmIChyZ2JhIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIGNvbG9yLmZyb21BcnJheShyZ2JhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbG9yLnNldChyZ2JhKS5jb252ZXJ0U1JHQlRvTGluZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBtYXRlcmlhbCBvZiB0aGlzWyR0aHJlZU1hdGVyaWFsc10pIHtcbiAgICAgICAgICAgIG1hdGVyaWFsLmNvbG9yLnNldChjb2xvcik7XG4gICAgICAgICAgICBpZiAocmdiYSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwub3BhY2l0eSA9IChyZ2JhKVszXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJnYmEgPSBbMCwgMCwgMCwgbWF0ZXJpYWwub3BhY2l0eV07XG4gICAgICAgICAgICAgICAgY29sb3IudG9BcnJheShyZ2JhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYnJNZXRhbGxpY1JvdWdobmVzcyA9IHRoaXNbJHNvdXJjZU9iamVjdF07XG4gICAgICAgIHBick1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvciA9IHJnYmE7XG4gICAgICAgIHRoaXNbJG9uVXBkYXRlXSgpO1xuICAgIH1cbiAgICBzZXRNZXRhbGxpY0ZhY3Rvcih2YWx1ZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG1hdGVyaWFsIG9mIHRoaXNbJHRocmVlTWF0ZXJpYWxzXSkge1xuICAgICAgICAgICAgbWF0ZXJpYWwubWV0YWxuZXNzID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGJyTWV0YWxsaWNSb3VnaG5lc3MgPSB0aGlzWyRzb3VyY2VPYmplY3RdO1xuICAgICAgICBwYnJNZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY0ZhY3RvciA9IHZhbHVlO1xuICAgICAgICB0aGlzWyRvblVwZGF0ZV0oKTtcbiAgICB9XG4gICAgc2V0Um91Z2huZXNzRmFjdG9yKHZhbHVlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbWF0ZXJpYWwgb2YgdGhpc1skdGhyZWVNYXRlcmlhbHNdKSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5yb3VnaG5lc3MgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYnJNZXRhbGxpY1JvdWdobmVzcyA9IHRoaXNbJHNvdXJjZU9iamVjdF07XG4gICAgICAgIHBick1ldGFsbGljUm91Z2huZXNzLnJvdWdobmVzc0ZhY3RvciA9IHZhbHVlO1xuICAgICAgICB0aGlzWyRvblVwZGF0ZV0oKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYnItbWV0YWxsaWMtcm91Z2huZXNzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/pbr-metallic-roughness.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/sampler.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/sampler.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Sampler: () => (/* binding */ Sampler)\n/* harmony export */ });\n/* harmony import */ var _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../three-components/gltf-instance/gltf-2.0.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/gltf-2.0.js\");\n/* harmony import */ var _three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./three-dom-element.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nconst isMinFilter = (() => {\n    const minFilterValues = [\n        _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.Nearest,\n        _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.Linear,\n        _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.NearestMipmapNearest,\n        _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.LinearMipmapLinear,\n        _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.NearestMipmapLinear,\n        _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.LinearMipmapLinear\n    ];\n    return (value) => minFilterValues.indexOf(value) > -1;\n})();\nconst isMagFilter = (() => {\n    const magFilterValues = [_three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.Nearest, _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.Linear];\n    return (value) => magFilterValues.indexOf(value) > -1;\n})();\nconst isWrapMode = (() => {\n    const wrapModes = [_three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Wrap.ClampToEdge, _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Wrap.MirroredRepeat, _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Wrap.Repeat];\n    return (value) => wrapModes.indexOf(value) > -1;\n})();\nconst isValidSamplerValue = (property, value) => {\n    switch (property) {\n        case 'minFilter':\n            return isMinFilter(value);\n        case 'magFilter':\n            return isMagFilter(value);\n        case 'wrapS':\n        case 'wrapT':\n            return isWrapMode(value);\n        default:\n            throw new Error(`Cannot configure property \"${property}\" on Sampler`);\n    }\n};\nconst $threeTextures = Symbol('threeTextures');\nconst $setProperty = Symbol('setProperty');\nconst $sourceSampler = Symbol('sourceSampler');\n/**\n * Sampler facade implementation for Three.js textures\n */\nclass Sampler extends _three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.ThreeDOMElement {\n    get [$threeTextures]() {\n        console.assert(this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$correlatedObjects] != null && this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$correlatedObjects].size > 0, 'Sampler correlated object is undefined');\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$correlatedObjects];\n    }\n    get [$sourceSampler]() {\n        console.assert(this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject] != null, 'Sampler source is undefined');\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject];\n    }\n    constructor(onUpdate, texture, gltfSampler) {\n        gltfSampler = gltfSampler !== null && gltfSampler !== void 0 ? gltfSampler : {};\n        // These defaults represent a convergence of glTF defaults for wrap mode and\n        // Three.js defaults for filters. Per glTF 2.0 spec, a renderer may choose\n        // its own defaults for filters.\n        // @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#reference-sampler\n        // @see https://threejs.org/docs/#api/en/textures/Texture\n        if (gltfSampler.minFilter == null) {\n            gltfSampler.minFilter =\n                texture ? texture.minFilter : _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.LinearMipmapLinear;\n        }\n        if (gltfSampler.magFilter == null) {\n            gltfSampler.magFilter =\n                texture ? texture.magFilter : _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Filter.Linear;\n        }\n        if (gltfSampler.wrapS == null) {\n            gltfSampler.wrapS = texture ? texture.wrapS : _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Wrap.Repeat;\n        }\n        if (gltfSampler.wrapT == null) {\n            gltfSampler.wrapT = texture ? texture.wrapT : _three_components_gltf_instance_gltf_2_0_js__WEBPACK_IMPORTED_MODULE_0__.Wrap.Repeat;\n        }\n        super(onUpdate, gltfSampler, new Set(texture ? [texture] : []));\n    }\n    get name() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$sourceObject].name || '';\n    }\n    get minFilter() {\n        return this[$sourceSampler].minFilter;\n    }\n    get magFilter() {\n        return this[$sourceSampler].magFilter;\n    }\n    get wrapS() {\n        return this[$sourceSampler].wrapS;\n    }\n    get wrapT() {\n        return this[$sourceSampler].wrapT;\n    }\n    setMinFilter(filter) {\n        this[$setProperty]('minFilter', filter);\n    }\n    setMagFilter(filter) {\n        this[$setProperty]('magFilter', filter);\n    }\n    setWrapS(mode) {\n        this[$setProperty]('wrapS', mode);\n    }\n    setWrapT(mode) {\n        this[$setProperty]('wrapT', mode);\n    }\n    [$setProperty](property, value) {\n        const sampler = this[$sourceSampler];\n        if (sampler != null) {\n            if (isValidSamplerValue(property, value)) {\n                sampler[property] = value;\n                for (const texture of this[$threeTextures]) {\n                    texture[property] = value;\n                    texture.needsUpdate = true;\n                }\n            }\n            this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_1__.$onUpdate]();\n        }\n    }\n}\n//# sourceMappingURL=sampler.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL3NhbXBsZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNnRjtBQUN1QjtBQUN2RztBQUNBO0FBQ0EsUUFBUSwrRUFBTTtBQUNkLFFBQVEsK0VBQU07QUFDZCxRQUFRLCtFQUFNO0FBQ2QsUUFBUSwrRUFBTTtBQUNkLFFBQVEsK0VBQU07QUFDZCxRQUFRLCtFQUFNO0FBQ2Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDZCQUE2QiwrRUFBTSxVQUFVLCtFQUFNO0FBQ25EO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsdUJBQXVCLDZFQUFJLGNBQWMsNkVBQUksaUJBQWlCLDZFQUFJO0FBQ2xFO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELFNBQVM7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHNCQUFzQixrRUFBZTtBQUM1QztBQUNBLDRCQUE0QixxRUFBa0Isa0JBQWtCLHFFQUFrQjtBQUNsRixvQkFBb0IscUVBQWtCO0FBQ3RDO0FBQ0E7QUFDQSw0QkFBNEIsZ0VBQWE7QUFDekMsb0JBQW9CLGdFQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLCtFQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywrRUFBTTtBQUNwRDtBQUNBO0FBQ0EsMERBQTBELDZFQUFJO0FBQzlEO0FBQ0E7QUFDQSwwREFBMEQsNkVBQUk7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw0REFBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZmVhdHVyZXMvc2NlbmUtZ3JhcGgvc2FtcGxlci5qcz9hODkzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IEZpbHRlciwgV3JhcCB9IGZyb20gJy4uLy4uL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9nbHRmLTIuMC5qcyc7XG5pbXBvcnQgeyAkY29ycmVsYXRlZE9iamVjdHMsICRvblVwZGF0ZSwgJHNvdXJjZU9iamVjdCwgVGhyZWVET01FbGVtZW50IH0gZnJvbSAnLi90aHJlZS1kb20tZWxlbWVudC5qcyc7XG5jb25zdCBpc01pbkZpbHRlciA9ICgoKSA9PiB7XG4gICAgY29uc3QgbWluRmlsdGVyVmFsdWVzID0gW1xuICAgICAgICBGaWx0ZXIuTmVhcmVzdCxcbiAgICAgICAgRmlsdGVyLkxpbmVhcixcbiAgICAgICAgRmlsdGVyLk5lYXJlc3RNaXBtYXBOZWFyZXN0LFxuICAgICAgICBGaWx0ZXIuTGluZWFyTWlwbWFwTGluZWFyLFxuICAgICAgICBGaWx0ZXIuTmVhcmVzdE1pcG1hcExpbmVhcixcbiAgICAgICAgRmlsdGVyLkxpbmVhck1pcG1hcExpbmVhclxuICAgIF07XG4gICAgcmV0dXJuICh2YWx1ZSkgPT4gbWluRmlsdGVyVmFsdWVzLmluZGV4T2YodmFsdWUpID4gLTE7XG59KSgpO1xuY29uc3QgaXNNYWdGaWx0ZXIgPSAoKCkgPT4ge1xuICAgIGNvbnN0IG1hZ0ZpbHRlclZhbHVlcyA9IFtGaWx0ZXIuTmVhcmVzdCwgRmlsdGVyLkxpbmVhcl07XG4gICAgcmV0dXJuICh2YWx1ZSkgPT4gbWFnRmlsdGVyVmFsdWVzLmluZGV4T2YodmFsdWUpID4gLTE7XG59KSgpO1xuY29uc3QgaXNXcmFwTW9kZSA9ICgoKSA9PiB7XG4gICAgY29uc3Qgd3JhcE1vZGVzID0gW1dyYXAuQ2xhbXBUb0VkZ2UsIFdyYXAuTWlycm9yZWRSZXBlYXQsIFdyYXAuUmVwZWF0XTtcbiAgICByZXR1cm4gKHZhbHVlKSA9PiB3cmFwTW9kZXMuaW5kZXhPZih2YWx1ZSkgPiAtMTtcbn0pKCk7XG5jb25zdCBpc1ZhbGlkU2FtcGxlclZhbHVlID0gKHByb3BlcnR5LCB2YWx1ZSkgPT4ge1xuICAgIHN3aXRjaCAocHJvcGVydHkpIHtcbiAgICAgICAgY2FzZSAnbWluRmlsdGVyJzpcbiAgICAgICAgICAgIHJldHVybiBpc01pbkZpbHRlcih2YWx1ZSk7XG4gICAgICAgIGNhc2UgJ21hZ0ZpbHRlcic6XG4gICAgICAgICAgICByZXR1cm4gaXNNYWdGaWx0ZXIodmFsdWUpO1xuICAgICAgICBjYXNlICd3cmFwUyc6XG4gICAgICAgIGNhc2UgJ3dyYXBUJzpcbiAgICAgICAgICAgIHJldHVybiBpc1dyYXBNb2RlKHZhbHVlKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbmZpZ3VyZSBwcm9wZXJ0eSBcIiR7cHJvcGVydHl9XCIgb24gU2FtcGxlcmApO1xuICAgIH1cbn07XG5jb25zdCAkdGhyZWVUZXh0dXJlcyA9IFN5bWJvbCgndGhyZWVUZXh0dXJlcycpO1xuY29uc3QgJHNldFByb3BlcnR5ID0gU3ltYm9sKCdzZXRQcm9wZXJ0eScpO1xuY29uc3QgJHNvdXJjZVNhbXBsZXIgPSBTeW1ib2woJ3NvdXJjZVNhbXBsZXInKTtcbi8qKlxuICogU2FtcGxlciBmYWNhZGUgaW1wbGVtZW50YXRpb24gZm9yIFRocmVlLmpzIHRleHR1cmVzXG4gKi9cbmV4cG9ydCBjbGFzcyBTYW1wbGVyIGV4dGVuZHMgVGhyZWVET01FbGVtZW50IHtcbiAgICBnZXQgWyR0aHJlZVRleHR1cmVzXSgpIHtcbiAgICAgICAgY29uc29sZS5hc3NlcnQodGhpc1skY29ycmVsYXRlZE9iamVjdHNdICE9IG51bGwgJiYgdGhpc1skY29ycmVsYXRlZE9iamVjdHNdLnNpemUgPiAwLCAnU2FtcGxlciBjb3JyZWxhdGVkIG9iamVjdCBpcyB1bmRlZmluZWQnKTtcbiAgICAgICAgcmV0dXJuIHRoaXNbJGNvcnJlbGF0ZWRPYmplY3RzXTtcbiAgICB9XG4gICAgZ2V0IFskc291cmNlU2FtcGxlcl0oKSB7XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KHRoaXNbJHNvdXJjZU9iamVjdF0gIT0gbnVsbCwgJ1NhbXBsZXIgc291cmNlIGlzIHVuZGVmaW5lZCcpO1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlT2JqZWN0XTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Iob25VcGRhdGUsIHRleHR1cmUsIGdsdGZTYW1wbGVyKSB7XG4gICAgICAgIGdsdGZTYW1wbGVyID0gZ2x0ZlNhbXBsZXIgIT09IG51bGwgJiYgZ2x0ZlNhbXBsZXIgIT09IHZvaWQgMCA/IGdsdGZTYW1wbGVyIDoge307XG4gICAgICAgIC8vIFRoZXNlIGRlZmF1bHRzIHJlcHJlc2VudCBhIGNvbnZlcmdlbmNlIG9mIGdsVEYgZGVmYXVsdHMgZm9yIHdyYXAgbW9kZSBhbmRcbiAgICAgICAgLy8gVGhyZWUuanMgZGVmYXVsdHMgZm9yIGZpbHRlcnMuIFBlciBnbFRGIDIuMCBzcGVjLCBhIHJlbmRlcmVyIG1heSBjaG9vc2VcbiAgICAgICAgLy8gaXRzIG93biBkZWZhdWx0cyBmb3IgZmlsdGVycy5cbiAgICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjcmVmZXJlbmNlLXNhbXBsZXJcbiAgICAgICAgLy8gQHNlZSBodHRwczovL3RocmVlanMub3JnL2RvY3MvI2FwaS9lbi90ZXh0dXJlcy9UZXh0dXJlXG4gICAgICAgIGlmIChnbHRmU2FtcGxlci5taW5GaWx0ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgZ2x0ZlNhbXBsZXIubWluRmlsdGVyID1cbiAgICAgICAgICAgICAgICB0ZXh0dXJlID8gdGV4dHVyZS5taW5GaWx0ZXIgOiBGaWx0ZXIuTGluZWFyTWlwbWFwTGluZWFyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbHRmU2FtcGxlci5tYWdGaWx0ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgZ2x0ZlNhbXBsZXIubWFnRmlsdGVyID1cbiAgICAgICAgICAgICAgICB0ZXh0dXJlID8gdGV4dHVyZS5tYWdGaWx0ZXIgOiBGaWx0ZXIuTGluZWFyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnbHRmU2FtcGxlci53cmFwUyA9PSBudWxsKSB7XG4gICAgICAgICAgICBnbHRmU2FtcGxlci53cmFwUyA9IHRleHR1cmUgPyB0ZXh0dXJlLndyYXBTIDogV3JhcC5SZXBlYXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdsdGZTYW1wbGVyLndyYXBUID09IG51bGwpIHtcbiAgICAgICAgICAgIGdsdGZTYW1wbGVyLndyYXBUID0gdGV4dHVyZSA/IHRleHR1cmUud3JhcFQgOiBXcmFwLlJlcGVhdDtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihvblVwZGF0ZSwgZ2x0ZlNhbXBsZXIsIG5ldyBTZXQodGV4dHVyZSA/IFt0ZXh0dXJlXSA6IFtdKSk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlT2JqZWN0XS5uYW1lIHx8ICcnO1xuICAgIH1cbiAgICBnZXQgbWluRmlsdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlU2FtcGxlcl0ubWluRmlsdGVyO1xuICAgIH1cbiAgICBnZXQgbWFnRmlsdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlU2FtcGxlcl0ubWFnRmlsdGVyO1xuICAgIH1cbiAgICBnZXQgd3JhcFMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRzb3VyY2VTYW1wbGVyXS53cmFwUztcbiAgICB9XG4gICAgZ2V0IHdyYXBUKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skc291cmNlU2FtcGxlcl0ud3JhcFQ7XG4gICAgfVxuICAgIHNldE1pbkZpbHRlcihmaWx0ZXIpIHtcbiAgICAgICAgdGhpc1skc2V0UHJvcGVydHldKCdtaW5GaWx0ZXInLCBmaWx0ZXIpO1xuICAgIH1cbiAgICBzZXRNYWdGaWx0ZXIoZmlsdGVyKSB7XG4gICAgICAgIHRoaXNbJHNldFByb3BlcnR5XSgnbWFnRmlsdGVyJywgZmlsdGVyKTtcbiAgICB9XG4gICAgc2V0V3JhcFMobW9kZSkge1xuICAgICAgICB0aGlzWyRzZXRQcm9wZXJ0eV0oJ3dyYXBTJywgbW9kZSk7XG4gICAgfVxuICAgIHNldFdyYXBUKG1vZGUpIHtcbiAgICAgICAgdGhpc1skc2V0UHJvcGVydHldKCd3cmFwVCcsIG1vZGUpO1xuICAgIH1cbiAgICBbJHNldFByb3BlcnR5XShwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlciA9IHRoaXNbJHNvdXJjZVNhbXBsZXJdO1xuICAgICAgICBpZiAoc2FtcGxlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZFNhbXBsZXJWYWx1ZShwcm9wZXJ0eSwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgc2FtcGxlcltwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRleHR1cmUgb2YgdGhpc1skdGhyZWVUZXh0dXJlc10pIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1skb25VcGRhdGVdKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW1wbGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/sampler.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/texture-info.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/texture-info.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $materials: () => (/* binding */ $materials),\n/* harmony export */   $usage: () => (/* binding */ $usage),\n/* harmony export */   TextureInfo: () => (/* binding */ TextureInfo),\n/* harmony export */   TextureUsage: () => (/* binding */ TextureUsage)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./image.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/image.js\");\n/* harmony import */ var _texture_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./texture.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/texture.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\n\n\n\nconst $texture = Symbol('texture');\nconst $transform = Symbol('transform');\nconst $materials = Symbol('materials');\nconst $usage = Symbol('usage');\n// Defines what a texture will be used for.\nvar TextureUsage;\n(function (TextureUsage) {\n    TextureUsage[TextureUsage[\"Base\"] = 0] = \"Base\";\n    TextureUsage[TextureUsage[\"MetallicRoughness\"] = 1] = \"MetallicRoughness\";\n    TextureUsage[TextureUsage[\"Normal\"] = 2] = \"Normal\";\n    TextureUsage[TextureUsage[\"Occlusion\"] = 3] = \"Occlusion\";\n    TextureUsage[TextureUsage[\"Emissive\"] = 4] = \"Emissive\";\n})(TextureUsage || (TextureUsage = {}));\n/**\n * TextureInfo facade implementation for Three.js materials\n */\nclass TextureInfo {\n    constructor(onUpdate, usage, threeTexture, material, gltf, gltfTextureInfo) {\n        this[_a] = null;\n        this[_b] = {\n            rotation: 0,\n            scale: new three__WEBPACK_IMPORTED_MODULE_2__.Vector2(1, 1),\n            offset: new three__WEBPACK_IMPORTED_MODULE_2__.Vector2(0, 0)\n        };\n        // Creates image, sampler, and texture if valid texture info is provided.\n        if (gltfTextureInfo && threeTexture) {\n            const gltfTexture = gltf.textures ? gltf.textures[gltfTextureInfo.index] : null;\n            const sampler = gltfTexture ?\n                (gltf.samplers ? gltf.samplers[gltfTexture.sampler] : null) :\n                null;\n            const image = gltfTexture ?\n                (gltf.images ? gltf.images[gltfTexture.source] : null) :\n                null;\n            this[$transform].rotation = threeTexture.rotation;\n            this[$transform].scale.copy(threeTexture.repeat);\n            this[$transform].offset.copy(threeTexture.offset);\n            this[$texture] =\n                new _texture_js__WEBPACK_IMPORTED_MODULE_1__.Texture(onUpdate, threeTexture, gltfTexture, sampler, image);\n        }\n        this.onUpdate = onUpdate;\n        this[$materials] = material;\n        this[$usage] = usage;\n    }\n    get texture() {\n        return this[$texture];\n    }\n    setTexture(texture) {\n        const threeTexture = texture != null ? texture.source[_image_js__WEBPACK_IMPORTED_MODULE_0__.$threeTexture] : null;\n        let encoding = three__WEBPACK_IMPORTED_MODULE_2__.sRGBEncoding;\n        this[$texture] = texture;\n        if (this[$materials]) {\n            for (const material of this[$materials]) {\n                switch (this[$usage]) {\n                    case TextureUsage.Base:\n                        material.map = threeTexture;\n                        break;\n                    case TextureUsage.MetallicRoughness:\n                        encoding = three__WEBPACK_IMPORTED_MODULE_2__.LinearEncoding;\n                        material.metalnessMap = threeTexture;\n                        material.roughnessMap = threeTexture;\n                        break;\n                    case TextureUsage.Normal:\n                        encoding = three__WEBPACK_IMPORTED_MODULE_2__.LinearEncoding;\n                        material.normalMap = threeTexture;\n                        break;\n                    case TextureUsage.Occlusion:\n                        encoding = three__WEBPACK_IMPORTED_MODULE_2__.LinearEncoding;\n                        material.aoMap = threeTexture;\n                        break;\n                    case TextureUsage.Emissive:\n                        material.emissiveMap = threeTexture;\n                        break;\n                    default:\n                }\n                material.needsUpdate = true;\n            }\n        }\n        if (threeTexture) {\n            // Updates the encoding for the texture, affects all references.\n            threeTexture.encoding = encoding;\n            threeTexture.rotation = this[$transform].rotation;\n            threeTexture.repeat = this[$transform].scale;\n            threeTexture.offset = this[$transform].offset;\n        }\n        this.onUpdate();\n    }\n}\n_a = $texture, _b = $transform;\n//# sourceMappingURL=texture-info.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL3RleHR1cmUtaW5mby5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzhEO0FBQ25CO0FBQ0o7QUFDdkM7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQ0FBb0M7QUFDckM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwQ0FBTztBQUM5Qix3QkFBd0IsMENBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnREFBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsb0RBQWE7QUFDM0UsdUJBQXVCLCtDQUFZO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsaURBQWM7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsaURBQWM7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGlEQUFjO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9mZWF0dXJlcy9zY2VuZS1ncmFwaC90ZXh0dXJlLWluZm8uanM/NWI5OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgX2EsIF9iO1xuaW1wb3J0IHsgTGluZWFyRW5jb2RpbmcsIHNSR0JFbmNvZGluZywgVmVjdG9yMiB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7ICR0aHJlZVRleHR1cmUgfSBmcm9tICcuL2ltYWdlLmpzJztcbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICcuL3RleHR1cmUuanMnO1xuY29uc3QgJHRleHR1cmUgPSBTeW1ib2woJ3RleHR1cmUnKTtcbmNvbnN0ICR0cmFuc2Zvcm0gPSBTeW1ib2woJ3RyYW5zZm9ybScpO1xuZXhwb3J0IGNvbnN0ICRtYXRlcmlhbHMgPSBTeW1ib2woJ21hdGVyaWFscycpO1xuZXhwb3J0IGNvbnN0ICR1c2FnZSA9IFN5bWJvbCgndXNhZ2UnKTtcbi8vIERlZmluZXMgd2hhdCBhIHRleHR1cmUgd2lsbCBiZSB1c2VkIGZvci5cbmV4cG9ydCB2YXIgVGV4dHVyZVVzYWdlO1xuKGZ1bmN0aW9uIChUZXh0dXJlVXNhZ2UpIHtcbiAgICBUZXh0dXJlVXNhZ2VbVGV4dHVyZVVzYWdlW1wiQmFzZVwiXSA9IDBdID0gXCJCYXNlXCI7XG4gICAgVGV4dHVyZVVzYWdlW1RleHR1cmVVc2FnZVtcIk1ldGFsbGljUm91Z2huZXNzXCJdID0gMV0gPSBcIk1ldGFsbGljUm91Z2huZXNzXCI7XG4gICAgVGV4dHVyZVVzYWdlW1RleHR1cmVVc2FnZVtcIk5vcm1hbFwiXSA9IDJdID0gXCJOb3JtYWxcIjtcbiAgICBUZXh0dXJlVXNhZ2VbVGV4dHVyZVVzYWdlW1wiT2NjbHVzaW9uXCJdID0gM10gPSBcIk9jY2x1c2lvblwiO1xuICAgIFRleHR1cmVVc2FnZVtUZXh0dXJlVXNhZ2VbXCJFbWlzc2l2ZVwiXSA9IDRdID0gXCJFbWlzc2l2ZVwiO1xufSkoVGV4dHVyZVVzYWdlIHx8IChUZXh0dXJlVXNhZ2UgPSB7fSkpO1xuLyoqXG4gKiBUZXh0dXJlSW5mbyBmYWNhZGUgaW1wbGVtZW50YXRpb24gZm9yIFRocmVlLmpzIG1hdGVyaWFsc1xuICovXG5leHBvcnQgY2xhc3MgVGV4dHVyZUluZm8ge1xuICAgIGNvbnN0cnVjdG9yKG9uVXBkYXRlLCB1c2FnZSwgdGhyZWVUZXh0dXJlLCBtYXRlcmlhbCwgZ2x0ZiwgZ2x0ZlRleHR1cmVJbmZvKSB7XG4gICAgICAgIHRoaXNbX2FdID0gbnVsbDtcbiAgICAgICAgdGhpc1tfYl0gPSB7XG4gICAgICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgICAgIHNjYWxlOiBuZXcgVmVjdG9yMigxLCAxKSxcbiAgICAgICAgICAgIG9mZnNldDogbmV3IFZlY3RvcjIoMCwgMClcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ3JlYXRlcyBpbWFnZSwgc2FtcGxlciwgYW5kIHRleHR1cmUgaWYgdmFsaWQgdGV4dHVyZSBpbmZvIGlzIHByb3ZpZGVkLlxuICAgICAgICBpZiAoZ2x0ZlRleHR1cmVJbmZvICYmIHRocmVlVGV4dHVyZSkge1xuICAgICAgICAgICAgY29uc3QgZ2x0ZlRleHR1cmUgPSBnbHRmLnRleHR1cmVzID8gZ2x0Zi50ZXh0dXJlc1tnbHRmVGV4dHVyZUluZm8uaW5kZXhdIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZXIgPSBnbHRmVGV4dHVyZSA/XG4gICAgICAgICAgICAgICAgKGdsdGYuc2FtcGxlcnMgPyBnbHRmLnNhbXBsZXJzW2dsdGZUZXh0dXJlLnNhbXBsZXJdIDogbnVsbCkgOlxuICAgICAgICAgICAgICAgIG51bGw7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IGdsdGZUZXh0dXJlID9cbiAgICAgICAgICAgICAgICAoZ2x0Zi5pbWFnZXMgPyBnbHRmLmltYWdlc1tnbHRmVGV4dHVyZS5zb3VyY2VdIDogbnVsbCkgOlxuICAgICAgICAgICAgICAgIG51bGw7XG4gICAgICAgICAgICB0aGlzWyR0cmFuc2Zvcm1dLnJvdGF0aW9uID0gdGhyZWVUZXh0dXJlLnJvdGF0aW9uO1xuICAgICAgICAgICAgdGhpc1skdHJhbnNmb3JtXS5zY2FsZS5jb3B5KHRocmVlVGV4dHVyZS5yZXBlYXQpO1xuICAgICAgICAgICAgdGhpc1skdHJhbnNmb3JtXS5vZmZzZXQuY29weSh0aHJlZVRleHR1cmUub2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXNbJHRleHR1cmVdID1cbiAgICAgICAgICAgICAgICBuZXcgVGV4dHVyZShvblVwZGF0ZSwgdGhyZWVUZXh0dXJlLCBnbHRmVGV4dHVyZSwgc2FtcGxlciwgaW1hZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25VcGRhdGUgPSBvblVwZGF0ZTtcbiAgICAgICAgdGhpc1skbWF0ZXJpYWxzXSA9IG1hdGVyaWFsO1xuICAgICAgICB0aGlzWyR1c2FnZV0gPSB1c2FnZTtcbiAgICB9XG4gICAgZ2V0IHRleHR1cmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyR0ZXh0dXJlXTtcbiAgICB9XG4gICAgc2V0VGV4dHVyZSh0ZXh0dXJlKSB7XG4gICAgICAgIGNvbnN0IHRocmVlVGV4dHVyZSA9IHRleHR1cmUgIT0gbnVsbCA/IHRleHR1cmUuc291cmNlWyR0aHJlZVRleHR1cmVdIDogbnVsbDtcbiAgICAgICAgbGV0IGVuY29kaW5nID0gc1JHQkVuY29kaW5nO1xuICAgICAgICB0aGlzWyR0ZXh0dXJlXSA9IHRleHR1cmU7XG4gICAgICAgIGlmICh0aGlzWyRtYXRlcmlhbHNdKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1hdGVyaWFsIG9mIHRoaXNbJG1hdGVyaWFsc10pIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXNbJHVzYWdlXSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFRleHR1cmVVc2FnZS5CYXNlOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubWFwID0gdGhyZWVUZXh0dXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVGV4dHVyZVVzYWdlLk1ldGFsbGljUm91Z2huZXNzOlxuICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmcgPSBMaW5lYXJFbmNvZGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLm1ldGFsbmVzc01hcCA9IHRocmVlVGV4dHVyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnJvdWdobmVzc01hcCA9IHRocmVlVGV4dHVyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFRleHR1cmVVc2FnZS5Ob3JtYWw6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGluZyA9IExpbmVhckVuY29kaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwubm9ybWFsTWFwID0gdGhyZWVUZXh0dXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVGV4dHVyZVVzYWdlLk9jY2x1c2lvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kaW5nID0gTGluZWFyRW5jb2Rpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5hb01hcCA9IHRocmVlVGV4dHVyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFRleHR1cmVVc2FnZS5FbWlzc2l2ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmVtaXNzaXZlTWFwID0gdGhyZWVUZXh0dXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhyZWVUZXh0dXJlKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGVzIHRoZSBlbmNvZGluZyBmb3IgdGhlIHRleHR1cmUsIGFmZmVjdHMgYWxsIHJlZmVyZW5jZXMuXG4gICAgICAgICAgICB0aHJlZVRleHR1cmUuZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgICAgICAgICAgIHRocmVlVGV4dHVyZS5yb3RhdGlvbiA9IHRoaXNbJHRyYW5zZm9ybV0ucm90YXRpb247XG4gICAgICAgICAgICB0aHJlZVRleHR1cmUucmVwZWF0ID0gdGhpc1skdHJhbnNmb3JtXS5zY2FsZTtcbiAgICAgICAgICAgIHRocmVlVGV4dHVyZS5vZmZzZXQgPSB0aGlzWyR0cmFuc2Zvcm1dLm9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uVXBkYXRlKCk7XG4gICAgfVxufVxuX2EgPSAkdGV4dHVyZSwgX2IgPSAkdHJhbnNmb3JtO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGV4dHVyZS1pbmZvLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/texture-info.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/texture.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/texture.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Texture: () => (/* binding */ Texture)\n/* harmony export */ });\n/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./image.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/image.js\");\n/* harmony import */ var _sampler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sampler.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/sampler.js\");\n/* harmony import */ var _three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./three-dom-element.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\nconst $image = Symbol('image');\nconst $sampler = Symbol('sampler');\n/**\n * Material facade implementation for Three.js materials\n */\nclass Texture extends _three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.ThreeDOMElement {\n    constructor(onUpdate, threeTexture, gltfTexture = null, gltfSampler = null, gltfImage = null) {\n        super(onUpdate, gltfTexture ? gltfTexture : {}, new Set(threeTexture ? [threeTexture] : []));\n        this[$sampler] = new _sampler_js__WEBPACK_IMPORTED_MODULE_1__.Sampler(onUpdate, threeTexture, gltfSampler);\n        this[$image] = new _image_js__WEBPACK_IMPORTED_MODULE_0__.Image(onUpdate, threeTexture, gltfImage);\n    }\n    get name() {\n        return this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].name || '';\n    }\n    set name(name) {\n        this[_three_dom_element_js__WEBPACK_IMPORTED_MODULE_2__.$sourceObject].name = name;\n    }\n    get sampler() {\n        return this[$sampler];\n    }\n    get source() {\n        return this[$image];\n    }\n}\n//# sourceMappingURL=texture.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL3RleHR1cmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDbUM7QUFDSTtBQUNpQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sc0JBQXNCLGtFQUFlO0FBQzVDO0FBQ0Esc0RBQXNEO0FBQ3RELDZCQUE2QixnREFBTztBQUNwQywyQkFBMkIsNENBQUs7QUFDaEM7QUFDQTtBQUNBLG9CQUFvQixnRUFBYTtBQUNqQztBQUNBO0FBQ0EsYUFBYSxnRUFBYTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL3RleHR1cmUuanM/MGM3OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBJbWFnZSB9IGZyb20gJy4vaW1hZ2UuanMnO1xuaW1wb3J0IHsgU2FtcGxlciB9IGZyb20gJy4vc2FtcGxlci5qcyc7XG5pbXBvcnQgeyAkc291cmNlT2JqZWN0LCBUaHJlZURPTUVsZW1lbnQgfSBmcm9tICcuL3RocmVlLWRvbS1lbGVtZW50LmpzJztcbmNvbnN0ICRpbWFnZSA9IFN5bWJvbCgnaW1hZ2UnKTtcbmNvbnN0ICRzYW1wbGVyID0gU3ltYm9sKCdzYW1wbGVyJyk7XG4vKipcbiAqIE1hdGVyaWFsIGZhY2FkZSBpbXBsZW1lbnRhdGlvbiBmb3IgVGhyZWUuanMgbWF0ZXJpYWxzXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0dXJlIGV4dGVuZHMgVGhyZWVET01FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvblVwZGF0ZSwgdGhyZWVUZXh0dXJlLCBnbHRmVGV4dHVyZSA9IG51bGwsIGdsdGZTYW1wbGVyID0gbnVsbCwgZ2x0ZkltYWdlID0gbnVsbCkge1xuICAgICAgICBzdXBlcihvblVwZGF0ZSwgZ2x0ZlRleHR1cmUgPyBnbHRmVGV4dHVyZSA6IHt9LCBuZXcgU2V0KHRocmVlVGV4dHVyZSA/IFt0aHJlZVRleHR1cmVdIDogW10pKTtcbiAgICAgICAgdGhpc1skc2FtcGxlcl0gPSBuZXcgU2FtcGxlcihvblVwZGF0ZSwgdGhyZWVUZXh0dXJlLCBnbHRmU2FtcGxlcik7XG4gICAgICAgIHRoaXNbJGltYWdlXSA9IG5ldyBJbWFnZShvblVwZGF0ZSwgdGhyZWVUZXh0dXJlLCBnbHRmSW1hZ2UpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHNvdXJjZU9iamVjdF0ubmFtZSB8fCAnJztcbiAgICB9XG4gICAgc2V0IG5hbWUobmFtZSkge1xuICAgICAgICB0aGlzWyRzb3VyY2VPYmplY3RdLm5hbWUgPSBuYW1lO1xuICAgIH1cbiAgICBnZXQgc2FtcGxlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHNhbXBsZXJdO1xuICAgIH1cbiAgICBnZXQgc291cmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skaW1hZ2VdO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRleHR1cmUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/texture.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $correlatedObjects: () => (/* binding */ $correlatedObjects),\n/* harmony export */   $onUpdate: () => (/* binding */ $onUpdate),\n/* harmony export */   $sourceObject: () => (/* binding */ $sourceObject),\n/* harmony export */   ThreeDOMElement: () => (/* binding */ ThreeDOMElement)\n/* harmony export */ });\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $correlatedObjects = Symbol('correlatedObjects');\nconst $sourceObject = Symbol('sourceObject');\nconst $onUpdate = Symbol('onUpdate');\n/**\n * A SerializableThreeDOMElement is the common primitive of all scene graph\n * elements that have been facaded in the host execution context. It adds\n * a common interface to these elements in support of convenient\n * serializability.\n */\nclass ThreeDOMElement {\n    constructor(onUpdate, element, correlatedObjects = null) {\n        this[$onUpdate] = onUpdate;\n        this[$sourceObject] = element;\n        this[$correlatedObjects] = correlatedObjects;\n    }\n}\n//# sourceMappingURL=three-dom-element.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3NjZW5lLWdyYXBoL3RocmVlLWRvbS1lbGVtZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZmVhdHVyZXMvc2NlbmUtZ3JhcGgvdGhyZWUtZG9tLWVsZW1lbnQuanM/YTc4MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5leHBvcnQgY29uc3QgJGNvcnJlbGF0ZWRPYmplY3RzID0gU3ltYm9sKCdjb3JyZWxhdGVkT2JqZWN0cycpO1xuZXhwb3J0IGNvbnN0ICRzb3VyY2VPYmplY3QgPSBTeW1ib2woJ3NvdXJjZU9iamVjdCcpO1xuZXhwb3J0IGNvbnN0ICRvblVwZGF0ZSA9IFN5bWJvbCgnb25VcGRhdGUnKTtcbi8qKlxuICogQSBTZXJpYWxpemFibGVUaHJlZURPTUVsZW1lbnQgaXMgdGhlIGNvbW1vbiBwcmltaXRpdmUgb2YgYWxsIHNjZW5lIGdyYXBoXG4gKiBlbGVtZW50cyB0aGF0IGhhdmUgYmVlbiBmYWNhZGVkIGluIHRoZSBob3N0IGV4ZWN1dGlvbiBjb250ZXh0LiBJdCBhZGRzXG4gKiBhIGNvbW1vbiBpbnRlcmZhY2UgdG8gdGhlc2UgZWxlbWVudHMgaW4gc3VwcG9ydCBvZiBjb252ZW5pZW50XG4gKiBzZXJpYWxpemFiaWxpdHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBUaHJlZURPTUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKG9uVXBkYXRlLCBlbGVtZW50LCBjb3JyZWxhdGVkT2JqZWN0cyA9IG51bGwpIHtcbiAgICAgICAgdGhpc1skb25VcGRhdGVdID0gb25VcGRhdGU7XG4gICAgICAgIHRoaXNbJHNvdXJjZU9iamVjdF0gPSBlbGVtZW50O1xuICAgICAgICB0aGlzWyRjb3JyZWxhdGVkT2JqZWN0c10gPSBjb3JyZWxhdGVkT2JqZWN0cztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJlZS1kb20tZWxlbWVudC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph/three-dom-element.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/features/staging.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/features/staging.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AUTO_ROTATE_DELAY_DEFAULT: () => (/* binding */ AUTO_ROTATE_DELAY_DEFAULT),\n/* harmony export */   StagingMixin: () => (/* binding */ StagingMixin)\n/* harmony export */ });\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit/decorators.js */ \"(ssr)/./node_modules/lit/decorators.js\");\n/* harmony import */ var _decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../decorators.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/decorators.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _styles_conversions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/conversions.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/conversions.js\");\n/* harmony import */ var _styles_parsers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../styles/parsers.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\n\n\n\n\n// How much the model will rotate per\n// second in radians:\nconst DEFAULT_ROTATION_SPEED = Math.PI / 32;\nconst AUTO_ROTATE_DELAY_DEFAULT = 3000;\nconst rotationRateIntrinsics = {\n    basis: [(0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_3__.degreesToRadians)((0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_4__.numberNode)(DEFAULT_ROTATION_SPEED, 'rad'))],\n    keywords: { auto: [null] }\n};\nconst $autoRotateStartTime = Symbol('autoRotateStartTime');\nconst $radiansPerSecond = Symbol('radiansPerSecond');\nconst $syncRotationRate = Symbol('syncRotationRate');\nconst $onCameraChange = Symbol('onCameraChange');\nconst StagingMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class StagingModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.autoRotate = false;\n            this.autoRotateDelay = AUTO_ROTATE_DELAY_DEFAULT;\n            this.rotationPerSecond = 'auto';\n            this[_a] = performance.now();\n            this[_b] = 0;\n            this[_c] = (event) => {\n                if (!this.autoRotate) {\n                    return;\n                }\n                if (event.detail.source === 'user-interaction') {\n                    this[$autoRotateStartTime] = performance.now();\n                }\n            };\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this.addEventListener('camera-change', this[$onCameraChange]);\n            this[$autoRotateStartTime] = performance.now();\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this.removeEventListener('camera-change', this[$onCameraChange]);\n            this[$autoRotateStartTime] = performance.now();\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('autoRotate')) {\n                this[$autoRotateStartTime] = performance.now();\n            }\n        }\n        [(_a = $autoRotateStartTime, _b = $radiansPerSecond, $syncRotationRate)](style) {\n            this[$radiansPerSecond] = style[0];\n        }\n        [_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$tick](time, delta) {\n            super[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$tick](time, delta);\n            if (!this.autoRotate || !this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$getModelIsVisible]() ||\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$renderer].isPresenting) {\n                return;\n            }\n            const rotationDelta = Math.min(delta, time - this[$autoRotateStartTime] - this.autoRotateDelay);\n            if (rotationDelta > 0) {\n                this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].yaw = this.turntableRotation +\n                    this[$radiansPerSecond] * rotationDelta * 0.001;\n            }\n        }\n        get turntableRotation() {\n            return this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].yaw;\n        }\n        resetTurntableRotation(theta = 0) {\n            this[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_2__.$scene].yaw = theta;\n        }\n    }\n    _c = $onCameraChange;\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Boolean, attribute: 'auto-rotate' })\n    ], StagingModelViewerElement.prototype, \"autoRotate\", void 0);\n    __decorate([\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: Number, attribute: 'auto-rotate-delay' })\n    ], StagingModelViewerElement.prototype, \"autoRotateDelay\", void 0);\n    __decorate([\n        (0,_decorators_js__WEBPACK_IMPORTED_MODULE_1__.style)({ intrinsics: rotationRateIntrinsics, updateHandler: $syncRotationRate }),\n        (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_0__.property)({ type: String, attribute: 'rotation-per-second' })\n    ], StagingModelViewerElement.prototype, \"rotationPerSecond\", void 0);\n    return StagingModelViewerElement;\n};\n//# sourceMappingURL=staging.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL2ZlYXR1cmVzL3N0YWdpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsU0FBSSxJQUFJLFNBQUk7QUFDOUI7QUFDQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDNkM7QUFDSjtBQUM4QztBQUMzQjtBQUNWO0FBQ2xEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxZQUFZLHdFQUFnQixDQUFDLDhEQUFVO0FBQ3ZDLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsd0RBQUs7QUFDZCxrQkFBa0Isd0RBQUs7QUFDdkIsMENBQTBDLHFFQUFrQjtBQUM1RCxxQkFBcUIsNERBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIseURBQU07QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseURBQU07QUFDOUI7QUFDQTtBQUNBLGlCQUFpQix5REFBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkRBQVEsR0FBRyx5Q0FBeUM7QUFDNUQ7QUFDQTtBQUNBLFFBQVEsMkRBQVEsR0FBRyw4Q0FBOEM7QUFDakU7QUFDQTtBQUNBLFFBQVEscURBQUssR0FBRyxzRUFBc0U7QUFDdEYsUUFBUSwyREFBUSxHQUFHLGdEQUFnRDtBQUNuRTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvZmVhdHVyZXMvc3RhZ2luZy5qcz80MDc3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IHByb3BlcnR5IH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgc3R5bGUgfSBmcm9tICcuLi9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7ICRnZXRNb2RlbElzVmlzaWJsZSwgJHJlbmRlcmVyLCAkc2NlbmUsICR0aWNrIH0gZnJvbSAnLi4vbW9kZWwtdmlld2VyLWJhc2UuanMnO1xuaW1wb3J0IHsgZGVncmVlc1RvUmFkaWFucyB9IGZyb20gJy4uL3N0eWxlcy9jb252ZXJzaW9ucy5qcyc7XG5pbXBvcnQgeyBudW1iZXJOb2RlIH0gZnJvbSAnLi4vc3R5bGVzL3BhcnNlcnMuanMnO1xuLy8gSG93IG11Y2ggdGhlIG1vZGVsIHdpbGwgcm90YXRlIHBlclxuLy8gc2Vjb25kIGluIHJhZGlhbnM6XG5jb25zdCBERUZBVUxUX1JPVEFUSU9OX1NQRUVEID0gTWF0aC5QSSAvIDMyO1xuZXhwb3J0IGNvbnN0IEFVVE9fUk9UQVRFX0RFTEFZX0RFRkFVTFQgPSAzMDAwO1xuY29uc3Qgcm90YXRpb25SYXRlSW50cmluc2ljcyA9IHtcbiAgICBiYXNpczogW2RlZ3JlZXNUb1JhZGlhbnMobnVtYmVyTm9kZShERUZBVUxUX1JPVEFUSU9OX1NQRUVELCAncmFkJykpXSxcbiAgICBrZXl3b3JkczogeyBhdXRvOiBbbnVsbF0gfVxufTtcbmNvbnN0ICRhdXRvUm90YXRlU3RhcnRUaW1lID0gU3ltYm9sKCdhdXRvUm90YXRlU3RhcnRUaW1lJyk7XG5jb25zdCAkcmFkaWFuc1BlclNlY29uZCA9IFN5bWJvbCgncmFkaWFuc1BlclNlY29uZCcpO1xuY29uc3QgJHN5bmNSb3RhdGlvblJhdGUgPSBTeW1ib2woJ3N5bmNSb3RhdGlvblJhdGUnKTtcbmNvbnN0ICRvbkNhbWVyYUNoYW5nZSA9IFN5bWJvbCgnb25DYW1lcmFDaGFuZ2UnKTtcbmV4cG9ydCBjb25zdCBTdGFnaW5nTWl4aW4gPSAoTW9kZWxWaWV3ZXJFbGVtZW50KSA9PiB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY2xhc3MgU3RhZ2luZ01vZGVsVmlld2VyRWxlbWVudCBleHRlbmRzIE1vZGVsVmlld2VyRWxlbWVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMuYXV0b1JvdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5hdXRvUm90YXRlRGVsYXkgPSBBVVRPX1JPVEFURV9ERUxBWV9ERUZBVUxUO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvblBlclNlY29uZCA9ICdhdXRvJztcbiAgICAgICAgICAgIHRoaXNbX2FdID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICB0aGlzW19iXSA9IDA7XG4gICAgICAgICAgICB0aGlzW19jXSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hdXRvUm90YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRldGFpbC5zb3VyY2UgPT09ICd1c2VyLWludGVyYWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRhdXRvUm90YXRlU3RhcnRUaW1lXSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjYW1lcmEtY2hhbmdlJywgdGhpc1skb25DYW1lcmFDaGFuZ2VdKTtcbiAgICAgICAgICAgIHRoaXNbJGF1dG9Sb3RhdGVTdGFydFRpbWVdID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdjYW1lcmEtY2hhbmdlJywgdGhpc1skb25DYW1lcmFDaGFuZ2VdKTtcbiAgICAgICAgICAgIHRoaXNbJGF1dG9Sb3RhdGVTdGFydFRpbWVdID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICAgICAgc3VwZXIudXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdhdXRvUm90YXRlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRhdXRvUm90YXRlU3RhcnRUaW1lXSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFsoX2EgPSAkYXV0b1JvdGF0ZVN0YXJ0VGltZSwgX2IgPSAkcmFkaWFuc1BlclNlY29uZCwgJHN5bmNSb3RhdGlvblJhdGUpXShzdHlsZSkge1xuICAgICAgICAgICAgdGhpc1skcmFkaWFuc1BlclNlY29uZF0gPSBzdHlsZVswXTtcbiAgICAgICAgfVxuICAgICAgICBbJHRpY2tdKHRpbWUsIGRlbHRhKSB7XG4gICAgICAgICAgICBzdXBlclskdGlja10odGltZSwgZGVsdGEpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dG9Sb3RhdGUgfHwgIXRoaXNbJGdldE1vZGVsSXNWaXNpYmxlXSgpIHx8XG4gICAgICAgICAgICAgICAgdGhpc1skcmVuZGVyZXJdLmlzUHJlc2VudGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uRGVsdGEgPSBNYXRoLm1pbihkZWx0YSwgdGltZSAtIHRoaXNbJGF1dG9Sb3RhdGVTdGFydFRpbWVdIC0gdGhpcy5hdXRvUm90YXRlRGVsYXkpO1xuICAgICAgICAgICAgaWYgKHJvdGF0aW9uRGVsdGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skc2NlbmVdLnlhdyA9IHRoaXMudHVybnRhYmxlUm90YXRpb24gK1xuICAgICAgICAgICAgICAgICAgICB0aGlzWyRyYWRpYW5zUGVyU2Vjb25kXSAqIHJvdGF0aW9uRGVsdGEgKiAwLjAwMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnZXQgdHVybnRhYmxlUm90YXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skc2NlbmVdLnlhdztcbiAgICAgICAgfVxuICAgICAgICByZXNldFR1cm50YWJsZVJvdGF0aW9uKHRoZXRhID0gMCkge1xuICAgICAgICAgICAgdGhpc1skc2NlbmVdLnlhdyA9IHRoZXRhO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9jID0gJG9uQ2FtZXJhQ2hhbmdlO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogJ2F1dG8tcm90YXRlJyB9KVxuICAgIF0sIFN0YWdpbmdNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImF1dG9Sb3RhdGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtcbiAgICAgICAgcHJvcGVydHkoeyB0eXBlOiBOdW1iZXIsIGF0dHJpYnV0ZTogJ2F1dG8tcm90YXRlLWRlbGF5JyB9KVxuICAgIF0sIFN0YWdpbmdNb2RlbFZpZXdlckVsZW1lbnQucHJvdG90eXBlLCBcImF1dG9Sb3RhdGVEZWxheVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW1xuICAgICAgICBzdHlsZSh7IGludHJpbnNpY3M6IHJvdGF0aW9uUmF0ZUludHJpbnNpY3MsIHVwZGF0ZUhhbmRsZXI6ICRzeW5jUm90YXRpb25SYXRlIH0pLFxuICAgICAgICBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgYXR0cmlidXRlOiAncm90YXRpb24tcGVyLXNlY29uZCcgfSlcbiAgICBdLCBTdGFnaW5nTW9kZWxWaWV3ZXJFbGVtZW50LnByb3RvdHlwZSwgXCJyb3RhdGlvblBlclNlY29uZFwiLCB2b2lkIDApO1xuICAgIHJldHVybiBTdGFnaW5nTW9kZWxWaWV3ZXJFbGVtZW50O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0YWdpbmcuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/features/staging.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js":
/*!********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/model-viewer-base.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $altDefaulted: () => (/* binding */ $altDefaulted),\n/* harmony export */   $announceModelVisibility: () => (/* binding */ $announceModelVisibility),\n/* harmony export */   $ariaLabel: () => (/* binding */ $ariaLabel),\n/* harmony export */   $canvas: () => (/* binding */ $canvas),\n/* harmony export */   $container: () => (/* binding */ $container),\n/* harmony export */   $getLoaded: () => (/* binding */ $getLoaded),\n/* harmony export */   $getModelIsVisible: () => (/* binding */ $getModelIsVisible),\n/* harmony export */   $intersectionObserver: () => (/* binding */ $intersectionObserver),\n/* harmony export */   $isElementInViewport: () => (/* binding */ $isElementInViewport),\n/* harmony export */   $loadedTime: () => (/* binding */ $loadedTime),\n/* harmony export */   $markLoaded: () => (/* binding */ $markLoaded),\n/* harmony export */   $needsRender: () => (/* binding */ $needsRender),\n/* harmony export */   $onModelLoad: () => (/* binding */ $onModelLoad),\n/* harmony export */   $onResize: () => (/* binding */ $onResize),\n/* harmony export */   $progressTracker: () => (/* binding */ $progressTracker),\n/* harmony export */   $renderer: () => (/* binding */ $renderer),\n/* harmony export */   $scene: () => (/* binding */ $scene),\n/* harmony export */   $shouldAttemptPreload: () => (/* binding */ $shouldAttemptPreload),\n/* harmony export */   $statusElement: () => (/* binding */ $statusElement),\n/* harmony export */   $tick: () => (/* binding */ $tick),\n/* harmony export */   $updateSize: () => (/* binding */ $updateSize),\n/* harmony export */   $updateSource: () => (/* binding */ $updateSource),\n/* harmony export */   $updateStatus: () => (/* binding */ $updateStatus),\n/* harmony export */   $userInputElement: () => (/* binding */ $userInputElement),\n/* harmony export */   blobCanvas: () => (/* binding */ blobCanvas),\n/* harmony export */   \"default\": () => (/* binding */ ModelViewerElementBase),\n/* harmony export */   toVector2D: () => (/* binding */ toVector2D),\n/* harmony export */   toVector3D: () => (/* binding */ toVector3D)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"(ssr)/./node_modules/lit/index.js\");\n/* harmony import */ var lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit/decorators.js */ \"(ssr)/./node_modules/lit/decorators.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/constants.js\");\n/* harmony import */ var _features_environment_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./features/environment.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/environment.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./template.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/template.js\");\n/* harmony import */ var _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./three-components/CachingGLTFLoader.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/CachingGLTFLoader.js\");\n/* harmony import */ var _three_components_ModelScene_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./three-components/ModelScene.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/ModelScene.js\");\n/* harmony import */ var _three_components_Renderer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./three-components/Renderer.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Renderer.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* harmony import */ var _utilities_data_conversion_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utilities/data-conversion.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities/data-conversion.js\");\n/* harmony import */ var _utilities_progress_tracker_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utilities/progress-tracker.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities/progress-tracker.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n\n\n\n\n\n\n\n\n\n\n\nconst CLEAR_MODEL_TIMEOUT_MS = 1000;\nconst FALLBACK_SIZE_UPDATE_THRESHOLD_MS = 50;\nconst ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD = 0;\nconst UNSIZED_MEDIA_WIDTH = 300;\nconst UNSIZED_MEDIA_HEIGHT = 150;\nconst blobCanvas = document.createElement('canvas');\nconst $fallbackResizeHandler = Symbol('fallbackResizeHandler');\nconst $defaultAriaLabel = Symbol('defaultAriaLabel');\nconst $resizeObserver = Symbol('resizeObserver');\nconst $clearModelTimeout = Symbol('clearModelTimeout');\nconst $onContextLost = Symbol('onContextLost');\nconst $loaded = Symbol('loaded');\nconst $status = Symbol('status');\nconst $onFocus = Symbol('onFocus');\nconst $onBlur = Symbol('onBlur');\nconst $updateSize = Symbol('updateSize');\nconst $intersectionObserver = Symbol('intersectionObserver');\nconst $isElementInViewport = Symbol('isElementInViewport');\nconst $announceModelVisibility = Symbol('announceModelVisibility');\nconst $ariaLabel = Symbol('ariaLabel');\nconst $altDefaulted = Symbol('altDefaulted');\nconst $statusElement = Symbol('statusElement');\nconst $updateStatus = Symbol('updateStatus');\nconst $loadedTime = Symbol('loadedTime');\nconst $updateSource = Symbol('updateSource');\nconst $markLoaded = Symbol('markLoaded');\nconst $container = Symbol('container');\nconst $userInputElement = Symbol('input');\nconst $canvas = Symbol('canvas');\nconst $scene = Symbol('scene');\nconst $needsRender = Symbol('needsRender');\nconst $tick = Symbol('tick');\nconst $onModelLoad = Symbol('onModelLoad');\nconst $onResize = Symbol('onResize');\nconst $renderer = Symbol('renderer');\nconst $progressTracker = Symbol('progressTracker');\nconst $getLoaded = Symbol('getLoaded');\nconst $getModelIsVisible = Symbol('getModelIsVisible');\nconst $shouldAttemptPreload = Symbol('shouldAttemptPreload');\nconst toVector3D = (v) => {\n    return {\n        x: v.x,\n        y: v.y,\n        z: v.z,\n        toString() {\n            return `${this.x}m ${this.y}m ${this.z}m`;\n        }\n    };\n};\nconst toVector2D = (v) => {\n    return {\n        u: v.x,\n        v: v.y,\n        toString() {\n            return `${this.u} ${this.v}`;\n        }\n    };\n};\n/**\n * Definition for a basic <model-viewer> element.\n */\nclass ModelViewerElementBase extends lit__WEBPACK_IMPORTED_MODULE_0__.ReactiveElement {\n    /**\n     * Creates a new ModelViewerElement.\n     */\n    constructor() {\n        super();\n        this.alt = null;\n        this.src = null;\n        this.withCredentials = false;\n        /**\n         * Generates a 3D model schema https://schema.org/3DModel associated with\n         * the loaded src and inserts it into the header of the page for search\n         * engines to crawl.\n         */\n        this.generateSchema = false;\n        this[_a] = false;\n        this[_b] = false;\n        this[_c] = 0;\n        this[_d] = '';\n        this[_e] = null;\n        this[_f] = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_8__.debounce)(() => {\n            const boundingRect = this.getBoundingClientRect();\n            this[$updateSize](boundingRect);\n        }, FALLBACK_SIZE_UPDATE_THRESHOLD_MS);\n        this[_g] = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_8__.debounce)((oldVisibility) => {\n            const newVisibility = this.modelIsVisible;\n            if (newVisibility !== oldVisibility) {\n                this.dispatchEvent(new CustomEvent('model-visibility', { detail: { visible: newVisibility } }));\n            }\n        }, ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD);\n        this[_h] = null;\n        this[_j] = null;\n        this[_k] = new _utilities_progress_tracker_js__WEBPACK_IMPORTED_MODULE_10__.ProgressTracker();\n        this[_l] = () => {\n            this[$statusElement].textContent = this[$status];\n        };\n        this[_m] = () => {\n            this[$statusElement].textContent = '';\n        };\n        this[_o] = (event) => {\n            this.dispatchEvent(new CustomEvent('error', { detail: { type: 'webglcontextlost', sourceError: event.sourceEvent } }));\n        };\n        this.attachShadow({ mode: 'open' });\n        const shadowRoot = this.shadowRoot;\n        (0,_template_js__WEBPACK_IMPORTED_MODULE_4__.makeTemplate)(shadowRoot);\n        this[$container] = shadowRoot.querySelector('.container');\n        this[$userInputElement] =\n            shadowRoot.querySelector('.userInput');\n        this[$canvas] = shadowRoot.querySelector('canvas');\n        this[$statusElement] =\n            shadowRoot.querySelector('#status');\n        this[$defaultAriaLabel] =\n            this[$userInputElement].getAttribute('aria-label');\n        // Because of potential race conditions related to invoking the constructor\n        // we only use the bounding rect to set the initial size if the element is\n        // already connected to the document:\n        let width, height;\n        if (this.isConnected) {\n            const rect = this.getBoundingClientRect();\n            width = rect.width;\n            height = rect.height;\n        }\n        else {\n            width = UNSIZED_MEDIA_WIDTH;\n            height = UNSIZED_MEDIA_HEIGHT;\n        }\n        // Create the underlying ModelScene.\n        this[$scene] =\n            new _three_components_ModelScene_js__WEBPACK_IMPORTED_MODULE_6__.ModelScene({ canvas: this[$canvas], element: this, width, height });\n        // Update initial size on microtask timing so that subclasses have a\n        // chance to initialize\n        Promise.resolve().then(() => {\n            this[$updateSize](this.getBoundingClientRect());\n        });\n        if (_constants_js__WEBPACK_IMPORTED_MODULE_2__.HAS_RESIZE_OBSERVER) {\n            // Set up a resize observer so we can scale our canvas\n            // if our <model-viewer> changes\n            this[$resizeObserver] =\n                new ResizeObserver((entries) => {\n                    // Don't resize anything if in AR mode; otherwise the canvas\n                    // scaling to fullscreen on entering AR will clobber the flat/2d\n                    // dimensions of the element.\n                    if (this[$renderer].isPresenting) {\n                        return;\n                    }\n                    for (let entry of entries) {\n                        if (entry.target === this) {\n                            this[$updateSize](entry.contentRect);\n                        }\n                    }\n                });\n        }\n        if (_constants_js__WEBPACK_IMPORTED_MODULE_2__.HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver] = new IntersectionObserver(entries => {\n                for (let entry of entries) {\n                    if (entry.target === this) {\n                        const oldVisibility = this.modelIsVisible;\n                        this[$isElementInViewport] = entry.isIntersecting;\n                        this[$announceModelVisibility](oldVisibility);\n                        if (this[$isElementInViewport] && !this.loaded) {\n                            this[$updateSource]();\n                        }\n                    }\n                }\n            }, {\n                root: null,\n                // We used to have margin here, but it was causing animated models below\n                // the fold to steal the frame budget. Weirder still, it would also\n                // cause input events to be swallowed, sometimes for seconds on the\n                // model above the fold, but only when the animated model was completely\n                // below. Setting this margin to zero fixed it.\n                rootMargin: '0px',\n                // With zero threshold, an element adjacent to but not intersecting the\n                // viewport will be reported as intersecting, which will cause\n                // unnecessary rendering. Any slight positive threshold alleviates this.\n                threshold: 0.00001,\n            });\n        }\n        else {\n            // If there is no intersection observer, then all models should be visible\n            // at all times:\n            this[$isElementInViewport] = true;\n        }\n    }\n    static get is() {\n        return 'model-viewer';\n    }\n    /** @export */\n    static set modelCacheSize(value) {\n        _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.CachingGLTFLoader[_three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.$evictionPolicy].evictionThreshold = value;\n    }\n    /** @export */\n    static get modelCacheSize() {\n        return _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.CachingGLTFLoader[_three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.$evictionPolicy].evictionThreshold;\n    }\n    /** @export */\n    static set minimumRenderScale(value) {\n        if (value > 1) {\n            console.warn('<model-viewer> minimumRenderScale has been clamped to a maximum value of 1.');\n        }\n        if (value <= 0) {\n            console.warn('<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25.');\n        }\n        _three_components_Renderer_js__WEBPACK_IMPORTED_MODULE_7__.Renderer.singleton.minScale = value;\n    }\n    /** @export */\n    static get minimumRenderScale() {\n        return _three_components_Renderer_js__WEBPACK_IMPORTED_MODULE_7__.Renderer.singleton.minScale;\n    }\n    /** @export */\n    get loaded() {\n        return this[$getLoaded]();\n    }\n    get [(_a = $isElementInViewport, _b = $loaded, _c = $loadedTime, _d = $status, _e = $clearModelTimeout, _f = $fallbackResizeHandler, _g = $announceModelVisibility, _h = $resizeObserver, _j = $intersectionObserver, _k = $progressTracker, $renderer)]() {\n        return _three_components_Renderer_js__WEBPACK_IMPORTED_MODULE_7__.Renderer.singleton;\n    }\n    /** @export */\n    get modelIsVisible() {\n        return this[$getModelIsVisible]();\n    }\n    connectedCallback() {\n        super.connectedCallback && super.connectedCallback();\n        if (_constants_js__WEBPACK_IMPORTED_MODULE_2__.HAS_RESIZE_OBSERVER) {\n            this[$resizeObserver].observe(this);\n        }\n        else {\n            self.addEventListener('resize', this[$fallbackResizeHandler]);\n        }\n        if (_constants_js__WEBPACK_IMPORTED_MODULE_2__.HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver].observe(this);\n        }\n        this.addEventListener('focus', this[$onFocus]);\n        this.addEventListener('blur', this[$onBlur]);\n        const renderer = this[$renderer];\n        renderer.addEventListener('contextlost', this[$onContextLost]);\n        renderer.registerScene(this[$scene]);\n        if (this[$clearModelTimeout] != null) {\n            self.clearTimeout(this[$clearModelTimeout]);\n            this[$clearModelTimeout] = null;\n            // Force an update in case the model has been evicted from our GLTF cache\n            // @see https://lit-element.polymer-project.org/guide/lifecycle#requestupdate\n            this.requestUpdate('src', null);\n        }\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback && super.disconnectedCallback();\n        if (_constants_js__WEBPACK_IMPORTED_MODULE_2__.HAS_RESIZE_OBSERVER) {\n            this[$resizeObserver].unobserve(this);\n        }\n        else {\n            self.removeEventListener('resize', this[$fallbackResizeHandler]);\n        }\n        if (_constants_js__WEBPACK_IMPORTED_MODULE_2__.HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver].unobserve(this);\n        }\n        this.removeEventListener('focus', this[$onFocus]);\n        this.removeEventListener('blur', this[$onBlur]);\n        const renderer = this[$renderer];\n        renderer.removeEventListener('contextlost', this[$onContextLost]);\n        renderer.unregisterScene(this[$scene]);\n        this[$clearModelTimeout] = self.setTimeout(() => {\n            this[$scene].dispose();\n            this[$clearModelTimeout] = null;\n        }, CLEAR_MODEL_TIMEOUT_MS);\n    }\n    updated(changedProperties) {\n        super.updated(changedProperties);\n        // NOTE(cdata): If a property changes from values A -> B -> A in the space\n        // of a microtask, LitElement/UpdatingElement will notify of a change even\n        // though the value has effectively not changed, so we need to check to make\n        // sure that the value has actually changed before changing the loaded flag.\n        if (changedProperties.has('src')) {\n            if (this.src == null) {\n                this[$loaded] = false;\n                this[$loadedTime] = 0;\n                this[$scene].reset();\n            }\n            else if (this.src !== this[$scene].url) {\n                this[$loaded] = false;\n                this[$loadedTime] = 0;\n                this[$updateSource]();\n            }\n        }\n        if (changedProperties.has('alt')) {\n            this[$userInputElement].setAttribute('aria-label', this[$ariaLabel]);\n        }\n        if (changedProperties.has('withCredentials')) {\n            _three_components_CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.CachingGLTFLoader.withCredentials = this.withCredentials;\n        }\n        if (changedProperties.has('generateSchema')) {\n            if (this.generateSchema) {\n                this[$scene].updateSchema(this.src);\n            }\n            else {\n                this[$scene].updateSchema(null);\n            }\n        }\n    }\n    /** @export */\n    toDataURL(type, encoderOptions) {\n        return this[$renderer]\n            .displayCanvas(this[$scene])\n            .toDataURL(type, encoderOptions);\n    }\n    /** @export */\n    async toBlob(options) {\n        const mimeType = options ? options.mimeType : undefined;\n        const qualityArgument = options ? options.qualityArgument : undefined;\n        const useIdealAspect = options ? options.idealAspect : undefined;\n        const { width, height, idealAspect, aspect } = this[$scene];\n        const { dpr, scaleFactor } = this[$renderer];\n        let outputWidth = width * scaleFactor * dpr;\n        let outputHeight = height * scaleFactor * dpr;\n        let offsetX = 0;\n        let offsetY = 0;\n        if (useIdealAspect === true) {\n            if (idealAspect > aspect) {\n                const oldHeight = outputHeight;\n                outputHeight = Math.round(outputWidth / idealAspect);\n                offsetY = (oldHeight - outputHeight) / 2;\n            }\n            else {\n                const oldWidth = outputWidth;\n                outputWidth = Math.round(outputHeight * idealAspect);\n                offsetX = (oldWidth - outputWidth) / 2;\n            }\n        }\n        blobCanvas.width = outputWidth;\n        blobCanvas.height = outputHeight;\n        try {\n            return new Promise(async (resolve, reject) => {\n                blobCanvas.getContext('2d').drawImage(this[$renderer].displayCanvas(this[$scene]), offsetX, offsetY, outputWidth, outputHeight, 0, 0, outputWidth, outputHeight);\n                if (blobCanvas.msToBlob) {\n                    // NOTE: msToBlob only returns image/png\n                    // so ensure mimeType is not specified (defaults to image/png)\n                    // or is image/png, otherwise fallback to using toDataURL on IE.\n                    if (!mimeType || mimeType === 'image/png') {\n                        return resolve(blobCanvas.msToBlob());\n                    }\n                }\n                if (!blobCanvas.toBlob) {\n                    return resolve(await (0,_utilities_data_conversion_js__WEBPACK_IMPORTED_MODULE_9__.dataUrlToBlob)(blobCanvas.toDataURL(mimeType, qualityArgument)));\n                }\n                blobCanvas.toBlob((blob) => {\n                    if (!blob) {\n                        return reject(new Error('Unable to retrieve canvas blob'));\n                    }\n                    resolve(blob);\n                }, mimeType, qualityArgument);\n            });\n        }\n        finally {\n            this[$updateSize]({ width, height });\n        }\n        ;\n    }\n    registerRenderer(renderer) {\n        this[$scene].externalRenderer = renderer;\n    }\n    unregisterRenderer() {\n        this[$scene].externalRenderer = null;\n    }\n    get [$ariaLabel]() {\n        return this[$altDefaulted];\n    }\n    get [$altDefaulted]() {\n        return (this.alt == null || this.alt === 'null') ? this[$defaultAriaLabel] :\n            this.alt;\n    }\n    // NOTE(cdata): Although this may seem extremely redundant, it is required in\n    // order to support overloading when TypeScript is compiled to ES5\n    // @see https://github.com/Polymer/lit-element/pull/745\n    // @see https://github.com/microsoft/TypeScript/issues/338\n    [$getLoaded]() {\n        return this[$loaded];\n    }\n    // @see [$getLoaded]\n    [$getModelIsVisible]() {\n        return this.loaded && this[$isElementInViewport];\n    }\n    [$shouldAttemptPreload]() {\n        return !!this.src && this[$isElementInViewport];\n    }\n    /**\n     * Called on initialization and when the resize observer fires.\n     */\n    [$updateSize]({ width, height }) {\n        this[$container].style.width = `${width}px`;\n        this[$container].style.height = `${height}px`;\n        this[$onResize]({ width: parseFloat(width), height: parseFloat(height) });\n    }\n    [$tick](_time, _delta) {\n    }\n    [$markLoaded]() {\n        if (this[$loaded]) {\n            return;\n        }\n        this[$loaded] = true;\n        this[$loadedTime] = performance.now();\n    }\n    [$needsRender]() {\n        this[$scene].queueRender();\n    }\n    [$onModelLoad]() {\n    }\n    [$updateStatus](status) {\n        this[$status] = status;\n        const rootNode = this.getRootNode();\n        // Only change the aria-label if <model-viewer> is currently focused:\n        if (rootNode != null && rootNode.activeElement === this &&\n            this[$statusElement].textContent != status) {\n            this[$statusElement].textContent = status;\n        }\n    }\n    [(_l = $onFocus, _m = $onBlur, $onResize)](e) {\n        this[$scene].setSize(e.width, e.height);\n    }\n    /**\n     * Parses the element for an appropriate source URL and\n     * sets the views to use the new model based.\n     */\n    async [(_o = $onContextLost, $updateSource)]() {\n        const scene = this[$scene];\n        if (this.loaded || !this[$shouldAttemptPreload]() ||\n            this.src === scene.url) {\n            return;\n        }\n        if (this.generateSchema) {\n            scene.updateSchema(this.src);\n        }\n        this[$updateStatus]('Loading');\n        // If we are loading a new model, we need to stop the animation of\n        // the current one (if any is playing). Otherwise, we might lose\n        // the reference to the scene root and running actions start to\n        // throw exceptions and/or behave in unexpected ways:\n        scene.stopAnimation();\n        const updateSourceProgress = this[$progressTracker].beginActivity();\n        const source = this.src;\n        try {\n            const srcUpdated = scene.setSource(source, (progress) => updateSourceProgress((0,_utilities_js__WEBPACK_IMPORTED_MODULE_8__.clamp)(progress, 0, 1) * 0.95));\n            const envUpdated = this[_features_environment_js__WEBPACK_IMPORTED_MODULE_3__.$updateEnvironment]();\n            await Promise.all([srcUpdated, envUpdated]);\n            this[$markLoaded]();\n            this[$onModelLoad]();\n            // Wait for shaders to compile and pixels to be drawn.\n            await new Promise(resolve => {\n                requestAnimationFrame(() => {\n                    requestAnimationFrame(() => {\n                        this.dispatchEvent(new CustomEvent('load', { detail: { url: source } }));\n                        resolve();\n                    });\n                });\n            });\n        }\n        catch (error) {\n            this.dispatchEvent(new CustomEvent('error', { detail: { type: 'loadfailure', sourceError: error } }));\n        }\n        finally {\n            updateSourceProgress(1.0);\n        }\n    }\n}\n__decorate([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: String })\n], ModelViewerElementBase.prototype, \"alt\", void 0);\n__decorate([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: String })\n], ModelViewerElementBase.prototype, \"src\", void 0);\n__decorate([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: Boolean, attribute: 'with-credentials' })\n], ModelViewerElementBase.prototype, \"withCredentials\", void 0);\n__decorate([\n    (0,lit_decorators_js__WEBPACK_IMPORTED_MODULE_1__.property)({ type: Boolean, attribute: 'generate-schema' })\n], ModelViewerElementBase.prototype, \"generateSchema\", void 0);\n//# sourceMappingURL=model-viewer-base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL21vZGVsLXZpZXdlci1iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsU0FBSSxJQUFJLFNBQUk7QUFDOUI7QUFDQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDQTtBQUNzQztBQUNPO0FBQ21DO0FBQ2pCO0FBQ2xCO0FBQ2dEO0FBQy9CO0FBQ0o7QUFDVDtBQUNjO0FBQ0c7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU8sSUFBSSxPQUFPLElBQUksT0FBTztBQUNuRDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFFBQVEsRUFBRSxPQUFPO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLHFDQUFxQyxnREFBZTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1REFBUTtBQUMzQjtBQUNBO0FBQ0EsU0FBUztBQUNULG1CQUFtQix1REFBUTtBQUMzQjtBQUNBO0FBQ0EseUVBQXlFLFVBQVUsMEJBQTBCO0FBQzdHO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx1QkFBdUIsNEVBQWU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsVUFBVSw0REFBNEQ7QUFDaEk7QUFDQSw0QkFBNEIsY0FBYztBQUMxQztBQUNBLFFBQVEsMERBQVk7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1RUFBVSxHQUFHLHFEQUFxRDtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxZQUFZLDhEQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFlBQVksb0VBQXlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFGQUFpQixDQUFDLG1GQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGVBQWUscUZBQWlCLENBQUMsbUZBQWU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBUTtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1FQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUVBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDhEQUFtQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvRUFBeUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOERBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9FQUF5QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxRkFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFDQUFxQztBQUNyRCxnQkFBZ0IsbUJBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw0RUFBYTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQSxnQ0FBZ0MsZUFBZTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZUFBZTtBQUNuQywwQ0FBMEMsTUFBTTtBQUNoRCwyQ0FBMkMsT0FBTztBQUNsRCwwQkFBMEIsc0RBQXNEO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEZBQTBGLG9EQUFLO0FBQy9GLG9DQUFvQyx3RUFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsVUFBVSxlQUFlO0FBQzlGO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBLDBEQUEwRCxVQUFVLDJDQUEyQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMkRBQVEsR0FBRyxjQUFjO0FBQzdCO0FBQ0E7QUFDQSxJQUFJLDJEQUFRLEdBQUcsY0FBYztBQUM3QjtBQUNBO0FBQ0EsSUFBSSwyREFBUSxHQUFHLDhDQUE4QztBQUM3RDtBQUNBO0FBQ0EsSUFBSSwyREFBUSxHQUFHLDZDQUE2QztBQUM1RDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9tb2RlbC12aWV3ZXItYmFzZS5qcz9jM2NkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbnZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaywgX2wsIF9tLCBfbztcbmltcG9ydCB7IFJlYWN0aXZlRWxlbWVudCB9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IEhBU19JTlRFUlNFQ1RJT05fT0JTRVJWRVIsIEhBU19SRVNJWkVfT0JTRVJWRVIgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyAkdXBkYXRlRW52aXJvbm1lbnQgfSBmcm9tICcuL2ZlYXR1cmVzL2Vudmlyb25tZW50LmpzJztcbmltcG9ydCB7IG1ha2VUZW1wbGF0ZSB9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuaW1wb3J0IHsgJGV2aWN0aW9uUG9saWN5LCBDYWNoaW5nR0xURkxvYWRlciB9IGZyb20gJy4vdGhyZWUtY29tcG9uZW50cy9DYWNoaW5nR0xURkxvYWRlci5qcyc7XG5pbXBvcnQgeyBNb2RlbFNjZW5lIH0gZnJvbSAnLi90aHJlZS1jb21wb25lbnRzL01vZGVsU2NlbmUuanMnO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICcuL3RocmVlLWNvbXBvbmVudHMvUmVuZGVyZXIuanMnO1xuaW1wb3J0IHsgY2xhbXAsIGRlYm91bmNlIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnO1xuaW1wb3J0IHsgZGF0YVVybFRvQmxvYiB9IGZyb20gJy4vdXRpbGl0aWVzL2RhdGEtY29udmVyc2lvbi5qcyc7XG5pbXBvcnQgeyBQcm9ncmVzc1RyYWNrZXIgfSBmcm9tICcuL3V0aWxpdGllcy9wcm9ncmVzcy10cmFja2VyLmpzJztcbmNvbnN0IENMRUFSX01PREVMX1RJTUVPVVRfTVMgPSAxMDAwO1xuY29uc3QgRkFMTEJBQ0tfU0laRV9VUERBVEVfVEhSRVNIT0xEX01TID0gNTA7XG5jb25zdCBBTk5PVU5DRV9NT0RFTF9WSVNJQklMSVRZX0RFQk9VTkNFX1RIUkVTSE9MRCA9IDA7XG5jb25zdCBVTlNJWkVEX01FRElBX1dJRFRIID0gMzAwO1xuY29uc3QgVU5TSVpFRF9NRURJQV9IRUlHSFQgPSAxNTA7XG5leHBvcnQgY29uc3QgYmxvYkNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuY29uc3QgJGZhbGxiYWNrUmVzaXplSGFuZGxlciA9IFN5bWJvbCgnZmFsbGJhY2tSZXNpemVIYW5kbGVyJyk7XG5jb25zdCAkZGVmYXVsdEFyaWFMYWJlbCA9IFN5bWJvbCgnZGVmYXVsdEFyaWFMYWJlbCcpO1xuY29uc3QgJHJlc2l6ZU9ic2VydmVyID0gU3ltYm9sKCdyZXNpemVPYnNlcnZlcicpO1xuY29uc3QgJGNsZWFyTW9kZWxUaW1lb3V0ID0gU3ltYm9sKCdjbGVhck1vZGVsVGltZW91dCcpO1xuY29uc3QgJG9uQ29udGV4dExvc3QgPSBTeW1ib2woJ29uQ29udGV4dExvc3QnKTtcbmNvbnN0ICRsb2FkZWQgPSBTeW1ib2woJ2xvYWRlZCcpO1xuY29uc3QgJHN0YXR1cyA9IFN5bWJvbCgnc3RhdHVzJyk7XG5jb25zdCAkb25Gb2N1cyA9IFN5bWJvbCgnb25Gb2N1cycpO1xuY29uc3QgJG9uQmx1ciA9IFN5bWJvbCgnb25CbHVyJyk7XG5leHBvcnQgY29uc3QgJHVwZGF0ZVNpemUgPSBTeW1ib2woJ3VwZGF0ZVNpemUnKTtcbmV4cG9ydCBjb25zdCAkaW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPSBTeW1ib2woJ2ludGVyc2VjdGlvbk9ic2VydmVyJyk7XG5leHBvcnQgY29uc3QgJGlzRWxlbWVudEluVmlld3BvcnQgPSBTeW1ib2woJ2lzRWxlbWVudEluVmlld3BvcnQnKTtcbmV4cG9ydCBjb25zdCAkYW5ub3VuY2VNb2RlbFZpc2liaWxpdHkgPSBTeW1ib2woJ2Fubm91bmNlTW9kZWxWaXNpYmlsaXR5Jyk7XG5leHBvcnQgY29uc3QgJGFyaWFMYWJlbCA9IFN5bWJvbCgnYXJpYUxhYmVsJyk7XG5leHBvcnQgY29uc3QgJGFsdERlZmF1bHRlZCA9IFN5bWJvbCgnYWx0RGVmYXVsdGVkJyk7XG5leHBvcnQgY29uc3QgJHN0YXR1c0VsZW1lbnQgPSBTeW1ib2woJ3N0YXR1c0VsZW1lbnQnKTtcbmV4cG9ydCBjb25zdCAkdXBkYXRlU3RhdHVzID0gU3ltYm9sKCd1cGRhdGVTdGF0dXMnKTtcbmV4cG9ydCBjb25zdCAkbG9hZGVkVGltZSA9IFN5bWJvbCgnbG9hZGVkVGltZScpO1xuZXhwb3J0IGNvbnN0ICR1cGRhdGVTb3VyY2UgPSBTeW1ib2woJ3VwZGF0ZVNvdXJjZScpO1xuZXhwb3J0IGNvbnN0ICRtYXJrTG9hZGVkID0gU3ltYm9sKCdtYXJrTG9hZGVkJyk7XG5leHBvcnQgY29uc3QgJGNvbnRhaW5lciA9IFN5bWJvbCgnY29udGFpbmVyJyk7XG5leHBvcnQgY29uc3QgJHVzZXJJbnB1dEVsZW1lbnQgPSBTeW1ib2woJ2lucHV0Jyk7XG5leHBvcnQgY29uc3QgJGNhbnZhcyA9IFN5bWJvbCgnY2FudmFzJyk7XG5leHBvcnQgY29uc3QgJHNjZW5lID0gU3ltYm9sKCdzY2VuZScpO1xuZXhwb3J0IGNvbnN0ICRuZWVkc1JlbmRlciA9IFN5bWJvbCgnbmVlZHNSZW5kZXInKTtcbmV4cG9ydCBjb25zdCAkdGljayA9IFN5bWJvbCgndGljaycpO1xuZXhwb3J0IGNvbnN0ICRvbk1vZGVsTG9hZCA9IFN5bWJvbCgnb25Nb2RlbExvYWQnKTtcbmV4cG9ydCBjb25zdCAkb25SZXNpemUgPSBTeW1ib2woJ29uUmVzaXplJyk7XG5leHBvcnQgY29uc3QgJHJlbmRlcmVyID0gU3ltYm9sKCdyZW5kZXJlcicpO1xuZXhwb3J0IGNvbnN0ICRwcm9ncmVzc1RyYWNrZXIgPSBTeW1ib2woJ3Byb2dyZXNzVHJhY2tlcicpO1xuZXhwb3J0IGNvbnN0ICRnZXRMb2FkZWQgPSBTeW1ib2woJ2dldExvYWRlZCcpO1xuZXhwb3J0IGNvbnN0ICRnZXRNb2RlbElzVmlzaWJsZSA9IFN5bWJvbCgnZ2V0TW9kZWxJc1Zpc2libGUnKTtcbmV4cG9ydCBjb25zdCAkc2hvdWxkQXR0ZW1wdFByZWxvYWQgPSBTeW1ib2woJ3Nob3VsZEF0dGVtcHRQcmVsb2FkJyk7XG5leHBvcnQgY29uc3QgdG9WZWN0b3IzRCA9ICh2KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogdi54LFxuICAgICAgICB5OiB2LnksXG4gICAgICAgIHo6IHYueixcbiAgICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy54fW0gJHt0aGlzLnl9bSAke3RoaXMuen1tYDtcbiAgICAgICAgfVxuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IHRvVmVjdG9yMkQgPSAodikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHU6IHYueCxcbiAgICAgICAgdjogdi55LFxuICAgICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnV9ICR7dGhpcy52fWA7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbi8qKlxuICogRGVmaW5pdGlvbiBmb3IgYSBiYXNpYyA8bW9kZWwtdmlld2VyPiBlbGVtZW50LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RlbFZpZXdlckVsZW1lbnRCYXNlIGV4dGVuZHMgUmVhY3RpdmVFbGVtZW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE1vZGVsVmlld2VyRWxlbWVudC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5hbHQgPSBudWxsO1xuICAgICAgICB0aGlzLnNyYyA9IG51bGw7XG4gICAgICAgIHRoaXMud2l0aENyZWRlbnRpYWxzID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZW5lcmF0ZXMgYSAzRCBtb2RlbCBzY2hlbWEgaHR0cHM6Ly9zY2hlbWEub3JnLzNETW9kZWwgYXNzb2NpYXRlZCB3aXRoXG4gICAgICAgICAqIHRoZSBsb2FkZWQgc3JjIGFuZCBpbnNlcnRzIGl0IGludG8gdGhlIGhlYWRlciBvZiB0aGUgcGFnZSBmb3Igc2VhcmNoXG4gICAgICAgICAqIGVuZ2luZXMgdG8gY3Jhd2wuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdlbmVyYXRlU2NoZW1hID0gZmFsc2U7XG4gICAgICAgIHRoaXNbX2FdID0gZmFsc2U7XG4gICAgICAgIHRoaXNbX2JdID0gZmFsc2U7XG4gICAgICAgIHRoaXNbX2NdID0gMDtcbiAgICAgICAgdGhpc1tfZF0gPSAnJztcbiAgICAgICAgdGhpc1tfZV0gPSBudWxsO1xuICAgICAgICB0aGlzW19mXSA9IGRlYm91bmNlKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kaW5nUmVjdCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB0aGlzWyR1cGRhdGVTaXplXShib3VuZGluZ1JlY3QpO1xuICAgICAgICB9LCBGQUxMQkFDS19TSVpFX1VQREFURV9USFJFU0hPTERfTVMpO1xuICAgICAgICB0aGlzW19nXSA9IGRlYm91bmNlKChvbGRWaXNpYmlsaXR5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdWaXNpYmlsaXR5ID0gdGhpcy5tb2RlbElzVmlzaWJsZTtcbiAgICAgICAgICAgIGlmIChuZXdWaXNpYmlsaXR5ICE9PSBvbGRWaXNpYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbW9kZWwtdmlzaWJpbGl0eScsIHsgZGV0YWlsOiB7IHZpc2libGU6IG5ld1Zpc2liaWxpdHkgfSB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIEFOTk9VTkNFX01PREVMX1ZJU0lCSUxJVFlfREVCT1VOQ0VfVEhSRVNIT0xEKTtcbiAgICAgICAgdGhpc1tfaF0gPSBudWxsO1xuICAgICAgICB0aGlzW19qXSA9IG51bGw7XG4gICAgICAgIHRoaXNbX2tdID0gbmV3IFByb2dyZXNzVHJhY2tlcigpO1xuICAgICAgICB0aGlzW19sXSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXNbJHN0YXR1c0VsZW1lbnRdLnRleHRDb250ZW50ID0gdGhpc1skc3RhdHVzXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpc1tfbV0gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzWyRzdGF0dXNFbGVtZW50XS50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzW19vXSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZXJyb3InLCB7IGRldGFpbDogeyB0eXBlOiAnd2ViZ2xjb250ZXh0bG9zdCcsIHNvdXJjZUVycm9yOiBldmVudC5zb3VyY2VFdmVudCB9IH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIGNvbnN0IHNoYWRvd1Jvb3QgPSB0aGlzLnNoYWRvd1Jvb3Q7XG4gICAgICAgIG1ha2VUZW1wbGF0ZShzaGFkb3dSb290KTtcbiAgICAgICAgdGhpc1skY29udGFpbmVyXSA9IHNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzWyR1c2VySW5wdXRFbGVtZW50XSA9XG4gICAgICAgICAgICBzaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy51c2VySW5wdXQnKTtcbiAgICAgICAgdGhpc1skY2FudmFzXSA9IHNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignY2FudmFzJyk7XG4gICAgICAgIHRoaXNbJHN0YXR1c0VsZW1lbnRdID1cbiAgICAgICAgICAgIHNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignI3N0YXR1cycpO1xuICAgICAgICB0aGlzWyRkZWZhdWx0QXJpYUxhYmVsXSA9XG4gICAgICAgICAgICB0aGlzWyR1c2VySW5wdXRFbGVtZW50XS5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTtcbiAgICAgICAgLy8gQmVjYXVzZSBvZiBwb3RlbnRpYWwgcmFjZSBjb25kaXRpb25zIHJlbGF0ZWQgdG8gaW52b2tpbmcgdGhlIGNvbnN0cnVjdG9yXG4gICAgICAgIC8vIHdlIG9ubHkgdXNlIHRoZSBib3VuZGluZyByZWN0IHRvIHNldCB0aGUgaW5pdGlhbCBzaXplIGlmIHRoZSBlbGVtZW50IGlzXG4gICAgICAgIC8vIGFscmVhZHkgY29ubmVjdGVkIHRvIHRoZSBkb2N1bWVudDpcbiAgICAgICAgbGV0IHdpZHRoLCBoZWlnaHQ7XG4gICAgICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHdpZHRoID0gcmVjdC53aWR0aDtcbiAgICAgICAgICAgIGhlaWdodCA9IHJlY3QuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2lkdGggPSBVTlNJWkVEX01FRElBX1dJRFRIO1xuICAgICAgICAgICAgaGVpZ2h0ID0gVU5TSVpFRF9NRURJQV9IRUlHSFQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSB1bmRlcmx5aW5nIE1vZGVsU2NlbmUuXG4gICAgICAgIHRoaXNbJHNjZW5lXSA9XG4gICAgICAgICAgICBuZXcgTW9kZWxTY2VuZSh7IGNhbnZhczogdGhpc1skY2FudmFzXSwgZWxlbWVudDogdGhpcywgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgICAgLy8gVXBkYXRlIGluaXRpYWwgc2l6ZSBvbiBtaWNyb3Rhc2sgdGltaW5nIHNvIHRoYXQgc3ViY2xhc3NlcyBoYXZlIGFcbiAgICAgICAgLy8gY2hhbmNlIHRvIGluaXRpYWxpemVcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzWyR1cGRhdGVTaXplXSh0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChIQVNfUkVTSVpFX09CU0VSVkVSKSB7XG4gICAgICAgICAgICAvLyBTZXQgdXAgYSByZXNpemUgb2JzZXJ2ZXIgc28gd2UgY2FuIHNjYWxlIG91ciBjYW52YXNcbiAgICAgICAgICAgIC8vIGlmIG91ciA8bW9kZWwtdmlld2VyPiBjaGFuZ2VzXG4gICAgICAgICAgICB0aGlzWyRyZXNpemVPYnNlcnZlcl0gPVxuICAgICAgICAgICAgICAgIG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNpemUgYW55dGhpbmcgaWYgaW4gQVIgbW9kZTsgb3RoZXJ3aXNlIHRoZSBjYW52YXNcbiAgICAgICAgICAgICAgICAgICAgLy8gc2NhbGluZyB0byBmdWxsc2NyZWVuIG9uIGVudGVyaW5nIEFSIHdpbGwgY2xvYmJlciB0aGUgZmxhdC8yZFxuICAgICAgICAgICAgICAgICAgICAvLyBkaW1lbnNpb25zIG9mIHRoZSBlbGVtZW50LlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc1skcmVuZGVyZXJdLmlzUHJlc2VudGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS50YXJnZXQgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzWyR1cGRhdGVTaXplXShlbnRyeS5jb250ZW50UmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSEFTX0lOVEVSU0VDVElPTl9PQlNFUlZFUikge1xuICAgICAgICAgICAgdGhpc1skaW50ZXJzZWN0aW9uT2JzZXJ2ZXJdID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGVudHJpZXMgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LnRhcmdldCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkVmlzaWJpbGl0eSA9IHRoaXMubW9kZWxJc1Zpc2libGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWyRpc0VsZW1lbnRJblZpZXdwb3J0XSA9IGVudHJ5LmlzSW50ZXJzZWN0aW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1skYW5ub3VuY2VNb2RlbFZpc2liaWxpdHldKG9sZFZpc2liaWxpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNbJGlzRWxlbWVudEluVmlld3BvcnRdICYmICF0aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJHVwZGF0ZVNvdXJjZV0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICByb290OiBudWxsLFxuICAgICAgICAgICAgICAgIC8vIFdlIHVzZWQgdG8gaGF2ZSBtYXJnaW4gaGVyZSwgYnV0IGl0IHdhcyBjYXVzaW5nIGFuaW1hdGVkIG1vZGVscyBiZWxvd1xuICAgICAgICAgICAgICAgIC8vIHRoZSBmb2xkIHRvIHN0ZWFsIHRoZSBmcmFtZSBidWRnZXQuIFdlaXJkZXIgc3RpbGwsIGl0IHdvdWxkIGFsc29cbiAgICAgICAgICAgICAgICAvLyBjYXVzZSBpbnB1dCBldmVudHMgdG8gYmUgc3dhbGxvd2VkLCBzb21ldGltZXMgZm9yIHNlY29uZHMgb24gdGhlXG4gICAgICAgICAgICAgICAgLy8gbW9kZWwgYWJvdmUgdGhlIGZvbGQsIGJ1dCBvbmx5IHdoZW4gdGhlIGFuaW1hdGVkIG1vZGVsIHdhcyBjb21wbGV0ZWx5XG4gICAgICAgICAgICAgICAgLy8gYmVsb3cuIFNldHRpbmcgdGhpcyBtYXJnaW4gdG8gemVybyBmaXhlZCBpdC5cbiAgICAgICAgICAgICAgICByb290TWFyZ2luOiAnMHB4JyxcbiAgICAgICAgICAgICAgICAvLyBXaXRoIHplcm8gdGhyZXNob2xkLCBhbiBlbGVtZW50IGFkamFjZW50IHRvIGJ1dCBub3QgaW50ZXJzZWN0aW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vIHZpZXdwb3J0IHdpbGwgYmUgcmVwb3J0ZWQgYXMgaW50ZXJzZWN0aW5nLCB3aGljaCB3aWxsIGNhdXNlXG4gICAgICAgICAgICAgICAgLy8gdW5uZWNlc3NhcnkgcmVuZGVyaW5nLiBBbnkgc2xpZ2h0IHBvc2l0aXZlIHRocmVzaG9sZCBhbGxldmlhdGVzIHRoaXMuXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwLjAwMDAxLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBpbnRlcnNlY3Rpb24gb2JzZXJ2ZXIsIHRoZW4gYWxsIG1vZGVscyBzaG91bGQgYmUgdmlzaWJsZVxuICAgICAgICAgICAgLy8gYXQgYWxsIHRpbWVzOlxuICAgICAgICAgICAgdGhpc1skaXNFbGVtZW50SW5WaWV3cG9ydF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaXMoKSB7XG4gICAgICAgIHJldHVybiAnbW9kZWwtdmlld2VyJztcbiAgICB9XG4gICAgLyoqIEBleHBvcnQgKi9cbiAgICBzdGF0aWMgc2V0IG1vZGVsQ2FjaGVTaXplKHZhbHVlKSB7XG4gICAgICAgIENhY2hpbmdHTFRGTG9hZGVyWyRldmljdGlvblBvbGljeV0uZXZpY3Rpb25UaHJlc2hvbGQgPSB2YWx1ZTtcbiAgICB9XG4gICAgLyoqIEBleHBvcnQgKi9cbiAgICBzdGF0aWMgZ2V0IG1vZGVsQ2FjaGVTaXplKCkge1xuICAgICAgICByZXR1cm4gQ2FjaGluZ0dMVEZMb2FkZXJbJGV2aWN0aW9uUG9saWN5XS5ldmljdGlvblRocmVzaG9sZDtcbiAgICB9XG4gICAgLyoqIEBleHBvcnQgKi9cbiAgICBzdGF0aWMgc2V0IG1pbmltdW1SZW5kZXJTY2FsZSh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPiAxKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJzxtb2RlbC12aWV3ZXI+IG1pbmltdW1SZW5kZXJTY2FsZSBoYXMgYmVlbiBjbGFtcGVkIHRvIGEgbWF4aW11bSB2YWx1ZSBvZiAxLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSA8PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJzxtb2RlbC12aWV3ZXI+IG1pbmltdW1SZW5kZXJTY2FsZSBoYXMgYmVlbiBjbGFtcGVkIHRvIGEgbWluaW11bSB2YWx1ZSBvZiAwLjI1LicpO1xuICAgICAgICB9XG4gICAgICAgIFJlbmRlcmVyLnNpbmdsZXRvbi5taW5TY2FsZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKiogQGV4cG9ydCAqL1xuICAgIHN0YXRpYyBnZXQgbWluaW11bVJlbmRlclNjYWxlKCkge1xuICAgICAgICByZXR1cm4gUmVuZGVyZXIuc2luZ2xldG9uLm1pblNjYWxlO1xuICAgIH1cbiAgICAvKiogQGV4cG9ydCAqL1xuICAgIGdldCBsb2FkZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRnZXRMb2FkZWRdKCk7XG4gICAgfVxuICAgIGdldCBbKF9hID0gJGlzRWxlbWVudEluVmlld3BvcnQsIF9iID0gJGxvYWRlZCwgX2MgPSAkbG9hZGVkVGltZSwgX2QgPSAkc3RhdHVzLCBfZSA9ICRjbGVhck1vZGVsVGltZW91dCwgX2YgPSAkZmFsbGJhY2tSZXNpemVIYW5kbGVyLCBfZyA9ICRhbm5vdW5jZU1vZGVsVmlzaWJpbGl0eSwgX2ggPSAkcmVzaXplT2JzZXJ2ZXIsIF9qID0gJGludGVyc2VjdGlvbk9ic2VydmVyLCBfayA9ICRwcm9ncmVzc1RyYWNrZXIsICRyZW5kZXJlcildKCkge1xuICAgICAgICByZXR1cm4gUmVuZGVyZXIuc2luZ2xldG9uO1xuICAgIH1cbiAgICAvKiogQGV4cG9ydCAqL1xuICAgIGdldCBtb2RlbElzVmlzaWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJGdldE1vZGVsSXNWaXNpYmxlXSgpO1xuICAgIH1cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2sgJiYgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgaWYgKEhBU19SRVNJWkVfT0JTRVJWRVIpIHtcbiAgICAgICAgICAgIHRoaXNbJHJlc2l6ZU9ic2VydmVyXS5vYnNlcnZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzWyRmYWxsYmFja1Jlc2l6ZUhhbmRsZXJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSEFTX0lOVEVSU0VDVElPTl9PQlNFUlZFUikge1xuICAgICAgICAgICAgdGhpc1skaW50ZXJzZWN0aW9uT2JzZXJ2ZXJdLm9ic2VydmUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXNbJG9uRm9jdXNdKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpc1skb25CbHVyXSk7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpc1skcmVuZGVyZXJdO1xuICAgICAgICByZW5kZXJlci5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bG9zdCcsIHRoaXNbJG9uQ29udGV4dExvc3RdKTtcbiAgICAgICAgcmVuZGVyZXIucmVnaXN0ZXJTY2VuZSh0aGlzWyRzY2VuZV0pO1xuICAgICAgICBpZiAodGhpc1skY2xlYXJNb2RlbFRpbWVvdXRdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNlbGYuY2xlYXJUaW1lb3V0KHRoaXNbJGNsZWFyTW9kZWxUaW1lb3V0XSk7XG4gICAgICAgICAgICB0aGlzWyRjbGVhck1vZGVsVGltZW91dF0gPSBudWxsO1xuICAgICAgICAgICAgLy8gRm9yY2UgYW4gdXBkYXRlIGluIGNhc2UgdGhlIG1vZGVsIGhhcyBiZWVuIGV2aWN0ZWQgZnJvbSBvdXIgR0xURiBjYWNoZVxuICAgICAgICAgICAgLy8gQHNlZSBodHRwczovL2xpdC1lbGVtZW50LnBvbHltZXItcHJvamVjdC5vcmcvZ3VpZGUvbGlmZWN5Y2xlI3JlcXVlc3R1cGRhdGVcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVwZGF0ZSgnc3JjJywgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrICYmIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIGlmIChIQVNfUkVTSVpFX09CU0VSVkVSKSB7XG4gICAgICAgICAgICB0aGlzWyRyZXNpemVPYnNlcnZlcl0udW5vYnNlcnZlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzWyRmYWxsYmFja1Jlc2l6ZUhhbmRsZXJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoSEFTX0lOVEVSU0VDVElPTl9PQlNFUlZFUikge1xuICAgICAgICAgICAgdGhpc1skaW50ZXJzZWN0aW9uT2JzZXJ2ZXJdLnVub2JzZXJ2ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpc1skb25Gb2N1c10pO1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzWyRvbkJsdXJdKTtcbiAgICAgICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzWyRyZW5kZXJlcl07XG4gICAgICAgIHJlbmRlcmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRsb3N0JywgdGhpc1skb25Db250ZXh0TG9zdF0pO1xuICAgICAgICByZW5kZXJlci51bnJlZ2lzdGVyU2NlbmUodGhpc1skc2NlbmVdKTtcbiAgICAgICAgdGhpc1skY2xlYXJNb2RlbFRpbWVvdXRdID0gc2VsZi5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXNbJHNjZW5lXS5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzWyRjbGVhck1vZGVsVGltZW91dF0gPSBudWxsO1xuICAgICAgICB9LCBDTEVBUl9NT0RFTF9USU1FT1VUX01TKTtcbiAgICB9XG4gICAgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllcykge1xuICAgICAgICBzdXBlci51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICAgICAgLy8gTk9URShjZGF0YSk6IElmIGEgcHJvcGVydHkgY2hhbmdlcyBmcm9tIHZhbHVlcyBBIC0+IEIgLT4gQSBpbiB0aGUgc3BhY2VcbiAgICAgICAgLy8gb2YgYSBtaWNyb3Rhc2ssIExpdEVsZW1lbnQvVXBkYXRpbmdFbGVtZW50IHdpbGwgbm90aWZ5IG9mIGEgY2hhbmdlIGV2ZW5cbiAgICAgICAgLy8gdGhvdWdoIHRoZSB2YWx1ZSBoYXMgZWZmZWN0aXZlbHkgbm90IGNoYW5nZWQsIHNvIHdlIG5lZWQgdG8gY2hlY2sgdG8gbWFrZVxuICAgICAgICAvLyBzdXJlIHRoYXQgdGhlIHZhbHVlIGhhcyBhY3R1YWxseSBjaGFuZ2VkIGJlZm9yZSBjaGFuZ2luZyB0aGUgbG9hZGVkIGZsYWcuXG4gICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ3NyYycpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zcmMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXNbJGxvYWRlZF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzWyRsb2FkZWRUaW1lXSA9IDA7XG4gICAgICAgICAgICAgICAgdGhpc1skc2NlbmVdLnJlc2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNyYyAhPT0gdGhpc1skc2NlbmVdLnVybCkge1xuICAgICAgICAgICAgICAgIHRoaXNbJGxvYWRlZF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzWyRsb2FkZWRUaW1lXSA9IDA7XG4gICAgICAgICAgICAgICAgdGhpc1skdXBkYXRlU291cmNlXSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2FsdCcpKSB7XG4gICAgICAgICAgICB0aGlzWyR1c2VySW5wdXRFbGVtZW50XS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0aGlzWyRhcmlhTGFiZWxdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCd3aXRoQ3JlZGVudGlhbHMnKSkge1xuICAgICAgICAgICAgQ2FjaGluZ0dMVEZMb2FkZXIud2l0aENyZWRlbnRpYWxzID0gdGhpcy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5nZWRQcm9wZXJ0aWVzLmhhcygnZ2VuZXJhdGVTY2hlbWEnKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2VuZXJhdGVTY2hlbWEpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRzY2VuZV0udXBkYXRlU2NoZW1hKHRoaXMuc3JjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXNbJHNjZW5lXS51cGRhdGVTY2hlbWEobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBleHBvcnQgKi9cbiAgICB0b0RhdGFVUkwodHlwZSwgZW5jb2Rlck9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHJlbmRlcmVyXVxuICAgICAgICAgICAgLmRpc3BsYXlDYW52YXModGhpc1skc2NlbmVdKVxuICAgICAgICAgICAgLnRvRGF0YVVSTCh0eXBlLCBlbmNvZGVyT3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKiBAZXhwb3J0ICovXG4gICAgYXN5bmMgdG9CbG9iKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWltZVR5cGUgPSBvcHRpb25zID8gb3B0aW9ucy5taW1lVHlwZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcXVhbGl0eUFyZ3VtZW50ID0gb3B0aW9ucyA/IG9wdGlvbnMucXVhbGl0eUFyZ3VtZW50IDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCB1c2VJZGVhbEFzcGVjdCA9IG9wdGlvbnMgPyBvcHRpb25zLmlkZWFsQXNwZWN0IDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIGlkZWFsQXNwZWN0LCBhc3BlY3QgfSA9IHRoaXNbJHNjZW5lXTtcbiAgICAgICAgY29uc3QgeyBkcHIsIHNjYWxlRmFjdG9yIH0gPSB0aGlzWyRyZW5kZXJlcl07XG4gICAgICAgIGxldCBvdXRwdXRXaWR0aCA9IHdpZHRoICogc2NhbGVGYWN0b3IgKiBkcHI7XG4gICAgICAgIGxldCBvdXRwdXRIZWlnaHQgPSBoZWlnaHQgKiBzY2FsZUZhY3RvciAqIGRwcjtcbiAgICAgICAgbGV0IG9mZnNldFggPSAwO1xuICAgICAgICBsZXQgb2Zmc2V0WSA9IDA7XG4gICAgICAgIGlmICh1c2VJZGVhbEFzcGVjdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGlkZWFsQXNwZWN0ID4gYXNwZWN0KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkSGVpZ2h0ID0gb3V0cHV0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIG91dHB1dEhlaWdodCA9IE1hdGgucm91bmQob3V0cHV0V2lkdGggLyBpZGVhbEFzcGVjdCk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0WSA9IChvbGRIZWlnaHQgLSBvdXRwdXRIZWlnaHQpIC8gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZFdpZHRoID0gb3V0cHV0V2lkdGg7XG4gICAgICAgICAgICAgICAgb3V0cHV0V2lkdGggPSBNYXRoLnJvdW5kKG91dHB1dEhlaWdodCAqIGlkZWFsQXNwZWN0KTtcbiAgICAgICAgICAgICAgICBvZmZzZXRYID0gKG9sZFdpZHRoIC0gb3V0cHV0V2lkdGgpIC8gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBibG9iQ2FudmFzLndpZHRoID0gb3V0cHV0V2lkdGg7XG4gICAgICAgIGJsb2JDYW52YXMuaGVpZ2h0ID0gb3V0cHV0SGVpZ2h0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBibG9iQ2FudmFzLmdldENvbnRleHQoJzJkJykuZHJhd0ltYWdlKHRoaXNbJHJlbmRlcmVyXS5kaXNwbGF5Q2FudmFzKHRoaXNbJHNjZW5lXSksIG9mZnNldFgsIG9mZnNldFksIG91dHB1dFdpZHRoLCBvdXRwdXRIZWlnaHQsIDAsIDAsIG91dHB1dFdpZHRoLCBvdXRwdXRIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGlmIChibG9iQ2FudmFzLm1zVG9CbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IG1zVG9CbG9iIG9ubHkgcmV0dXJucyBpbWFnZS9wbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gc28gZW5zdXJlIG1pbWVUeXBlIGlzIG5vdCBzcGVjaWZpZWQgKGRlZmF1bHRzIHRvIGltYWdlL3BuZylcbiAgICAgICAgICAgICAgICAgICAgLy8gb3IgaXMgaW1hZ2UvcG5nLCBvdGhlcndpc2UgZmFsbGJhY2sgdG8gdXNpbmcgdG9EYXRhVVJMIG9uIElFLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1pbWVUeXBlIHx8IG1pbWVUeXBlID09PSAnaW1hZ2UvcG5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoYmxvYkNhbnZhcy5tc1RvQmxvYigpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWJsb2JDYW52YXMudG9CbG9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGF3YWl0IGRhdGFVcmxUb0Jsb2IoYmxvYkNhbnZhcy50b0RhdGFVUkwobWltZVR5cGUsIHF1YWxpdHlBcmd1bWVudCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmxvYkNhbnZhcy50b0Jsb2IoKGJsb2IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFibG9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcignVW5hYmxlIHRvIHJldHJpZXZlIGNhbnZhcyBibG9iJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmxvYik7XG4gICAgICAgICAgICAgICAgfSwgbWltZVR5cGUsIHF1YWxpdHlBcmd1bWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXNbJHVwZGF0ZVNpemVdKHsgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgICAgfVxuICAgICAgICA7XG4gICAgfVxuICAgIHJlZ2lzdGVyUmVuZGVyZXIocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpc1skc2NlbmVdLmV4dGVybmFsUmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclJlbmRlcmVyKCkge1xuICAgICAgICB0aGlzWyRzY2VuZV0uZXh0ZXJuYWxSZW5kZXJlciA9IG51bGw7XG4gICAgfVxuICAgIGdldCBbJGFyaWFMYWJlbF0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRhbHREZWZhdWx0ZWRdO1xuICAgIH1cbiAgICBnZXQgWyRhbHREZWZhdWx0ZWRdKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuYWx0ID09IG51bGwgfHwgdGhpcy5hbHQgPT09ICdudWxsJykgPyB0aGlzWyRkZWZhdWx0QXJpYUxhYmVsXSA6XG4gICAgICAgICAgICB0aGlzLmFsdDtcbiAgICB9XG4gICAgLy8gTk9URShjZGF0YSk6IEFsdGhvdWdoIHRoaXMgbWF5IHNlZW0gZXh0cmVtZWx5IHJlZHVuZGFudCwgaXQgaXMgcmVxdWlyZWQgaW5cbiAgICAvLyBvcmRlciB0byBzdXBwb3J0IG92ZXJsb2FkaW5nIHdoZW4gVHlwZVNjcmlwdCBpcyBjb21waWxlZCB0byBFUzVcbiAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyL2xpdC1lbGVtZW50L3B1bGwvNzQ1XG4gICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzMzOFxuICAgIFskZ2V0TG9hZGVkXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJGxvYWRlZF07XG4gICAgfVxuICAgIC8vIEBzZWUgWyRnZXRMb2FkZWRdXG4gICAgWyRnZXRNb2RlbElzVmlzaWJsZV0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRlZCAmJiB0aGlzWyRpc0VsZW1lbnRJblZpZXdwb3J0XTtcbiAgICB9XG4gICAgWyRzaG91bGRBdHRlbXB0UHJlbG9hZF0oKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuc3JjICYmIHRoaXNbJGlzRWxlbWVudEluVmlld3BvcnRdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgb24gaW5pdGlhbGl6YXRpb24gYW5kIHdoZW4gdGhlIHJlc2l6ZSBvYnNlcnZlciBmaXJlcy5cbiAgICAgKi9cbiAgICBbJHVwZGF0ZVNpemVdKHsgd2lkdGgsIGhlaWdodCB9KSB7XG4gICAgICAgIHRoaXNbJGNvbnRhaW5lcl0uc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG4gICAgICAgIHRoaXNbJGNvbnRhaW5lcl0uc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgICAgICAgdGhpc1skb25SZXNpemVdKHsgd2lkdGg6IHBhcnNlRmxvYXQod2lkdGgpLCBoZWlnaHQ6IHBhcnNlRmxvYXQoaGVpZ2h0KSB9KTtcbiAgICB9XG4gICAgWyR0aWNrXShfdGltZSwgX2RlbHRhKSB7XG4gICAgfVxuICAgIFskbWFya0xvYWRlZF0oKSB7XG4gICAgICAgIGlmICh0aGlzWyRsb2FkZWRdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1skbG9hZGVkXSA9IHRydWU7XG4gICAgICAgIHRoaXNbJGxvYWRlZFRpbWVdID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuICAgIFskbmVlZHNSZW5kZXJdKCkge1xuICAgICAgICB0aGlzWyRzY2VuZV0ucXVldWVSZW5kZXIoKTtcbiAgICB9XG4gICAgWyRvbk1vZGVsTG9hZF0oKSB7XG4gICAgfVxuICAgIFskdXBkYXRlU3RhdHVzXShzdGF0dXMpIHtcbiAgICAgICAgdGhpc1skc3RhdHVzXSA9IHN0YXR1cztcbiAgICAgICAgY29uc3Qgcm9vdE5vZGUgPSB0aGlzLmdldFJvb3ROb2RlKCk7XG4gICAgICAgIC8vIE9ubHkgY2hhbmdlIHRoZSBhcmlhLWxhYmVsIGlmIDxtb2RlbC12aWV3ZXI+IGlzIGN1cnJlbnRseSBmb2N1c2VkOlxuICAgICAgICBpZiAocm9vdE5vZGUgIT0gbnVsbCAmJiByb290Tm9kZS5hY3RpdmVFbGVtZW50ID09PSB0aGlzICYmXG4gICAgICAgICAgICB0aGlzWyRzdGF0dXNFbGVtZW50XS50ZXh0Q29udGVudCAhPSBzdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXNbJHN0YXR1c0VsZW1lbnRdLnRleHRDb250ZW50ID0gc3RhdHVzO1xuICAgICAgICB9XG4gICAgfVxuICAgIFsoX2wgPSAkb25Gb2N1cywgX20gPSAkb25CbHVyLCAkb25SZXNpemUpXShlKSB7XG4gICAgICAgIHRoaXNbJHNjZW5lXS5zZXRTaXplKGUud2lkdGgsIGUuaGVpZ2h0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBlbGVtZW50IGZvciBhbiBhcHByb3ByaWF0ZSBzb3VyY2UgVVJMIGFuZFxuICAgICAqIHNldHMgdGhlIHZpZXdzIHRvIHVzZSB0aGUgbmV3IG1vZGVsIGJhc2VkLlxuICAgICAqL1xuICAgIGFzeW5jIFsoX28gPSAkb25Db250ZXh0TG9zdCwgJHVwZGF0ZVNvdXJjZSldKCkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXNbJHNjZW5lXTtcbiAgICAgICAgaWYgKHRoaXMubG9hZGVkIHx8ICF0aGlzWyRzaG91bGRBdHRlbXB0UHJlbG9hZF0oKSB8fFxuICAgICAgICAgICAgdGhpcy5zcmMgPT09IHNjZW5lLnVybCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdlbmVyYXRlU2NoZW1hKSB7XG4gICAgICAgICAgICBzY2VuZS51cGRhdGVTY2hlbWEodGhpcy5zcmMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbJHVwZGF0ZVN0YXR1c10oJ0xvYWRpbmcnKTtcbiAgICAgICAgLy8gSWYgd2UgYXJlIGxvYWRpbmcgYSBuZXcgbW9kZWwsIHdlIG5lZWQgdG8gc3RvcCB0aGUgYW5pbWF0aW9uIG9mXG4gICAgICAgIC8vIHRoZSBjdXJyZW50IG9uZSAoaWYgYW55IGlzIHBsYXlpbmcpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGxvc2VcbiAgICAgICAgLy8gdGhlIHJlZmVyZW5jZSB0byB0aGUgc2NlbmUgcm9vdCBhbmQgcnVubmluZyBhY3Rpb25zIHN0YXJ0IHRvXG4gICAgICAgIC8vIHRocm93IGV4Y2VwdGlvbnMgYW5kL29yIGJlaGF2ZSBpbiB1bmV4cGVjdGVkIHdheXM6XG4gICAgICAgIHNjZW5lLnN0b3BBbmltYXRpb24oKTtcbiAgICAgICAgY29uc3QgdXBkYXRlU291cmNlUHJvZ3Jlc3MgPSB0aGlzWyRwcm9ncmVzc1RyYWNrZXJdLmJlZ2luQWN0aXZpdHkoKTtcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5zcmM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzcmNVcGRhdGVkID0gc2NlbmUuc2V0U291cmNlKHNvdXJjZSwgKHByb2dyZXNzKSA9PiB1cGRhdGVTb3VyY2VQcm9ncmVzcyhjbGFtcChwcm9ncmVzcywgMCwgMSkgKiAwLjk1KSk7XG4gICAgICAgICAgICBjb25zdCBlbnZVcGRhdGVkID0gdGhpc1skdXBkYXRlRW52aXJvbm1lbnRdKCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbc3JjVXBkYXRlZCwgZW52VXBkYXRlZF0pO1xuICAgICAgICAgICAgdGhpc1skbWFya0xvYWRlZF0oKTtcbiAgICAgICAgICAgIHRoaXNbJG9uTW9kZWxMb2FkXSgpO1xuICAgICAgICAgICAgLy8gV2FpdCBmb3Igc2hhZGVycyB0byBjb21waWxlIGFuZCBwaXhlbHMgdG8gYmUgZHJhd24uXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbG9hZCcsIHsgZGV0YWlsOiB7IHVybDogc291cmNlIH0gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZXJyb3InLCB7IGRldGFpbDogeyB0eXBlOiAnbG9hZGZhaWx1cmUnLCBzb3VyY2VFcnJvcjogZXJyb3IgfSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB1cGRhdGVTb3VyY2VQcm9ncmVzcygxLjApO1xuICAgICAgICB9XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcbl0sIE1vZGVsVmlld2VyRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImFsdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcbl0sIE1vZGVsVmlld2VyRWxlbWVudEJhc2UucHJvdG90eXBlLCBcInNyY1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBhdHRyaWJ1dGU6ICd3aXRoLWNyZWRlbnRpYWxzJyB9KVxuXSwgTW9kZWxWaWV3ZXJFbGVtZW50QmFzZS5wcm90b3R5cGUsIFwid2l0aENyZWRlbnRpYWxzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIGF0dHJpYnV0ZTogJ2dlbmVyYXRlLXNjaGVtYScgfSlcbl0sIE1vZGVsVmlld2VyRWxlbWVudEJhc2UucHJvdG90eXBlLCBcImdlbmVyYXRlU2NoZW1hXCIsIHZvaWQgMCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tb2RlbC12aWV3ZXItYmFzZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/model-viewer.js":
/*!***************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/model-viewer.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelViewerElement: () => (/* binding */ ModelViewerElement)\n/* harmony export */ });\n/* harmony import */ var _features_animation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./features/animation.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/animation.js\");\n/* harmony import */ var _features_annotation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./features/annotation.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/annotation.js\");\n/* harmony import */ var _features_ar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./features/ar.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/ar.js\");\n/* harmony import */ var _features_controls_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./features/controls.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/controls.js\");\n/* harmony import */ var _features_environment_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./features/environment.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/environment.js\");\n/* harmony import */ var _features_loading_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./features/loading.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/loading.js\");\n/* harmony import */ var _features_scene_graph_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./features/scene-graph.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph.js\");\n/* harmony import */ var _features_staging_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./features/staging.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/staging.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _utilities_focus_visible_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utilities/focus-visible.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities/focus-visible.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\n\n\n\n\n// Uncomment these lines to export PMREM textures in Glitch:\n// export {default as TextureUtils} from './three-components/TextureUtils';\n// export * from 'three';\nconst ModelViewerElement = (0,_features_annotation_js__WEBPACK_IMPORTED_MODULE_1__.AnnotationMixin)((0,_features_scene_graph_js__WEBPACK_IMPORTED_MODULE_6__.SceneGraphMixin)((0,_features_staging_js__WEBPACK_IMPORTED_MODULE_7__.StagingMixin)((0,_features_environment_js__WEBPACK_IMPORTED_MODULE_4__.EnvironmentMixin)((0,_features_controls_js__WEBPACK_IMPORTED_MODULE_3__.ControlsMixin)((0,_features_ar_js__WEBPACK_IMPORTED_MODULE_2__.ARMixin)((0,_features_loading_js__WEBPACK_IMPORTED_MODULE_5__.LoadingMixin)((0,_features_animation_js__WEBPACK_IMPORTED_MODULE_0__.AnimationMixin)((0,_utilities_focus_visible_js__WEBPACK_IMPORTED_MODULE_9__.FocusVisiblePolyfillMixin)(_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"])))))))));\ncustomElements.define('model-viewer', ModelViewerElement);\n//# sourceMappingURL=model-viewer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL21vZGVsLXZpZXdlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDeUQ7QUFDRTtBQUNoQjtBQUNZO0FBQ007QUFDUjtBQUNPO0FBQ1A7QUFDTztBQUNhO0FBQ3pFO0FBQ0EsV0FBVyx5QkFBeUI7QUFDcEM7QUFDTywyQkFBMkIsd0VBQWUsQ0FBQyx5RUFBZSxDQUFDLGtFQUFZLENBQUMsMEVBQWdCLENBQUMsb0VBQWEsQ0FBQyx3REFBTyxDQUFDLGtFQUFZLENBQUMsc0VBQWMsQ0FBQyxzRkFBeUIsQ0FBQyw2REFBc0I7QUFDbE07QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvbW9kZWwtdmlld2VyLmpzP2FkNWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgQW5pbWF0aW9uTWl4aW4gfSBmcm9tICcuL2ZlYXR1cmVzL2FuaW1hdGlvbi5qcyc7XG5pbXBvcnQgeyBBbm5vdGF0aW9uTWl4aW4gfSBmcm9tICcuL2ZlYXR1cmVzL2Fubm90YXRpb24uanMnO1xuaW1wb3J0IHsgQVJNaXhpbiB9IGZyb20gJy4vZmVhdHVyZXMvYXIuanMnO1xuaW1wb3J0IHsgQ29udHJvbHNNaXhpbiB9IGZyb20gJy4vZmVhdHVyZXMvY29udHJvbHMuanMnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnRNaXhpbiB9IGZyb20gJy4vZmVhdHVyZXMvZW52aXJvbm1lbnQuanMnO1xuaW1wb3J0IHsgTG9hZGluZ01peGluIH0gZnJvbSAnLi9mZWF0dXJlcy9sb2FkaW5nLmpzJztcbmltcG9ydCB7IFNjZW5lR3JhcGhNaXhpbiB9IGZyb20gJy4vZmVhdHVyZXMvc2NlbmUtZ3JhcGguanMnO1xuaW1wb3J0IHsgU3RhZ2luZ01peGluIH0gZnJvbSAnLi9mZWF0dXJlcy9zdGFnaW5nLmpzJztcbmltcG9ydCBNb2RlbFZpZXdlckVsZW1lbnRCYXNlIGZyb20gJy4vbW9kZWwtdmlld2VyLWJhc2UuanMnO1xuaW1wb3J0IHsgRm9jdXNWaXNpYmxlUG9seWZpbGxNaXhpbiB9IGZyb20gJy4vdXRpbGl0aWVzL2ZvY3VzLXZpc2libGUuanMnO1xuLy8gVW5jb21tZW50IHRoZXNlIGxpbmVzIHRvIGV4cG9ydCBQTVJFTSB0ZXh0dXJlcyBpbiBHbGl0Y2g6XG4vLyBleHBvcnQge2RlZmF1bHQgYXMgVGV4dHVyZVV0aWxzfSBmcm9tICcuL3RocmVlLWNvbXBvbmVudHMvVGV4dHVyZVV0aWxzJztcbi8vIGV4cG9ydCAqIGZyb20gJ3RocmVlJztcbmV4cG9ydCBjb25zdCBNb2RlbFZpZXdlckVsZW1lbnQgPSBBbm5vdGF0aW9uTWl4aW4oU2NlbmVHcmFwaE1peGluKFN0YWdpbmdNaXhpbihFbnZpcm9ubWVudE1peGluKENvbnRyb2xzTWl4aW4oQVJNaXhpbihMb2FkaW5nTWl4aW4oQW5pbWF0aW9uTWl4aW4oRm9jdXNWaXNpYmxlUG9seWZpbGxNaXhpbihNb2RlbFZpZXdlckVsZW1lbnRCYXNlKSkpKSkpKSkpO1xuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdtb2RlbC12aWV3ZXInLCBNb2RlbFZpZXdlckVsZW1lbnQpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9kZWwtdmlld2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/model-viewer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/styles/conversions.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/styles/conversions.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   degreesToRadians: () => (/* binding */ degreesToRadians),\n/* harmony export */   lengthToBaseMeters: () => (/* binding */ lengthToBaseMeters),\n/* harmony export */   normalizeUnit: () => (/* binding */ normalizeUnit),\n/* harmony export */   radiansToDegrees: () => (/* binding */ radiansToDegrees)\n/* harmony export */ });\n/* harmony import */ var _parsers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parsers */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Ensures that a given number is expressed in radians. If the number is already\n * in radians, does nothing. If the value is in degrees, converts it to radians.\n * If the value has no specified unit, the unit is assumed to be radians. If the\n * value is not in radians or degrees, the value is resolved as 0 radians.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst degreesToRadians = (numberNode, fallbackRadianValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackRadianValue;\n        unit = 'rad';\n    }\n    else if (numberNode.unit === 'rad' || numberNode.unit == null) {\n        return numberNode;\n    }\n    const valueIsDegrees = unit === 'deg' && number != null;\n    const value = valueIsDegrees ? number : 0;\n    const radians = value * Math.PI / 180;\n    return { type: 'number', number: radians, unit: 'rad' };\n};\n/**\n * Ensures that a given number is expressed in degrees. If the number is already\n * in degrees, does nothing. If the value is in radians or has no specified\n * unit, converts it to degrees. If the value is not in radians or degrees, the\n * value is resolved as 0 degrees.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst radiansToDegrees = (numberNode, fallbackDegreeValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackDegreeValue;\n        unit = 'deg';\n    }\n    else if (numberNode.unit === 'deg') {\n        return numberNode;\n    }\n    const valueIsRadians = (unit === null || unit === 'rad') && number != null;\n    const value = valueIsRadians ? number : 0;\n    const degrees = value * 180 / Math.PI;\n    return { type: 'number', number: degrees, unit: 'deg' };\n};\n/**\n * Converts a given length to meters. Currently supported input units are\n * meters, centimeters and millimeters.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst lengthToBaseMeters = (numberNode, fallbackMeterValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackMeterValue;\n        unit = 'm';\n    }\n    else if (numberNode.unit === 'm') {\n        return numberNode;\n    }\n    let scale;\n    switch (unit) {\n        default:\n            scale = 1;\n            break;\n        case 'cm':\n            scale = 1 / 100;\n            break;\n        case 'mm':\n            scale = 1 / 1000;\n            break;\n    }\n    const value = scale * number;\n    return { type: 'number', number: value, unit: 'm' };\n};\n/**\n * Normalizes the unit of a given input number so that it is expressed in a\n * preferred unit. For length nodes, the return value will be expressed in\n * meters. For angle nodes, the return value will be expressed in radians.\n *\n * Also takes a fallback number that is used when the number value is not a\n * valid number or when the unit of the given number cannot be normalized.\n */\nconst normalizeUnit = (() => {\n    const identity = (node) => node;\n    const unitNormalizers = {\n        'rad': identity,\n        'deg': degreesToRadians,\n        'm': identity,\n        'mm': lengthToBaseMeters,\n        'cm': lengthToBaseMeters\n    };\n    return (node, fallback = _parsers__WEBPACK_IMPORTED_MODULE_0__.ZERO) => {\n        if (!isFinite(node.number)) {\n            node.number = fallback.number;\n            node.unit = fallback.unit;\n        }\n        const { unit } = node;\n        if (unit == null) {\n            return node;\n        }\n        const normalize = unitNormalizers[unit];\n        if (normalize == null) {\n            return fallback;\n        }\n        return normalize(node);\n    };\n})();\n//# sourceMappingURL=conversions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3N0eWxlcy9jb252ZXJzaW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxVQUFVLGVBQWU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFVBQVUsZUFBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxVQUFVLGVBQWU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMENBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3N0eWxlcy9jb252ZXJzaW9ucy5qcz9lMWE2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IFpFUk8gfSBmcm9tICcuL3BhcnNlcnMnO1xuLyoqXG4gKiBFbnN1cmVzIHRoYXQgYSBnaXZlbiBudW1iZXIgaXMgZXhwcmVzc2VkIGluIHJhZGlhbnMuIElmIHRoZSBudW1iZXIgaXMgYWxyZWFkeVxuICogaW4gcmFkaWFucywgZG9lcyBub3RoaW5nLiBJZiB0aGUgdmFsdWUgaXMgaW4gZGVncmVlcywgY29udmVydHMgaXQgdG8gcmFkaWFucy5cbiAqIElmIHRoZSB2YWx1ZSBoYXMgbm8gc3BlY2lmaWVkIHVuaXQsIHRoZSB1bml0IGlzIGFzc3VtZWQgdG8gYmUgcmFkaWFucy4gSWYgdGhlXG4gKiB2YWx1ZSBpcyBub3QgaW4gcmFkaWFucyBvciBkZWdyZWVzLCB0aGUgdmFsdWUgaXMgcmVzb2x2ZWQgYXMgMCByYWRpYW5zLlxuICpcbiAqIEFsc28gYWNjZXB0cyBhIHNlY29uZCBhcmd1bWVudCB0aGF0IGlzIGEgZGVmYXVsdCB2YWx1ZSB0byB1c2UgaWYgdGhlIGlucHV0XG4gKiBudW1iZXJOb2RlIG51bWJlciBpcyBOYU4gb3IgSW5maW5pdHkuXG4gKi9cbmV4cG9ydCBjb25zdCBkZWdyZWVzVG9SYWRpYW5zID0gKG51bWJlck5vZGUsIGZhbGxiYWNrUmFkaWFuVmFsdWUgPSAwKSA9PiB7XG4gICAgbGV0IHsgbnVtYmVyLCB1bml0IH0gPSBudW1iZXJOb2RlO1xuICAgIGlmICghaXNGaW5pdGUobnVtYmVyKSkge1xuICAgICAgICBudW1iZXIgPSBmYWxsYmFja1JhZGlhblZhbHVlO1xuICAgICAgICB1bml0ID0gJ3JhZCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKG51bWJlck5vZGUudW5pdCA9PT0gJ3JhZCcgfHwgbnVtYmVyTm9kZS51bml0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bWJlck5vZGU7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlSXNEZWdyZWVzID0gdW5pdCA9PT0gJ2RlZycgJiYgbnVtYmVyICE9IG51bGw7XG4gICAgY29uc3QgdmFsdWUgPSB2YWx1ZUlzRGVncmVlcyA/IG51bWJlciA6IDA7XG4gICAgY29uc3QgcmFkaWFucyA9IHZhbHVlICogTWF0aC5QSSAvIDE4MDtcbiAgICByZXR1cm4geyB0eXBlOiAnbnVtYmVyJywgbnVtYmVyOiByYWRpYW5zLCB1bml0OiAncmFkJyB9O1xufTtcbi8qKlxuICogRW5zdXJlcyB0aGF0IGEgZ2l2ZW4gbnVtYmVyIGlzIGV4cHJlc3NlZCBpbiBkZWdyZWVzLiBJZiB0aGUgbnVtYmVyIGlzIGFscmVhZHlcbiAqIGluIGRlZ3JlZXMsIGRvZXMgbm90aGluZy4gSWYgdGhlIHZhbHVlIGlzIGluIHJhZGlhbnMgb3IgaGFzIG5vIHNwZWNpZmllZFxuICogdW5pdCwgY29udmVydHMgaXQgdG8gZGVncmVlcy4gSWYgdGhlIHZhbHVlIGlzIG5vdCBpbiByYWRpYW5zIG9yIGRlZ3JlZXMsIHRoZVxuICogdmFsdWUgaXMgcmVzb2x2ZWQgYXMgMCBkZWdyZWVzLlxuICpcbiAqIEFsc28gYWNjZXB0cyBhIHNlY29uZCBhcmd1bWVudCB0aGF0IGlzIGEgZGVmYXVsdCB2YWx1ZSB0byB1c2UgaWYgdGhlIGlucHV0XG4gKiBudW1iZXJOb2RlIG51bWJlciBpcyBOYU4gb3IgSW5maW5pdHkuXG4gKi9cbmV4cG9ydCBjb25zdCByYWRpYW5zVG9EZWdyZWVzID0gKG51bWJlck5vZGUsIGZhbGxiYWNrRGVncmVlVmFsdWUgPSAwKSA9PiB7XG4gICAgbGV0IHsgbnVtYmVyLCB1bml0IH0gPSBudW1iZXJOb2RlO1xuICAgIGlmICghaXNGaW5pdGUobnVtYmVyKSkge1xuICAgICAgICBudW1iZXIgPSBmYWxsYmFja0RlZ3JlZVZhbHVlO1xuICAgICAgICB1bml0ID0gJ2RlZyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKG51bWJlck5vZGUudW5pdCA9PT0gJ2RlZycpIHtcbiAgICAgICAgcmV0dXJuIG51bWJlck5vZGU7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlSXNSYWRpYW5zID0gKHVuaXQgPT09IG51bGwgfHwgdW5pdCA9PT0gJ3JhZCcpICYmIG51bWJlciAhPSBudWxsO1xuICAgIGNvbnN0IHZhbHVlID0gdmFsdWVJc1JhZGlhbnMgPyBudW1iZXIgOiAwO1xuICAgIGNvbnN0IGRlZ3JlZXMgPSB2YWx1ZSAqIDE4MCAvIE1hdGguUEk7XG4gICAgcmV0dXJuIHsgdHlwZTogJ251bWJlcicsIG51bWJlcjogZGVncmVlcywgdW5pdDogJ2RlZycgfTtcbn07XG4vKipcbiAqIENvbnZlcnRzIGEgZ2l2ZW4gbGVuZ3RoIHRvIG1ldGVycy4gQ3VycmVudGx5IHN1cHBvcnRlZCBpbnB1dCB1bml0cyBhcmVcbiAqIG1ldGVycywgY2VudGltZXRlcnMgYW5kIG1pbGxpbWV0ZXJzLlxuICpcbiAqIEFsc28gYWNjZXB0cyBhIHNlY29uZCBhcmd1bWVudCB0aGF0IGlzIGEgZGVmYXVsdCB2YWx1ZSB0byB1c2UgaWYgdGhlIGlucHV0XG4gKiBudW1iZXJOb2RlIG51bWJlciBpcyBOYU4gb3IgSW5maW5pdHkuXG4gKi9cbmV4cG9ydCBjb25zdCBsZW5ndGhUb0Jhc2VNZXRlcnMgPSAobnVtYmVyTm9kZSwgZmFsbGJhY2tNZXRlclZhbHVlID0gMCkgPT4ge1xuICAgIGxldCB7IG51bWJlciwgdW5pdCB9ID0gbnVtYmVyTm9kZTtcbiAgICBpZiAoIWlzRmluaXRlKG51bWJlcikpIHtcbiAgICAgICAgbnVtYmVyID0gZmFsbGJhY2tNZXRlclZhbHVlO1xuICAgICAgICB1bml0ID0gJ20nO1xuICAgIH1cbiAgICBlbHNlIGlmIChudW1iZXJOb2RlLnVuaXQgPT09ICdtJykge1xuICAgICAgICByZXR1cm4gbnVtYmVyTm9kZTtcbiAgICB9XG4gICAgbGV0IHNjYWxlO1xuICAgIHN3aXRjaCAodW5pdCkge1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgc2NhbGUgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NtJzpcbiAgICAgICAgICAgIHNjYWxlID0gMSAvIDEwMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtbSc6XG4gICAgICAgICAgICBzY2FsZSA9IDEgLyAxMDAwO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlID0gc2NhbGUgKiBudW1iZXI7XG4gICAgcmV0dXJuIHsgdHlwZTogJ251bWJlcicsIG51bWJlcjogdmFsdWUsIHVuaXQ6ICdtJyB9O1xufTtcbi8qKlxuICogTm9ybWFsaXplcyB0aGUgdW5pdCBvZiBhIGdpdmVuIGlucHV0IG51bWJlciBzbyB0aGF0IGl0IGlzIGV4cHJlc3NlZCBpbiBhXG4gKiBwcmVmZXJyZWQgdW5pdC4gRm9yIGxlbmd0aCBub2RlcywgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGJlIGV4cHJlc3NlZCBpblxuICogbWV0ZXJzLiBGb3IgYW5nbGUgbm9kZXMsIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBiZSBleHByZXNzZWQgaW4gcmFkaWFucy5cbiAqXG4gKiBBbHNvIHRha2VzIGEgZmFsbGJhY2sgbnVtYmVyIHRoYXQgaXMgdXNlZCB3aGVuIHRoZSBudW1iZXIgdmFsdWUgaXMgbm90IGFcbiAqIHZhbGlkIG51bWJlciBvciB3aGVuIHRoZSB1bml0IG9mIHRoZSBnaXZlbiBudW1iZXIgY2Fubm90IGJlIG5vcm1hbGl6ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBub3JtYWxpemVVbml0ID0gKCgpID0+IHtcbiAgICBjb25zdCBpZGVudGl0eSA9IChub2RlKSA9PiBub2RlO1xuICAgIGNvbnN0IHVuaXROb3JtYWxpemVycyA9IHtcbiAgICAgICAgJ3JhZCc6IGlkZW50aXR5LFxuICAgICAgICAnZGVnJzogZGVncmVlc1RvUmFkaWFucyxcbiAgICAgICAgJ20nOiBpZGVudGl0eSxcbiAgICAgICAgJ21tJzogbGVuZ3RoVG9CYXNlTWV0ZXJzLFxuICAgICAgICAnY20nOiBsZW5ndGhUb0Jhc2VNZXRlcnNcbiAgICB9O1xuICAgIHJldHVybiAobm9kZSwgZmFsbGJhY2sgPSBaRVJPKSA9PiB7XG4gICAgICAgIGlmICghaXNGaW5pdGUobm9kZS5udW1iZXIpKSB7XG4gICAgICAgICAgICBub2RlLm51bWJlciA9IGZhbGxiYWNrLm51bWJlcjtcbiAgICAgICAgICAgIG5vZGUudW5pdCA9IGZhbGxiYWNrLnVuaXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB1bml0IH0gPSBub2RlO1xuICAgICAgICBpZiAodW5pdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub3JtYWxpemUgPSB1bml0Tm9ybWFsaXplcnNbdW5pdF07XG4gICAgICAgIGlmIChub3JtYWxpemUgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub3JtYWxpemUobm9kZSk7XG4gICAgfTtcbn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb252ZXJzaW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/styles/conversions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/styles/deserializers.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/styles/deserializers.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enumerationDeserializer: () => (/* binding */ enumerationDeserializer)\n/* harmony export */ });\n/* harmony import */ var _parsers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parsers.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * For our purposes, an enumeration is a fixed set of CSS-expression-compatible\n * names. When serialized, a selected subset of the members may be specified as\n * whitespace-separated strings. An enumeration deserializer is a function that\n * parses a serialized subset of an enumeration and returns any members that are\n * found as a Set.\n *\n * The following example will produce a deserializer for the days of the\n * week:\n *\n * const deserializeDaysOfTheWeek = enumerationDeserializer([\n *   'Monday',\n *   'Tuesday',\n *   'Wednesday',\n *   'Thursday',\n *   'Friday',\n *   'Saturday',\n *   'Sunday'\n * ]);\n */\nconst enumerationDeserializer = (allowedNames) => (valueString) => {\n    try {\n        const expressions = (0,_parsers_js__WEBPACK_IMPORTED_MODULE_0__.parseExpressions)(valueString);\n        const names = (expressions.length ? expressions[0].terms : [])\n            .filter((valueNode) => valueNode && valueNode.type === 'ident')\n            .map(valueNode => valueNode.value)\n            .filter(name => allowedNames.indexOf(name) > -1);\n        // NOTE(cdata): IE11 does not support constructing a Set directly from\n        // an iterable, so we need to manually add all the items:\n        const result = new Set();\n        for (const name of names) {\n            result.add(name);\n        }\n        return result;\n    }\n    catch (_error) {\n    }\n    return new Set();\n};\n//# sourceMappingURL=deserializers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3N0eWxlcy9kZXNlcmlhbGl6ZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLDRCQUE0Qiw2REFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvc3R5bGVzL2Rlc2VyaWFsaXplcnMuanM/Zjk2MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBwYXJzZUV4cHJlc3Npb25zIH0gZnJvbSAnLi9wYXJzZXJzLmpzJztcbi8qKlxuICogRm9yIG91ciBwdXJwb3NlcywgYW4gZW51bWVyYXRpb24gaXMgYSBmaXhlZCBzZXQgb2YgQ1NTLWV4cHJlc3Npb24tY29tcGF0aWJsZVxuICogbmFtZXMuIFdoZW4gc2VyaWFsaXplZCwgYSBzZWxlY3RlZCBzdWJzZXQgb2YgdGhlIG1lbWJlcnMgbWF5IGJlIHNwZWNpZmllZCBhc1xuICogd2hpdGVzcGFjZS1zZXBhcmF0ZWQgc3RyaW5ncy4gQW4gZW51bWVyYXRpb24gZGVzZXJpYWxpemVyIGlzIGEgZnVuY3Rpb24gdGhhdFxuICogcGFyc2VzIGEgc2VyaWFsaXplZCBzdWJzZXQgb2YgYW4gZW51bWVyYXRpb24gYW5kIHJldHVybnMgYW55IG1lbWJlcnMgdGhhdCBhcmVcbiAqIGZvdW5kIGFzIGEgU2V0LlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSB3aWxsIHByb2R1Y2UgYSBkZXNlcmlhbGl6ZXIgZm9yIHRoZSBkYXlzIG9mIHRoZVxuICogd2VlazpcbiAqXG4gKiBjb25zdCBkZXNlcmlhbGl6ZURheXNPZlRoZVdlZWsgPSBlbnVtZXJhdGlvbkRlc2VyaWFsaXplcihbXG4gKiAgICdNb25kYXknLFxuICogICAnVHVlc2RheScsXG4gKiAgICdXZWRuZXNkYXknLFxuICogICAnVGh1cnNkYXknLFxuICogICAnRnJpZGF5JyxcbiAqICAgJ1NhdHVyZGF5JyxcbiAqICAgJ1N1bmRheSdcbiAqIF0pO1xuICovXG5leHBvcnQgY29uc3QgZW51bWVyYXRpb25EZXNlcmlhbGl6ZXIgPSAoYWxsb3dlZE5hbWVzKSA9PiAodmFsdWVTdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBleHByZXNzaW9ucyA9IHBhcnNlRXhwcmVzc2lvbnModmFsdWVTdHJpbmcpO1xuICAgICAgICBjb25zdCBuYW1lcyA9IChleHByZXNzaW9ucy5sZW5ndGggPyBleHByZXNzaW9uc1swXS50ZXJtcyA6IFtdKVxuICAgICAgICAgICAgLmZpbHRlcigodmFsdWVOb2RlKSA9PiB2YWx1ZU5vZGUgJiYgdmFsdWVOb2RlLnR5cGUgPT09ICdpZGVudCcpXG4gICAgICAgICAgICAubWFwKHZhbHVlTm9kZSA9PiB2YWx1ZU5vZGUudmFsdWUpXG4gICAgICAgICAgICAuZmlsdGVyKG5hbWUgPT4gYWxsb3dlZE5hbWVzLmluZGV4T2YobmFtZSkgPiAtMSk7XG4gICAgICAgIC8vIE5PVEUoY2RhdGEpOiBJRTExIGRvZXMgbm90IHN1cHBvcnQgY29uc3RydWN0aW5nIGEgU2V0IGRpcmVjdGx5IGZyb21cbiAgICAgICAgLy8gYW4gaXRlcmFibGUsIHNvIHdlIG5lZWQgdG8gbWFudWFsbHkgYWRkIGFsbCB0aGUgaXRlbXM6XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIG5hbWVzKSB7XG4gICAgICAgICAgICByZXN1bHQuYWRkKG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTZXQoKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZXNlcmlhbGl6ZXJzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/styles/deserializers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/styles/evaluators.js":
/*!********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/styles/evaluators.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CalcEvaluator: () => (/* binding */ CalcEvaluator),\n/* harmony export */   EnvEvaluator: () => (/* binding */ EnvEvaluator),\n/* harmony export */   Evaluator: () => (/* binding */ Evaluator),\n/* harmony export */   OperatorEvaluator: () => (/* binding */ OperatorEvaluator),\n/* harmony export */   PercentageEvaluator: () => (/* binding */ PercentageEvaluator),\n/* harmony export */   StyleEvaluator: () => (/* binding */ StyleEvaluator)\n/* harmony export */ });\n/* harmony import */ var _conversions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./conversions */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/conversions.js\");\n/* harmony import */ var _parsers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parsers */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b, _c;\n\n\nconst $evaluate = Symbol('evaluate');\nconst $lastValue = Symbol('lastValue');\n/**\n * An Evaluator is used to derive a computed style from part (or all) of a CSS\n * expression AST. This construct is particularly useful for complex ASTs\n * containing function calls such as calc, var and env. Such styles could be\n * costly to re-evaluate on every frame (and in some cases we may try to do\n * that). The Evaluator construct allows us to mark sub-trees of the AST as\n * constant, so that only the dynamic parts are re-evaluated. It also separates\n * one-time AST preparation work from work that necessarily has to happen upon\n * each evaluation.\n */\nclass Evaluator {\n    constructor() {\n        this[_a] = null;\n    }\n    /**\n     * An Evaluatable is a NumberNode or an Evaluator that evaluates a NumberNode\n     * as the result of invoking its evaluate method. This is mainly used to\n     * ensure that CSS function nodes are cast to the corresponding Evaluators\n     * that will resolve the result of the function, but is also used to ensure\n     * that a percentage nested at arbitrary depth in the expression will always\n     * be evaluated against the correct basis.\n     */\n    static evaluatableFor(node, basis = _parsers__WEBPACK_IMPORTED_MODULE_1__.ZERO) {\n        if (node instanceof Evaluator) {\n            return node;\n        }\n        if (node.type === 'number') {\n            if (node.unit === '%') {\n                return new PercentageEvaluator(node, basis);\n            }\n            return node;\n        }\n        switch (node.name.value) {\n            case 'calc':\n                return new CalcEvaluator(node, basis);\n            case 'env':\n                return new EnvEvaluator(node);\n        }\n        return _parsers__WEBPACK_IMPORTED_MODULE_1__.ZERO;\n    }\n    /**\n     * If the input is an Evaluator, returns the result of evaluating it.\n     * Otherwise, returns the input.\n     *\n     * This is a helper to aide in resolving a NumberNode without conditionally\n     * checking if the Evaluatable is an Evaluator everywhere.\n     */\n    static evaluate(evaluatable) {\n        if (evaluatable instanceof Evaluator) {\n            return evaluatable.evaluate();\n        }\n        return evaluatable;\n    }\n    /**\n     * If the input is an Evaluator, returns the value of its isConstant property.\n     * Returns true for all other input values.\n     */\n    static isConstant(evaluatable) {\n        if (evaluatable instanceof Evaluator) {\n            return evaluatable.isConstant;\n        }\n        return true;\n    }\n    /**\n     * This method applies a set of structured intrinsic metadata to an evaluated\n     * result from a parsed CSS-like string of expressions. Intrinsics provide\n     * sufficient metadata (e.g., basis values, analogs for keywords) such that\n     * omitted values in the input string can be backfilled, and keywords can be\n     * converted to concrete numbers.\n     *\n     * The result of applying intrinsics is a tuple of NumberNode values whose\n     * units match the units used by the basis of the intrinsics.\n     *\n     * The following is a high-level description of how intrinsics are applied:\n     *\n     *  1. Determine the value of 'auto' for the current term\n     *  2. If there is no corresponding input value for this term, substitute the\n     *     'auto' value.\n     *  3. If the term is an IdentNode, treat it as a keyword and perform the\n     *     appropriate substitution.\n     *  4. If the term is still null, fallback to the 'auto' value\n     *  5. If the term is a percentage, apply it to the basis and return that\n     *     value\n     *  6. Normalize the unit of the term\n     *  7. If the term's unit does not match the basis unit, return the basis\n     *     value\n     *  8. Return the term as is\n     */\n    static applyIntrinsics(evaluated, intrinsics) {\n        const { basis, keywords } = intrinsics;\n        const { auto } = keywords;\n        return basis.map((basisNode, index) => {\n            // Use an auto value if we have it, otherwise the auto value is the basis:\n            const autoSubstituteNode = auto[index] == null ? basisNode : auto[index];\n            // If the evaluated nodes do not have a node at the current\n            // index, fallback to the \"auto\" substitute right away:\n            let evaluatedNode = evaluated[index] ? evaluated[index] : autoSubstituteNode;\n            // Any ident node is considered a keyword:\n            if (evaluatedNode.type === 'ident') {\n                const keyword = evaluatedNode.value;\n                // Substitute any keywords for concrete values first:\n                if (keyword in keywords) {\n                    evaluatedNode = keywords[keyword][index];\n                }\n            }\n            // If we don't have a NumberNode at this point, fall back to whatever\n            // is specified for auto:\n            if (evaluatedNode == null || evaluatedNode.type === 'ident') {\n                evaluatedNode = autoSubstituteNode;\n            }\n            // For percentages, we always apply the percentage to the basis value:\n            if (evaluatedNode.unit === '%') {\n                return (0,_parsers__WEBPACK_IMPORTED_MODULE_1__.numberNode)(evaluatedNode.number / 100 * basisNode.number, basisNode.unit);\n            }\n            // Otherwise, normalize whatever we have:\n            evaluatedNode = (0,_conversions__WEBPACK_IMPORTED_MODULE_0__.normalizeUnit)(evaluatedNode, basisNode);\n            // If the normalized units do not match, return the basis as a fallback:\n            if (evaluatedNode.unit !== basisNode.unit) {\n                return basisNode;\n            }\n            // Finally, return the evaluated node with intrinsics applied:\n            return evaluatedNode;\n        });\n    }\n    /**\n     * If true, the Evaluator will only evaluate its AST one time. If false, the\n     * Evaluator will re-evaluate the AST each time that the public evaluate\n     * method is invoked.\n     */\n    get isConstant() {\n        return false;\n    }\n    /**\n     * Evaluate the Evaluator and return the result. If the Evaluator is constant,\n     * the corresponding AST will only be evaluated once, and the result of\n     * evaluating it the first time will be returned on all subsequent\n     * evaluations.\n     */\n    evaluate() {\n        if (!this.isConstant || this[$lastValue] == null) {\n            this[$lastValue] = this[$evaluate]();\n        }\n        return this[$lastValue];\n    }\n}\n_a = $lastValue;\nconst $percentage = Symbol('percentage');\nconst $basis = Symbol('basis');\n/**\n * A PercentageEvaluator scales a given basis value by a given percentage value.\n * The evaluated result is always considered to be constant.\n */\nclass PercentageEvaluator extends Evaluator {\n    constructor(percentage, basis) {\n        super();\n        this[$percentage] = percentage;\n        this[$basis] = basis;\n    }\n    get isConstant() {\n        return true;\n    }\n    [$evaluate]() {\n        return (0,_parsers__WEBPACK_IMPORTED_MODULE_1__.numberNode)(this[$percentage].number / 100 * this[$basis].number, this[$basis].unit);\n    }\n}\nconst $identNode = Symbol('identNode');\n/**\n * Evaluator for CSS-like env() functions. Currently, only one environment\n * variable is accepted as an argument for such functions: window-scroll-y.\n *\n * The env() Evaluator is explicitly dynamic because it always refers to\n * external state that changes as the user scrolls, so it should always be\n * re-evaluated to ensure we get the most recent value.\n *\n * Some important notes about this feature include:\n *\n *  - There is no such thing as a \"window-scroll-y\" CSS environment variable in\n *    any stable browser at the time that this comment is being written.\n *  - The actual CSS env() function accepts a second argument as a fallback for\n *    the case that the specified first argument isn't set; our syntax does not\n *    support this second argument.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/env\n */\nclass EnvEvaluator extends Evaluator {\n    constructor(envFunction) {\n        super();\n        this[_b] = null;\n        const identNode = envFunction.arguments.length ? envFunction.arguments[0].terms[0] : null;\n        if (identNode != null && identNode.type === 'ident') {\n            this[$identNode] = identNode;\n        }\n    }\n    get isConstant() {\n        return false;\n    }\n    ;\n    [(_b = $identNode, $evaluate)]() {\n        if (this[$identNode] != null) {\n            switch (this[$identNode].value) {\n                case 'window-scroll-y':\n                    const verticalScrollPosition = window.pageYOffset;\n                    const verticalScrollMax = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);\n                    const scrollY = verticalScrollPosition /\n                        (verticalScrollMax - window.innerHeight) ||\n                        0;\n                    return { type: 'number', number: scrollY, unit: null };\n            }\n        }\n        return _parsers__WEBPACK_IMPORTED_MODULE_1__.ZERO;\n    }\n}\nconst IS_MULTIPLICATION_RE = /[\\*\\/]/;\nconst $evaluator = Symbol('evaluator');\n/**\n * Evaluator for CSS-like calc() functions. Our implementation of calc()\n * evaluation currently support nested function calls, an unlimited number of\n * terms, and all four algebraic operators (+, -, * and /).\n *\n * The Evaluator is marked as constant unless the calc expression contains an\n * internal env expression at any depth, in which case it will be marked as\n * dynamic.\n *\n * @see https://www.w3.org/TR/css-values-3/#calc-syntax\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\nclass CalcEvaluator extends Evaluator {\n    constructor(calcFunction, basis = _parsers__WEBPACK_IMPORTED_MODULE_1__.ZERO) {\n        super();\n        this[_c] = null;\n        if (calcFunction.arguments.length !== 1) {\n            return;\n        }\n        const terms = calcFunction.arguments[0].terms.slice();\n        const secondOrderTerms = [];\n        while (terms.length) {\n            const term = terms.shift();\n            if (secondOrderTerms.length > 0) {\n                const previousTerm = secondOrderTerms[secondOrderTerms.length - 1];\n                if (previousTerm.type === 'operator' &&\n                    IS_MULTIPLICATION_RE.test(previousTerm.value)) {\n                    const operator = secondOrderTerms.pop();\n                    const leftValue = secondOrderTerms.pop();\n                    if (leftValue == null) {\n                        return;\n                    }\n                    secondOrderTerms.push(new OperatorEvaluator(operator, Evaluator.evaluatableFor(leftValue, basis), Evaluator.evaluatableFor(term, basis)));\n                    continue;\n                }\n            }\n            secondOrderTerms.push(term.type === 'operator' ? term :\n                Evaluator.evaluatableFor(term, basis));\n        }\n        while (secondOrderTerms.length > 2) {\n            const [left, operator, right] = secondOrderTerms.splice(0, 3);\n            if (operator.type !== 'operator') {\n                return;\n            }\n            secondOrderTerms.unshift(new OperatorEvaluator(operator, Evaluator.evaluatableFor(left, basis), Evaluator.evaluatableFor(right, basis)));\n        }\n        // There should only be one combined evaluator at this point:\n        if (secondOrderTerms.length === 1) {\n            this[$evaluator] = secondOrderTerms[0];\n        }\n    }\n    get isConstant() {\n        return this[$evaluator] == null || Evaluator.isConstant(this[$evaluator]);\n    }\n    [(_c = $evaluator, $evaluate)]() {\n        return this[$evaluator] != null ? Evaluator.evaluate(this[$evaluator]) :\n            _parsers__WEBPACK_IMPORTED_MODULE_1__.ZERO;\n    }\n}\nconst $operator = Symbol('operator');\nconst $left = Symbol('left');\nconst $right = Symbol('right');\n/**\n * An Evaluator for the operators found inside CSS calc() functions.\n * The evaluator accepts an operator and left/right operands. The operands can\n * be any valid expression term typically allowed inside a CSS calc function.\n *\n * As detail of this implementation, the only supported unit types are angles\n * expressed as radians or degrees, and lengths expressed as meters, centimeters\n * or millimeters.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\nclass OperatorEvaluator extends Evaluator {\n    constructor(operator, left, right) {\n        super();\n        this[$operator] = operator;\n        this[$left] = left;\n        this[$right] = right;\n    }\n    get isConstant() {\n        return Evaluator.isConstant(this[$left]) &&\n            Evaluator.isConstant(this[$right]);\n    }\n    [$evaluate]() {\n        const leftNode = (0,_conversions__WEBPACK_IMPORTED_MODULE_0__.normalizeUnit)(Evaluator.evaluate(this[$left]));\n        const rightNode = (0,_conversions__WEBPACK_IMPORTED_MODULE_0__.normalizeUnit)(Evaluator.evaluate(this[$right]));\n        const { number: leftValue, unit: leftUnit } = leftNode;\n        const { number: rightValue, unit: rightUnit } = rightNode;\n        // Disallow operations for mismatched normalized units e.g., m and rad:\n        if (rightUnit != null && leftUnit != null && rightUnit != leftUnit) {\n            return _parsers__WEBPACK_IMPORTED_MODULE_1__.ZERO;\n        }\n        // NOTE(cdata): rules for calc type checking are defined here\n        // https://drafts.csswg.org/css-values-3/#calc-type-checking\n        // This is a simplification and may not hold up once we begin to support\n        // additional unit types:\n        const unit = leftUnit || rightUnit;\n        let value;\n        switch (this[$operator].value) {\n            case '+':\n                value = leftValue + rightValue;\n                break;\n            case '-':\n                value = leftValue - rightValue;\n                break;\n            case '/':\n                value = leftValue / rightValue;\n                break;\n            case '*':\n                value = leftValue * rightValue;\n                break;\n            default:\n                return _parsers__WEBPACK_IMPORTED_MODULE_1__.ZERO;\n        }\n        return { type: 'number', number: value, unit };\n    }\n}\nconst $evaluatables = Symbol('evaluatables');\nconst $intrinsics = Symbol('intrinsics');\n/**\n * A VectorEvaluator evaluates a series of numeric terms that usually represent\n * a data structure such as a multi-dimensional vector or a spherical\n *\n * The form of the evaluator's result is determined by the Intrinsics that are\n * given to it when it is constructed. For example, spherical intrinsics would\n * establish two angle terms and a length term, so the result of evaluating the\n * evaluator that is configured with spherical intrinsics is a three element\n * array where the first two elements represent angles in radians and the third\n * element representing a length in meters.\n */\nclass StyleEvaluator extends Evaluator {\n    constructor(expressions, intrinsics) {\n        super();\n        this[$intrinsics] = intrinsics;\n        const firstExpression = expressions[0];\n        const terms = firstExpression != null ? firstExpression.terms : [];\n        this[$evaluatables] =\n            intrinsics.basis.map((basisNode, index) => {\n                const term = terms[index];\n                if (term == null) {\n                    return { type: 'ident', value: 'auto' };\n                }\n                if (term.type === 'ident') {\n                    return term;\n                }\n                return Evaluator.evaluatableFor(term, basisNode);\n            });\n    }\n    get isConstant() {\n        for (const evaluatable of this[$evaluatables]) {\n            if (!Evaluator.isConstant(evaluatable)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    [$evaluate]() {\n        const evaluated = this[$evaluatables].map(evaluatable => Evaluator.evaluate(evaluatable));\n        return Evaluator.applyIntrinsics(evaluated, this[$intrinsics])\n            .map(numberNode => numberNode.number);\n    }\n}\n//# sourceMappingURL=evaluators.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3N0eWxlcy9ldmFsdWF0b3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzhDO0FBQ0Q7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDBDQUFJO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMENBQUk7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrQkFBa0I7QUFDbEMsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFVO0FBQ2pDO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0RBQVU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EsZUFBZSwwQ0FBSTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1Asc0NBQXNDLDBDQUFJO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMENBQUk7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQWE7QUFDdEMsMEJBQTBCLDJEQUFhO0FBQ3ZDLGdCQUFnQixvQ0FBb0M7QUFDcEQsZ0JBQWdCLHNDQUFzQztBQUN0RDtBQUNBO0FBQ0EsbUJBQW1CLDBDQUFJO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwQ0FBSTtBQUMzQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9zdHlsZXMvZXZhbHVhdG9ycy5qcz9iZDRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbnZhciBfYSwgX2IsIF9jO1xuaW1wb3J0IHsgbm9ybWFsaXplVW5pdCB9IGZyb20gJy4vY29udmVyc2lvbnMnO1xuaW1wb3J0IHsgbnVtYmVyTm9kZSwgWkVSTyB9IGZyb20gJy4vcGFyc2Vycyc7XG5jb25zdCAkZXZhbHVhdGUgPSBTeW1ib2woJ2V2YWx1YXRlJyk7XG5jb25zdCAkbGFzdFZhbHVlID0gU3ltYm9sKCdsYXN0VmFsdWUnKTtcbi8qKlxuICogQW4gRXZhbHVhdG9yIGlzIHVzZWQgdG8gZGVyaXZlIGEgY29tcHV0ZWQgc3R5bGUgZnJvbSBwYXJ0IChvciBhbGwpIG9mIGEgQ1NTXG4gKiBleHByZXNzaW9uIEFTVC4gVGhpcyBjb25zdHJ1Y3QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3IgY29tcGxleCBBU1RzXG4gKiBjb250YWluaW5nIGZ1bmN0aW9uIGNhbGxzIHN1Y2ggYXMgY2FsYywgdmFyIGFuZCBlbnYuIFN1Y2ggc3R5bGVzIGNvdWxkIGJlXG4gKiBjb3N0bHkgdG8gcmUtZXZhbHVhdGUgb24gZXZlcnkgZnJhbWUgKGFuZCBpbiBzb21lIGNhc2VzIHdlIG1heSB0cnkgdG8gZG9cbiAqIHRoYXQpLiBUaGUgRXZhbHVhdG9yIGNvbnN0cnVjdCBhbGxvd3MgdXMgdG8gbWFyayBzdWItdHJlZXMgb2YgdGhlIEFTVCBhc1xuICogY29uc3RhbnQsIHNvIHRoYXQgb25seSB0aGUgZHluYW1pYyBwYXJ0cyBhcmUgcmUtZXZhbHVhdGVkLiBJdCBhbHNvIHNlcGFyYXRlc1xuICogb25lLXRpbWUgQVNUIHByZXBhcmF0aW9uIHdvcmsgZnJvbSB3b3JrIHRoYXQgbmVjZXNzYXJpbHkgaGFzIHRvIGhhcHBlbiB1cG9uXG4gKiBlYWNoIGV2YWx1YXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBFdmFsdWF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzW19hXSA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIEV2YWx1YXRhYmxlIGlzIGEgTnVtYmVyTm9kZSBvciBhbiBFdmFsdWF0b3IgdGhhdCBldmFsdWF0ZXMgYSBOdW1iZXJOb2RlXG4gICAgICogYXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyBpdHMgZXZhbHVhdGUgbWV0aG9kLiBUaGlzIGlzIG1haW5seSB1c2VkIHRvXG4gICAgICogZW5zdXJlIHRoYXQgQ1NTIGZ1bmN0aW9uIG5vZGVzIGFyZSBjYXN0IHRvIHRoZSBjb3JyZXNwb25kaW5nIEV2YWx1YXRvcnNcbiAgICAgKiB0aGF0IHdpbGwgcmVzb2x2ZSB0aGUgcmVzdWx0IG9mIHRoZSBmdW5jdGlvbiwgYnV0IGlzIGFsc28gdXNlZCB0byBlbnN1cmVcbiAgICAgKiB0aGF0IGEgcGVyY2VudGFnZSBuZXN0ZWQgYXQgYXJiaXRyYXJ5IGRlcHRoIGluIHRoZSBleHByZXNzaW9uIHdpbGwgYWx3YXlzXG4gICAgICogYmUgZXZhbHVhdGVkIGFnYWluc3QgdGhlIGNvcnJlY3QgYmFzaXMuXG4gICAgICovXG4gICAgc3RhdGljIGV2YWx1YXRhYmxlRm9yKG5vZGUsIGJhc2lzID0gWkVSTykge1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEV2YWx1YXRvcikge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGlmIChub2RlLnVuaXQgPT09ICclJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGVyY2VudGFnZUV2YWx1YXRvcihub2RlLCBiYXNpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKG5vZGUubmFtZS52YWx1ZSkge1xuICAgICAgICAgICAgY2FzZSAnY2FsYyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWxjRXZhbHVhdG9yKG5vZGUsIGJhc2lzKTtcbiAgICAgICAgICAgIGNhc2UgJ2Vudic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnZFdmFsdWF0b3Iobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFpFUk87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBpbnB1dCBpcyBhbiBFdmFsdWF0b3IsIHJldHVybnMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGl0LlxuICAgICAqIE90aGVyd2lzZSwgcmV0dXJucyB0aGUgaW5wdXQuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGEgaGVscGVyIHRvIGFpZGUgaW4gcmVzb2x2aW5nIGEgTnVtYmVyTm9kZSB3aXRob3V0IGNvbmRpdGlvbmFsbHlcbiAgICAgKiBjaGVja2luZyBpZiB0aGUgRXZhbHVhdGFibGUgaXMgYW4gRXZhbHVhdG9yIGV2ZXJ5d2hlcmUuXG4gICAgICovXG4gICAgc3RhdGljIGV2YWx1YXRlKGV2YWx1YXRhYmxlKSB7XG4gICAgICAgIGlmIChldmFsdWF0YWJsZSBpbnN0YW5jZW9mIEV2YWx1YXRvcikge1xuICAgICAgICAgICAgcmV0dXJuIGV2YWx1YXRhYmxlLmV2YWx1YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2YWx1YXRhYmxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgaW5wdXQgaXMgYW4gRXZhbHVhdG9yLCByZXR1cm5zIHRoZSB2YWx1ZSBvZiBpdHMgaXNDb25zdGFudCBwcm9wZXJ0eS5cbiAgICAgKiBSZXR1cm5zIHRydWUgZm9yIGFsbCBvdGhlciBpbnB1dCB2YWx1ZXMuXG4gICAgICovXG4gICAgc3RhdGljIGlzQ29uc3RhbnQoZXZhbHVhdGFibGUpIHtcbiAgICAgICAgaWYgKGV2YWx1YXRhYmxlIGluc3RhbmNlb2YgRXZhbHVhdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZXZhbHVhdGFibGUuaXNDb25zdGFudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgYXBwbGllcyBhIHNldCBvZiBzdHJ1Y3R1cmVkIGludHJpbnNpYyBtZXRhZGF0YSB0byBhbiBldmFsdWF0ZWRcbiAgICAgKiByZXN1bHQgZnJvbSBhIHBhcnNlZCBDU1MtbGlrZSBzdHJpbmcgb2YgZXhwcmVzc2lvbnMuIEludHJpbnNpY3MgcHJvdmlkZVxuICAgICAqIHN1ZmZpY2llbnQgbWV0YWRhdGEgKGUuZy4sIGJhc2lzIHZhbHVlcywgYW5hbG9ncyBmb3Iga2V5d29yZHMpIHN1Y2ggdGhhdFxuICAgICAqIG9taXR0ZWQgdmFsdWVzIGluIHRoZSBpbnB1dCBzdHJpbmcgY2FuIGJlIGJhY2tmaWxsZWQsIGFuZCBrZXl3b3JkcyBjYW4gYmVcbiAgICAgKiBjb252ZXJ0ZWQgdG8gY29uY3JldGUgbnVtYmVycy5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgaW50cmluc2ljcyBpcyBhIHR1cGxlIG9mIE51bWJlck5vZGUgdmFsdWVzIHdob3NlXG4gICAgICogdW5pdHMgbWF0Y2ggdGhlIHVuaXRzIHVzZWQgYnkgdGhlIGJhc2lzIG9mIHRoZSBpbnRyaW5zaWNzLlxuICAgICAqXG4gICAgICogVGhlIGZvbGxvd2luZyBpcyBhIGhpZ2gtbGV2ZWwgZGVzY3JpcHRpb24gb2YgaG93IGludHJpbnNpY3MgYXJlIGFwcGxpZWQ6XG4gICAgICpcbiAgICAgKiAgMS4gRGV0ZXJtaW5lIHRoZSB2YWx1ZSBvZiAnYXV0bycgZm9yIHRoZSBjdXJyZW50IHRlcm1cbiAgICAgKiAgMi4gSWYgdGhlcmUgaXMgbm8gY29ycmVzcG9uZGluZyBpbnB1dCB2YWx1ZSBmb3IgdGhpcyB0ZXJtLCBzdWJzdGl0dXRlIHRoZVxuICAgICAqICAgICAnYXV0bycgdmFsdWUuXG4gICAgICogIDMuIElmIHRoZSB0ZXJtIGlzIGFuIElkZW50Tm9kZSwgdHJlYXQgaXQgYXMgYSBrZXl3b3JkIGFuZCBwZXJmb3JtIHRoZVxuICAgICAqICAgICBhcHByb3ByaWF0ZSBzdWJzdGl0dXRpb24uXG4gICAgICogIDQuIElmIHRoZSB0ZXJtIGlzIHN0aWxsIG51bGwsIGZhbGxiYWNrIHRvIHRoZSAnYXV0bycgdmFsdWVcbiAgICAgKiAgNS4gSWYgdGhlIHRlcm0gaXMgYSBwZXJjZW50YWdlLCBhcHBseSBpdCB0byB0aGUgYmFzaXMgYW5kIHJldHVybiB0aGF0XG4gICAgICogICAgIHZhbHVlXG4gICAgICogIDYuIE5vcm1hbGl6ZSB0aGUgdW5pdCBvZiB0aGUgdGVybVxuICAgICAqICA3LiBJZiB0aGUgdGVybSdzIHVuaXQgZG9lcyBub3QgbWF0Y2ggdGhlIGJhc2lzIHVuaXQsIHJldHVybiB0aGUgYmFzaXNcbiAgICAgKiAgICAgdmFsdWVcbiAgICAgKiAgOC4gUmV0dXJuIHRoZSB0ZXJtIGFzIGlzXG4gICAgICovXG4gICAgc3RhdGljIGFwcGx5SW50cmluc2ljcyhldmFsdWF0ZWQsIGludHJpbnNpY3MpIHtcbiAgICAgICAgY29uc3QgeyBiYXNpcywga2V5d29yZHMgfSA9IGludHJpbnNpY3M7XG4gICAgICAgIGNvbnN0IHsgYXV0byB9ID0ga2V5d29yZHM7XG4gICAgICAgIHJldHVybiBiYXNpcy5tYXAoKGJhc2lzTm9kZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIFVzZSBhbiBhdXRvIHZhbHVlIGlmIHdlIGhhdmUgaXQsIG90aGVyd2lzZSB0aGUgYXV0byB2YWx1ZSBpcyB0aGUgYmFzaXM6XG4gICAgICAgICAgICBjb25zdCBhdXRvU3Vic3RpdHV0ZU5vZGUgPSBhdXRvW2luZGV4XSA9PSBudWxsID8gYmFzaXNOb2RlIDogYXV0b1tpbmRleF07XG4gICAgICAgICAgICAvLyBJZiB0aGUgZXZhbHVhdGVkIG5vZGVzIGRvIG5vdCBoYXZlIGEgbm9kZSBhdCB0aGUgY3VycmVudFxuICAgICAgICAgICAgLy8gaW5kZXgsIGZhbGxiYWNrIHRvIHRoZSBcImF1dG9cIiBzdWJzdGl0dXRlIHJpZ2h0IGF3YXk6XG4gICAgICAgICAgICBsZXQgZXZhbHVhdGVkTm9kZSA9IGV2YWx1YXRlZFtpbmRleF0gPyBldmFsdWF0ZWRbaW5kZXhdIDogYXV0b1N1YnN0aXR1dGVOb2RlO1xuICAgICAgICAgICAgLy8gQW55IGlkZW50IG5vZGUgaXMgY29uc2lkZXJlZCBhIGtleXdvcmQ6XG4gICAgICAgICAgICBpZiAoZXZhbHVhdGVkTm9kZS50eXBlID09PSAnaWRlbnQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5d29yZCA9IGV2YWx1YXRlZE5vZGUudmFsdWU7XG4gICAgICAgICAgICAgICAgLy8gU3Vic3RpdHV0ZSBhbnkga2V5d29yZHMgZm9yIGNvbmNyZXRlIHZhbHVlcyBmaXJzdDpcbiAgICAgICAgICAgICAgICBpZiAoa2V5d29yZCBpbiBrZXl3b3Jkcykge1xuICAgICAgICAgICAgICAgICAgICBldmFsdWF0ZWROb2RlID0ga2V5d29yZHNba2V5d29yZF1baW5kZXhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBOdW1iZXJOb2RlIGF0IHRoaXMgcG9pbnQsIGZhbGwgYmFjayB0byB3aGF0ZXZlclxuICAgICAgICAgICAgLy8gaXMgc3BlY2lmaWVkIGZvciBhdXRvOlxuICAgICAgICAgICAgaWYgKGV2YWx1YXRlZE5vZGUgPT0gbnVsbCB8fCBldmFsdWF0ZWROb2RlLnR5cGUgPT09ICdpZGVudCcpIHtcbiAgICAgICAgICAgICAgICBldmFsdWF0ZWROb2RlID0gYXV0b1N1YnN0aXR1dGVOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRm9yIHBlcmNlbnRhZ2VzLCB3ZSBhbHdheXMgYXBwbHkgdGhlIHBlcmNlbnRhZ2UgdG8gdGhlIGJhc2lzIHZhbHVlOlxuICAgICAgICAgICAgaWYgKGV2YWx1YXRlZE5vZGUudW5pdCA9PT0gJyUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlck5vZGUoZXZhbHVhdGVkTm9kZS5udW1iZXIgLyAxMDAgKiBiYXNpc05vZGUubnVtYmVyLCBiYXNpc05vZGUudW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIG5vcm1hbGl6ZSB3aGF0ZXZlciB3ZSBoYXZlOlxuICAgICAgICAgICAgZXZhbHVhdGVkTm9kZSA9IG5vcm1hbGl6ZVVuaXQoZXZhbHVhdGVkTm9kZSwgYmFzaXNOb2RlKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBub3JtYWxpemVkIHVuaXRzIGRvIG5vdCBtYXRjaCwgcmV0dXJuIHRoZSBiYXNpcyBhcyBhIGZhbGxiYWNrOlxuICAgICAgICAgICAgaWYgKGV2YWx1YXRlZE5vZGUudW5pdCAhPT0gYmFzaXNOb2RlLnVuaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzaXNOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRmluYWxseSwgcmV0dXJuIHRoZSBldmFsdWF0ZWQgbm9kZSB3aXRoIGludHJpbnNpY3MgYXBwbGllZDpcbiAgICAgICAgICAgIHJldHVybiBldmFsdWF0ZWROb2RlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhlIEV2YWx1YXRvciB3aWxsIG9ubHkgZXZhbHVhdGUgaXRzIEFTVCBvbmUgdGltZS4gSWYgZmFsc2UsIHRoZVxuICAgICAqIEV2YWx1YXRvciB3aWxsIHJlLWV2YWx1YXRlIHRoZSBBU1QgZWFjaCB0aW1lIHRoYXQgdGhlIHB1YmxpYyBldmFsdWF0ZVxuICAgICAqIG1ldGhvZCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIGdldCBpc0NvbnN0YW50KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2YWx1YXRlIHRoZSBFdmFsdWF0b3IgYW5kIHJldHVybiB0aGUgcmVzdWx0LiBJZiB0aGUgRXZhbHVhdG9yIGlzIGNvbnN0YW50LFxuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIEFTVCB3aWxsIG9ubHkgYmUgZXZhbHVhdGVkIG9uY2UsIGFuZCB0aGUgcmVzdWx0IG9mXG4gICAgICogZXZhbHVhdGluZyBpdCB0aGUgZmlyc3QgdGltZSB3aWxsIGJlIHJldHVybmVkIG9uIGFsbCBzdWJzZXF1ZW50XG4gICAgICogZXZhbHVhdGlvbnMuXG4gICAgICovXG4gICAgZXZhbHVhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0NvbnN0YW50IHx8IHRoaXNbJGxhc3RWYWx1ZV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpc1skbGFzdFZhbHVlXSA9IHRoaXNbJGV2YWx1YXRlXSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzWyRsYXN0VmFsdWVdO1xuICAgIH1cbn1cbl9hID0gJGxhc3RWYWx1ZTtcbmNvbnN0ICRwZXJjZW50YWdlID0gU3ltYm9sKCdwZXJjZW50YWdlJyk7XG5jb25zdCAkYmFzaXMgPSBTeW1ib2woJ2Jhc2lzJyk7XG4vKipcbiAqIEEgUGVyY2VudGFnZUV2YWx1YXRvciBzY2FsZXMgYSBnaXZlbiBiYXNpcyB2YWx1ZSBieSBhIGdpdmVuIHBlcmNlbnRhZ2UgdmFsdWUuXG4gKiBUaGUgZXZhbHVhdGVkIHJlc3VsdCBpcyBhbHdheXMgY29uc2lkZXJlZCB0byBiZSBjb25zdGFudC5cbiAqL1xuZXhwb3J0IGNsYXNzIFBlcmNlbnRhZ2VFdmFsdWF0b3IgZXh0ZW5kcyBFdmFsdWF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHBlcmNlbnRhZ2UsIGJhc2lzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXNbJHBlcmNlbnRhZ2VdID0gcGVyY2VudGFnZTtcbiAgICAgICAgdGhpc1skYmFzaXNdID0gYmFzaXM7XG4gICAgfVxuICAgIGdldCBpc0NvbnN0YW50KCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgWyRldmFsdWF0ZV0oKSB7XG4gICAgICAgIHJldHVybiBudW1iZXJOb2RlKHRoaXNbJHBlcmNlbnRhZ2VdLm51bWJlciAvIDEwMCAqIHRoaXNbJGJhc2lzXS5udW1iZXIsIHRoaXNbJGJhc2lzXS51bml0KTtcbiAgICB9XG59XG5jb25zdCAkaWRlbnROb2RlID0gU3ltYm9sKCdpZGVudE5vZGUnKTtcbi8qKlxuICogRXZhbHVhdG9yIGZvciBDU1MtbGlrZSBlbnYoKSBmdW5jdGlvbnMuIEN1cnJlbnRseSwgb25seSBvbmUgZW52aXJvbm1lbnRcbiAqIHZhcmlhYmxlIGlzIGFjY2VwdGVkIGFzIGFuIGFyZ3VtZW50IGZvciBzdWNoIGZ1bmN0aW9uczogd2luZG93LXNjcm9sbC15LlxuICpcbiAqIFRoZSBlbnYoKSBFdmFsdWF0b3IgaXMgZXhwbGljaXRseSBkeW5hbWljIGJlY2F1c2UgaXQgYWx3YXlzIHJlZmVycyB0b1xuICogZXh0ZXJuYWwgc3RhdGUgdGhhdCBjaGFuZ2VzIGFzIHRoZSB1c2VyIHNjcm9sbHMsIHNvIGl0IHNob3VsZCBhbHdheXMgYmVcbiAqIHJlLWV2YWx1YXRlZCB0byBlbnN1cmUgd2UgZ2V0IHRoZSBtb3N0IHJlY2VudCB2YWx1ZS5cbiAqXG4gKiBTb21lIGltcG9ydGFudCBub3RlcyBhYm91dCB0aGlzIGZlYXR1cmUgaW5jbHVkZTpcbiAqXG4gKiAgLSBUaGVyZSBpcyBubyBzdWNoIHRoaW5nIGFzIGEgXCJ3aW5kb3ctc2Nyb2xsLXlcIiBDU1MgZW52aXJvbm1lbnQgdmFyaWFibGUgaW5cbiAqICAgIGFueSBzdGFibGUgYnJvd3NlciBhdCB0aGUgdGltZSB0aGF0IHRoaXMgY29tbWVudCBpcyBiZWluZyB3cml0dGVuLlxuICogIC0gVGhlIGFjdHVhbCBDU1MgZW52KCkgZnVuY3Rpb24gYWNjZXB0cyBhIHNlY29uZCBhcmd1bWVudCBhcyBhIGZhbGxiYWNrIGZvclxuICogICAgdGhlIGNhc2UgdGhhdCB0aGUgc3BlY2lmaWVkIGZpcnN0IGFyZ3VtZW50IGlzbid0IHNldDsgb3VyIHN5bnRheCBkb2VzIG5vdFxuICogICAgc3VwcG9ydCB0aGlzIHNlY29uZCBhcmd1bWVudC5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9lbnZcbiAqL1xuZXhwb3J0IGNsYXNzIEVudkV2YWx1YXRvciBleHRlbmRzIEV2YWx1YXRvciB7XG4gICAgY29uc3RydWN0b3IoZW52RnVuY3Rpb24pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpc1tfYl0gPSBudWxsO1xuICAgICAgICBjb25zdCBpZGVudE5vZGUgPSBlbnZGdW5jdGlvbi5hcmd1bWVudHMubGVuZ3RoID8gZW52RnVuY3Rpb24uYXJndW1lbnRzWzBdLnRlcm1zWzBdIDogbnVsbDtcbiAgICAgICAgaWYgKGlkZW50Tm9kZSAhPSBudWxsICYmIGlkZW50Tm9kZS50eXBlID09PSAnaWRlbnQnKSB7XG4gICAgICAgICAgICB0aGlzWyRpZGVudE5vZGVdID0gaWRlbnROb2RlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpc0NvbnN0YW50KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIDtcbiAgICBbKF9iID0gJGlkZW50Tm9kZSwgJGV2YWx1YXRlKV0oKSB7XG4gICAgICAgIGlmICh0aGlzWyRpZGVudE5vZGVdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpc1skaWRlbnROb2RlXS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3dpbmRvdy1zY3JvbGwteSc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRpY2FsU2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRpY2FsU2Nyb2xsTWF4ID0gTWF0aC5tYXgoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsWSA9IHZlcnRpY2FsU2Nyb2xsUG9zaXRpb24gL1xuICAgICAgICAgICAgICAgICAgICAgICAgKHZlcnRpY2FsU2Nyb2xsTWF4IC0gd2luZG93LmlubmVySGVpZ2h0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ251bWJlcicsIG51bWJlcjogc2Nyb2xsWSwgdW5pdDogbnVsbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBaRVJPO1xuICAgIH1cbn1cbmNvbnN0IElTX01VTFRJUExJQ0FUSU9OX1JFID0gL1tcXCpcXC9dLztcbmNvbnN0ICRldmFsdWF0b3IgPSBTeW1ib2woJ2V2YWx1YXRvcicpO1xuLyoqXG4gKiBFdmFsdWF0b3IgZm9yIENTUy1saWtlIGNhbGMoKSBmdW5jdGlvbnMuIE91ciBpbXBsZW1lbnRhdGlvbiBvZiBjYWxjKClcbiAqIGV2YWx1YXRpb24gY3VycmVudGx5IHN1cHBvcnQgbmVzdGVkIGZ1bmN0aW9uIGNhbGxzLCBhbiB1bmxpbWl0ZWQgbnVtYmVyIG9mXG4gKiB0ZXJtcywgYW5kIGFsbCBmb3VyIGFsZ2VicmFpYyBvcGVyYXRvcnMgKCssIC0sICogYW5kIC8pLlxuICpcbiAqIFRoZSBFdmFsdWF0b3IgaXMgbWFya2VkIGFzIGNvbnN0YW50IHVubGVzcyB0aGUgY2FsYyBleHByZXNzaW9uIGNvbnRhaW5zIGFuXG4gKiBpbnRlcm5hbCBlbnYgZXhwcmVzc2lvbiBhdCBhbnkgZGVwdGgsIGluIHdoaWNoIGNhc2UgaXQgd2lsbCBiZSBtYXJrZWQgYXNcbiAqIGR5bmFtaWMuXG4gKlxuICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvY3NzLXZhbHVlcy0zLyNjYWxjLXN5bnRheFxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvY2FsY1xuICovXG5leHBvcnQgY2xhc3MgQ2FsY0V2YWx1YXRvciBleHRlbmRzIEV2YWx1YXRvciB7XG4gICAgY29uc3RydWN0b3IoY2FsY0Z1bmN0aW9uLCBiYXNpcyA9IFpFUk8pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpc1tfY10gPSBudWxsO1xuICAgICAgICBpZiAoY2FsY0Z1bmN0aW9uLmFyZ3VtZW50cy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ZXJtcyA9IGNhbGNGdW5jdGlvbi5hcmd1bWVudHNbMF0udGVybXMuc2xpY2UoKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kT3JkZXJUZXJtcyA9IFtdO1xuICAgICAgICB3aGlsZSAodGVybXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXJtID0gdGVybXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChzZWNvbmRPcmRlclRlcm1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1Rlcm0gPSBzZWNvbmRPcmRlclRlcm1zW3NlY29uZE9yZGVyVGVybXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzVGVybS50eXBlID09PSAnb3BlcmF0b3InICYmXG4gICAgICAgICAgICAgICAgICAgIElTX01VTFRJUExJQ0FUSU9OX1JFLnRlc3QocHJldmlvdXNUZXJtLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRvciA9IHNlY29uZE9yZGVyVGVybXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRWYWx1ZSA9IHNlY29uZE9yZGVyVGVybXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0VmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZE9yZGVyVGVybXMucHVzaChuZXcgT3BlcmF0b3JFdmFsdWF0b3Iob3BlcmF0b3IsIEV2YWx1YXRvci5ldmFsdWF0YWJsZUZvcihsZWZ0VmFsdWUsIGJhc2lzKSwgRXZhbHVhdG9yLmV2YWx1YXRhYmxlRm9yKHRlcm0sIGJhc2lzKSkpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWNvbmRPcmRlclRlcm1zLnB1c2godGVybS50eXBlID09PSAnb3BlcmF0b3InID8gdGVybSA6XG4gICAgICAgICAgICAgICAgRXZhbHVhdG9yLmV2YWx1YXRhYmxlRm9yKHRlcm0sIGJhc2lzKSk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHNlY29uZE9yZGVyVGVybXMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgY29uc3QgW2xlZnQsIG9wZXJhdG9yLCByaWdodF0gPSBzZWNvbmRPcmRlclRlcm1zLnNwbGljZSgwLCAzKTtcbiAgICAgICAgICAgIGlmIChvcGVyYXRvci50eXBlICE9PSAnb3BlcmF0b3InKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Vjb25kT3JkZXJUZXJtcy51bnNoaWZ0KG5ldyBPcGVyYXRvckV2YWx1YXRvcihvcGVyYXRvciwgRXZhbHVhdG9yLmV2YWx1YXRhYmxlRm9yKGxlZnQsIGJhc2lzKSwgRXZhbHVhdG9yLmV2YWx1YXRhYmxlRm9yKHJpZ2h0LCBiYXNpcykpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGVyZSBzaG91bGQgb25seSBiZSBvbmUgY29tYmluZWQgZXZhbHVhdG9yIGF0IHRoaXMgcG9pbnQ6XG4gICAgICAgIGlmIChzZWNvbmRPcmRlclRlcm1zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpc1skZXZhbHVhdG9yXSA9IHNlY29uZE9yZGVyVGVybXNbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGlzQ29uc3RhbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRldmFsdWF0b3JdID09IG51bGwgfHwgRXZhbHVhdG9yLmlzQ29uc3RhbnQodGhpc1skZXZhbHVhdG9yXSk7XG4gICAgfVxuICAgIFsoX2MgPSAkZXZhbHVhdG9yLCAkZXZhbHVhdGUpXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJGV2YWx1YXRvcl0gIT0gbnVsbCA/IEV2YWx1YXRvci5ldmFsdWF0ZSh0aGlzWyRldmFsdWF0b3JdKSA6XG4gICAgICAgICAgICBaRVJPO1xuICAgIH1cbn1cbmNvbnN0ICRvcGVyYXRvciA9IFN5bWJvbCgnb3BlcmF0b3InKTtcbmNvbnN0ICRsZWZ0ID0gU3ltYm9sKCdsZWZ0Jyk7XG5jb25zdCAkcmlnaHQgPSBTeW1ib2woJ3JpZ2h0Jyk7XG4vKipcbiAqIEFuIEV2YWx1YXRvciBmb3IgdGhlIG9wZXJhdG9ycyBmb3VuZCBpbnNpZGUgQ1NTIGNhbGMoKSBmdW5jdGlvbnMuXG4gKiBUaGUgZXZhbHVhdG9yIGFjY2VwdHMgYW4gb3BlcmF0b3IgYW5kIGxlZnQvcmlnaHQgb3BlcmFuZHMuIFRoZSBvcGVyYW5kcyBjYW5cbiAqIGJlIGFueSB2YWxpZCBleHByZXNzaW9uIHRlcm0gdHlwaWNhbGx5IGFsbG93ZWQgaW5zaWRlIGEgQ1NTIGNhbGMgZnVuY3Rpb24uXG4gKlxuICogQXMgZGV0YWlsIG9mIHRoaXMgaW1wbGVtZW50YXRpb24sIHRoZSBvbmx5IHN1cHBvcnRlZCB1bml0IHR5cGVzIGFyZSBhbmdsZXNcbiAqIGV4cHJlc3NlZCBhcyByYWRpYW5zIG9yIGRlZ3JlZXMsIGFuZCBsZW5ndGhzIGV4cHJlc3NlZCBhcyBtZXRlcnMsIGNlbnRpbWV0ZXJzXG4gKiBvciBtaWxsaW1ldGVycy5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9jYWxjXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVyYXRvckV2YWx1YXRvciBleHRlbmRzIEV2YWx1YXRvciB7XG4gICAgY29uc3RydWN0b3Iob3BlcmF0b3IsIGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXNbJG9wZXJhdG9yXSA9IG9wZXJhdG9yO1xuICAgICAgICB0aGlzWyRsZWZ0XSA9IGxlZnQ7XG4gICAgICAgIHRoaXNbJHJpZ2h0XSA9IHJpZ2h0O1xuICAgIH1cbiAgICBnZXQgaXNDb25zdGFudCgpIHtcbiAgICAgICAgcmV0dXJuIEV2YWx1YXRvci5pc0NvbnN0YW50KHRoaXNbJGxlZnRdKSAmJlxuICAgICAgICAgICAgRXZhbHVhdG9yLmlzQ29uc3RhbnQodGhpc1skcmlnaHRdKTtcbiAgICB9XG4gICAgWyRldmFsdWF0ZV0oKSB7XG4gICAgICAgIGNvbnN0IGxlZnROb2RlID0gbm9ybWFsaXplVW5pdChFdmFsdWF0b3IuZXZhbHVhdGUodGhpc1skbGVmdF0pKTtcbiAgICAgICAgY29uc3QgcmlnaHROb2RlID0gbm9ybWFsaXplVW5pdChFdmFsdWF0b3IuZXZhbHVhdGUodGhpc1skcmlnaHRdKSk7XG4gICAgICAgIGNvbnN0IHsgbnVtYmVyOiBsZWZ0VmFsdWUsIHVuaXQ6IGxlZnRVbml0IH0gPSBsZWZ0Tm9kZTtcbiAgICAgICAgY29uc3QgeyBudW1iZXI6IHJpZ2h0VmFsdWUsIHVuaXQ6IHJpZ2h0VW5pdCB9ID0gcmlnaHROb2RlO1xuICAgICAgICAvLyBEaXNhbGxvdyBvcGVyYXRpb25zIGZvciBtaXNtYXRjaGVkIG5vcm1hbGl6ZWQgdW5pdHMgZS5nLiwgbSBhbmQgcmFkOlxuICAgICAgICBpZiAocmlnaHRVbml0ICE9IG51bGwgJiYgbGVmdFVuaXQgIT0gbnVsbCAmJiByaWdodFVuaXQgIT0gbGVmdFVuaXQpIHtcbiAgICAgICAgICAgIHJldHVybiBaRVJPO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5PVEUoY2RhdGEpOiBydWxlcyBmb3IgY2FsYyB0eXBlIGNoZWNraW5nIGFyZSBkZWZpbmVkIGhlcmVcbiAgICAgICAgLy8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzcy12YWx1ZXMtMy8jY2FsYy10eXBlLWNoZWNraW5nXG4gICAgICAgIC8vIFRoaXMgaXMgYSBzaW1wbGlmaWNhdGlvbiBhbmQgbWF5IG5vdCBob2xkIHVwIG9uY2Ugd2UgYmVnaW4gdG8gc3VwcG9ydFxuICAgICAgICAvLyBhZGRpdGlvbmFsIHVuaXQgdHlwZXM6XG4gICAgICAgIGNvbnN0IHVuaXQgPSBsZWZ0VW5pdCB8fCByaWdodFVuaXQ7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgc3dpdGNoICh0aGlzWyRvcGVyYXRvcl0udmFsdWUpIHtcbiAgICAgICAgICAgIGNhc2UgJysnOlxuICAgICAgICAgICAgICAgIHZhbHVlID0gbGVmdFZhbHVlICsgcmlnaHRWYWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJy0nOlxuICAgICAgICAgICAgICAgIHZhbHVlID0gbGVmdFZhbHVlIC0gcmlnaHRWYWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJy8nOlxuICAgICAgICAgICAgICAgIHZhbHVlID0gbGVmdFZhbHVlIC8gcmlnaHRWYWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJyonOlxuICAgICAgICAgICAgICAgIHZhbHVlID0gbGVmdFZhbHVlICogcmlnaHRWYWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpFUk87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ251bWJlcicsIG51bWJlcjogdmFsdWUsIHVuaXQgfTtcbiAgICB9XG59XG5jb25zdCAkZXZhbHVhdGFibGVzID0gU3ltYm9sKCdldmFsdWF0YWJsZXMnKTtcbmNvbnN0ICRpbnRyaW5zaWNzID0gU3ltYm9sKCdpbnRyaW5zaWNzJyk7XG4vKipcbiAqIEEgVmVjdG9yRXZhbHVhdG9yIGV2YWx1YXRlcyBhIHNlcmllcyBvZiBudW1lcmljIHRlcm1zIHRoYXQgdXN1YWxseSByZXByZXNlbnRcbiAqIGEgZGF0YSBzdHJ1Y3R1cmUgc3VjaCBhcyBhIG11bHRpLWRpbWVuc2lvbmFsIHZlY3RvciBvciBhIHNwaGVyaWNhbFxuICpcbiAqIFRoZSBmb3JtIG9mIHRoZSBldmFsdWF0b3IncyByZXN1bHQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgSW50cmluc2ljcyB0aGF0IGFyZVxuICogZ2l2ZW4gdG8gaXQgd2hlbiBpdCBpcyBjb25zdHJ1Y3RlZC4gRm9yIGV4YW1wbGUsIHNwaGVyaWNhbCBpbnRyaW5zaWNzIHdvdWxkXG4gKiBlc3RhYmxpc2ggdHdvIGFuZ2xlIHRlcm1zIGFuZCBhIGxlbmd0aCB0ZXJtLCBzbyB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgdGhlXG4gKiBldmFsdWF0b3IgdGhhdCBpcyBjb25maWd1cmVkIHdpdGggc3BoZXJpY2FsIGludHJpbnNpY3MgaXMgYSB0aHJlZSBlbGVtZW50XG4gKiBhcnJheSB3aGVyZSB0aGUgZmlyc3QgdHdvIGVsZW1lbnRzIHJlcHJlc2VudCBhbmdsZXMgaW4gcmFkaWFucyBhbmQgdGhlIHRoaXJkXG4gKiBlbGVtZW50IHJlcHJlc2VudGluZyBhIGxlbmd0aCBpbiBtZXRlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHlsZUV2YWx1YXRvciBleHRlbmRzIEV2YWx1YXRvciB7XG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbnMsIGludHJpbnNpY3MpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpc1skaW50cmluc2ljc10gPSBpbnRyaW5zaWNzO1xuICAgICAgICBjb25zdCBmaXJzdEV4cHJlc3Npb24gPSBleHByZXNzaW9uc1swXTtcbiAgICAgICAgY29uc3QgdGVybXMgPSBmaXJzdEV4cHJlc3Npb24gIT0gbnVsbCA/IGZpcnN0RXhwcmVzc2lvbi50ZXJtcyA6IFtdO1xuICAgICAgICB0aGlzWyRldmFsdWF0YWJsZXNdID1cbiAgICAgICAgICAgIGludHJpbnNpY3MuYmFzaXMubWFwKChiYXNpc05vZGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVybSA9IHRlcm1zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAodGVybSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdpZGVudCcsIHZhbHVlOiAnYXV0bycgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRlcm0udHlwZSA9PT0gJ2lkZW50Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVybTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIEV2YWx1YXRvci5ldmFsdWF0YWJsZUZvcih0ZXJtLCBiYXNpc05vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBpc0NvbnN0YW50KCkge1xuICAgICAgICBmb3IgKGNvbnN0IGV2YWx1YXRhYmxlIG9mIHRoaXNbJGV2YWx1YXRhYmxlc10pIHtcbiAgICAgICAgICAgIGlmICghRXZhbHVhdG9yLmlzQ29uc3RhbnQoZXZhbHVhdGFibGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBbJGV2YWx1YXRlXSgpIHtcbiAgICAgICAgY29uc3QgZXZhbHVhdGVkID0gdGhpc1skZXZhbHVhdGFibGVzXS5tYXAoZXZhbHVhdGFibGUgPT4gRXZhbHVhdG9yLmV2YWx1YXRlKGV2YWx1YXRhYmxlKSk7XG4gICAgICAgIHJldHVybiBFdmFsdWF0b3IuYXBwbHlJbnRyaW5zaWNzKGV2YWx1YXRlZCwgdGhpc1skaW50cmluc2ljc10pXG4gICAgICAgICAgICAubWFwKG51bWJlck5vZGUgPT4gbnVtYmVyTm9kZS5udW1iZXIpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2YWx1YXRvcnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/styles/evaluators.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/styles/parsers.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ASTWalker: () => (/* binding */ ASTWalker),\n/* harmony export */   ZERO: () => (/* binding */ ZERO),\n/* harmony export */   numberNode: () => (/* binding */ numberNode),\n/* harmony export */   parseExpressions: () => (/* binding */ parseExpressions)\n/* harmony export */ });\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst numberNode = (value, unit) => ({ type: 'number', number: value, unit });\n/**\n * Given a string representing a comma-separated set of CSS-like expressions,\n * parses and returns an array of ASTs that correspond to those expressions.\n *\n * Currently supported syntax includes:\n *\n *  - functions (top-level and nested)\n *  - calc() arithmetic operators\n *  - numbers with units\n *  - hexadecimal-encoded colors in 3, 6 or 8 digit form\n *  - idents\n *\n * All syntax is intended to match the parsing rules and semantics of the actual\n * CSS spec as closely as possible.\n *\n * @see https://www.w3.org/TR/CSS2/\n * @see https://www.w3.org/TR/css-values-3/\n */\nconst parseExpressions = (() => {\n    const cache = {};\n    const MAX_PARSE_ITERATIONS = 1000; // Arbitrarily large\n    return (inputString) => {\n        const cacheKey = inputString;\n        if (cacheKey in cache) {\n            return cache[cacheKey];\n        }\n        const expressions = [];\n        let parseIterations = 0;\n        while (inputString) {\n            if (++parseIterations > MAX_PARSE_ITERATIONS) {\n                // Avoid a potentially infinite loop due to typos:\n                inputString = '';\n                break;\n            }\n            const expressionParseResult = parseExpression(inputString);\n            const expression = expressionParseResult.nodes[0];\n            if (expression == null || expression.terms.length === 0) {\n                break;\n            }\n            expressions.push(expression);\n            inputString = expressionParseResult.remainingInput;\n        }\n        return cache[cacheKey] = expressions;\n    };\n})();\n/**\n * Parse a single expression. For the purposes of our supported syntax, an\n * expression is the set of semantically meaningful terms that appear before the\n * next comma, or between the parens of a function invocation.\n */\nconst parseExpression = (() => {\n    const IS_IDENT_RE = /^(\\-\\-|[a-z\\u0240-\\uffff])/i;\n    const IS_OPERATOR_RE = /^([\\*\\+\\/]|[\\-]\\s)/i;\n    const IS_EXPRESSION_END_RE = /^[\\),]/;\n    const FUNCTION_ARGUMENTS_FIRST_TOKEN = '(';\n    const HEX_FIRST_TOKEN = '#';\n    return (inputString) => {\n        const terms = [];\n        while (inputString.length) {\n            inputString = inputString.trim();\n            if (IS_EXPRESSION_END_RE.test(inputString)) {\n                break;\n            }\n            else if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n                const { nodes, remainingInput } = parseFunctionArguments(inputString);\n                inputString = remainingInput;\n                terms.push({\n                    type: 'function',\n                    name: { type: 'ident', value: 'calc' },\n                    arguments: nodes\n                });\n            }\n            else if (IS_IDENT_RE.test(inputString)) {\n                const identParseResult = parseIdent(inputString);\n                const identNode = identParseResult.nodes[0];\n                inputString = identParseResult.remainingInput;\n                if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n                    const { nodes, remainingInput } = parseFunctionArguments(inputString);\n                    terms.push({ type: 'function', name: identNode, arguments: nodes });\n                    inputString = remainingInput;\n                }\n                else {\n                    terms.push(identNode);\n                }\n            }\n            else if (IS_OPERATOR_RE.test(inputString)) {\n                // Operators are always a single character, so just pluck them out:\n                terms.push({ type: 'operator', value: inputString[0] });\n                inputString = inputString.slice(1);\n            }\n            else {\n                const { nodes, remainingInput } = inputString[0] === HEX_FIRST_TOKEN ?\n                    parseHex(inputString) :\n                    parseNumber(inputString);\n                // The remaining string may not have had any meaningful content. Exit\n                // early if this is the case:\n                if (nodes.length === 0) {\n                    break;\n                }\n                terms.push(nodes[0]);\n                inputString = remainingInput;\n            }\n        }\n        return { nodes: [{ type: 'expression', terms }], remainingInput: inputString };\n    };\n})();\n/**\n * An ident is something like a function name or the keyword \"auto\".\n */\nconst parseIdent = (() => {\n    const NOT_IDENT_RE = /[^a-z0-9_\\-\\u0240-\\uffff]/i;\n    return (inputString) => {\n        const match = inputString.match(NOT_IDENT_RE);\n        const ident = match == null ? inputString : inputString.substr(0, match.index);\n        const remainingInput = match == null ? '' : inputString.substr(match.index);\n        return { nodes: [{ type: 'ident', value: ident }], remainingInput };\n    };\n})();\n/**\n * Parses a number. A number value can be expressed with an integer or\n * non-integer syntax, and usually includes a unit (but does not strictly\n * require one for our purposes).\n */\nconst parseNumber = (() => {\n    // @see https://www.w3.org/TR/css-syntax/#number-token-diagram\n    const VALUE_RE = /[\\+\\-]?(\\d+[\\.]\\d+|\\d+|[\\.]\\d+)([eE][\\+\\-]?\\d+)?/;\n    const UNIT_RE = /^[a-z%]+/i;\n    const ALLOWED_UNITS = /^(m|mm|cm|rad|deg|[%])$/;\n    return (inputString) => {\n        const valueMatch = inputString.match(VALUE_RE);\n        const value = valueMatch == null ? '0' : valueMatch[0];\n        inputString = value == null ? inputString : inputString.slice(value.length);\n        const unitMatch = inputString.match(UNIT_RE);\n        let unit = unitMatch != null && unitMatch[0] !== '' ? unitMatch[0] : null;\n        const remainingInput = unitMatch == null ? inputString : inputString.slice(unit.length);\n        if (unit != null && !ALLOWED_UNITS.test(unit)) {\n            unit = null;\n        }\n        return {\n            nodes: [{\n                    type: 'number',\n                    number: parseFloat(value) || 0,\n                    unit: unit\n                }],\n            remainingInput\n        };\n    };\n})();\n/**\n * Parses a hexadecimal-encoded color in 3, 6 or 8 digit form.\n */\nconst parseHex = (() => {\n    // TODO(cdata): right now we don't actually enforce the number of digits\n    const HEX_RE = /^[a-f0-9]*/i;\n    return (inputString) => {\n        inputString = inputString.slice(1).trim();\n        const hexMatch = inputString.match(HEX_RE);\n        const nodes = hexMatch == null ? [] : [{ type: 'hex', value: hexMatch[0] }];\n        return {\n            nodes,\n            remainingInput: hexMatch == null ? inputString :\n                inputString.slice(hexMatch[0].length)\n        };\n    };\n})();\n/**\n * Parses arguments passed to a function invocation (e.g., the expressions\n * within a matched set of parens).\n */\nconst parseFunctionArguments = (inputString) => {\n    const expressionNodes = [];\n    // Consume the opening paren\n    inputString = inputString.slice(1).trim();\n    while (inputString.length) {\n        const expressionParseResult = parseExpression(inputString);\n        expressionNodes.push(expressionParseResult.nodes[0]);\n        inputString = expressionParseResult.remainingInput.trim();\n        if (inputString[0] === ',') {\n            inputString = inputString.slice(1).trim();\n        }\n        else if (inputString[0] === ')') {\n            // Consume the closing paren and stop parsing\n            inputString = inputString.slice(1);\n            break;\n        }\n    }\n    return { nodes: expressionNodes, remainingInput: inputString };\n};\nconst $visitedTypes = Symbol('visitedTypes');\n/**\n * An ASTWalker walks an array of ASTs such as the type produced by\n * parseExpressions and invokes a callback for a configured set of nodes that\n * the user wishes to \"visit\" during the walk.\n */\nclass ASTWalker {\n    constructor(visitedTypes) {\n        this[$visitedTypes] = visitedTypes;\n    }\n    /**\n     * Walk the given set of ASTs, and invoke the provided callback for nodes that\n     * match the filtered set that the ASTWalker was constructed with.\n     */\n    walk(ast, callback) {\n        const remaining = ast.slice();\n        while (remaining.length) {\n            const next = remaining.shift();\n            if (this[$visitedTypes].indexOf(next.type) > -1) {\n                callback(next);\n            }\n            switch (next.type) {\n                case 'expression':\n                    remaining.unshift(...next.terms);\n                    break;\n                case 'function':\n                    remaining.unshift(next.name, ...next.arguments);\n                    break;\n            }\n        }\n    }\n}\nconst ZERO = Object.freeze({ type: 'number', number: 0, unit: null });\n//# sourceMappingURL=parsers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3N0eWxlcy9wYXJzZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sdUNBQXVDLHFDQUFxQztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0JBQXdCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHdCQUF3QjtBQUNwRCxpQ0FBaUMscURBQXFEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIseUNBQXlDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3QkFBd0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixVQUFVLDJCQUEyQjtBQUN0RDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsVUFBVSw2QkFBNkI7QUFDeEQ7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxpQ0FBaUM7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyw2QkFBNkIsdUNBQXVDO0FBQzNFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9zdHlsZXMvcGFyc2Vycy5qcz9mMGRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmV4cG9ydCBjb25zdCBudW1iZXJOb2RlID0gKHZhbHVlLCB1bml0KSA9PiAoeyB0eXBlOiAnbnVtYmVyJywgbnVtYmVyOiB2YWx1ZSwgdW5pdCB9KTtcbi8qKlxuICogR2l2ZW4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgY29tbWEtc2VwYXJhdGVkIHNldCBvZiBDU1MtbGlrZSBleHByZXNzaW9ucyxcbiAqIHBhcnNlcyBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBBU1RzIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSBleHByZXNzaW9ucy5cbiAqXG4gKiBDdXJyZW50bHkgc3VwcG9ydGVkIHN5bnRheCBpbmNsdWRlczpcbiAqXG4gKiAgLSBmdW5jdGlvbnMgKHRvcC1sZXZlbCBhbmQgbmVzdGVkKVxuICogIC0gY2FsYygpIGFyaXRobWV0aWMgb3BlcmF0b3JzXG4gKiAgLSBudW1iZXJzIHdpdGggdW5pdHNcbiAqICAtIGhleGFkZWNpbWFsLWVuY29kZWQgY29sb3JzIGluIDMsIDYgb3IgOCBkaWdpdCBmb3JtXG4gKiAgLSBpZGVudHNcbiAqXG4gKiBBbGwgc3ludGF4IGlzIGludGVuZGVkIHRvIG1hdGNoIHRoZSBwYXJzaW5nIHJ1bGVzIGFuZCBzZW1hbnRpY3Mgb2YgdGhlIGFjdHVhbFxuICogQ1NTIHNwZWMgYXMgY2xvc2VseSBhcyBwb3NzaWJsZS5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9DU1MyL1xuICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvY3NzLXZhbHVlcy0zL1xuICovXG5leHBvcnQgY29uc3QgcGFyc2VFeHByZXNzaW9ucyA9ICgoKSA9PiB7XG4gICAgY29uc3QgY2FjaGUgPSB7fTtcbiAgICBjb25zdCBNQVhfUEFSU0VfSVRFUkFUSU9OUyA9IDEwMDA7IC8vIEFyYml0cmFyaWx5IGxhcmdlXG4gICAgcmV0dXJuIChpbnB1dFN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBjYWNoZUtleSA9IGlucHV0U3RyaW5nO1xuICAgICAgICBpZiAoY2FjaGVLZXkgaW4gY2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZVtjYWNoZUtleV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbnMgPSBbXTtcbiAgICAgICAgbGV0IHBhcnNlSXRlcmF0aW9ucyA9IDA7XG4gICAgICAgIHdoaWxlIChpbnB1dFN0cmluZykge1xuICAgICAgICAgICAgaWYgKCsrcGFyc2VJdGVyYXRpb25zID4gTUFYX1BBUlNFX0lURVJBVElPTlMpIHtcbiAgICAgICAgICAgICAgICAvLyBBdm9pZCBhIHBvdGVudGlhbGx5IGluZmluaXRlIGxvb3AgZHVlIHRvIHR5cG9zOlxuICAgICAgICAgICAgICAgIGlucHV0U3RyaW5nID0gJyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleHByZXNzaW9uUGFyc2VSZXN1bHQgPSBwYXJzZUV4cHJlc3Npb24oaW5wdXRTdHJpbmcpO1xuICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb25QYXJzZVJlc3VsdC5ub2Rlc1swXTtcbiAgICAgICAgICAgIGlmIChleHByZXNzaW9uID09IG51bGwgfHwgZXhwcmVzc2lvbi50ZXJtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV4cHJlc3Npb25zLnB1c2goZXhwcmVzc2lvbik7XG4gICAgICAgICAgICBpbnB1dFN0cmluZyA9IGV4cHJlc3Npb25QYXJzZVJlc3VsdC5yZW1haW5pbmdJbnB1dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FjaGVbY2FjaGVLZXldID0gZXhwcmVzc2lvbnM7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIFBhcnNlIGEgc2luZ2xlIGV4cHJlc3Npb24uIEZvciB0aGUgcHVycG9zZXMgb2Ygb3VyIHN1cHBvcnRlZCBzeW50YXgsIGFuXG4gKiBleHByZXNzaW9uIGlzIHRoZSBzZXQgb2Ygc2VtYW50aWNhbGx5IG1lYW5pbmdmdWwgdGVybXMgdGhhdCBhcHBlYXIgYmVmb3JlIHRoZVxuICogbmV4dCBjb21tYSwgb3IgYmV0d2VlbiB0aGUgcGFyZW5zIG9mIGEgZnVuY3Rpb24gaW52b2NhdGlvbi5cbiAqL1xuY29uc3QgcGFyc2VFeHByZXNzaW9uID0gKCgpID0+IHtcbiAgICBjb25zdCBJU19JREVOVF9SRSA9IC9eKFxcLVxcLXxbYS16XFx1MDI0MC1cXHVmZmZmXSkvaTtcbiAgICBjb25zdCBJU19PUEVSQVRPUl9SRSA9IC9eKFtcXCpcXCtcXC9dfFtcXC1dXFxzKS9pO1xuICAgIGNvbnN0IElTX0VYUFJFU1NJT05fRU5EX1JFID0gL15bXFwpLF0vO1xuICAgIGNvbnN0IEZVTkNUSU9OX0FSR1VNRU5UU19GSVJTVF9UT0tFTiA9ICcoJztcbiAgICBjb25zdCBIRVhfRklSU1RfVE9LRU4gPSAnIyc7XG4gICAgcmV0dXJuIChpbnB1dFN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCB0ZXJtcyA9IFtdO1xuICAgICAgICB3aGlsZSAoaW5wdXRTdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBpbnB1dFN0cmluZyA9IGlucHV0U3RyaW5nLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChJU19FWFBSRVNTSU9OX0VORF9SRS50ZXN0KGlucHV0U3RyaW5nKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW5wdXRTdHJpbmdbMF0gPT09IEZVTkNUSU9OX0FSR1VNRU5UU19GSVJTVF9UT0tFTikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgbm9kZXMsIHJlbWFpbmluZ0lucHV0IH0gPSBwYXJzZUZ1bmN0aW9uQXJndW1lbnRzKGlucHV0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpbnB1dFN0cmluZyA9IHJlbWFpbmluZ0lucHV0O1xuICAgICAgICAgICAgICAgIHRlcm1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB7IHR5cGU6ICdpZGVudCcsIHZhbHVlOiAnY2FsYycgfSxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBub2Rlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoSVNfSURFTlRfUkUudGVzdChpbnB1dFN0cmluZykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZGVudFBhcnNlUmVzdWx0ID0gcGFyc2VJZGVudChpbnB1dFN0cmluZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaWRlbnROb2RlID0gaWRlbnRQYXJzZVJlc3VsdC5ub2Rlc1swXTtcbiAgICAgICAgICAgICAgICBpbnB1dFN0cmluZyA9IGlkZW50UGFyc2VSZXN1bHQucmVtYWluaW5nSW5wdXQ7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0U3RyaW5nWzBdID09PSBGVU5DVElPTl9BUkdVTUVOVFNfRklSU1RfVE9LRU4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBub2RlcywgcmVtYWluaW5nSW5wdXQgfSA9IHBhcnNlRnVuY3Rpb25Bcmd1bWVudHMoaW5wdXRTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICB0ZXJtcy5wdXNoKHsgdHlwZTogJ2Z1bmN0aW9uJywgbmFtZTogaWRlbnROb2RlLCBhcmd1bWVudHM6IG5vZGVzIH0pO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dFN0cmluZyA9IHJlbWFpbmluZ0lucHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGVybXMucHVzaChpZGVudE5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKElTX09QRVJBVE9SX1JFLnRlc3QoaW5wdXRTdHJpbmcpKSB7XG4gICAgICAgICAgICAgICAgLy8gT3BlcmF0b3JzIGFyZSBhbHdheXMgYSBzaW5nbGUgY2hhcmFjdGVyLCBzbyBqdXN0IHBsdWNrIHRoZW0gb3V0OlxuICAgICAgICAgICAgICAgIHRlcm1zLnB1c2goeyB0eXBlOiAnb3BlcmF0b3InLCB2YWx1ZTogaW5wdXRTdHJpbmdbMF0gfSk7XG4gICAgICAgICAgICAgICAgaW5wdXRTdHJpbmcgPSBpbnB1dFN0cmluZy5zbGljZSgxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgbm9kZXMsIHJlbWFpbmluZ0lucHV0IH0gPSBpbnB1dFN0cmluZ1swXSA9PT0gSEVYX0ZJUlNUX1RPS0VOID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VIZXgoaW5wdXRTdHJpbmcpIDpcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VOdW1iZXIoaW5wdXRTdHJpbmcpO1xuICAgICAgICAgICAgICAgIC8vIFRoZSByZW1haW5pbmcgc3RyaW5nIG1heSBub3QgaGF2ZSBoYWQgYW55IG1lYW5pbmdmdWwgY29udGVudC4gRXhpdFxuICAgICAgICAgICAgICAgIC8vIGVhcmx5IGlmIHRoaXMgaXMgdGhlIGNhc2U6XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGVybXMucHVzaChub2Rlc1swXSk7XG4gICAgICAgICAgICAgICAgaW5wdXRTdHJpbmcgPSByZW1haW5pbmdJbnB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBub2RlczogW3sgdHlwZTogJ2V4cHJlc3Npb24nLCB0ZXJtcyB9XSwgcmVtYWluaW5nSW5wdXQ6IGlucHV0U3RyaW5nIH07XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEFuIGlkZW50IGlzIHNvbWV0aGluZyBsaWtlIGEgZnVuY3Rpb24gbmFtZSBvciB0aGUga2V5d29yZCBcImF1dG9cIi5cbiAqL1xuY29uc3QgcGFyc2VJZGVudCA9ICgoKSA9PiB7XG4gICAgY29uc3QgTk9UX0lERU5UX1JFID0gL1teYS16MC05X1xcLVxcdTAyNDAtXFx1ZmZmZl0vaTtcbiAgICByZXR1cm4gKGlucHV0U3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gaW5wdXRTdHJpbmcubWF0Y2goTk9UX0lERU5UX1JFKTtcbiAgICAgICAgY29uc3QgaWRlbnQgPSBtYXRjaCA9PSBudWxsID8gaW5wdXRTdHJpbmcgOiBpbnB1dFN0cmluZy5zdWJzdHIoMCwgbWF0Y2guaW5kZXgpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdJbnB1dCA9IG1hdGNoID09IG51bGwgPyAnJyA6IGlucHV0U3RyaW5nLnN1YnN0cihtYXRjaC5pbmRleCk7XG4gICAgICAgIHJldHVybiB7IG5vZGVzOiBbeyB0eXBlOiAnaWRlbnQnLCB2YWx1ZTogaWRlbnQgfV0sIHJlbWFpbmluZ0lucHV0IH07XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIFBhcnNlcyBhIG51bWJlci4gQSBudW1iZXIgdmFsdWUgY2FuIGJlIGV4cHJlc3NlZCB3aXRoIGFuIGludGVnZXIgb3JcbiAqIG5vbi1pbnRlZ2VyIHN5bnRheCwgYW5kIHVzdWFsbHkgaW5jbHVkZXMgYSB1bml0IChidXQgZG9lcyBub3Qgc3RyaWN0bHlcbiAqIHJlcXVpcmUgb25lIGZvciBvdXIgcHVycG9zZXMpLlxuICovXG5jb25zdCBwYXJzZU51bWJlciA9ICgoKSA9PiB7XG4gICAgLy8gQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvY3NzLXN5bnRheC8jbnVtYmVyLXRva2VuLWRpYWdyYW1cbiAgICBjb25zdCBWQUxVRV9SRSA9IC9bXFwrXFwtXT8oXFxkK1tcXC5dXFxkK3xcXGQrfFtcXC5dXFxkKykoW2VFXVtcXCtcXC1dP1xcZCspPy87XG4gICAgY29uc3QgVU5JVF9SRSA9IC9eW2EteiVdKy9pO1xuICAgIGNvbnN0IEFMTE9XRURfVU5JVFMgPSAvXihtfG1tfGNtfHJhZHxkZWd8WyVdKSQvO1xuICAgIHJldHVybiAoaW5wdXRTdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWVNYXRjaCA9IGlucHV0U3RyaW5nLm1hdGNoKFZBTFVFX1JFKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB2YWx1ZU1hdGNoID09IG51bGwgPyAnMCcgOiB2YWx1ZU1hdGNoWzBdO1xuICAgICAgICBpbnB1dFN0cmluZyA9IHZhbHVlID09IG51bGwgPyBpbnB1dFN0cmluZyA6IGlucHV0U3RyaW5nLnNsaWNlKHZhbHVlLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IHVuaXRNYXRjaCA9IGlucHV0U3RyaW5nLm1hdGNoKFVOSVRfUkUpO1xuICAgICAgICBsZXQgdW5pdCA9IHVuaXRNYXRjaCAhPSBudWxsICYmIHVuaXRNYXRjaFswXSAhPT0gJycgPyB1bml0TWF0Y2hbMF0gOiBudWxsO1xuICAgICAgICBjb25zdCByZW1haW5pbmdJbnB1dCA9IHVuaXRNYXRjaCA9PSBudWxsID8gaW5wdXRTdHJpbmcgOiBpbnB1dFN0cmluZy5zbGljZSh1bml0Lmxlbmd0aCk7XG4gICAgICAgIGlmICh1bml0ICE9IG51bGwgJiYgIUFMTE9XRURfVU5JVFMudGVzdCh1bml0KSkge1xuICAgICAgICAgICAgdW5pdCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5vZGVzOiBbe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICB1bml0OiB1bml0XG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICByZW1haW5pbmdJbnB1dFxuICAgICAgICB9O1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBQYXJzZXMgYSBoZXhhZGVjaW1hbC1lbmNvZGVkIGNvbG9yIGluIDMsIDYgb3IgOCBkaWdpdCBmb3JtLlxuICovXG5jb25zdCBwYXJzZUhleCA9ICgoKSA9PiB7XG4gICAgLy8gVE9ETyhjZGF0YSk6IHJpZ2h0IG5vdyB3ZSBkb24ndCBhY3R1YWxseSBlbmZvcmNlIHRoZSBudW1iZXIgb2YgZGlnaXRzXG4gICAgY29uc3QgSEVYX1JFID0gL15bYS1mMC05XSovaTtcbiAgICByZXR1cm4gKGlucHV0U3RyaW5nKSA9PiB7XG4gICAgICAgIGlucHV0U3RyaW5nID0gaW5wdXRTdHJpbmcuc2xpY2UoMSkudHJpbSgpO1xuICAgICAgICBjb25zdCBoZXhNYXRjaCA9IGlucHV0U3RyaW5nLm1hdGNoKEhFWF9SRSk7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gaGV4TWF0Y2ggPT0gbnVsbCA/IFtdIDogW3sgdHlwZTogJ2hleCcsIHZhbHVlOiBoZXhNYXRjaFswXSB9XTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5vZGVzLFxuICAgICAgICAgICAgcmVtYWluaW5nSW5wdXQ6IGhleE1hdGNoID09IG51bGwgPyBpbnB1dFN0cmluZyA6XG4gICAgICAgICAgICAgICAgaW5wdXRTdHJpbmcuc2xpY2UoaGV4TWF0Y2hbMF0ubGVuZ3RoKVxuICAgICAgICB9O1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBQYXJzZXMgYXJndW1lbnRzIHBhc3NlZCB0byBhIGZ1bmN0aW9uIGludm9jYXRpb24gKGUuZy4sIHRoZSBleHByZXNzaW9uc1xuICogd2l0aGluIGEgbWF0Y2hlZCBzZXQgb2YgcGFyZW5zKS5cbiAqL1xuY29uc3QgcGFyc2VGdW5jdGlvbkFyZ3VtZW50cyA9IChpbnB1dFN0cmluZykgPT4ge1xuICAgIGNvbnN0IGV4cHJlc3Npb25Ob2RlcyA9IFtdO1xuICAgIC8vIENvbnN1bWUgdGhlIG9wZW5pbmcgcGFyZW5cbiAgICBpbnB1dFN0cmluZyA9IGlucHV0U3RyaW5nLnNsaWNlKDEpLnRyaW0oKTtcbiAgICB3aGlsZSAoaW5wdXRTdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGV4cHJlc3Npb25QYXJzZVJlc3VsdCA9IHBhcnNlRXhwcmVzc2lvbihpbnB1dFN0cmluZyk7XG4gICAgICAgIGV4cHJlc3Npb25Ob2Rlcy5wdXNoKGV4cHJlc3Npb25QYXJzZVJlc3VsdC5ub2Rlc1swXSk7XG4gICAgICAgIGlucHV0U3RyaW5nID0gZXhwcmVzc2lvblBhcnNlUmVzdWx0LnJlbWFpbmluZ0lucHV0LnRyaW0oKTtcbiAgICAgICAgaWYgKGlucHV0U3RyaW5nWzBdID09PSAnLCcpIHtcbiAgICAgICAgICAgIGlucHV0U3RyaW5nID0gaW5wdXRTdHJpbmcuc2xpY2UoMSkudHJpbSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlucHV0U3RyaW5nWzBdID09PSAnKScpIHtcbiAgICAgICAgICAgIC8vIENvbnN1bWUgdGhlIGNsb3NpbmcgcGFyZW4gYW5kIHN0b3AgcGFyc2luZ1xuICAgICAgICAgICAgaW5wdXRTdHJpbmcgPSBpbnB1dFN0cmluZy5zbGljZSgxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IG5vZGVzOiBleHByZXNzaW9uTm9kZXMsIHJlbWFpbmluZ0lucHV0OiBpbnB1dFN0cmluZyB9O1xufTtcbmNvbnN0ICR2aXNpdGVkVHlwZXMgPSBTeW1ib2woJ3Zpc2l0ZWRUeXBlcycpO1xuLyoqXG4gKiBBbiBBU1RXYWxrZXIgd2Fsa3MgYW4gYXJyYXkgb2YgQVNUcyBzdWNoIGFzIHRoZSB0eXBlIHByb2R1Y2VkIGJ5XG4gKiBwYXJzZUV4cHJlc3Npb25zIGFuZCBpbnZva2VzIGEgY2FsbGJhY2sgZm9yIGEgY29uZmlndXJlZCBzZXQgb2Ygbm9kZXMgdGhhdFxuICogdGhlIHVzZXIgd2lzaGVzIHRvIFwidmlzaXRcIiBkdXJpbmcgdGhlIHdhbGsuXG4gKi9cbmV4cG9ydCBjbGFzcyBBU1RXYWxrZXIge1xuICAgIGNvbnN0cnVjdG9yKHZpc2l0ZWRUeXBlcykge1xuICAgICAgICB0aGlzWyR2aXNpdGVkVHlwZXNdID0gdmlzaXRlZFR5cGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXYWxrIHRoZSBnaXZlbiBzZXQgb2YgQVNUcywgYW5kIGludm9rZSB0aGUgcHJvdmlkZWQgY2FsbGJhY2sgZm9yIG5vZGVzIHRoYXRcbiAgICAgKiBtYXRjaCB0aGUgZmlsdGVyZWQgc2V0IHRoYXQgdGhlIEFTVFdhbGtlciB3YXMgY29uc3RydWN0ZWQgd2l0aC5cbiAgICAgKi9cbiAgICB3YWxrKGFzdCwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nID0gYXN0LnNsaWNlKCk7XG4gICAgICAgIHdoaWxlIChyZW1haW5pbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gcmVtYWluaW5nLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAodGhpc1skdmlzaXRlZFR5cGVzXS5pbmRleE9mKG5leHQudHlwZSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5leHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChuZXh0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdleHByZXNzaW9uJzpcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nLnVuc2hpZnQoLi4ubmV4dC50ZXJtcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nLnVuc2hpZnQobmV4dC5uYW1lLCAuLi5uZXh0LmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IFpFUk8gPSBPYmplY3QuZnJlZXplKHsgdHlwZTogJ251bWJlcicsIG51bWJlcjogMCwgdW5pdDogbnVsbCB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/styles/style-effector.js":
/*!************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/styles/style-effector.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StyleEffector: () => (/* binding */ StyleEffector)\n/* harmony export */ });\n/* harmony import */ var _parsers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parsers */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b, _c, _d;\n\nconst $instances = Symbol('instances');\nconst $activateListener = Symbol('activateListener');\nconst $deactivateListener = Symbol('deactivateListener');\nconst $notifyInstances = Symbol('notifyInstances');\nconst $notify = Symbol('notify');\nconst $scrollCallback = Symbol('callback');\n/**\n * This internal helper is intended to work as a reference-counting manager of\n * scroll event listeners. Only one scroll listener is ever registered for all\n * instances of the class, and when the last ScrollObserver \"disconnects\", that\n * event listener is removed. This spares us from thrashing\n * the {add,remove}EventListener API (the binding cost of these methods has been\n * known to show up in performance analyses) as well as potential memory leaks.\n */\nclass ScrollObserver {\n    constructor(callback) {\n        this[$scrollCallback] = callback;\n    }\n    static [$notifyInstances]() {\n        for (const instance of ScrollObserver[$instances]) {\n            instance[$notify]();\n        }\n    }\n    static [(_a = $instances, $activateListener)]() {\n        window.addEventListener('scroll', this[$notifyInstances], { passive: true });\n    }\n    static [$deactivateListener]() {\n        window.removeEventListener('scroll', this[$notifyInstances]);\n    }\n    /**\n     * Listen for scroll events. The configured callback (passed to the\n     * constructor) will be invoked for subsequent global scroll events.\n     */\n    observe() {\n        if (ScrollObserver[$instances].size === 0) {\n            ScrollObserver[$activateListener]();\n        }\n        ScrollObserver[$instances].add(this);\n    }\n    /**\n     * Stop listening for scroll events.\n     */\n    disconnect() {\n        ScrollObserver[$instances].delete(this);\n        if (ScrollObserver[$instances].size === 0) {\n            ScrollObserver[$deactivateListener]();\n        }\n    }\n    [$notify]() {\n        this[$scrollCallback]();\n    }\n    ;\n}\nScrollObserver[_a] = new Set();\nconst $computeStyleCallback = Symbol('computeStyleCallback');\nconst $astWalker = Symbol('astWalker');\nconst $dependencies = Symbol('dependencies');\nconst $onScroll = Symbol('onScroll');\n/**\n * The StyleEffector is configured with a callback that will be invoked at the\n * optimal time that some array of CSS expression ASTs ought to be evaluated.\n *\n * For example, our CSS-like expression syntax supports usage of the env()\n * function to incorporate the current top-level scroll position into a CSS\n * expression: env(window-scroll-y).\n *\n * This \"environment variable\" will change dynamically as the user scrolls the\n * page. If an AST contains such a usage of env(), we would have to evaluate the\n * AST on every frame in order to be sure that the computed style stays up to\n * date.\n *\n * The StyleEffector spares us from evaluating the expressions on every frame by\n * correlating specific parts of an AST with observers of the external effects\n * that they refer to (if any). So, if the AST contains env(window-scroll-y),\n * the StyleEffector manages the lifetime of a global scroll event listener and\n * notifies the user at the optimal time to evaluate the computed style.\n */\nclass StyleEffector {\n    constructor(callback) {\n        this[_b] = {};\n        this[_c] = new _parsers__WEBPACK_IMPORTED_MODULE_0__.ASTWalker(['function']);\n        this[_d] = () => {\n            this[$computeStyleCallback]({ relatedState: 'window-scroll' });\n        };\n        this[$computeStyleCallback] = callback;\n    }\n    /**\n     * Sets the expressions that govern when the StyleEffector callback will be\n     * invoked.\n     */\n    observeEffectsFor(ast) {\n        const newDependencies = {};\n        const oldDependencies = this[$dependencies];\n        this[$astWalker].walk(ast, functionNode => {\n            const { name } = functionNode;\n            const firstArgument = functionNode.arguments[0];\n            const firstTerm = firstArgument.terms[0];\n            if (name.value !== 'env' || firstTerm == null ||\n                firstTerm.type !== 'ident') {\n                return;\n            }\n            switch (firstTerm.value) {\n                case 'window-scroll-y':\n                    if (newDependencies['window-scroll'] == null) {\n                        const observer = 'window-scroll' in oldDependencies ?\n                            oldDependencies['window-scroll'] :\n                            new ScrollObserver(this[$onScroll]);\n                        observer.observe();\n                        delete oldDependencies['window-scroll'];\n                        newDependencies['window-scroll'] = observer;\n                    }\n                    break;\n            }\n        });\n        for (const environmentState in oldDependencies) {\n            const observer = oldDependencies[environmentState];\n            observer.disconnect();\n        }\n        this[$dependencies] = newDependencies;\n    }\n    /**\n     * Disposes of the StyleEffector by disconnecting all observers of external\n     * effects.\n     */\n    dispose() {\n        for (const environmentState in this[$dependencies]) {\n            const observer = this[$dependencies][environmentState];\n            observer.disconnect();\n        }\n    }\n}\n_b = $dependencies, _c = $astWalker, _d = $onScroll;\n//# sourceMappingURL=style-effector.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3N0eWxlcy9zdHlsZS1lZmZlY3Rvci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxXQUFXO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxlQUFlO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFTO0FBQ2hDO0FBQ0EsMENBQTBDLCtCQUErQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi9zdHlsZXMvc3R5bGUtZWZmZWN0b3IuanM/ZTdlMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG52YXIgX2EsIF9iLCBfYywgX2Q7XG5pbXBvcnQgeyBBU1RXYWxrZXIgfSBmcm9tICcuL3BhcnNlcnMnO1xuY29uc3QgJGluc3RhbmNlcyA9IFN5bWJvbCgnaW5zdGFuY2VzJyk7XG5jb25zdCAkYWN0aXZhdGVMaXN0ZW5lciA9IFN5bWJvbCgnYWN0aXZhdGVMaXN0ZW5lcicpO1xuY29uc3QgJGRlYWN0aXZhdGVMaXN0ZW5lciA9IFN5bWJvbCgnZGVhY3RpdmF0ZUxpc3RlbmVyJyk7XG5jb25zdCAkbm90aWZ5SW5zdGFuY2VzID0gU3ltYm9sKCdub3RpZnlJbnN0YW5jZXMnKTtcbmNvbnN0ICRub3RpZnkgPSBTeW1ib2woJ25vdGlmeScpO1xuY29uc3QgJHNjcm9sbENhbGxiYWNrID0gU3ltYm9sKCdjYWxsYmFjaycpO1xuLyoqXG4gKiBUaGlzIGludGVybmFsIGhlbHBlciBpcyBpbnRlbmRlZCB0byB3b3JrIGFzIGEgcmVmZXJlbmNlLWNvdW50aW5nIG1hbmFnZXIgb2ZcbiAqIHNjcm9sbCBldmVudCBsaXN0ZW5lcnMuIE9ubHkgb25lIHNjcm9sbCBsaXN0ZW5lciBpcyBldmVyIHJlZ2lzdGVyZWQgZm9yIGFsbFxuICogaW5zdGFuY2VzIG9mIHRoZSBjbGFzcywgYW5kIHdoZW4gdGhlIGxhc3QgU2Nyb2xsT2JzZXJ2ZXIgXCJkaXNjb25uZWN0c1wiLCB0aGF0XG4gKiBldmVudCBsaXN0ZW5lciBpcyByZW1vdmVkLiBUaGlzIHNwYXJlcyB1cyBmcm9tIHRocmFzaGluZ1xuICogdGhlIHthZGQscmVtb3ZlfUV2ZW50TGlzdGVuZXIgQVBJICh0aGUgYmluZGluZyBjb3N0IG9mIHRoZXNlIG1ldGhvZHMgaGFzIGJlZW5cbiAqIGtub3duIHRvIHNob3cgdXAgaW4gcGVyZm9ybWFuY2UgYW5hbHlzZXMpIGFzIHdlbGwgYXMgcG90ZW50aWFsIG1lbW9yeSBsZWFrcy5cbiAqL1xuY2xhc3MgU2Nyb2xsT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXNbJHNjcm9sbENhbGxiYWNrXSA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICBzdGF0aWMgWyRub3RpZnlJbnN0YW5jZXNdKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIFNjcm9sbE9ic2VydmVyWyRpbnN0YW5jZXNdKSB7XG4gICAgICAgICAgICBpbnN0YW5jZVskbm90aWZ5XSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBbKF9hID0gJGluc3RhbmNlcywgJGFjdGl2YXRlTGlzdGVuZXIpXSgpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXNbJG5vdGlmeUluc3RhbmNlc10sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgc3RhdGljIFskZGVhY3RpdmF0ZUxpc3RlbmVyXSgpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXNbJG5vdGlmeUluc3RhbmNlc10pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gZm9yIHNjcm9sbCBldmVudHMuIFRoZSBjb25maWd1cmVkIGNhbGxiYWNrIChwYXNzZWQgdG8gdGhlXG4gICAgICogY29uc3RydWN0b3IpIHdpbGwgYmUgaW52b2tlZCBmb3Igc3Vic2VxdWVudCBnbG9iYWwgc2Nyb2xsIGV2ZW50cy5cbiAgICAgKi9cbiAgICBvYnNlcnZlKCkge1xuICAgICAgICBpZiAoU2Nyb2xsT2JzZXJ2ZXJbJGluc3RhbmNlc10uc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgU2Nyb2xsT2JzZXJ2ZXJbJGFjdGl2YXRlTGlzdGVuZXJdKCk7XG4gICAgICAgIH1cbiAgICAgICAgU2Nyb2xsT2JzZXJ2ZXJbJGluc3RhbmNlc10uYWRkKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wIGxpc3RlbmluZyBmb3Igc2Nyb2xsIGV2ZW50cy5cbiAgICAgKi9cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICBTY3JvbGxPYnNlcnZlclskaW5zdGFuY2VzXS5kZWxldGUodGhpcyk7XG4gICAgICAgIGlmIChTY3JvbGxPYnNlcnZlclskaW5zdGFuY2VzXS5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBTY3JvbGxPYnNlcnZlclskZGVhY3RpdmF0ZUxpc3RlbmVyXSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFskbm90aWZ5XSgpIHtcbiAgICAgICAgdGhpc1skc2Nyb2xsQ2FsbGJhY2tdKCk7XG4gICAgfVxuICAgIDtcbn1cblNjcm9sbE9ic2VydmVyW19hXSA9IG5ldyBTZXQoKTtcbmNvbnN0ICRjb21wdXRlU3R5bGVDYWxsYmFjayA9IFN5bWJvbCgnY29tcHV0ZVN0eWxlQ2FsbGJhY2snKTtcbmNvbnN0ICRhc3RXYWxrZXIgPSBTeW1ib2woJ2FzdFdhbGtlcicpO1xuY29uc3QgJGRlcGVuZGVuY2llcyA9IFN5bWJvbCgnZGVwZW5kZW5jaWVzJyk7XG5jb25zdCAkb25TY3JvbGwgPSBTeW1ib2woJ29uU2Nyb2xsJyk7XG4vKipcbiAqIFRoZSBTdHlsZUVmZmVjdG9yIGlzIGNvbmZpZ3VyZWQgd2l0aCBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBpbnZva2VkIGF0IHRoZVxuICogb3B0aW1hbCB0aW1lIHRoYXQgc29tZSBhcnJheSBvZiBDU1MgZXhwcmVzc2lvbiBBU1RzIG91Z2h0IHRvIGJlIGV2YWx1YXRlZC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgb3VyIENTUy1saWtlIGV4cHJlc3Npb24gc3ludGF4IHN1cHBvcnRzIHVzYWdlIG9mIHRoZSBlbnYoKVxuICogZnVuY3Rpb24gdG8gaW5jb3Jwb3JhdGUgdGhlIGN1cnJlbnQgdG9wLWxldmVsIHNjcm9sbCBwb3NpdGlvbiBpbnRvIGEgQ1NTXG4gKiBleHByZXNzaW9uOiBlbnYod2luZG93LXNjcm9sbC15KS5cbiAqXG4gKiBUaGlzIFwiZW52aXJvbm1lbnQgdmFyaWFibGVcIiB3aWxsIGNoYW5nZSBkeW5hbWljYWxseSBhcyB0aGUgdXNlciBzY3JvbGxzIHRoZVxuICogcGFnZS4gSWYgYW4gQVNUIGNvbnRhaW5zIHN1Y2ggYSB1c2FnZSBvZiBlbnYoKSwgd2Ugd291bGQgaGF2ZSB0byBldmFsdWF0ZSB0aGVcbiAqIEFTVCBvbiBldmVyeSBmcmFtZSBpbiBvcmRlciB0byBiZSBzdXJlIHRoYXQgdGhlIGNvbXB1dGVkIHN0eWxlIHN0YXlzIHVwIHRvXG4gKiBkYXRlLlxuICpcbiAqIFRoZSBTdHlsZUVmZmVjdG9yIHNwYXJlcyB1cyBmcm9tIGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb25zIG9uIGV2ZXJ5IGZyYW1lIGJ5XG4gKiBjb3JyZWxhdGluZyBzcGVjaWZpYyBwYXJ0cyBvZiBhbiBBU1Qgd2l0aCBvYnNlcnZlcnMgb2YgdGhlIGV4dGVybmFsIGVmZmVjdHNcbiAqIHRoYXQgdGhleSByZWZlciB0byAoaWYgYW55KS4gU28sIGlmIHRoZSBBU1QgY29udGFpbnMgZW52KHdpbmRvdy1zY3JvbGwteSksXG4gKiB0aGUgU3R5bGVFZmZlY3RvciBtYW5hZ2VzIHRoZSBsaWZldGltZSBvZiBhIGdsb2JhbCBzY3JvbGwgZXZlbnQgbGlzdGVuZXIgYW5kXG4gKiBub3RpZmllcyB0aGUgdXNlciBhdCB0aGUgb3B0aW1hbCB0aW1lIHRvIGV2YWx1YXRlIHRoZSBjb21wdXRlZCBzdHlsZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0eWxlRWZmZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXNbX2JdID0ge307XG4gICAgICAgIHRoaXNbX2NdID0gbmV3IEFTVFdhbGtlcihbJ2Z1bmN0aW9uJ10pO1xuICAgICAgICB0aGlzW19kXSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXNbJGNvbXB1dGVTdHlsZUNhbGxiYWNrXSh7IHJlbGF0ZWRTdGF0ZTogJ3dpbmRvdy1zY3JvbGwnIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzWyRjb21wdXRlU3R5bGVDYWxsYmFja10gPSBjYWxsYmFjaztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZXhwcmVzc2lvbnMgdGhhdCBnb3Zlcm4gd2hlbiB0aGUgU3R5bGVFZmZlY3RvciBjYWxsYmFjayB3aWxsIGJlXG4gICAgICogaW52b2tlZC5cbiAgICAgKi9cbiAgICBvYnNlcnZlRWZmZWN0c0Zvcihhc3QpIHtcbiAgICAgICAgY29uc3QgbmV3RGVwZW5kZW5jaWVzID0ge307XG4gICAgICAgIGNvbnN0IG9sZERlcGVuZGVuY2llcyA9IHRoaXNbJGRlcGVuZGVuY2llc107XG4gICAgICAgIHRoaXNbJGFzdFdhbGtlcl0ud2Fsayhhc3QsIGZ1bmN0aW9uTm9kZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IG5hbWUgfSA9IGZ1bmN0aW9uTm9kZTtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0QXJndW1lbnQgPSBmdW5jdGlvbk5vZGUuYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RUZXJtID0gZmlyc3RBcmd1bWVudC50ZXJtc1swXTtcbiAgICAgICAgICAgIGlmIChuYW1lLnZhbHVlICE9PSAnZW52JyB8fCBmaXJzdFRlcm0gPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIGZpcnN0VGVybS50eXBlICE9PSAnaWRlbnQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChmaXJzdFRlcm0udmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd3aW5kb3ctc2Nyb2xsLXknOlxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3RGVwZW5kZW5jaWVzWyd3aW5kb3ctc2Nyb2xsJ10gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSAnd2luZG93LXNjcm9sbCcgaW4gb2xkRGVwZW5kZW5jaWVzID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGREZXBlbmRlbmNpZXNbJ3dpbmRvdy1zY3JvbGwnXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFNjcm9sbE9ic2VydmVyKHRoaXNbJG9uU2Nyb2xsXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2xkRGVwZW5kZW5jaWVzWyd3aW5kb3ctc2Nyb2xsJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEZXBlbmRlbmNpZXNbJ3dpbmRvdy1zY3JvbGwnXSA9IG9ic2VydmVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChjb25zdCBlbnZpcm9ubWVudFN0YXRlIGluIG9sZERlcGVuZGVuY2llcykge1xuICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBvbGREZXBlbmRlbmNpZXNbZW52aXJvbm1lbnRTdGF0ZV07XG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1skZGVwZW5kZW5jaWVzXSA9IG5ld0RlcGVuZGVuY2llcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgb2YgdGhlIFN0eWxlRWZmZWN0b3IgYnkgZGlzY29ubmVjdGluZyBhbGwgb2JzZXJ2ZXJzIG9mIGV4dGVybmFsXG4gICAgICogZWZmZWN0cy5cbiAgICAgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGVudmlyb25tZW50U3RhdGUgaW4gdGhpc1skZGVwZW5kZW5jaWVzXSkge1xuICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB0aGlzWyRkZXBlbmRlbmNpZXNdW2Vudmlyb25tZW50U3RhdGVdO1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuX2IgPSAkZGVwZW5kZW5jaWVzLCBfYyA9ICRhc3RXYWxrZXIsIF9kID0gJG9uU2Nyb2xsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3R5bGUtZWZmZWN0b3IuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/styles/style-effector.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/template.js":
/*!***********************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/template.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeTemplate: () => (/* binding */ makeTemplate)\n/* harmony export */ });\n/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lit */ \"(ssr)/./node_modules/lit/index.js\");\n/* harmony import */ var _assets_close_material_svg_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets/close-material-svg.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/assets/close-material-svg.js\");\n/* harmony import */ var _assets_controls_svg_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./assets/controls-svg.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/assets/controls-svg.js\");\n/* harmony import */ var _assets_view_in_ar_material_svg_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./assets/view-in-ar-material-svg.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/assets/view-in-ar-material-svg.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\nconst templateResult = (0,lit__WEBPACK_IMPORTED_MODULE_0__.html) `\n<style>\n:host {\n  display: block;\n  position: relative;\n  contain: strict;\n  width: 300px;\n  height: 150px;\n}\n\n/* NOTE: This rule set is our integration surface area with the\n * :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196 */\n:host([data-js-focus-visible]:focus:not(.focus-visible)),\n:host([data-js-focus-visible]) :focus:not(.focus-visible) {\n  outline: none;\n}\n\n.container {\n  position: relative;\n  overflow: hidden;\n}\n\n.userInput {\n  width: 100%;\n  height: 100%;\n  display: none;\n  position: relative;\n}\n\ncanvas {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\n   * that causes our canvas not to display pixels unless it is\n   * on its own render layer\n   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893\n   */\n  transform: translateZ(0);\n}\n\n.show {\n  display: block;\n}\n\n/* Adapted from HTML5 Boilerplate\n *\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\n.screen-reader-only {\n  border: 0;\n  left: 0;\n  top: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n  pointer-events: none;\n}\n\n.slot {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.slot > * {\n  pointer-events: initial;\n}\n\n.annotation-wrapper ::slotted(*) {\n  opacity: var(--max-hotspot-opacity, 1);\n  transition: opacity 0.3s;\n}\n\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\n  pointer-events: none;\n}\n\n.annotation-wrapper ::slotted(*) {\n  pointer-events: initial;\n}\n\n.annotation-wrapper.hide ::slotted(*) {\n  opacity: var(--min-hotspot-opacity, 0.25);\n}\n\n.slot.poster {\n  display: none;\n  background-color: inherit;\n}\n\n.slot.poster.show {\n  display: inherit;\n}\n\n.slot.poster > * {\n  pointer-events: initial;\n}\n\n.slot.poster:not(.show) > * {\n  pointer-events: none;\n}\n\n#default-poster {\n  width: 100%;\n  height: 100%;\n  /* The default poster is a <button> so we need to set display\n   * to prevent it from being affected by text-align: */\n  display: block;\n  position: absolute;\n  border: none;\n  padding: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: #fff0;\n}\n\n#default-progress-bar {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress-bar-height, 5px);\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\n  transition: transform 0.09s;\n  transform-origin: top left;\n  transform: scaleX(0);\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar.hide {\n  transition: opacity 0.3s 1s;\n  opacity: 0;\n}\n\n.centered {\n  align-items: center;\n  justify-content: center;\n}\n\n.cover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.slot.interaction-prompt {\n  display: var(--interaction-prompt-display, flex);\n  overflow: hidden;\n  opacity: 0;\n  will-change: opacity;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt.visible {\n  opacity: 1;\n}\n\n.animated-container {\n  will-change: transform, opacity;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt > * {\n  pointer-events: none;\n}\n\n.slot.ar-button {\n  -moz-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n\n  display: var(--ar-button-display, block);\n}\n\n.slot.ar-button:not(.enabled) {\n  display: none;\n}\n\n.fab {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background-color: #fff;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  border-radius: 100px;\n}\n\n.fab > * {\n  opacity: 0.87;\n}\n\n#default-ar-button {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  transform: scale(var(--ar-button-scale, 1));\n  transform-origin: bottom right;\n}\n\n.slot.pan-target {\n  display: block;\n  position: absolute;\n  width: 0;\n  height: 0;\n  left: 50%;\n  top: 50%;\n  transform: translate3d(-50%, -50%, 0);\n  background-color: transparent;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n#default-pan-target {\n  width: 6px;\n  height: 6px;\n  border-radius: 6px;\n  border: 1px solid white;\n  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);\n}\n\n.slot.default {\n  pointer-events: none;\n}\n\n.slot.progress-bar {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button:not(.enabled) {\n  display: none;\n}\n\n#default-exit-webxr-ar-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: env(safe-area-inset-top, 16px);\n  right: 16px;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n}\n\n#default-exit-webxr-ar-button > svg {\n  fill: #fff;\n}\n</style>\n<div class=\"container\">\n  <div class=\"userInput\" tabindex=\"0\" role=\"img\"\n      aria-label=\"3D model\">\n      <div class=\"slot canvas\">\n        <slot name=\"canvas\">\n          <canvas></canvas>\n        </slot>\n      </div>\n\n  </div>\n\n  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\n        will have their <slot> elements removed by ShadyCSS -->\n  <div class=\"slot poster\">\n    <slot name=\"poster\">\n      <button type=\"button\" id=\"default-poster\" aria-hidden=\"true\" aria-label=\"Loading 3D model\"></button>\n    </slot>\n  </div>\n\n  <div class=\"slot ar-button\">\n    <slot name=\"ar-button\">\n      <a id=\"default-ar-button\" part=\"default-ar-button\" class=\"fab\"\n          tabindex=\"2\"\n          aria-label=\"View in your space\">\n        ${_assets_view_in_ar_material_svg_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]}\n      </a>\n    </slot>\n  </div>\n\n  <div class=\"slot pan-target\">\n    <slot name=\"pan-target\">\n      <div id=\"default-pan-target\">\n      </div>\n    </slot>\n  </div>\n\n  <div class=\"slot interaction-prompt cover centered\">\n    <div id=\"prompt\" class=\"animated-container\">\n      <slot name=\"interaction-prompt\" aria-hidden=\"true\">\n        ${_assets_controls_svg_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]}\n      </slot>\n    </div>\n  </div>\n\n  <div id=\"finger0\" class=\"animated-container cover\">\n    <slot name=\"finger0\" aria-hidden=\"true\">\n    </slot>\n  </div>\n  <div id=\"finger1\" class=\"animated-container cover\">\n    <slot name=\"finger1\" aria-hidden=\"true\">\n    </slot>\n  </div>\n\n  <div class=\"slot default\">\n    <slot></slot>\n\n    <div class=\"slot progress-bar\">\n      <slot name=\"progress-bar\">\n        <div id=\"default-progress-bar\" aria-hidden=\"true\">\n          <div class=\"bar\" part=\"default-progress-bar\"></div>\n        </div>\n      </slot>\n    </div>\n\n    <div class=\"slot exit-webxr-ar-button\">\n      <slot name=\"exit-webxr-ar-button\">\n        <a id=\"default-exit-webxr-ar-button\" part=\"default-exit-webxr-ar-button\"\n            tabindex=\"3\"\n            aria-label=\"Exit AR\"\n            aria-hidden=\"true\">\n          ${_assets_close_material_svg_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]}\n        </a>\n      </slot>\n    </div>\n  </div>\n</div>\n<div class=\"screen-reader-only\" role=\"region\" aria-label=\"Live announcements\">\n  <span id=\"status\" role=\"status\"></span>\n</div>`;\nconst makeTemplate = (shadowRoot) => {\n    (0,lit__WEBPACK_IMPORTED_MODULE_0__.render)(templateResult, shadowRoot);\n};\n//# sourceMappingURL=template.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RlbXBsYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNtQztBQUNvQjtBQUNEO0FBQ0k7QUFDMUQsdUJBQXVCLHlDQUFJO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwRUFBTztBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0RBQWM7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFFQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLElBQUksMkNBQU07QUFDVjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90ZW1wbGF0ZS5qcz9mNmIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IGh0bWwsIHJlbmRlciB9IGZyb20gJ2xpdCc7XG5pbXBvcnQgQ2xvc2VJY29uIGZyb20gJy4vYXNzZXRzL2Nsb3NlLW1hdGVyaWFsLXN2Zy5qcyc7XG5pbXBvcnQgQ29udHJvbHNQcm9tcHQgZnJvbSAnLi9hc3NldHMvY29udHJvbHMtc3ZnLmpzJztcbmltcG9ydCBBUkdseXBoIGZyb20gJy4vYXNzZXRzL3ZpZXctaW4tYXItbWF0ZXJpYWwtc3ZnLmpzJztcbmNvbnN0IHRlbXBsYXRlUmVzdWx0ID0gaHRtbCBgXG48c3R5bGU+XG46aG9zdCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGNvbnRhaW46IHN0cmljdDtcbiAgd2lkdGg6IDMwMHB4O1xuICBoZWlnaHQ6IDE1MHB4O1xufVxuXG4vKiBOT1RFOiBUaGlzIHJ1bGUgc2V0IGlzIG91ciBpbnRlZ3JhdGlvbiBzdXJmYWNlIGFyZWEgd2l0aCB0aGVcbiAqIDpmb2N1cy12aXNpYmxlIHBvbHlmaWxsLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvZm9jdXMtdmlzaWJsZS9wdWxsLzE5NiAqL1xuOmhvc3QoW2RhdGEtanMtZm9jdXMtdmlzaWJsZV06Zm9jdXM6bm90KC5mb2N1cy12aXNpYmxlKSksXG46aG9zdChbZGF0YS1qcy1mb2N1cy12aXNpYmxlXSkgOmZvY3VzOm5vdCguZm9jdXMtdmlzaWJsZSkge1xuICBvdXRsaW5lOiBub25lO1xufVxuXG4uY29udGFpbmVyIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBvdmVyZmxvdzogaGlkZGVuO1xufVxuXG4udXNlcklucHV0IHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgZGlzcGxheTogbm9uZTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG5jYW52YXMge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAvKiBOT1RFKGNkYXRhKTogQ2hyb21lIDc2IGFuZCBiZWxvdyBhcHBhcmVudGx5IGhhdmUgYSBidWdcbiAgICogdGhhdCBjYXVzZXMgb3VyIGNhbnZhcyBub3QgdG8gZGlzcGxheSBwaXhlbHMgdW5sZXNzIGl0IGlzXG4gICAqIG9uIGl0cyBvd24gcmVuZGVyIGxheWVyXG4gICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9tb2RlbC12aWV3ZXIvcHVsbC83NTUjaXNzdWVjb21tZW50LTUzNjU5Nzg5M1xuICAgKi9cbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApO1xufVxuXG4uc2hvdyB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4vKiBBZGFwdGVkIGZyb20gSFRNTDUgQm9pbGVycGxhdGVcbiAqXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9oNWJwL2h0bWw1LWJvaWxlcnBsYXRlL2Jsb2IvY2ViNDYyMGM3OGZjODJlMTM1MzRmYzQ0MjAyYTNmMTY4NzU0ODczZi9kaXN0L2Nzcy9tYWluLmNzcyNMMTIyLUwxMzMgKi9cbi5zY3JlZW4tcmVhZGVyLW9ubHkge1xuICBib3JkZXI6IDA7XG4gIGxlZnQ6IDA7XG4gIHRvcDogMDtcbiAgY2xpcDogcmVjdCgwLCAwLCAwLCAwKTtcbiAgaGVpZ2h0OiAxcHg7XG4gIG1hcmdpbjogLTFweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcGFkZGluZzogMDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB3aWR0aDogMXB4O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLnNsb3Qge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5zbG90ID4gKiB7XG4gIHBvaW50ZXItZXZlbnRzOiBpbml0aWFsO1xufVxuXG4uYW5ub3RhdGlvbi13cmFwcGVyIDo6c2xvdHRlZCgqKSB7XG4gIG9wYWNpdHk6IHZhcigtLW1heC1ob3RzcG90LW9wYWNpdHksIDEpO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3M7XG59XG5cbi5wb2ludGVyLXR1bWJsaW5nIC5hbm5vdGF0aW9uLXdyYXBwZXIgOjpzbG90dGVkKCopIHtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi5hbm5vdGF0aW9uLXdyYXBwZXIgOjpzbG90dGVkKCopIHtcbiAgcG9pbnRlci1ldmVudHM6IGluaXRpYWw7XG59XG5cbi5hbm5vdGF0aW9uLXdyYXBwZXIuaGlkZSA6OnNsb3R0ZWQoKikge1xuICBvcGFjaXR5OiB2YXIoLS1taW4taG90c3BvdC1vcGFjaXR5LCAwLjI1KTtcbn1cblxuLnNsb3QucG9zdGVyIHtcbiAgZGlzcGxheTogbm9uZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDtcbn1cblxuLnNsb3QucG9zdGVyLnNob3cge1xuICBkaXNwbGF5OiBpbmhlcml0O1xufVxuXG4uc2xvdC5wb3N0ZXIgPiAqIHtcbiAgcG9pbnRlci1ldmVudHM6IGluaXRpYWw7XG59XG5cbi5zbG90LnBvc3Rlcjpub3QoLnNob3cpID4gKiB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4jZGVmYXVsdC1wb3N0ZXIge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICAvKiBUaGUgZGVmYXVsdCBwb3N0ZXIgaXMgYSA8YnV0dG9uPiBzbyB3ZSBuZWVkIHRvIHNldCBkaXNwbGF5XG4gICAqIHRvIHByZXZlbnQgaXQgZnJvbSBiZWluZyBhZmZlY3RlZCBieSB0ZXh0LWFsaWduOiAqL1xuICBkaXNwbGF5OiBibG9jaztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3JkZXI6IG5vbmU7XG4gIHBhZGRpbmc6IDA7XG4gIGJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmMDtcbn1cblxuI2RlZmF1bHQtcHJvZ3Jlc3MtYmFyIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbiNkZWZhdWx0LXByb2dyZXNzLWJhciA+IC5iYXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogdmFyKC0tcHJvZ3Jlc3MtYmFyLWhlaWdodCwgNXB4KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJvZ3Jlc3MtYmFyLWNvbG9yLCByZ2JhKDAsIDAsIDAsIDAuNCkpO1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4wOXM7XG4gIHRyYW5zZm9ybS1vcmlnaW46IHRvcCBsZWZ0O1xuICB0cmFuc2Zvcm06IHNjYWxlWCgwKTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuI2RlZmF1bHQtcHJvZ3Jlc3MtYmFyID4gLmJhci5oaWRlIHtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIDFzO1xuICBvcGFjaXR5OiAwO1xufVxuXG4uY2VudGVyZWQge1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLmNvdmVyIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4uc2xvdC5pbnRlcmFjdGlvbi1wcm9tcHQge1xuICBkaXNwbGF5OiB2YXIoLS1pbnRlcmFjdGlvbi1wcm9tcHQtZGlzcGxheSwgZmxleCk7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG9wYWNpdHk6IDA7XG4gIHdpbGwtY2hhbmdlOiBvcGFjaXR5O1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3M7XG59XG5cbi5zbG90LmludGVyYWN0aW9uLXByb21wdC52aXNpYmxlIHtcbiAgb3BhY2l0eTogMTtcbn1cblxuLmFuaW1hdGVkLWNvbnRhaW5lciB7XG4gIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm0sIG9wYWNpdHk7XG4gIG9wYWNpdHk6IDA7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcztcbn1cblxuLnNsb3QuaW50ZXJhY3Rpb24tcHJvbXB0ID4gKiB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4uc2xvdC5hci1idXR0b24ge1xuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHRyYW5zcGFyZW50O1xuICB1c2VyLXNlbGVjdDogbm9uZTtcblxuICBkaXNwbGF5OiB2YXIoLS1hci1idXR0b24tZGlzcGxheSwgYmxvY2spO1xufVxuXG4uc2xvdC5hci1idXR0b246bm90KC5lbmFibGVkKSB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5mYWIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgd2lkdGg6IDQwcHg7XG4gIGhlaWdodDogNDBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICBib3gtc2hhZG93OiAwcHggMHB4IDRweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICBib3JkZXItcmFkaXVzOiAxMDBweDtcbn1cblxuLmZhYiA+ICoge1xuICBvcGFjaXR5OiAwLjg3O1xufVxuXG4jZGVmYXVsdC1hci1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGJvdHRvbTogMTZweDtcbiAgcmlnaHQ6IDE2cHg7XG4gIHRyYW5zZm9ybTogc2NhbGUodmFyKC0tYXItYnV0dG9uLXNjYWxlLCAxKSk7XG4gIHRyYW5zZm9ybS1vcmlnaW46IGJvdHRvbSByaWdodDtcbn1cblxuLnNsb3QucGFuLXRhcmdldCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAwO1xuICBoZWlnaHQ6IDA7XG4gIGxlZnQ6IDUwJTtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCk7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICBvcGFjaXR5OiAwO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3M7XG59XG5cbiNkZWZhdWx0LXBhbi10YXJnZXQge1xuICB3aWR0aDogNnB4O1xuICBoZWlnaHQ6IDZweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB3aGl0ZTtcbiAgYm94LXNoYWRvdzogMHB4IDBweCAycHggMXB4IHJnYmEoMCwgMCwgMCwgMC44KTtcbn1cblxuLnNsb3QuZGVmYXVsdCB7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xufVxuXG4uc2xvdC5wcm9ncmVzcy1iYXIge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLnNsb3QuZXhpdC13ZWJ4ci1hci1idXR0b24ge1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbn1cblxuLnNsb3QuZXhpdC13ZWJ4ci1hci1idXR0b246bm90KC5lbmFibGVkKSB7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNkZWZhdWx0LWV4aXQtd2VieHItYXItYnV0dG9uIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiBlbnYoc2FmZS1hcmVhLWluc2V0LXRvcCwgMTZweCk7XG4gIHJpZ2h0OiAxNnB4O1xuICB3aWR0aDogNDBweDtcbiAgaGVpZ2h0OiA0MHB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufVxuXG4jZGVmYXVsdC1leGl0LXdlYnhyLWFyLWJ1dHRvbiA+IHN2ZyB7XG4gIGZpbGw6ICNmZmY7XG59XG48L3N0eWxlPlxuPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxuICA8ZGl2IGNsYXNzPVwidXNlcklucHV0XCIgdGFiaW5kZXg9XCIwXCIgcm9sZT1cImltZ1wiXG4gICAgICBhcmlhLWxhYmVsPVwiM0QgbW9kZWxcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzbG90IGNhbnZhc1wiPlxuICAgICAgICA8c2xvdCBuYW1lPVwiY2FudmFzXCI+XG4gICAgICAgICAgPGNhbnZhcz48L2NhbnZhcz5cbiAgICAgICAgPC9zbG90PlxuICAgICAgPC9kaXY+XG5cbiAgPC9kaXY+XG5cbiAgPCEtLSBOT1RFKGNkYXRhKTogV2UgbmVlZCB0byB3cmFwIHNsb3RzIGJlY2F1c2UgYnJvd3NlcnMgd2l0aG91dCBTaGFkb3dET01cbiAgICAgICAgd2lsbCBoYXZlIHRoZWlyIDxzbG90PiBlbGVtZW50cyByZW1vdmVkIGJ5IFNoYWR5Q1NTIC0tPlxuICA8ZGl2IGNsYXNzPVwic2xvdCBwb3N0ZXJcIj5cbiAgICA8c2xvdCBuYW1lPVwicG9zdGVyXCI+XG4gICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cImRlZmF1bHQtcG9zdGVyXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgYXJpYS1sYWJlbD1cIkxvYWRpbmcgM0QgbW9kZWxcIj48L2J1dHRvbj5cbiAgICA8L3Nsb3Q+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJzbG90IGFyLWJ1dHRvblwiPlxuICAgIDxzbG90IG5hbWU9XCJhci1idXR0b25cIj5cbiAgICAgIDxhIGlkPVwiZGVmYXVsdC1hci1idXR0b25cIiBwYXJ0PVwiZGVmYXVsdC1hci1idXR0b25cIiBjbGFzcz1cImZhYlwiXG4gICAgICAgICAgdGFiaW5kZXg9XCIyXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiVmlldyBpbiB5b3VyIHNwYWNlXCI+XG4gICAgICAgICR7QVJHbHlwaH1cbiAgICAgIDwvYT5cbiAgICA8L3Nsb3Q+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJzbG90IHBhbi10YXJnZXRcIj5cbiAgICA8c2xvdCBuYW1lPVwicGFuLXRhcmdldFwiPlxuICAgICAgPGRpdiBpZD1cImRlZmF1bHQtcGFuLXRhcmdldFwiPlxuICAgICAgPC9kaXY+XG4gICAgPC9zbG90PlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwic2xvdCBpbnRlcmFjdGlvbi1wcm9tcHQgY292ZXIgY2VudGVyZWRcIj5cbiAgICA8ZGl2IGlkPVwicHJvbXB0XCIgY2xhc3M9XCJhbmltYXRlZC1jb250YWluZXJcIj5cbiAgICAgIDxzbG90IG5hbWU9XCJpbnRlcmFjdGlvbi1wcm9tcHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgJHtDb250cm9sc1Byb21wdH1cbiAgICAgIDwvc2xvdD5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5cbiAgPGRpdiBpZD1cImZpbmdlcjBcIiBjbGFzcz1cImFuaW1hdGVkLWNvbnRhaW5lciBjb3ZlclwiPlxuICAgIDxzbG90IG5hbWU9XCJmaW5nZXIwXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgPC9zbG90PlxuICA8L2Rpdj5cbiAgPGRpdiBpZD1cImZpbmdlcjFcIiBjbGFzcz1cImFuaW1hdGVkLWNvbnRhaW5lciBjb3ZlclwiPlxuICAgIDxzbG90IG5hbWU9XCJmaW5nZXIxXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgPC9zbG90PlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwic2xvdCBkZWZhdWx0XCI+XG4gICAgPHNsb3Q+PC9zbG90PlxuXG4gICAgPGRpdiBjbGFzcz1cInNsb3QgcHJvZ3Jlc3MtYmFyXCI+XG4gICAgICA8c2xvdCBuYW1lPVwicHJvZ3Jlc3MtYmFyXCI+XG4gICAgICAgIDxkaXYgaWQ9XCJkZWZhdWx0LXByb2dyZXNzLWJhclwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYXJcIiBwYXJ0PVwiZGVmYXVsdC1wcm9ncmVzcy1iYXJcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L3Nsb3Q+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwic2xvdCBleGl0LXdlYnhyLWFyLWJ1dHRvblwiPlxuICAgICAgPHNsb3QgbmFtZT1cImV4aXQtd2VieHItYXItYnV0dG9uXCI+XG4gICAgICAgIDxhIGlkPVwiZGVmYXVsdC1leGl0LXdlYnhyLWFyLWJ1dHRvblwiIHBhcnQ9XCJkZWZhdWx0LWV4aXQtd2VieHItYXItYnV0dG9uXCJcbiAgICAgICAgICAgIHRhYmluZGV4PVwiM1wiXG4gICAgICAgICAgICBhcmlhLWxhYmVsPVwiRXhpdCBBUlwiXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICAgICAgICAke0Nsb3NlSWNvbn1cbiAgICAgICAgPC9hPlxuICAgICAgPC9zbG90PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cInNjcmVlbi1yZWFkZXItb25seVwiIHJvbGU9XCJyZWdpb25cIiBhcmlhLWxhYmVsPVwiTGl2ZSBhbm5vdW5jZW1lbnRzXCI+XG4gIDxzcGFuIGlkPVwic3RhdHVzXCIgcm9sZT1cInN0YXR1c1wiPjwvc3Bhbj5cbjwvZGl2PmA7XG5leHBvcnQgY29uc3QgbWFrZVRlbXBsYXRlID0gKHNoYWRvd1Jvb3QpID0+IHtcbiAgICByZW5kZXIodGVtcGxhdGVSZXN1bHQsIHNoYWRvd1Jvb3QpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRlbXBsYXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/template.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/ARRenderer.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/ARRenderer.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ARRenderer: () => (/* binding */ ARRenderer),\n/* harmony export */   ARStatus: () => (/* binding */ ARStatus),\n/* harmony export */   ARTracking: () => (/* binding */ ARTracking)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_webxr_XREstimatedLight_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three/examples/jsm/webxr/XREstimatedLight.js */ \"(ssr)/./node_modules/three/examples/jsm/webxr/XREstimatedLight.js\");\n/* harmony import */ var _features_environment_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../features/environment.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/environment.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* harmony import */ var _Damper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Damper.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Damper.js\");\n/* harmony import */ var _PlacementBox_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./PlacementBox.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/PlacementBox.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\n\n// number of initial null pose XRFrames allowed before we post not-tracking\nconst INIT_FRAMES = 30;\n// AR shadow is not user-configurable. This is to pave the way for AR lighting\n// estimation, which will be used once available in WebXR.\nconst AR_SHADOW_INTENSITY = 0.8;\nconst ROTATION_RATE = 1.5;\n// Angle down (towards bottom of screen) from camera center ray to use for hit\n// testing against the floor. This makes placement faster and more intuitive\n// assuming the phone is in portrait mode. This seems to be a reasonable\n// assumption for the start of the session and UI will lack landscape mode to\n// encourage upright use.\nconst HIT_ANGLE_DEG = 20;\nconst SCALE_SNAP_HIGH = 1.3;\nconst SCALE_SNAP_LOW = 1 / SCALE_SNAP_HIGH;\n// For automatic dynamic viewport scaling, don't let the scale drop below this\n// limit.\nconst MIN_VIEWPORT_SCALE = 0.25;\n// Furthest away you can move an object (meters).\nconst MAX_DISTANCE = 10;\nconst ARStatus = {\n    NOT_PRESENTING: 'not-presenting',\n    SESSION_STARTED: 'session-started',\n    OBJECT_PLACED: 'object-placed',\n    FAILED: 'failed'\n};\nconst ARTracking = {\n    TRACKING: 'tracking',\n    NOT_TRACKING: 'not-tracking'\n};\nconst vector3 = new three__WEBPACK_IMPORTED_MODULE_5__.Vector3();\nconst matrix4 = new three__WEBPACK_IMPORTED_MODULE_5__.Matrix4();\nconst hitPosition = new three__WEBPACK_IMPORTED_MODULE_5__.Vector3();\nconst camera = new three__WEBPACK_IMPORTED_MODULE_5__.PerspectiveCamera(45, 1, 0.1, 100);\nclass ARRenderer extends three__WEBPACK_IMPORTED_MODULE_5__.EventDispatcher {\n    constructor(renderer) {\n        super();\n        this.renderer = renderer;\n        this.currentSession = null;\n        this.placeOnWall = false;\n        this.placementBox = null;\n        this.lastTick = null;\n        this.turntableRotation = null;\n        this.oldShadowIntensity = null;\n        this.frame = null;\n        this.initialHitSource = null;\n        this.transientHitTestSource = null;\n        this.inputSource = null;\n        this._presentedScene = null;\n        this.resolveCleanup = null;\n        this.exitWebXRButtonContainer = null;\n        this.overlay = null;\n        this.xrLight = null;\n        this.tracking = true;\n        this.frames = 0;\n        this.initialized = false;\n        this.oldTarget = new three__WEBPACK_IMPORTED_MODULE_5__.Vector3();\n        this.placementComplete = false;\n        this.isTranslating = false;\n        this.isRotating = false;\n        this.isTwoFingering = false;\n        this.lastDragPosition = new three__WEBPACK_IMPORTED_MODULE_5__.Vector3();\n        this.firstRatio = 0;\n        this.lastAngle = 0;\n        this.goalPosition = new three__WEBPACK_IMPORTED_MODULE_5__.Vector3();\n        this.goalYaw = 0;\n        this.goalScale = 1;\n        this.xDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_3__.Damper();\n        this.yDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_3__.Damper();\n        this.zDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_3__.Damper();\n        this.yawDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_3__.Damper();\n        this.scaleDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_3__.Damper();\n        this.onExitWebXRButtonContainerClick = () => this.stopPresenting();\n        this.onUpdateScene = () => {\n            if (this.placementBox != null && this.isPresenting) {\n                this.placementBox.dispose();\n                this.placementBox = new _PlacementBox_js__WEBPACK_IMPORTED_MODULE_4__.PlacementBox(this.presentedScene, this.placeOnWall ? 'back' : 'bottom');\n            }\n        };\n        this.onSelectStart = (event) => {\n            const hitSource = this.transientHitTestSource;\n            if (hitSource == null) {\n                return;\n            }\n            const fingers = this.frame.getHitTestResultsForTransientInput(hitSource);\n            const scene = this.presentedScene;\n            const box = this.placementBox;\n            if (fingers.length === 1) {\n                this.inputSource = event.inputSource;\n                const { axes } = this.inputSource.gamepad;\n                const hitPosition = box.getHit(this.presentedScene, axes[0], axes[1]);\n                box.show = true;\n                if (hitPosition != null) {\n                    this.isTranslating = true;\n                    this.lastDragPosition.copy(hitPosition);\n                }\n                else if (this.placeOnWall === false) {\n                    this.isRotating = true;\n                    this.lastAngle = axes[0] * ROTATION_RATE;\n                }\n            }\n            else if (fingers.length === 2) {\n                box.show = true;\n                this.isTwoFingering = true;\n                const { separation } = this.fingerPolar(fingers);\n                this.firstRatio = separation / scene.scale.x;\n            }\n        };\n        this.onSelectEnd = () => {\n            this.isTranslating = false;\n            this.isRotating = false;\n            this.isTwoFingering = false;\n            this.inputSource = null;\n            this.goalPosition.y +=\n                this.placementBox.offsetHeight * this.presentedScene.scale.x;\n            this.placementBox.show = false;\n        };\n        this.threeRenderer = renderer.threeRenderer;\n        this.threeRenderer.xr.enabled = true;\n    }\n    async resolveARSession() {\n        (0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.assertIsArCandidate)();\n        const session = await navigator.xr.requestSession('immersive-ar', {\n            requiredFeatures: ['hit-test'],\n            optionalFeatures: ['dom-overlay', 'light-estimation'],\n            domOverlay: this.overlay ? { root: this.overlay } : undefined\n        });\n        this.threeRenderer.xr.setReferenceSpaceType('local');\n        await this.threeRenderer.xr.setSession(session);\n        this.threeRenderer.xr.cameraAutoUpdate = false;\n        return session;\n    }\n    /**\n     * The currently presented scene, if any\n     */\n    get presentedScene() {\n        return this._presentedScene;\n    }\n    /**\n     * Resolves to true if the renderer has detected all the necessary qualities\n     * to support presentation in AR.\n     */\n    async supportsPresentation() {\n        try {\n            (0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.assertIsArCandidate)();\n            return await navigator.xr.isSessionSupported('immersive-ar');\n        }\n        catch (error) {\n            console.warn('Request to present in WebXR denied:');\n            console.warn(error);\n            console.warn('Falling back to next ar-mode');\n            return false;\n        }\n    }\n    /**\n     * Present a scene in AR\n     */\n    async present(scene, environmentEstimation = false) {\n        if (this.isPresenting) {\n            console.warn('Cannot present while a model is already presenting');\n        }\n        let waitForAnimationFrame = new Promise((resolve, _reject) => {\n            requestAnimationFrame(() => resolve());\n        });\n        scene.setHotspotsVisibility(false);\n        scene.queueRender();\n        // Render a frame to turn off the hotspots\n        await waitForAnimationFrame;\n        // This sets isPresenting to true\n        this._presentedScene = scene;\n        this.overlay = scene.element.shadowRoot.querySelector('div.default');\n        if (environmentEstimation === true) {\n            this.xrLight = new three_examples_jsm_webxr_XREstimatedLight_js__WEBPACK_IMPORTED_MODULE_6__.XREstimatedLight(this.threeRenderer);\n            this.xrLight.addEventListener('estimationstart', () => {\n                if (!this.isPresenting || this.xrLight == null) {\n                    return;\n                }\n                const scene = this.presentedScene;\n                scene.add(this.xrLight);\n                scene.environment = this.xrLight.environment;\n            });\n        }\n        const currentSession = await this.resolveARSession();\n        currentSession.addEventListener('end', () => {\n            this.postSessionCleanup();\n        }, { once: true });\n        const exitButton = scene.element.shadowRoot.querySelector('.slot.exit-webxr-ar-button');\n        exitButton.classList.add('enabled');\n        exitButton.addEventListener('click', this.onExitWebXRButtonContainerClick);\n        this.exitWebXRButtonContainer = exitButton;\n        const viewerRefSpace = await currentSession.requestReferenceSpace('viewer');\n        this.tracking = true;\n        this.frames = 0;\n        this.initialized = false;\n        this.turntableRotation = scene.yaw;\n        this.goalYaw = scene.yaw;\n        this.goalScale = 1;\n        scene.background = null;\n        this.oldShadowIntensity = scene.shadowIntensity;\n        scene.setShadowIntensity(0.01); // invisible, but not changing the shader\n        this.oldTarget.copy(scene.getTarget());\n        scene.element.addEventListener('load', this.onUpdateScene);\n        const radians = HIT_ANGLE_DEG * Math.PI / 180;\n        const ray = this.placeOnWall === true ?\n            undefined :\n            new XRRay(new DOMPoint(0, 0, 0), { x: 0, y: -Math.sin(radians), z: -Math.cos(radians) });\n        currentSession\n            .requestHitTestSource({ space: viewerRefSpace, offsetRay: ray }).then(hitTestSource => {\n            this.initialHitSource = hitTestSource;\n        });\n        this.currentSession = currentSession;\n        this.placementBox =\n            new _PlacementBox_js__WEBPACK_IMPORTED_MODULE_4__.PlacementBox(scene, this.placeOnWall ? 'back' : 'bottom');\n        this.placementComplete = false;\n        this.lastTick = performance.now();\n        this.dispatchEvent({ type: 'status', status: ARStatus.SESSION_STARTED });\n    }\n    /**\n     * If currently presenting a scene in AR, stops presentation and exits AR.\n     */\n    async stopPresenting() {\n        if (!this.isPresenting) {\n            return;\n        }\n        const cleanupPromise = new Promise((resolve) => {\n            this.resolveCleanup = resolve;\n        });\n        try {\n            await this.currentSession.end();\n            await cleanupPromise;\n        }\n        catch (error) {\n            console.warn('Error while trying to end WebXR AR session');\n            console.warn(error);\n            this.postSessionCleanup();\n        }\n    }\n    /**\n     * True if a scene is currently in the process of being presented in AR\n     */\n    get isPresenting() {\n        return this.presentedScene != null;\n    }\n    get target() {\n        return this.oldTarget;\n    }\n    updateTarget() {\n        const scene = this.presentedScene;\n        if (scene != null) {\n            const target = scene.getTarget();\n            this.oldTarget.copy(target);\n            if (this.placeOnWall) {\n                // Move the scene's target to the center of the back of the model's\n                // bounding box.\n                target.z = scene.boundingBox.min.z;\n            }\n            else {\n                // Move the scene's target to the model's floor height.\n                target.y = scene.boundingBox.min.y;\n            }\n            scene.setTarget(target.x, target.y, target.z);\n        }\n    }\n    postSessionCleanup() {\n        const session = this.currentSession;\n        if (session != null) {\n            session.removeEventListener('selectstart', this.onSelectStart);\n            session.removeEventListener('selectend', this.onSelectEnd);\n            this.currentSession = null;\n        }\n        const scene = this.presentedScene;\n        this._presentedScene = null;\n        if (scene != null) {\n            const { element } = scene;\n            if (this.xrLight != null) {\n                scene.remove(this.xrLight);\n                this.xrLight.dispose();\n                this.xrLight = null;\n            }\n            scene.position.set(0, 0, 0);\n            scene.scale.set(1, 1, 1);\n            scene.setShadowOffset(0);\n            const yaw = this.turntableRotation;\n            if (yaw != null) {\n                scene.yaw = yaw;\n            }\n            const intensity = this.oldShadowIntensity;\n            if (intensity != null) {\n                scene.setShadowIntensity(intensity);\n            }\n            scene.setEnvironmentAndSkybox(element[_features_environment_js__WEBPACK_IMPORTED_MODULE_0__.$currentEnvironmentMap], element[_features_environment_js__WEBPACK_IMPORTED_MODULE_0__.$currentBackground]);\n            const point = this.oldTarget;\n            scene.setTarget(point.x, point.y, point.z);\n            scene.xrCamera = null;\n            scene.element.removeEventListener('load', this.onUpdateScene);\n            scene.orientHotspots(0);\n            element.requestUpdate('cameraTarget');\n            element.requestUpdate('maxCameraOrbit');\n            element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$onResize](element.getBoundingClientRect());\n        }\n        // Force the Renderer to update its size\n        this.renderer.height = 0;\n        const exitButton = this.exitWebXRButtonContainer;\n        if (exitButton != null) {\n            exitButton.classList.remove('enabled');\n            exitButton.removeEventListener('click', this.onExitWebXRButtonContainerClick);\n            this.exitWebXRButtonContainer = null;\n        }\n        const hitSource = this.transientHitTestSource;\n        if (hitSource != null) {\n            hitSource.cancel();\n            this.transientHitTestSource = null;\n        }\n        const hitSourceInitial = this.initialHitSource;\n        if (hitSourceInitial != null) {\n            hitSourceInitial.cancel();\n            this.initialHitSource = null;\n        }\n        if (this.placementBox != null) {\n            this.placementBox.dispose();\n            this.placementBox = null;\n        }\n        this.lastTick = null;\n        this.turntableRotation = null;\n        this.oldShadowIntensity = null;\n        this.frame = null;\n        this.inputSource = null;\n        this.overlay = null;\n        if (this.resolveCleanup != null) {\n            this.resolveCleanup();\n        }\n        this.dispatchEvent({ type: 'status', status: ARStatus.NOT_PRESENTING });\n    }\n    updateView(view) {\n        const scene = this.presentedScene;\n        const xr = this.threeRenderer.xr;\n        xr.updateCamera(camera);\n        scene.xrCamera = xr.getCamera();\n        const { elements } = scene.getCamera().matrixWorld;\n        scene.orientHotspots(Math.atan2(elements[1], elements[5]));\n        if (!this.initialized) {\n            this.placeInitially();\n            this.initialized = true;\n        }\n        // Use automatic dynamic viewport scaling if supported.\n        if (view.requestViewportScale && view.recommendedViewportScale) {\n            const scale = view.recommendedViewportScale;\n            view.requestViewportScale(Math.max(scale, MIN_VIEWPORT_SCALE));\n        }\n        const layer = this.currentSession.renderState.baseLayer;\n        const viewport = layer.getViewport(view);\n        this.threeRenderer.setViewport(viewport.x, viewport.y, viewport.width, viewport.height);\n    }\n    placeInitially() {\n        const scene = this.presentedScene;\n        const { position, element } = scene;\n        const xrCamera = scene.getCamera();\n        const { width, height } = this.overlay.getBoundingClientRect();\n        scene.setSize(width, height);\n        xrCamera.projectionMatrixInverse.copy(xrCamera.projectionMatrix).invert();\n        const { theta, radius } = element\n            .getCameraOrbit();\n        // Orient model to match the 3D camera view\n        const cameraDirection = xrCamera.getWorldDirection(vector3);\n        scene.yaw = Math.atan2(-cameraDirection.x, -cameraDirection.z) - theta;\n        this.goalYaw = scene.yaw;\n        position.copy(xrCamera.position)\n            .add(cameraDirection.multiplyScalar(radius));\n        this.updateTarget();\n        const target = scene.getTarget();\n        position.add(target).sub(this.oldTarget);\n        this.goalPosition.copy(position);\n        scene.setHotspotsVisibility(true);\n        const { session } = this.frame;\n        session.addEventListener('selectstart', this.onSelectStart);\n        session.addEventListener('selectend', this.onSelectEnd);\n        session\n            .requestHitTestSourceForTransientInput({ profile: 'generic-touchscreen' }).then(hitTestSource => {\n            this.transientHitTestSource = hitTestSource;\n        });\n    }\n    getTouchLocation() {\n        const { axes } = this.inputSource.gamepad;\n        let location = this.placementBox.getExpandedHit(this.presentedScene, axes[0], axes[1]);\n        if (location != null) {\n            vector3.copy(location).sub(this.presentedScene.getCamera().position);\n            if (vector3.length() > MAX_DISTANCE)\n                return null;\n        }\n        return location;\n    }\n    getHitPoint(hitResult) {\n        const refSpace = this.threeRenderer.xr.getReferenceSpace();\n        const pose = hitResult.getPose(refSpace);\n        if (pose == null) {\n            return null;\n        }\n        const hitMatrix = matrix4.fromArray(pose.transform.matrix);\n        if (this.placeOnWall === true) {\n            // Orient the model to the wall's normal vector.\n            this.goalYaw = Math.atan2(hitMatrix.elements[4], hitMatrix.elements[6]);\n        }\n        // Check that the y-coordinate of the normal is large enough that the normal\n        // is pointing up for floor placement; opposite for wall placement.\n        return hitMatrix.elements[5] > 0.75 !== this.placeOnWall ?\n            hitPosition.setFromMatrixPosition(hitMatrix) :\n            null;\n    }\n    moveToFloor(frame) {\n        const hitSource = this.initialHitSource;\n        if (hitSource == null) {\n            return;\n        }\n        const hitTestResults = frame.getHitTestResults(hitSource);\n        if (hitTestResults.length == 0) {\n            return;\n        }\n        const hit = hitTestResults[0];\n        const hitPoint = this.getHitPoint(hit);\n        if (hitPoint == null) {\n            return;\n        }\n        this.placementBox.show = true;\n        // If the user is translating, let the finger hit-ray take precedence and\n        // ignore this hit result.\n        if (!this.isTranslating) {\n            if (this.placeOnWall) {\n                this.goalPosition.copy(hitPoint);\n            }\n            else {\n                this.goalPosition.y = hitPoint.y;\n            }\n        }\n        hitSource.cancel();\n        this.initialHitSource = null;\n        this.dispatchEvent({ type: 'status', status: ARStatus.OBJECT_PLACED });\n    }\n    fingerPolar(fingers) {\n        const fingerOne = fingers[0].inputSource.gamepad.axes;\n        const fingerTwo = fingers[1].inputSource.gamepad.axes;\n        const deltaX = fingerTwo[0] - fingerOne[0];\n        const deltaY = fingerTwo[1] - fingerOne[1];\n        const angle = Math.atan2(deltaY, deltaX);\n        let deltaYaw = this.lastAngle - angle;\n        if (deltaYaw > Math.PI) {\n            deltaYaw -= 2 * Math.PI;\n        }\n        else if (deltaYaw < -Math.PI) {\n            deltaYaw += 2 * Math.PI;\n        }\n        this.lastAngle = angle;\n        return {\n            separation: Math.sqrt(deltaX * deltaX + deltaY * deltaY),\n            deltaYaw: deltaYaw\n        };\n    }\n    processInput(frame) {\n        const hitSource = this.transientHitTestSource;\n        if (hitSource == null) {\n            return;\n        }\n        if (!this.isTranslating && !this.isTwoFingering && !this.isRotating) {\n            return;\n        }\n        const fingers = frame.getHitTestResultsForTransientInput(hitSource);\n        const scene = this.presentedScene;\n        const scale = scene.scale.x;\n        // Rotating, translating and scaling are mutually exclusive operations; only\n        // one can happen at a time, but we can switch during a gesture.\n        if (this.isTwoFingering) {\n            if (fingers.length < 2) {\n                // If we lose the second finger, stop scaling (in fact, stop processing\n                // input altogether until a new gesture starts).\n                this.isTwoFingering = false;\n            }\n            else {\n                const { separation, deltaYaw } = this.fingerPolar(fingers);\n                if (this.placeOnWall === false) {\n                    this.goalYaw += deltaYaw;\n                }\n                if (scene.canScale) {\n                    const scale = separation / this.firstRatio;\n                    this.goalScale =\n                        (scale < SCALE_SNAP_HIGH && scale > SCALE_SNAP_LOW) ? 1 : scale;\n                }\n            }\n            return;\n        }\n        else if (fingers.length === 2) {\n            // If we were rotating or translating and we get a second finger, switch\n            // to scaling instead.\n            this.isTranslating = false;\n            this.isRotating = false;\n            this.isTwoFingering = true;\n            const { separation } = this.fingerPolar(fingers);\n            this.firstRatio = separation / scale;\n            return;\n        }\n        if (this.isRotating) {\n            const angle = this.inputSource.gamepad.axes[0] * ROTATION_RATE;\n            this.goalYaw += angle - this.lastAngle;\n            this.lastAngle = angle;\n        }\n        else if (this.isTranslating) {\n            fingers.forEach(finger => {\n                if (finger.inputSource !== this.inputSource) {\n                    return;\n                }\n                let hit = null;\n                if (finger.results.length > 0) {\n                    hit = this.getHitPoint(finger.results[0]);\n                }\n                if (hit == null) {\n                    hit = this.getTouchLocation();\n                }\n                if (hit == null) {\n                    return;\n                }\n                this.goalPosition.sub(this.lastDragPosition);\n                if (this.placeOnWall === false) {\n                    const offset = hit.y - this.lastDragPosition.y;\n                    // When a lower floor is found, keep the model at the same height, but\n                    // drop the placement box to the floor. The model falls on select end.\n                    if (offset < 0) {\n                        this.placementBox.offsetHeight = offset / scale;\n                        this.presentedScene.setShadowOffset(offset);\n                        // Interpolate hit ray up to drag plane\n                        const cameraPosition = vector3.copy(scene.getCamera().position);\n                        const alpha = -offset / (cameraPosition.y - hit.y);\n                        cameraPosition.multiplyScalar(alpha);\n                        hit.multiplyScalar(1 - alpha).add(cameraPosition);\n                    }\n                }\n                this.goalPosition.add(hit);\n                this.lastDragPosition.copy(hit);\n            });\n        }\n    }\n    moveScene(delta) {\n        const scene = this.presentedScene;\n        const { position, yaw } = scene;\n        const boundingRadius = scene.boundingSphere.radius;\n        const goal = this.goalPosition;\n        const oldScale = scene.scale.x;\n        const box = this.placementBox;\n        if (!goal.equals(position) || this.goalScale !== oldScale) {\n            let { x, y, z } = position;\n            x = this.xDamper.update(x, goal.x, delta, boundingRadius);\n            y = this.yDamper.update(y, goal.y, delta, boundingRadius);\n            z = this.zDamper.update(z, goal.z, delta, boundingRadius);\n            position.set(x, y, z);\n            const newScale = this.scaleDamper.update(oldScale, this.goalScale, delta, 1);\n            scene.scale.set(newScale, newScale, newScale);\n            if (!this.isTranslating) {\n                const offset = goal.y - y;\n                if (this.placementComplete && this.placeOnWall === false) {\n                    box.offsetHeight = offset / newScale;\n                    scene.setShadowOffset(offset);\n                }\n                else if (offset === 0) {\n                    this.placementComplete = true;\n                    box.show = false;\n                    scene.setShadowIntensity(AR_SHADOW_INTENSITY);\n                }\n            }\n        }\n        box.updateOpacity(delta);\n        scene.updateTarget(delta);\n        // yaw must be updated last, since this also updates the shadow position.\n        scene.yaw = this.yawDamper.update(yaw, this.goalYaw, delta, Math.PI);\n    }\n    /**\n     * Only public to make it testable.\n     */\n    onWebXRFrame(time, frame) {\n        this.frame = frame;\n        ++this.frames;\n        const refSpace = this.threeRenderer.xr.getReferenceSpace();\n        const pose = frame.getViewerPose(refSpace);\n        if (pose == null && this.tracking === true && this.frames > INIT_FRAMES) {\n            this.tracking = false;\n            this.dispatchEvent({ type: 'tracking', status: ARTracking.NOT_TRACKING });\n        }\n        const scene = this.presentedScene;\n        if (pose == null || scene == null || !scene.element.loaded) {\n            this.threeRenderer.clear();\n            return;\n        }\n        if (this.tracking === false) {\n            this.tracking = true;\n            this.dispatchEvent({ type: 'tracking', status: ARTracking.TRACKING });\n        }\n        // WebXR may return multiple views, i.e. for headset AR. This\n        // isn't really supported at this point, but make a best-effort\n        // attempt to render other views also, using the first view\n        // as the main viewpoint.\n        let isFirstView = true;\n        for (const view of pose.views) {\n            this.updateView(view);\n            if (isFirstView) {\n                this.moveToFloor(frame);\n                this.processInput(frame);\n                const delta = time - this.lastTick;\n                this.moveScene(delta);\n                this.renderer.preRender(scene, time, delta);\n                this.lastTick = time;\n                scene.renderShadow(this.threeRenderer);\n            }\n            this.threeRenderer.render(scene, scene.getCamera());\n            isFirstView = false;\n        }\n    }\n}\n//# sourceMappingURL=ARRenderer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvQVJSZW5kZXJlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM2RTtBQUNHO0FBQ1E7QUFDcEM7QUFDRTtBQUNqQjtBQUNZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMENBQU87QUFDM0Isb0JBQW9CLDBDQUFPO0FBQzNCLHdCQUF3QiwwQ0FBTztBQUMvQixtQkFBbUIsb0RBQWlCO0FBQzdCLHlCQUF5QixrREFBZTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMENBQU87QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsMENBQU87QUFDM0M7QUFDQTtBQUNBLGdDQUFnQywwQ0FBTztBQUN2QztBQUNBO0FBQ0EsMkJBQTJCLDhDQUFNO0FBQ2pDLDJCQUEyQiw4Q0FBTTtBQUNqQywyQkFBMkIsOENBQU07QUFDakMsNkJBQTZCLDhDQUFNO0FBQ25DLCtCQUErQiw4Q0FBTTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywwREFBWTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGFBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtFQUFtQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMscUJBQXFCO0FBQzlELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrRUFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMEZBQWdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJLFlBQVk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxvREFBb0Q7QUFDbkc7QUFDQSxvQ0FBb0MsdUNBQXVDO0FBQzNFO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsMERBQVk7QUFDNUI7QUFDQTtBQUNBLDZCQUE2QixrREFBa0Q7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsVUFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCw0RUFBc0IsV0FBVyx3RUFBa0I7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNERBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpREFBaUQ7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0JBQW9CO0FBQ3BDO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsZ0NBQWdDO0FBQ3JGO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdEQUFnRDtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVCQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsVUFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxtREFBbUQ7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywrQ0FBK0M7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvdGhyZWUtY29tcG9uZW50cy9BUlJlbmRlcmVyLmpzPzk3YmMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgRXZlbnREaXNwYXRjaGVyLCBNYXRyaXg0LCBQZXJzcGVjdGl2ZUNhbWVyYSwgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7IFhSRXN0aW1hdGVkTGlnaHQgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vd2VieHIvWFJFc3RpbWF0ZWRMaWdodC5qcyc7XG5pbXBvcnQgeyAkY3VycmVudEJhY2tncm91bmQsICRjdXJyZW50RW52aXJvbm1lbnRNYXAgfSBmcm9tICcuLi9mZWF0dXJlcy9lbnZpcm9ubWVudC5qcyc7XG5pbXBvcnQgeyAkb25SZXNpemUgfSBmcm9tICcuLi9tb2RlbC12aWV3ZXItYmFzZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnRJc0FyQ2FuZGlkYXRlIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJztcbmltcG9ydCB7IERhbXBlciB9IGZyb20gJy4vRGFtcGVyLmpzJztcbmltcG9ydCB7IFBsYWNlbWVudEJveCB9IGZyb20gJy4vUGxhY2VtZW50Qm94LmpzJztcbi8vIG51bWJlciBvZiBpbml0aWFsIG51bGwgcG9zZSBYUkZyYW1lcyBhbGxvd2VkIGJlZm9yZSB3ZSBwb3N0IG5vdC10cmFja2luZ1xuY29uc3QgSU5JVF9GUkFNRVMgPSAzMDtcbi8vIEFSIHNoYWRvdyBpcyBub3QgdXNlci1jb25maWd1cmFibGUuIFRoaXMgaXMgdG8gcGF2ZSB0aGUgd2F5IGZvciBBUiBsaWdodGluZ1xuLy8gZXN0aW1hdGlvbiwgd2hpY2ggd2lsbCBiZSB1c2VkIG9uY2UgYXZhaWxhYmxlIGluIFdlYlhSLlxuY29uc3QgQVJfU0hBRE9XX0lOVEVOU0lUWSA9IDAuODtcbmNvbnN0IFJPVEFUSU9OX1JBVEUgPSAxLjU7XG4vLyBBbmdsZSBkb3duICh0b3dhcmRzIGJvdHRvbSBvZiBzY3JlZW4pIGZyb20gY2FtZXJhIGNlbnRlciByYXkgdG8gdXNlIGZvciBoaXRcbi8vIHRlc3RpbmcgYWdhaW5zdCB0aGUgZmxvb3IuIFRoaXMgbWFrZXMgcGxhY2VtZW50IGZhc3RlciBhbmQgbW9yZSBpbnR1aXRpdmVcbi8vIGFzc3VtaW5nIHRoZSBwaG9uZSBpcyBpbiBwb3J0cmFpdCBtb2RlLiBUaGlzIHNlZW1zIHRvIGJlIGEgcmVhc29uYWJsZVxuLy8gYXNzdW1wdGlvbiBmb3IgdGhlIHN0YXJ0IG9mIHRoZSBzZXNzaW9uIGFuZCBVSSB3aWxsIGxhY2sgbGFuZHNjYXBlIG1vZGUgdG9cbi8vIGVuY291cmFnZSB1cHJpZ2h0IHVzZS5cbmNvbnN0IEhJVF9BTkdMRV9ERUcgPSAyMDtcbmNvbnN0IFNDQUxFX1NOQVBfSElHSCA9IDEuMztcbmNvbnN0IFNDQUxFX1NOQVBfTE9XID0gMSAvIFNDQUxFX1NOQVBfSElHSDtcbi8vIEZvciBhdXRvbWF0aWMgZHluYW1pYyB2aWV3cG9ydCBzY2FsaW5nLCBkb24ndCBsZXQgdGhlIHNjYWxlIGRyb3AgYmVsb3cgdGhpc1xuLy8gbGltaXQuXG5jb25zdCBNSU5fVklFV1BPUlRfU0NBTEUgPSAwLjI1O1xuLy8gRnVydGhlc3QgYXdheSB5b3UgY2FuIG1vdmUgYW4gb2JqZWN0IChtZXRlcnMpLlxuY29uc3QgTUFYX0RJU1RBTkNFID0gMTA7XG5leHBvcnQgY29uc3QgQVJTdGF0dXMgPSB7XG4gICAgTk9UX1BSRVNFTlRJTkc6ICdub3QtcHJlc2VudGluZycsXG4gICAgU0VTU0lPTl9TVEFSVEVEOiAnc2Vzc2lvbi1zdGFydGVkJyxcbiAgICBPQkpFQ1RfUExBQ0VEOiAnb2JqZWN0LXBsYWNlZCcsXG4gICAgRkFJTEVEOiAnZmFpbGVkJ1xufTtcbmV4cG9ydCBjb25zdCBBUlRyYWNraW5nID0ge1xuICAgIFRSQUNLSU5HOiAndHJhY2tpbmcnLFxuICAgIE5PVF9UUkFDS0lORzogJ25vdC10cmFja2luZydcbn07XG5jb25zdCB2ZWN0b3IzID0gbmV3IFZlY3RvcjMoKTtcbmNvbnN0IG1hdHJpeDQgPSBuZXcgTWF0cml4NCgpO1xuY29uc3QgaGl0UG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuY29uc3QgY2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCAxLCAwLjEsIDEwMCk7XG5leHBvcnQgY2xhc3MgQVJSZW5kZXJlciBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5wbGFjZU9uV2FsbCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBsYWNlbWVudEJveCA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdFRpY2sgPSBudWxsO1xuICAgICAgICB0aGlzLnR1cm50YWJsZVJvdGF0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5vbGRTaGFkb3dJbnRlbnNpdHkgPSBudWxsO1xuICAgICAgICB0aGlzLmZyYW1lID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbml0aWFsSGl0U291cmNlID0gbnVsbDtcbiAgICAgICAgdGhpcy50cmFuc2llbnRIaXRUZXN0U291cmNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbnB1dFNvdXJjZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ByZXNlbnRlZFNjZW5lID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXNvbHZlQ2xlYW51cCA9IG51bGw7XG4gICAgICAgIHRoaXMuZXhpdFdlYlhSQnV0dG9uQ29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gbnVsbDtcbiAgICAgICAgdGhpcy54ckxpZ2h0ID0gbnVsbDtcbiAgICAgICAgdGhpcy50cmFja2luZyA9IHRydWU7XG4gICAgICAgIHRoaXMuZnJhbWVzID0gMDtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9sZFRhcmdldCA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIHRoaXMucGxhY2VtZW50Q29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1RyYW5zbGF0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNSb3RhdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzVHdvRmluZ2VyaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGFzdERyYWdQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIHRoaXMuZmlyc3RSYXRpbyA9IDA7XG4gICAgICAgIHRoaXMubGFzdEFuZ2xlID0gMDtcbiAgICAgICAgdGhpcy5nb2FsUG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB0aGlzLmdvYWxZYXcgPSAwO1xuICAgICAgICB0aGlzLmdvYWxTY2FsZSA9IDE7XG4gICAgICAgIHRoaXMueERhbXBlciA9IG5ldyBEYW1wZXIoKTtcbiAgICAgICAgdGhpcy55RGFtcGVyID0gbmV3IERhbXBlcigpO1xuICAgICAgICB0aGlzLnpEYW1wZXIgPSBuZXcgRGFtcGVyKCk7XG4gICAgICAgIHRoaXMueWF3RGFtcGVyID0gbmV3IERhbXBlcigpO1xuICAgICAgICB0aGlzLnNjYWxlRGFtcGVyID0gbmV3IERhbXBlcigpO1xuICAgICAgICB0aGlzLm9uRXhpdFdlYlhSQnV0dG9uQ29udGFpbmVyQ2xpY2sgPSAoKSA9PiB0aGlzLnN0b3BQcmVzZW50aW5nKCk7XG4gICAgICAgIHRoaXMub25VcGRhdGVTY2VuZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlbWVudEJveCAhPSBudWxsICYmIHRoaXMuaXNQcmVzZW50aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGFjZW1lbnRCb3guZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGxhY2VtZW50Qm94ID0gbmV3IFBsYWNlbWVudEJveCh0aGlzLnByZXNlbnRlZFNjZW5lLCB0aGlzLnBsYWNlT25XYWxsID8gJ2JhY2snIDogJ2JvdHRvbScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU2VsZWN0U3RhcnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhpdFNvdXJjZSA9IHRoaXMudHJhbnNpZW50SGl0VGVzdFNvdXJjZTtcbiAgICAgICAgICAgIGlmIChoaXRTb3VyY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpbmdlcnMgPSB0aGlzLmZyYW1lLmdldEhpdFRlc3RSZXN1bHRzRm9yVHJhbnNpZW50SW5wdXQoaGl0U291cmNlKTtcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5wcmVzZW50ZWRTY2VuZTtcbiAgICAgICAgICAgIGNvbnN0IGJveCA9IHRoaXMucGxhY2VtZW50Qm94O1xuICAgICAgICAgICAgaWYgKGZpbmdlcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFNvdXJjZSA9IGV2ZW50LmlucHV0U291cmNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYXhlcyB9ID0gdGhpcy5pbnB1dFNvdXJjZS5nYW1lcGFkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhpdFBvc2l0aW9uID0gYm94LmdldEhpdCh0aGlzLnByZXNlbnRlZFNjZW5lLCBheGVzWzBdLCBheGVzWzFdKTtcbiAgICAgICAgICAgICAgICBib3guc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGhpdFBvc2l0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1RyYW5zbGF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0RHJhZ1Bvc2l0aW9uLmNvcHkoaGl0UG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnBsYWNlT25XYWxsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUm90YXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RBbmdsZSA9IGF4ZXNbMF0gKiBST1RBVElPTl9SQVRFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZpbmdlcnMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgYm94LnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNUd29GaW5nZXJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VwYXJhdGlvbiB9ID0gdGhpcy5maW5nZXJQb2xhcihmaW5nZXJzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmF0aW8gPSBzZXBhcmF0aW9uIC8gc2NlbmUuc2NhbGUueDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblNlbGVjdEVuZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNUcmFuc2xhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc1JvdGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlzVHdvRmluZ2VyaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlucHV0U291cmNlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZ29hbFBvc2l0aW9uLnkgKz1cbiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlbWVudEJveC5vZmZzZXRIZWlnaHQgKiB0aGlzLnByZXNlbnRlZFNjZW5lLnNjYWxlLng7XG4gICAgICAgICAgICB0aGlzLnBsYWNlbWVudEJveC5zaG93ID0gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGhyZWVSZW5kZXJlciA9IHJlbmRlcmVyLnRocmVlUmVuZGVyZXI7XG4gICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci54ci5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgcmVzb2x2ZUFSU2Vzc2lvbigpIHtcbiAgICAgICAgYXNzZXJ0SXNBckNhbmRpZGF0ZSgpO1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgbmF2aWdhdG9yLnhyLnJlcXVlc3RTZXNzaW9uKCdpbW1lcnNpdmUtYXInLCB7XG4gICAgICAgICAgICByZXF1aXJlZEZlYXR1cmVzOiBbJ2hpdC10ZXN0J10sXG4gICAgICAgICAgICBvcHRpb25hbEZlYXR1cmVzOiBbJ2RvbS1vdmVybGF5JywgJ2xpZ2h0LWVzdGltYXRpb24nXSxcbiAgICAgICAgICAgIGRvbU92ZXJsYXk6IHRoaXMub3ZlcmxheSA/IHsgcm9vdDogdGhpcy5vdmVybGF5IH0gOiB1bmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci54ci5zZXRSZWZlcmVuY2VTcGFjZVR5cGUoJ2xvY2FsJyk7XG4gICAgICAgIGF3YWl0IHRoaXMudGhyZWVSZW5kZXJlci54ci5zZXRTZXNzaW9uKHNlc3Npb24pO1xuICAgICAgICB0aGlzLnRocmVlUmVuZGVyZXIueHIuY2FtZXJhQXV0b1VwZGF0ZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnRseSBwcmVzZW50ZWQgc2NlbmUsIGlmIGFueVxuICAgICAqL1xuICAgIGdldCBwcmVzZW50ZWRTY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXNlbnRlZFNjZW5lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNvbHZlcyB0byB0cnVlIGlmIHRoZSByZW5kZXJlciBoYXMgZGV0ZWN0ZWQgYWxsIHRoZSBuZWNlc3NhcnkgcXVhbGl0aWVzXG4gICAgICogdG8gc3VwcG9ydCBwcmVzZW50YXRpb24gaW4gQVIuXG4gICAgICovXG4gICAgYXN5bmMgc3VwcG9ydHNQcmVzZW50YXRpb24oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhc3NlcnRJc0FyQ2FuZGlkYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbmF2aWdhdG9yLnhyLmlzU2Vzc2lvblN1cHBvcnRlZCgnaW1tZXJzaXZlLWFyJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1JlcXVlc3QgdG8gcHJlc2VudCBpbiBXZWJYUiBkZW5pZWQ6Jyk7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWxsaW5nIGJhY2sgdG8gbmV4dCBhci1tb2RlJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlc2VudCBhIHNjZW5lIGluIEFSXG4gICAgICovXG4gICAgYXN5bmMgcHJlc2VudChzY2VuZSwgZW52aXJvbm1lbnRFc3RpbWF0aW9uID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmVzZW50aW5nKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Nhbm5vdCBwcmVzZW50IHdoaWxlIGEgbW9kZWwgaXMgYWxyZWFkeSBwcmVzZW50aW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdhaXRGb3JBbmltYXRpb25GcmFtZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCBfcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNjZW5lLnNldEhvdHNwb3RzVmlzaWJpbGl0eShmYWxzZSk7XG4gICAgICAgIHNjZW5lLnF1ZXVlUmVuZGVyKCk7XG4gICAgICAgIC8vIFJlbmRlciBhIGZyYW1lIHRvIHR1cm4gb2ZmIHRoZSBob3RzcG90c1xuICAgICAgICBhd2FpdCB3YWl0Rm9yQW5pbWF0aW9uRnJhbWU7XG4gICAgICAgIC8vIFRoaXMgc2V0cyBpc1ByZXNlbnRpbmcgdG8gdHJ1ZVxuICAgICAgICB0aGlzLl9wcmVzZW50ZWRTY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBzY2VuZS5lbGVtZW50LnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignZGl2LmRlZmF1bHQnKTtcbiAgICAgICAgaWYgKGVudmlyb25tZW50RXN0aW1hdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy54ckxpZ2h0ID0gbmV3IFhSRXN0aW1hdGVkTGlnaHQodGhpcy50aHJlZVJlbmRlcmVyKTtcbiAgICAgICAgICAgIHRoaXMueHJMaWdodC5hZGRFdmVudExpc3RlbmVyKCdlc3RpbWF0aW9uc3RhcnQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJlc2VudGluZyB8fCB0aGlzLnhyTGlnaHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5wcmVzZW50ZWRTY2VuZTtcbiAgICAgICAgICAgICAgICBzY2VuZS5hZGQodGhpcy54ckxpZ2h0KTtcbiAgICAgICAgICAgICAgICBzY2VuZS5lbnZpcm9ubWVudCA9IHRoaXMueHJMaWdodC5lbnZpcm9ubWVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gYXdhaXQgdGhpcy5yZXNvbHZlQVJTZXNzaW9uKCk7XG4gICAgICAgIGN1cnJlbnRTZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucG9zdFNlc3Npb25DbGVhbnVwKCk7XG4gICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgY29uc3QgZXhpdEJ1dHRvbiA9IHNjZW5lLmVsZW1lbnQuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuc2xvdC5leGl0LXdlYnhyLWFyLWJ1dHRvbicpO1xuICAgICAgICBleGl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VuYWJsZWQnKTtcbiAgICAgICAgZXhpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25FeGl0V2ViWFJCdXR0b25Db250YWluZXJDbGljayk7XG4gICAgICAgIHRoaXMuZXhpdFdlYlhSQnV0dG9uQ29udGFpbmVyID0gZXhpdEJ1dHRvbjtcbiAgICAgICAgY29uc3Qgdmlld2VyUmVmU3BhY2UgPSBhd2FpdCBjdXJyZW50U2Vzc2lvbi5yZXF1ZXN0UmVmZXJlbmNlU3BhY2UoJ3ZpZXdlcicpO1xuICAgICAgICB0aGlzLnRyYWNraW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5mcmFtZXMgPSAwO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudHVybnRhYmxlUm90YXRpb24gPSBzY2VuZS55YXc7XG4gICAgICAgIHRoaXMuZ29hbFlhdyA9IHNjZW5lLnlhdztcbiAgICAgICAgdGhpcy5nb2FsU2NhbGUgPSAxO1xuICAgICAgICBzY2VuZS5iYWNrZ3JvdW5kID0gbnVsbDtcbiAgICAgICAgdGhpcy5vbGRTaGFkb3dJbnRlbnNpdHkgPSBzY2VuZS5zaGFkb3dJbnRlbnNpdHk7XG4gICAgICAgIHNjZW5lLnNldFNoYWRvd0ludGVuc2l0eSgwLjAxKTsgLy8gaW52aXNpYmxlLCBidXQgbm90IGNoYW5naW5nIHRoZSBzaGFkZXJcbiAgICAgICAgdGhpcy5vbGRUYXJnZXQuY29weShzY2VuZS5nZXRUYXJnZXQoKSk7XG4gICAgICAgIHNjZW5lLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMub25VcGRhdGVTY2VuZSk7XG4gICAgICAgIGNvbnN0IHJhZGlhbnMgPSBISVRfQU5HTEVfREVHICogTWF0aC5QSSAvIDE4MDtcbiAgICAgICAgY29uc3QgcmF5ID0gdGhpcy5wbGFjZU9uV2FsbCA9PT0gdHJ1ZSA/XG4gICAgICAgICAgICB1bmRlZmluZWQgOlxuICAgICAgICAgICAgbmV3IFhSUmF5KG5ldyBET01Qb2ludCgwLCAwLCAwKSwgeyB4OiAwLCB5OiAtTWF0aC5zaW4ocmFkaWFucyksIHo6IC1NYXRoLmNvcyhyYWRpYW5zKSB9KTtcbiAgICAgICAgY3VycmVudFNlc3Npb25cbiAgICAgICAgICAgIC5yZXF1ZXN0SGl0VGVzdFNvdXJjZSh7IHNwYWNlOiB2aWV3ZXJSZWZTcGFjZSwgb2Zmc2V0UmF5OiByYXkgfSkudGhlbihoaXRUZXN0U291cmNlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbEhpdFNvdXJjZSA9IGhpdFRlc3RTb3VyY2U7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uID0gY3VycmVudFNlc3Npb247XG4gICAgICAgIHRoaXMucGxhY2VtZW50Qm94ID1cbiAgICAgICAgICAgIG5ldyBQbGFjZW1lbnRCb3goc2NlbmUsIHRoaXMucGxhY2VPbldhbGwgPyAnYmFjaycgOiAnYm90dG9tJyk7XG4gICAgICAgIHRoaXMucGxhY2VtZW50Q29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXN0VGljayA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAnc3RhdHVzJywgc3RhdHVzOiBBUlN0YXR1cy5TRVNTSU9OX1NUQVJURUQgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIGN1cnJlbnRseSBwcmVzZW50aW5nIGEgc2NlbmUgaW4gQVIsIHN0b3BzIHByZXNlbnRhdGlvbiBhbmQgZXhpdHMgQVIuXG4gICAgICovXG4gICAgYXN5bmMgc3RvcFByZXNlbnRpbmcoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1ByZXNlbnRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGVhbnVwUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVDbGVhbnVwID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN1cnJlbnRTZXNzaW9uLmVuZCgpO1xuICAgICAgICAgICAgYXdhaXQgY2xlYW51cFByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHdoaWxlIHRyeWluZyB0byBlbmQgV2ViWFIgQVIgc2Vzc2lvbicpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMucG9zdFNlc3Npb25DbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiBhIHNjZW5lIGlzIGN1cnJlbnRseSBpbiB0aGUgcHJvY2VzcyBvZiBiZWluZyBwcmVzZW50ZWQgaW4gQVJcbiAgICAgKi9cbiAgICBnZXQgaXNQcmVzZW50aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVzZW50ZWRTY2VuZSAhPSBudWxsO1xuICAgIH1cbiAgICBnZXQgdGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRUYXJnZXQ7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCgpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLnByZXNlbnRlZFNjZW5lO1xuICAgICAgICBpZiAoc2NlbmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gc2NlbmUuZ2V0VGFyZ2V0KCk7XG4gICAgICAgICAgICB0aGlzLm9sZFRhcmdldC5jb3B5KHRhcmdldCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wbGFjZU9uV2FsbCkge1xuICAgICAgICAgICAgICAgIC8vIE1vdmUgdGhlIHNjZW5lJ3MgdGFyZ2V0IHRvIHRoZSBjZW50ZXIgb2YgdGhlIGJhY2sgb2YgdGhlIG1vZGVsJ3NcbiAgICAgICAgICAgICAgICAvLyBib3VuZGluZyBib3guXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnogPSBzY2VuZS5ib3VuZGluZ0JveC5taW4uejtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE1vdmUgdGhlIHNjZW5lJ3MgdGFyZ2V0IHRvIHRoZSBtb2RlbCdzIGZsb29yIGhlaWdodC5cbiAgICAgICAgICAgICAgICB0YXJnZXQueSA9IHNjZW5lLmJvdW5kaW5nQm94Lm1pbi55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2NlbmUuc2V0VGFyZ2V0KHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnopO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBvc3RTZXNzaW9uQ2xlYW51cCgpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuY3VycmVudFNlc3Npb247XG4gICAgICAgIGlmIChzZXNzaW9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNlc3Npb24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCB0aGlzLm9uU2VsZWN0U3RhcnQpO1xuICAgICAgICAgICAgc2Vzc2lvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3RlbmQnLCB0aGlzLm9uU2VsZWN0RW5kKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlc3Npb24gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5wcmVzZW50ZWRTY2VuZTtcbiAgICAgICAgdGhpcy5fcHJlc2VudGVkU2NlbmUgPSBudWxsO1xuICAgICAgICBpZiAoc2NlbmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgeyBlbGVtZW50IH0gPSBzY2VuZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnhyTGlnaHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNjZW5lLnJlbW92ZSh0aGlzLnhyTGlnaHQpO1xuICAgICAgICAgICAgICAgIHRoaXMueHJMaWdodC5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy54ckxpZ2h0ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjZW5lLnBvc2l0aW9uLnNldCgwLCAwLCAwKTtcbiAgICAgICAgICAgIHNjZW5lLnNjYWxlLnNldCgxLCAxLCAxKTtcbiAgICAgICAgICAgIHNjZW5lLnNldFNoYWRvd09mZnNldCgwKTtcbiAgICAgICAgICAgIGNvbnN0IHlhdyA9IHRoaXMudHVybnRhYmxlUm90YXRpb247XG4gICAgICAgICAgICBpZiAoeWF3ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzY2VuZS55YXcgPSB5YXc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnRlbnNpdHkgPSB0aGlzLm9sZFNoYWRvd0ludGVuc2l0eTtcbiAgICAgICAgICAgIGlmIChpbnRlbnNpdHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNjZW5lLnNldFNoYWRvd0ludGVuc2l0eShpbnRlbnNpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2NlbmUuc2V0RW52aXJvbm1lbnRBbmRTa3lib3goZWxlbWVudFskY3VycmVudEVudmlyb25tZW50TWFwXSwgZWxlbWVudFskY3VycmVudEJhY2tncm91bmRdKTtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gdGhpcy5vbGRUYXJnZXQ7XG4gICAgICAgICAgICBzY2VuZS5zZXRUYXJnZXQocG9pbnQueCwgcG9pbnQueSwgcG9pbnQueik7XG4gICAgICAgICAgICBzY2VuZS54ckNhbWVyYSA9IG51bGw7XG4gICAgICAgICAgICBzY2VuZS5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLm9uVXBkYXRlU2NlbmUpO1xuICAgICAgICAgICAgc2NlbmUub3JpZW50SG90c3BvdHMoMCk7XG4gICAgICAgICAgICBlbGVtZW50LnJlcXVlc3RVcGRhdGUoJ2NhbWVyYVRhcmdldCcpO1xuICAgICAgICAgICAgZWxlbWVudC5yZXF1ZXN0VXBkYXRlKCdtYXhDYW1lcmFPcmJpdCcpO1xuICAgICAgICAgICAgZWxlbWVudFskb25SZXNpemVdKGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZvcmNlIHRoZSBSZW5kZXJlciB0byB1cGRhdGUgaXRzIHNpemVcbiAgICAgICAgdGhpcy5yZW5kZXJlci5oZWlnaHQgPSAwO1xuICAgICAgICBjb25zdCBleGl0QnV0dG9uID0gdGhpcy5leGl0V2ViWFJCdXR0b25Db250YWluZXI7XG4gICAgICAgIGlmIChleGl0QnV0dG9uICE9IG51bGwpIHtcbiAgICAgICAgICAgIGV4aXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnZW5hYmxlZCcpO1xuICAgICAgICAgICAgZXhpdEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25FeGl0V2ViWFJCdXR0b25Db250YWluZXJDbGljayk7XG4gICAgICAgICAgICB0aGlzLmV4aXRXZWJYUkJ1dHRvbkNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGl0U291cmNlID0gdGhpcy50cmFuc2llbnRIaXRUZXN0U291cmNlO1xuICAgICAgICBpZiAoaGl0U291cmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGhpdFNvdXJjZS5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNpZW50SGl0VGVzdFNvdXJjZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGl0U291cmNlSW5pdGlhbCA9IHRoaXMuaW5pdGlhbEhpdFNvdXJjZTtcbiAgICAgICAgaWYgKGhpdFNvdXJjZUluaXRpYWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgaGl0U291cmNlSW5pdGlhbC5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbEhpdFNvdXJjZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGxhY2VtZW50Qm94ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucGxhY2VtZW50Qm94LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucGxhY2VtZW50Qm94ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RUaWNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50dXJudGFibGVSb3RhdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMub2xkU2hhZG93SW50ZW5zaXR5ID0gbnVsbDtcbiAgICAgICAgdGhpcy5mcmFtZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5wdXRTb3VyY2UgPSBudWxsO1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5yZXNvbHZlQ2xlYW51cCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVDbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHsgdHlwZTogJ3N0YXR1cycsIHN0YXR1czogQVJTdGF0dXMuTk9UX1BSRVNFTlRJTkcgfSk7XG4gICAgfVxuICAgIHVwZGF0ZVZpZXcodmlldykge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMucHJlc2VudGVkU2NlbmU7XG4gICAgICAgIGNvbnN0IHhyID0gdGhpcy50aHJlZVJlbmRlcmVyLnhyO1xuICAgICAgICB4ci51cGRhdGVDYW1lcmEoY2FtZXJhKTtcbiAgICAgICAgc2NlbmUueHJDYW1lcmEgPSB4ci5nZXRDYW1lcmEoKTtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50cyB9ID0gc2NlbmUuZ2V0Q2FtZXJhKCkubWF0cml4V29ybGQ7XG4gICAgICAgIHNjZW5lLm9yaWVudEhvdHNwb3RzKE1hdGguYXRhbjIoZWxlbWVudHNbMV0sIGVsZW1lbnRzWzVdKSk7XG4gICAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5wbGFjZUluaXRpYWxseSgpO1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXNlIGF1dG9tYXRpYyBkeW5hbWljIHZpZXdwb3J0IHNjYWxpbmcgaWYgc3VwcG9ydGVkLlxuICAgICAgICBpZiAodmlldy5yZXF1ZXN0Vmlld3BvcnRTY2FsZSAmJiB2aWV3LnJlY29tbWVuZGVkVmlld3BvcnRTY2FsZSkge1xuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSB2aWV3LnJlY29tbWVuZGVkVmlld3BvcnRTY2FsZTtcbiAgICAgICAgICAgIHZpZXcucmVxdWVzdFZpZXdwb3J0U2NhbGUoTWF0aC5tYXgoc2NhbGUsIE1JTl9WSUVXUE9SVF9TQ0FMRSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5jdXJyZW50U2Vzc2lvbi5yZW5kZXJTdGF0ZS5iYXNlTGF5ZXI7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gbGF5ZXIuZ2V0Vmlld3BvcnQodmlldyk7XG4gICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci5zZXRWaWV3cG9ydCh2aWV3cG9ydC54LCB2aWV3cG9ydC55LCB2aWV3cG9ydC53aWR0aCwgdmlld3BvcnQuaGVpZ2h0KTtcbiAgICB9XG4gICAgcGxhY2VJbml0aWFsbHkoKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5wcmVzZW50ZWRTY2VuZTtcbiAgICAgICAgY29uc3QgeyBwb3NpdGlvbiwgZWxlbWVudCB9ID0gc2NlbmU7XG4gICAgICAgIGNvbnN0IHhyQ2FtZXJhID0gc2NlbmUuZ2V0Q2FtZXJhKCk7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5vdmVybGF5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBzY2VuZS5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB4ckNhbWVyYS5wcm9qZWN0aW9uTWF0cml4SW52ZXJzZS5jb3B5KHhyQ2FtZXJhLnByb2plY3Rpb25NYXRyaXgpLmludmVydCgpO1xuICAgICAgICBjb25zdCB7IHRoZXRhLCByYWRpdXMgfSA9IGVsZW1lbnRcbiAgICAgICAgICAgIC5nZXRDYW1lcmFPcmJpdCgpO1xuICAgICAgICAvLyBPcmllbnQgbW9kZWwgdG8gbWF0Y2ggdGhlIDNEIGNhbWVyYSB2aWV3XG4gICAgICAgIGNvbnN0IGNhbWVyYURpcmVjdGlvbiA9IHhyQ2FtZXJhLmdldFdvcmxkRGlyZWN0aW9uKHZlY3RvcjMpO1xuICAgICAgICBzY2VuZS55YXcgPSBNYXRoLmF0YW4yKC1jYW1lcmFEaXJlY3Rpb24ueCwgLWNhbWVyYURpcmVjdGlvbi56KSAtIHRoZXRhO1xuICAgICAgICB0aGlzLmdvYWxZYXcgPSBzY2VuZS55YXc7XG4gICAgICAgIHBvc2l0aW9uLmNvcHkoeHJDYW1lcmEucG9zaXRpb24pXG4gICAgICAgICAgICAuYWRkKGNhbWVyYURpcmVjdGlvbi5tdWx0aXBseVNjYWxhcihyYWRpdXMpKTtcbiAgICAgICAgdGhpcy51cGRhdGVUYXJnZXQoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gc2NlbmUuZ2V0VGFyZ2V0KCk7XG4gICAgICAgIHBvc2l0aW9uLmFkZCh0YXJnZXQpLnN1Yih0aGlzLm9sZFRhcmdldCk7XG4gICAgICAgIHRoaXMuZ29hbFBvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuICAgICAgICBzY2VuZS5zZXRIb3RzcG90c1Zpc2liaWxpdHkodHJ1ZSk7XG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvbiB9ID0gdGhpcy5mcmFtZTtcbiAgICAgICAgc2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RzdGFydCcsIHRoaXMub25TZWxlY3RTdGFydCk7XG4gICAgICAgIHNlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0ZW5kJywgdGhpcy5vblNlbGVjdEVuZCk7XG4gICAgICAgIHNlc3Npb25cbiAgICAgICAgICAgIC5yZXF1ZXN0SGl0VGVzdFNvdXJjZUZvclRyYW5zaWVudElucHV0KHsgcHJvZmlsZTogJ2dlbmVyaWMtdG91Y2hzY3JlZW4nIH0pLnRoZW4oaGl0VGVzdFNvdXJjZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaWVudEhpdFRlc3RTb3VyY2UgPSBoaXRUZXN0U291cmNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0VG91Y2hMb2NhdGlvbigpIHtcbiAgICAgICAgY29uc3QgeyBheGVzIH0gPSB0aGlzLmlucHV0U291cmNlLmdhbWVwYWQ7XG4gICAgICAgIGxldCBsb2NhdGlvbiA9IHRoaXMucGxhY2VtZW50Qm94LmdldEV4cGFuZGVkSGl0KHRoaXMucHJlc2VudGVkU2NlbmUsIGF4ZXNbMF0sIGF4ZXNbMV0pO1xuICAgICAgICBpZiAobG9jYXRpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgdmVjdG9yMy5jb3B5KGxvY2F0aW9uKS5zdWIodGhpcy5wcmVzZW50ZWRTY2VuZS5nZXRDYW1lcmEoKS5wb3NpdGlvbik7XG4gICAgICAgICAgICBpZiAodmVjdG9yMy5sZW5ndGgoKSA+IE1BWF9ESVNUQU5DRSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9jYXRpb247XG4gICAgfVxuICAgIGdldEhpdFBvaW50KGhpdFJlc3VsdCkge1xuICAgICAgICBjb25zdCByZWZTcGFjZSA9IHRoaXMudGhyZWVSZW5kZXJlci54ci5nZXRSZWZlcmVuY2VTcGFjZSgpO1xuICAgICAgICBjb25zdCBwb3NlID0gaGl0UmVzdWx0LmdldFBvc2UocmVmU3BhY2UpO1xuICAgICAgICBpZiAocG9zZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoaXRNYXRyaXggPSBtYXRyaXg0LmZyb21BcnJheShwb3NlLnRyYW5zZm9ybS5tYXRyaXgpO1xuICAgICAgICBpZiAodGhpcy5wbGFjZU9uV2FsbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gT3JpZW50IHRoZSBtb2RlbCB0byB0aGUgd2FsbCdzIG5vcm1hbCB2ZWN0b3IuXG4gICAgICAgICAgICB0aGlzLmdvYWxZYXcgPSBNYXRoLmF0YW4yKGhpdE1hdHJpeC5lbGVtZW50c1s0XSwgaGl0TWF0cml4LmVsZW1lbnRzWzZdKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIG5vcm1hbCBpcyBsYXJnZSBlbm91Z2ggdGhhdCB0aGUgbm9ybWFsXG4gICAgICAgIC8vIGlzIHBvaW50aW5nIHVwIGZvciBmbG9vciBwbGFjZW1lbnQ7IG9wcG9zaXRlIGZvciB3YWxsIHBsYWNlbWVudC5cbiAgICAgICAgcmV0dXJuIGhpdE1hdHJpeC5lbGVtZW50c1s1XSA+IDAuNzUgIT09IHRoaXMucGxhY2VPbldhbGwgP1xuICAgICAgICAgICAgaGl0UG9zaXRpb24uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGhpdE1hdHJpeCkgOlxuICAgICAgICAgICAgbnVsbDtcbiAgICB9XG4gICAgbW92ZVRvRmxvb3IoZnJhbWUpIHtcbiAgICAgICAgY29uc3QgaGl0U291cmNlID0gdGhpcy5pbml0aWFsSGl0U291cmNlO1xuICAgICAgICBpZiAoaGl0U291cmNlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoaXRUZXN0UmVzdWx0cyA9IGZyYW1lLmdldEhpdFRlc3RSZXN1bHRzKGhpdFNvdXJjZSk7XG4gICAgICAgIGlmIChoaXRUZXN0UmVzdWx0cy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhpdCA9IGhpdFRlc3RSZXN1bHRzWzBdO1xuICAgICAgICBjb25zdCBoaXRQb2ludCA9IHRoaXMuZ2V0SGl0UG9pbnQoaGl0KTtcbiAgICAgICAgaWYgKGhpdFBvaW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsYWNlbWVudEJveC5zaG93ID0gdHJ1ZTtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgdHJhbnNsYXRpbmcsIGxldCB0aGUgZmluZ2VyIGhpdC1yYXkgdGFrZSBwcmVjZWRlbmNlIGFuZFxuICAgICAgICAvLyBpZ25vcmUgdGhpcyBoaXQgcmVzdWx0LlxuICAgICAgICBpZiAoIXRoaXMuaXNUcmFuc2xhdGluZykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGxhY2VPbldhbGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdvYWxQb3NpdGlvbi5jb3B5KGhpdFBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZ29hbFBvc2l0aW9uLnkgPSBoaXRQb2ludC55O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGhpdFNvdXJjZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsSGl0U291cmNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHsgdHlwZTogJ3N0YXR1cycsIHN0YXR1czogQVJTdGF0dXMuT0JKRUNUX1BMQUNFRCB9KTtcbiAgICB9XG4gICAgZmluZ2VyUG9sYXIoZmluZ2Vycykge1xuICAgICAgICBjb25zdCBmaW5nZXJPbmUgPSBmaW5nZXJzWzBdLmlucHV0U291cmNlLmdhbWVwYWQuYXhlcztcbiAgICAgICAgY29uc3QgZmluZ2VyVHdvID0gZmluZ2Vyc1sxXS5pbnB1dFNvdXJjZS5nYW1lcGFkLmF4ZXM7XG4gICAgICAgIGNvbnN0IGRlbHRhWCA9IGZpbmdlclR3b1swXSAtIGZpbmdlck9uZVswXTtcbiAgICAgICAgY29uc3QgZGVsdGFZID0gZmluZ2VyVHdvWzFdIC0gZmluZ2VyT25lWzFdO1xuICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoZGVsdGFZLCBkZWx0YVgpO1xuICAgICAgICBsZXQgZGVsdGFZYXcgPSB0aGlzLmxhc3RBbmdsZSAtIGFuZ2xlO1xuICAgICAgICBpZiAoZGVsdGFZYXcgPiBNYXRoLlBJKSB7XG4gICAgICAgICAgICBkZWx0YVlhdyAtPSAyICogTWF0aC5QSTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZWx0YVlhdyA8IC1NYXRoLlBJKSB7XG4gICAgICAgICAgICBkZWx0YVlhdyArPSAyICogTWF0aC5QSTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RBbmdsZSA9IGFuZ2xlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2VwYXJhdGlvbjogTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSksXG4gICAgICAgICAgICBkZWx0YVlhdzogZGVsdGFZYXdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJvY2Vzc0lucHV0KGZyYW1lKSB7XG4gICAgICAgIGNvbnN0IGhpdFNvdXJjZSA9IHRoaXMudHJhbnNpZW50SGl0VGVzdFNvdXJjZTtcbiAgICAgICAgaWYgKGhpdFNvdXJjZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzVHJhbnNsYXRpbmcgJiYgIXRoaXMuaXNUd29GaW5nZXJpbmcgJiYgIXRoaXMuaXNSb3RhdGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbmdlcnMgPSBmcmFtZS5nZXRIaXRUZXN0UmVzdWx0c0ZvclRyYW5zaWVudElucHV0KGhpdFNvdXJjZSk7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5wcmVzZW50ZWRTY2VuZTtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBzY2VuZS5zY2FsZS54O1xuICAgICAgICAvLyBSb3RhdGluZywgdHJhbnNsYXRpbmcgYW5kIHNjYWxpbmcgYXJlIG11dHVhbGx5IGV4Y2x1c2l2ZSBvcGVyYXRpb25zOyBvbmx5XG4gICAgICAgIC8vIG9uZSBjYW4gaGFwcGVuIGF0IGEgdGltZSwgYnV0IHdlIGNhbiBzd2l0Y2ggZHVyaW5nIGEgZ2VzdHVyZS5cbiAgICAgICAgaWYgKHRoaXMuaXNUd29GaW5nZXJpbmcpIHtcbiAgICAgICAgICAgIGlmIChmaW5nZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBsb3NlIHRoZSBzZWNvbmQgZmluZ2VyLCBzdG9wIHNjYWxpbmcgKGluIGZhY3QsIHN0b3AgcHJvY2Vzc2luZ1xuICAgICAgICAgICAgICAgIC8vIGlucHV0IGFsdG9nZXRoZXIgdW50aWwgYSBuZXcgZ2VzdHVyZSBzdGFydHMpLlxuICAgICAgICAgICAgICAgIHRoaXMuaXNUd29GaW5nZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc2VwYXJhdGlvbiwgZGVsdGFZYXcgfSA9IHRoaXMuZmluZ2VyUG9sYXIoZmluZ2Vycyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGxhY2VPbldhbGwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ29hbFlhdyArPSBkZWx0YVlhdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNjZW5lLmNhblNjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gc2VwYXJhdGlvbiAvIHRoaXMuZmlyc3RSYXRpbztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nb2FsU2NhbGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgKHNjYWxlIDwgU0NBTEVfU05BUF9ISUdIICYmIHNjYWxlID4gU0NBTEVfU05BUF9MT1cpID8gMSA6IHNjYWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaW5nZXJzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgLy8gSWYgd2Ugd2VyZSByb3RhdGluZyBvciB0cmFuc2xhdGluZyBhbmQgd2UgZ2V0IGEgc2Vjb25kIGZpbmdlciwgc3dpdGNoXG4gICAgICAgICAgICAvLyB0byBzY2FsaW5nIGluc3RlYWQuXG4gICAgICAgICAgICB0aGlzLmlzVHJhbnNsYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaXNSb3RhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pc1R3b0ZpbmdlcmluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCB7IHNlcGFyYXRpb24gfSA9IHRoaXMuZmluZ2VyUG9sYXIoZmluZ2Vycyk7XG4gICAgICAgICAgICB0aGlzLmZpcnN0UmF0aW8gPSBzZXBhcmF0aW9uIC8gc2NhbGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNSb3RhdGluZykge1xuICAgICAgICAgICAgY29uc3QgYW5nbGUgPSB0aGlzLmlucHV0U291cmNlLmdhbWVwYWQuYXhlc1swXSAqIFJPVEFUSU9OX1JBVEU7XG4gICAgICAgICAgICB0aGlzLmdvYWxZYXcgKz0gYW5nbGUgLSB0aGlzLmxhc3RBbmdsZTtcbiAgICAgICAgICAgIHRoaXMubGFzdEFuZ2xlID0gYW5nbGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc1RyYW5zbGF0aW5nKSB7XG4gICAgICAgICAgICBmaW5nZXJzLmZvckVhY2goZmluZ2VyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmluZ2VyLmlucHV0U291cmNlICE9PSB0aGlzLmlucHV0U291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGhpdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmdlci5yZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaGl0ID0gdGhpcy5nZXRIaXRQb2ludChmaW5nZXIucmVzdWx0c1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChoaXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBoaXQgPSB0aGlzLmdldFRvdWNoTG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGhpdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5nb2FsUG9zaXRpb24uc3ViKHRoaXMubGFzdERyYWdQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGxhY2VPbldhbGwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGhpdC55IC0gdGhpcy5sYXN0RHJhZ1Bvc2l0aW9uLnk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gYSBsb3dlciBmbG9vciBpcyBmb3VuZCwga2VlcCB0aGUgbW9kZWwgYXQgdGhlIHNhbWUgaGVpZ2h0LCBidXRcbiAgICAgICAgICAgICAgICAgICAgLy8gZHJvcCB0aGUgcGxhY2VtZW50IGJveCB0byB0aGUgZmxvb3IuIFRoZSBtb2RlbCBmYWxscyBvbiBzZWxlY3QgZW5kLlxuICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZW1lbnRCb3gub2Zmc2V0SGVpZ2h0ID0gb2Zmc2V0IC8gc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXNlbnRlZFNjZW5lLnNldFNoYWRvd09mZnNldChvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW50ZXJwb2xhdGUgaGl0IHJheSB1cCB0byBkcmFnIHBsYW5lXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW1lcmFQb3NpdGlvbiA9IHZlY3RvcjMuY29weShzY2VuZS5nZXRDYW1lcmEoKS5wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHBoYSA9IC1vZmZzZXQgLyAoY2FtZXJhUG9zaXRpb24ueSAtIGhpdC55KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYVBvc2l0aW9uLm11bHRpcGx5U2NhbGFyKGFscGhhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdC5tdWx0aXBseVNjYWxhcigxIC0gYWxwaGEpLmFkZChjYW1lcmFQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5nb2FsUG9zaXRpb24uYWRkKGhpdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RHJhZ1Bvc2l0aW9uLmNvcHkoaGl0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1vdmVTY2VuZShkZWx0YSkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMucHJlc2VudGVkU2NlbmU7XG4gICAgICAgIGNvbnN0IHsgcG9zaXRpb24sIHlhdyB9ID0gc2NlbmU7XG4gICAgICAgIGNvbnN0IGJvdW5kaW5nUmFkaXVzID0gc2NlbmUuYm91bmRpbmdTcGhlcmUucmFkaXVzO1xuICAgICAgICBjb25zdCBnb2FsID0gdGhpcy5nb2FsUG9zaXRpb247XG4gICAgICAgIGNvbnN0IG9sZFNjYWxlID0gc2NlbmUuc2NhbGUueDtcbiAgICAgICAgY29uc3QgYm94ID0gdGhpcy5wbGFjZW1lbnRCb3g7XG4gICAgICAgIGlmICghZ29hbC5lcXVhbHMocG9zaXRpb24pIHx8IHRoaXMuZ29hbFNjYWxlICE9PSBvbGRTY2FsZSkge1xuICAgICAgICAgICAgbGV0IHsgeCwgeSwgeiB9ID0gcG9zaXRpb247XG4gICAgICAgICAgICB4ID0gdGhpcy54RGFtcGVyLnVwZGF0ZSh4LCBnb2FsLngsIGRlbHRhLCBib3VuZGluZ1JhZGl1cyk7XG4gICAgICAgICAgICB5ID0gdGhpcy55RGFtcGVyLnVwZGF0ZSh5LCBnb2FsLnksIGRlbHRhLCBib3VuZGluZ1JhZGl1cyk7XG4gICAgICAgICAgICB6ID0gdGhpcy56RGFtcGVyLnVwZGF0ZSh6LCBnb2FsLnosIGRlbHRhLCBib3VuZGluZ1JhZGl1cyk7XG4gICAgICAgICAgICBwb3NpdGlvbi5zZXQoeCwgeSwgeik7XG4gICAgICAgICAgICBjb25zdCBuZXdTY2FsZSA9IHRoaXMuc2NhbGVEYW1wZXIudXBkYXRlKG9sZFNjYWxlLCB0aGlzLmdvYWxTY2FsZSwgZGVsdGEsIDEpO1xuICAgICAgICAgICAgc2NlbmUuc2NhbGUuc2V0KG5ld1NjYWxlLCBuZXdTY2FsZSwgbmV3U2NhbGUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVHJhbnNsYXRpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBnb2FsLnkgLSB5O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlbWVudENvbXBsZXRlICYmIHRoaXMucGxhY2VPbldhbGwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJveC5vZmZzZXRIZWlnaHQgPSBvZmZzZXQgLyBuZXdTY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUuc2V0U2hhZG93T2Zmc2V0KG9mZnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9mZnNldCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlbWVudENvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYm94LnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUuc2V0U2hhZG93SW50ZW5zaXR5KEFSX1NIQURPV19JTlRFTlNJVFkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBib3gudXBkYXRlT3BhY2l0eShkZWx0YSk7XG4gICAgICAgIHNjZW5lLnVwZGF0ZVRhcmdldChkZWx0YSk7XG4gICAgICAgIC8vIHlhdyBtdXN0IGJlIHVwZGF0ZWQgbGFzdCwgc2luY2UgdGhpcyBhbHNvIHVwZGF0ZXMgdGhlIHNoYWRvdyBwb3NpdGlvbi5cbiAgICAgICAgc2NlbmUueWF3ID0gdGhpcy55YXdEYW1wZXIudXBkYXRlKHlhdywgdGhpcy5nb2FsWWF3LCBkZWx0YSwgTWF0aC5QSSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9ubHkgcHVibGljIHRvIG1ha2UgaXQgdGVzdGFibGUuXG4gICAgICovXG4gICAgb25XZWJYUkZyYW1lKHRpbWUsIGZyYW1lKSB7XG4gICAgICAgIHRoaXMuZnJhbWUgPSBmcmFtZTtcbiAgICAgICAgKyt0aGlzLmZyYW1lcztcbiAgICAgICAgY29uc3QgcmVmU3BhY2UgPSB0aGlzLnRocmVlUmVuZGVyZXIueHIuZ2V0UmVmZXJlbmNlU3BhY2UoKTtcbiAgICAgICAgY29uc3QgcG9zZSA9IGZyYW1lLmdldFZpZXdlclBvc2UocmVmU3BhY2UpO1xuICAgICAgICBpZiAocG9zZSA9PSBudWxsICYmIHRoaXMudHJhY2tpbmcgPT09IHRydWUgJiYgdGhpcy5mcmFtZXMgPiBJTklUX0ZSQU1FUykge1xuICAgICAgICAgICAgdGhpcy50cmFja2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHsgdHlwZTogJ3RyYWNraW5nJywgc3RhdHVzOiBBUlRyYWNraW5nLk5PVF9UUkFDS0lORyB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMucHJlc2VudGVkU2NlbmU7XG4gICAgICAgIGlmIChwb3NlID09IG51bGwgfHwgc2NlbmUgPT0gbnVsbCB8fCAhc2NlbmUuZWxlbWVudC5sb2FkZWQpIHtcbiAgICAgICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci5jbGVhcigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYWNraW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy50cmFja2luZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAndHJhY2tpbmcnLCBzdGF0dXM6IEFSVHJhY2tpbmcuVFJBQ0tJTkcgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2ViWFIgbWF5IHJldHVybiBtdWx0aXBsZSB2aWV3cywgaS5lLiBmb3IgaGVhZHNldCBBUi4gVGhpc1xuICAgICAgICAvLyBpc24ndCByZWFsbHkgc3VwcG9ydGVkIGF0IHRoaXMgcG9pbnQsIGJ1dCBtYWtlIGEgYmVzdC1lZmZvcnRcbiAgICAgICAgLy8gYXR0ZW1wdCB0byByZW5kZXIgb3RoZXIgdmlld3MgYWxzbywgdXNpbmcgdGhlIGZpcnN0IHZpZXdcbiAgICAgICAgLy8gYXMgdGhlIG1haW4gdmlld3BvaW50LlxuICAgICAgICBsZXQgaXNGaXJzdFZpZXcgPSB0cnVlO1xuICAgICAgICBmb3IgKGNvbnN0IHZpZXcgb2YgcG9zZS52aWV3cykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3KHZpZXcpO1xuICAgICAgICAgICAgaWYgKGlzRmlyc3RWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG9GbG9vcihmcmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzSW5wdXQoZnJhbWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gdGltZSAtIHRoaXMubGFzdFRpY2s7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlU2NlbmUoZGVsdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIucHJlUmVuZGVyKHNjZW5lLCB0aW1lLCBkZWx0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0VGljayA9IHRpbWU7XG4gICAgICAgICAgICAgICAgc2NlbmUucmVuZGVyU2hhZG93KHRoaXMudGhyZWVSZW5kZXJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRocmVlUmVuZGVyZXIucmVuZGVyKHNjZW5lLCBzY2VuZS5nZXRDYW1lcmEoKSk7XG4gICAgICAgICAgICBpc0ZpcnN0VmlldyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QVJSZW5kZXJlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/ARRenderer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/CachingGLTFLoader.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/CachingGLTFLoader.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $evictionPolicy: () => (/* binding */ $evictionPolicy),\n/* harmony export */   $loader: () => (/* binding */ $loader),\n/* harmony export */   CachingGLTFLoader: () => (/* binding */ CachingGLTFLoader),\n/* harmony export */   loadWithLoader: () => (/* binding */ loadWithLoader)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_loaders_DRACOLoader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three/examples/jsm/loaders/DRACOLoader.js */ \"(ssr)/./node_modules/three/examples/jsm/loaders/DRACOLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! three/examples/jsm/loaders/GLTFLoader.js */ \"(ssr)/./node_modules/three/examples/jsm/loaders/GLTFLoader.js\");\n/* harmony import */ var three_examples_jsm_loaders_KTX2Loader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/loaders/KTX2Loader.js */ \"(ssr)/./node_modules/three/examples/jsm/loaders/KTX2Loader.js\");\n/* harmony import */ var _utilities_cache_eviction_policy_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/cache-eviction-policy.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities/cache-eviction-policy.js\");\n/* harmony import */ var _gltf_instance_VariantMaterialLoaderPlugin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gltf-instance/VariantMaterialLoaderPlugin */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/VariantMaterialLoaderPlugin.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\n\n\n\n\n\n\n/**\n * A helper to Promise-ify a Three.js GLTFLoader\n */\nconst loadWithLoader = (url, loader, progressCallback = () => { }) => {\n    const onProgress = (event) => {\n        const fraction = event.loaded / event.total;\n        progressCallback(Math.max(0, Math.min(1, isFinite(fraction) ? fraction : 1)));\n    };\n    return new Promise((resolve, reject) => {\n        loader.load(url, resolve, onProgress, reject);\n    });\n};\n/** Helper to load a script tag. */\nconst fetchScript = (src) => {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        document.body.appendChild(script);\n        script.onload = resolve;\n        script.onerror = reject;\n        script.async = true;\n        script.src = src;\n    });\n};\nconst cache = new Map();\nconst preloaded = new Map();\nlet dracoDecoderLocation;\nconst dracoLoader = new three_examples_jsm_loaders_DRACOLoader_js__WEBPACK_IMPORTED_MODULE_2__.DRACOLoader();\nlet ktx2TranscoderLocation;\nconst ktx2Loader = new three_examples_jsm_loaders_KTX2Loader_js__WEBPACK_IMPORTED_MODULE_3__.KTX2Loader();\nlet meshoptDecoderLocation;\nlet meshoptDecoder;\nconst $loader = Symbol('loader');\nconst $evictionPolicy = Symbol('evictionPolicy');\nconst $GLTFInstance = Symbol('GLTFInstance');\nclass CachingGLTFLoader extends three__WEBPACK_IMPORTED_MODULE_4__.EventDispatcher {\n    constructor(GLTFInstance) {\n        super();\n        this[_b] = new three_examples_jsm_loaders_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_5__.GLTFLoader().register(parser => new _gltf_instance_VariantMaterialLoaderPlugin__WEBPACK_IMPORTED_MODULE_1__[\"default\"](parser));\n        this[$GLTFInstance] = GLTFInstance;\n        this[$loader].setDRACOLoader(dracoLoader);\n        this[$loader].setKTX2Loader(ktx2Loader);\n    }\n    static setDRACODecoderLocation(url) {\n        dracoDecoderLocation = url;\n        dracoLoader.setDecoderPath(url);\n    }\n    static getDRACODecoderLocation() {\n        return dracoDecoderLocation;\n    }\n    static setKTX2TranscoderLocation(url) {\n        ktx2TranscoderLocation = url;\n        ktx2Loader.setTranscoderPath(url);\n    }\n    static getKTX2TranscoderLocation() {\n        return ktx2TranscoderLocation;\n    }\n    static setMeshoptDecoderLocation(url) {\n        if (meshoptDecoderLocation !== url) {\n            meshoptDecoderLocation = url;\n            meshoptDecoder = fetchScript(url)\n                .then(() => MeshoptDecoder.ready)\n                .then(() => MeshoptDecoder);\n        }\n    }\n    static getMeshoptDecoderLocation() {\n        return meshoptDecoderLocation;\n    }\n    static initializeKTX2Loader(renderer) {\n        ktx2Loader.detectSupport(renderer);\n    }\n    static get cache() {\n        return cache;\n    }\n    /** @nocollapse */\n    static clearCache() {\n        cache.forEach((_value, url) => {\n            this.delete(url);\n        });\n        this[$evictionPolicy].reset();\n    }\n    static has(url) {\n        return cache.has(url);\n    }\n    /** @nocollapse */\n    static async delete(url) {\n        if (!this.has(url)) {\n            return;\n        }\n        const gltfLoads = cache.get(url);\n        preloaded.delete(url);\n        cache.delete(url);\n        const gltf = await gltfLoads;\n        // Dispose of the cached glTF's materials and geometries:\n        gltf.dispose();\n    }\n    /**\n     * Returns true if the model that corresponds to the specified url is\n     * available in our local cache.\n     */\n    static hasFinishedLoading(url) {\n        return !!preloaded.get(url);\n    }\n    get [(_a = $evictionPolicy, _b = $loader, $evictionPolicy)]() {\n        return this.constructor[$evictionPolicy];\n    }\n    /**\n     * Preloads a glTF, populating the cache. Returns a promise that resolves\n     * when the cache is populated.\n     */\n    async preload(url, element, progressCallback = () => { }) {\n        this[$loader].setWithCredentials(CachingGLTFLoader.withCredentials);\n        this.dispatchEvent({ type: 'preload', element: element, src: url });\n        if (!cache.has(url)) {\n            if (meshoptDecoder != null) {\n                this[$loader].setMeshoptDecoder(await meshoptDecoder);\n            }\n            const rawGLTFLoads = loadWithLoader(url, this[$loader], (progress) => {\n                progressCallback(progress * 0.8);\n            });\n            const GLTFInstance = this[$GLTFInstance];\n            const gltfInstanceLoads = rawGLTFLoads\n                .then((rawGLTF) => {\n                return GLTFInstance.prepare(rawGLTF);\n            })\n                .then((preparedGLTF) => {\n                progressCallback(0.9);\n                return new GLTFInstance(preparedGLTF);\n            })\n                .catch((reason => {\n                console.error(reason);\n                return new GLTFInstance();\n            }));\n            cache.set(url, gltfInstanceLoads);\n        }\n        await cache.get(url);\n        preloaded.set(url, true);\n        if (progressCallback) {\n            progressCallback(1.0);\n        }\n    }\n    /**\n     * Loads a glTF from the specified url and resolves a unique clone of the\n     * glTF. If the glTF has already been loaded, makes a clone of the cached\n     * copy.\n     */\n    async load(url, element, progressCallback = () => { }) {\n        await this.preload(url, element, progressCallback);\n        const gltf = await cache.get(url);\n        const clone = await gltf.clone();\n        this[$evictionPolicy].retain(url);\n        // Patch dispose so that we can properly account for instance use\n        // in the caching layer:\n        clone.dispose = () => {\n            this[$evictionPolicy].release(url);\n        };\n        return clone;\n    }\n}\nCachingGLTFLoader[_a] = new _utilities_cache_eviction_policy_js__WEBPACK_IMPORTED_MODULE_0__.CacheEvictionPolicy(CachingGLTFLoader);\n//# sourceMappingURL=CachingGLTFLoader.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvQ2FjaGluZ0dMVEZMb2FkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN3QztBQUNnQztBQUNGO0FBQ0E7QUFDTTtBQUNhO0FBQ3pGO0FBQ0E7QUFDQTtBQUNPLGlFQUFpRTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0ZBQVc7QUFDbkM7QUFDQSx1QkFBdUIsZ0ZBQVU7QUFDakM7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNPLGdDQUFnQyxrREFBZTtBQUN0RDtBQUNBO0FBQ0EsdUJBQXVCLGdGQUFVLDBCQUEwQixrRkFBOEI7QUFDekY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0EsNkJBQTZCLDZDQUE2QztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0ZBQW1CO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL0NhY2hpbmdHTFRGTG9hZGVyLmpzPzkwOTQiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIF9hLCBfYjtcbmltcG9ydCB7IEV2ZW50RGlzcGF0Y2hlciB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7IERSQUNPTG9hZGVyIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvRFJBQ09Mb2FkZXIuanMnO1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0dMVEZMb2FkZXIuanMnO1xuaW1wb3J0IHsgS1RYMkxvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0tUWDJMb2FkZXIuanMnO1xuaW1wb3J0IHsgQ2FjaGVFdmljdGlvblBvbGljeSB9IGZyb20gJy4uL3V0aWxpdGllcy9jYWNoZS1ldmljdGlvbi1wb2xpY3kuanMnO1xuaW1wb3J0IEdMVEZNYXRlcmlhbHNWYXJpYW50c0V4dGVuc2lvbiBmcm9tICcuL2dsdGYtaW5zdGFuY2UvVmFyaWFudE1hdGVyaWFsTG9hZGVyUGx1Z2luJztcbi8qKlxuICogQSBoZWxwZXIgdG8gUHJvbWlzZS1pZnkgYSBUaHJlZS5qcyBHTFRGTG9hZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBsb2FkV2l0aExvYWRlciA9ICh1cmwsIGxvYWRlciwgcHJvZ3Jlc3NDYWxsYmFjayA9ICgpID0+IHsgfSkgPT4ge1xuICAgIGNvbnN0IG9uUHJvZ3Jlc3MgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgZnJhY3Rpb24gPSBldmVudC5sb2FkZWQgLyBldmVudC50b3RhbDtcbiAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBpc0Zpbml0ZShmcmFjdGlvbikgPyBmcmFjdGlvbiA6IDEpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsb2FkZXIubG9hZCh1cmwsIHJlc29sdmUsIG9uUHJvZ3Jlc3MsIHJlamVjdCk7XG4gICAgfSk7XG59O1xuLyoqIEhlbHBlciB0byBsb2FkIGEgc2NyaXB0IHRhZy4gKi9cbmNvbnN0IGZldGNoU2NyaXB0ID0gKHNyYykgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSByZXNvbHZlO1xuICAgICAgICBzY3JpcHQub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgc2NyaXB0LnNyYyA9IHNyYztcbiAgICB9KTtcbn07XG5jb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbmNvbnN0IHByZWxvYWRlZCA9IG5ldyBNYXAoKTtcbmxldCBkcmFjb0RlY29kZXJMb2NhdGlvbjtcbmNvbnN0IGRyYWNvTG9hZGVyID0gbmV3IERSQUNPTG9hZGVyKCk7XG5sZXQga3R4MlRyYW5zY29kZXJMb2NhdGlvbjtcbmNvbnN0IGt0eDJMb2FkZXIgPSBuZXcgS1RYMkxvYWRlcigpO1xubGV0IG1lc2hvcHREZWNvZGVyTG9jYXRpb247XG5sZXQgbWVzaG9wdERlY29kZXI7XG5leHBvcnQgY29uc3QgJGxvYWRlciA9IFN5bWJvbCgnbG9hZGVyJyk7XG5leHBvcnQgY29uc3QgJGV2aWN0aW9uUG9saWN5ID0gU3ltYm9sKCdldmljdGlvblBvbGljeScpO1xuY29uc3QgJEdMVEZJbnN0YW5jZSA9IFN5bWJvbCgnR0xURkluc3RhbmNlJyk7XG5leHBvcnQgY2xhc3MgQ2FjaGluZ0dMVEZMb2FkZXIgZXh0ZW5kcyBFdmVudERpc3BhdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKEdMVEZJbnN0YW5jZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzW19iXSA9IG5ldyBHTFRGTG9hZGVyKCkucmVnaXN0ZXIocGFyc2VyID0+IG5ldyBHTFRGTWF0ZXJpYWxzVmFyaWFudHNFeHRlbnNpb24ocGFyc2VyKSk7XG4gICAgICAgIHRoaXNbJEdMVEZJbnN0YW5jZV0gPSBHTFRGSW5zdGFuY2U7XG4gICAgICAgIHRoaXNbJGxvYWRlcl0uc2V0RFJBQ09Mb2FkZXIoZHJhY29Mb2FkZXIpO1xuICAgICAgICB0aGlzWyRsb2FkZXJdLnNldEtUWDJMb2FkZXIoa3R4MkxvYWRlcik7XG4gICAgfVxuICAgIHN0YXRpYyBzZXREUkFDT0RlY29kZXJMb2NhdGlvbih1cmwpIHtcbiAgICAgICAgZHJhY29EZWNvZGVyTG9jYXRpb24gPSB1cmw7XG4gICAgICAgIGRyYWNvTG9hZGVyLnNldERlY29kZXJQYXRoKHVybCk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXREUkFDT0RlY29kZXJMb2NhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRyYWNvRGVjb2RlckxvY2F0aW9uO1xuICAgIH1cbiAgICBzdGF0aWMgc2V0S1RYMlRyYW5zY29kZXJMb2NhdGlvbih1cmwpIHtcbiAgICAgICAga3R4MlRyYW5zY29kZXJMb2NhdGlvbiA9IHVybDtcbiAgICAgICAga3R4MkxvYWRlci5zZXRUcmFuc2NvZGVyUGF0aCh1cmwpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0S1RYMlRyYW5zY29kZXJMb2NhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGt0eDJUcmFuc2NvZGVyTG9jYXRpb247XG4gICAgfVxuICAgIHN0YXRpYyBzZXRNZXNob3B0RGVjb2RlckxvY2F0aW9uKHVybCkge1xuICAgICAgICBpZiAobWVzaG9wdERlY29kZXJMb2NhdGlvbiAhPT0gdXJsKSB7XG4gICAgICAgICAgICBtZXNob3B0RGVjb2RlckxvY2F0aW9uID0gdXJsO1xuICAgICAgICAgICAgbWVzaG9wdERlY29kZXIgPSBmZXRjaFNjcmlwdCh1cmwpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gTWVzaG9wdERlY29kZXIucmVhZHkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gTWVzaG9wdERlY29kZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBnZXRNZXNob3B0RGVjb2RlckxvY2F0aW9uKCkge1xuICAgICAgICByZXR1cm4gbWVzaG9wdERlY29kZXJMb2NhdGlvbjtcbiAgICB9XG4gICAgc3RhdGljIGluaXRpYWxpemVLVFgyTG9hZGVyKHJlbmRlcmVyKSB7XG4gICAgICAgIGt0eDJMb2FkZXIuZGV0ZWN0U3VwcG9ydChyZW5kZXJlcik7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgY2FjaGUoKSB7XG4gICAgICAgIHJldHVybiBjYWNoZTtcbiAgICB9XG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgc3RhdGljIGNsZWFyQ2FjaGUoKSB7XG4gICAgICAgIGNhY2hlLmZvckVhY2goKF92YWx1ZSwgdXJsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZSh1cmwpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpc1skZXZpY3Rpb25Qb2xpY3ldLnJlc2V0KCk7XG4gICAgfVxuICAgIHN0YXRpYyBoYXModXJsKSB7XG4gICAgICAgIHJldHVybiBjYWNoZS5oYXModXJsKTtcbiAgICB9XG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgc3RhdGljIGFzeW5jIGRlbGV0ZSh1cmwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyh1cmwpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2x0ZkxvYWRzID0gY2FjaGUuZ2V0KHVybCk7XG4gICAgICAgIHByZWxvYWRlZC5kZWxldGUodXJsKTtcbiAgICAgICAgY2FjaGUuZGVsZXRlKHVybCk7XG4gICAgICAgIGNvbnN0IGdsdGYgPSBhd2FpdCBnbHRmTG9hZHM7XG4gICAgICAgIC8vIERpc3Bvc2Ugb2YgdGhlIGNhY2hlZCBnbFRGJ3MgbWF0ZXJpYWxzIGFuZCBnZW9tZXRyaWVzOlxuICAgICAgICBnbHRmLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBtb2RlbCB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBzcGVjaWZpZWQgdXJsIGlzXG4gICAgICogYXZhaWxhYmxlIGluIG91ciBsb2NhbCBjYWNoZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgaGFzRmluaXNoZWRMb2FkaW5nKHVybCkge1xuICAgICAgICByZXR1cm4gISFwcmVsb2FkZWQuZ2V0KHVybCk7XG4gICAgfVxuICAgIGdldCBbKF9hID0gJGV2aWN0aW9uUG9saWN5LCBfYiA9ICRsb2FkZXIsICRldmljdGlvblBvbGljeSldKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RvclskZXZpY3Rpb25Qb2xpY3ldO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmVsb2FkcyBhIGdsVEYsIHBvcHVsYXRpbmcgdGhlIGNhY2hlLiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzXG4gICAgICogd2hlbiB0aGUgY2FjaGUgaXMgcG9wdWxhdGVkLlxuICAgICAqL1xuICAgIGFzeW5jIHByZWxvYWQodXJsLCBlbGVtZW50LCBwcm9ncmVzc0NhbGxiYWNrID0gKCkgPT4geyB9KSB7XG4gICAgICAgIHRoaXNbJGxvYWRlcl0uc2V0V2l0aENyZWRlbnRpYWxzKENhY2hpbmdHTFRGTG9hZGVyLndpdGhDcmVkZW50aWFscyk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7IHR5cGU6ICdwcmVsb2FkJywgZWxlbWVudDogZWxlbWVudCwgc3JjOiB1cmwgfSk7XG4gICAgICAgIGlmICghY2FjaGUuaGFzKHVybCkpIHtcbiAgICAgICAgICAgIGlmIChtZXNob3B0RGVjb2RlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skbG9hZGVyXS5zZXRNZXNob3B0RGVjb2Rlcihhd2FpdCBtZXNob3B0RGVjb2Rlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByYXdHTFRGTG9hZHMgPSBsb2FkV2l0aExvYWRlcih1cmwsIHRoaXNbJGxvYWRlcl0sIChwcm9ncmVzcykgPT4ge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2socHJvZ3Jlc3MgKiAwLjgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBHTFRGSW5zdGFuY2UgPSB0aGlzWyRHTFRGSW5zdGFuY2VdO1xuICAgICAgICAgICAgY29uc3QgZ2x0Zkluc3RhbmNlTG9hZHMgPSByYXdHTFRGTG9hZHNcbiAgICAgICAgICAgICAgICAudGhlbigocmF3R0xURikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBHTFRGSW5zdGFuY2UucHJlcGFyZShyYXdHTFRGKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHByZXBhcmVkR0xURikgPT4ge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soMC45KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEdMVEZJbnN0YW5jZShwcmVwYXJlZEdMVEYpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKHJlYXNvbiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgR0xURkluc3RhbmNlKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjYWNoZS5zZXQodXJsLCBnbHRmSW5zdGFuY2VMb2Fkcyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgY2FjaGUuZ2V0KHVybCk7XG4gICAgICAgIHByZWxvYWRlZC5zZXQodXJsLCB0cnVlKTtcbiAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soMS4wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIGdsVEYgZnJvbSB0aGUgc3BlY2lmaWVkIHVybCBhbmQgcmVzb2x2ZXMgYSB1bmlxdWUgY2xvbmUgb2YgdGhlXG4gICAgICogZ2xURi4gSWYgdGhlIGdsVEYgaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQsIG1ha2VzIGEgY2xvbmUgb2YgdGhlIGNhY2hlZFxuICAgICAqIGNvcHkuXG4gICAgICovXG4gICAgYXN5bmMgbG9hZCh1cmwsIGVsZW1lbnQsIHByb2dyZXNzQ2FsbGJhY2sgPSAoKSA9PiB7IH0pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wcmVsb2FkKHVybCwgZWxlbWVudCwgcHJvZ3Jlc3NDYWxsYmFjayk7XG4gICAgICAgIGNvbnN0IGdsdGYgPSBhd2FpdCBjYWNoZS5nZXQodXJsKTtcbiAgICAgICAgY29uc3QgY2xvbmUgPSBhd2FpdCBnbHRmLmNsb25lKCk7XG4gICAgICAgIHRoaXNbJGV2aWN0aW9uUG9saWN5XS5yZXRhaW4odXJsKTtcbiAgICAgICAgLy8gUGF0Y2ggZGlzcG9zZSBzbyB0aGF0IHdlIGNhbiBwcm9wZXJseSBhY2NvdW50IGZvciBpbnN0YW5jZSB1c2VcbiAgICAgICAgLy8gaW4gdGhlIGNhY2hpbmcgbGF5ZXI6XG4gICAgICAgIGNsb25lLmRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzWyRldmljdGlvblBvbGljeV0ucmVsZWFzZSh1cmwpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgfVxufVxuQ2FjaGluZ0dMVEZMb2FkZXJbX2FdID0gbmV3IENhY2hlRXZpY3Rpb25Qb2xpY3koQ2FjaGluZ0dMVEZMb2FkZXIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q2FjaGluZ0dMVEZMb2FkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/CachingGLTFLoader.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/Damper.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/Damper.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DECAY_MILLISECONDS: () => (/* binding */ DECAY_MILLISECONDS),\n/* harmony export */   Damper: () => (/* binding */ Damper),\n/* harmony export */   SETTLING_TIME: () => (/* binding */ SETTLING_TIME)\n/* harmony export */ });\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst SETTLING_TIME = 10000; // plenty long enough\nconst MIN_DECAY_MILLISECONDS = 0.001;\nconst DECAY_MILLISECONDS = 50;\n/**\n * The Damper class is a generic second-order critically damped system that does\n * one linear step of the desired length of time. The only parameter is\n * DECAY_MILLISECONDS. This common parameter makes all states converge at the\n * same rate regardless of scale. xNormalization is a number to provide the\n * rough scale of x, such that NIL_SPEED clamping also happens at roughly the\n * same convergence for all states.\n */\nclass Damper {\n    constructor(decayMilliseconds = DECAY_MILLISECONDS) {\n        this.velocity = 0;\n        this.naturalFrequency = 0;\n        this.setDecayTime(decayMilliseconds);\n    }\n    setDecayTime(decayMilliseconds) {\n        this.naturalFrequency =\n            1 / Math.max(MIN_DECAY_MILLISECONDS, decayMilliseconds);\n    }\n    update(x, xGoal, timeStepMilliseconds, xNormalization) {\n        const nilSpeed = 0.0002 * this.naturalFrequency;\n        if (x == null || xNormalization === 0) {\n            return xGoal;\n        }\n        if (x === xGoal && this.velocity === 0) {\n            return xGoal;\n        }\n        if (timeStepMilliseconds < 0) {\n            return x;\n        }\n        // Exact solution to a critically damped second-order system, where:\n        // acceleration = this.naturalFrequency * this.naturalFrequency * (xGoal\n        // - x) - 2 * this.naturalFrequency * this.velocity;\n        const deltaX = (x - xGoal);\n        const intermediateVelocity = this.velocity + this.naturalFrequency * deltaX;\n        const intermediateX = deltaX + timeStepMilliseconds * intermediateVelocity;\n        const decay = Math.exp(-this.naturalFrequency * timeStepMilliseconds);\n        const newVelocity = (intermediateVelocity - this.naturalFrequency * intermediateX) * decay;\n        const acceleration = -this.naturalFrequency * (newVelocity + intermediateVelocity * decay);\n        if (Math.abs(newVelocity) < nilSpeed * Math.abs(xNormalization) &&\n            acceleration * deltaX >= 0) {\n            // This ensures the controls settle and stop calling this function instead\n            // of asymptotically approaching their goal.\n            this.velocity = 0;\n            return xGoal;\n        }\n        else {\n            this.velocity = newVelocity;\n            return xGoal + intermediateX * decay;\n        }\n    }\n}\n//# sourceMappingURL=Damper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvRGFtcGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyw2QkFBNkI7QUFDcEM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL0RhbXBlci5qcz85YjM5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmV4cG9ydCBjb25zdCBTRVRUTElOR19USU1FID0gMTAwMDA7IC8vIHBsZW50eSBsb25nIGVub3VnaFxuY29uc3QgTUlOX0RFQ0FZX01JTExJU0VDT05EUyA9IDAuMDAxO1xuZXhwb3J0IGNvbnN0IERFQ0FZX01JTExJU0VDT05EUyA9IDUwO1xuLyoqXG4gKiBUaGUgRGFtcGVyIGNsYXNzIGlzIGEgZ2VuZXJpYyBzZWNvbmQtb3JkZXIgY3JpdGljYWxseSBkYW1wZWQgc3lzdGVtIHRoYXQgZG9lc1xuICogb25lIGxpbmVhciBzdGVwIG9mIHRoZSBkZXNpcmVkIGxlbmd0aCBvZiB0aW1lLiBUaGUgb25seSBwYXJhbWV0ZXIgaXNcbiAqIERFQ0FZX01JTExJU0VDT05EUy4gVGhpcyBjb21tb24gcGFyYW1ldGVyIG1ha2VzIGFsbCBzdGF0ZXMgY29udmVyZ2UgYXQgdGhlXG4gKiBzYW1lIHJhdGUgcmVnYXJkbGVzcyBvZiBzY2FsZS4geE5vcm1hbGl6YXRpb24gaXMgYSBudW1iZXIgdG8gcHJvdmlkZSB0aGVcbiAqIHJvdWdoIHNjYWxlIG9mIHgsIHN1Y2ggdGhhdCBOSUxfU1BFRUQgY2xhbXBpbmcgYWxzbyBoYXBwZW5zIGF0IHJvdWdobHkgdGhlXG4gKiBzYW1lIGNvbnZlcmdlbmNlIGZvciBhbGwgc3RhdGVzLlxuICovXG5leHBvcnQgY2xhc3MgRGFtcGVyIHtcbiAgICBjb25zdHJ1Y3RvcihkZWNheU1pbGxpc2Vjb25kcyA9IERFQ0FZX01JTExJU0VDT05EUykge1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gMDtcbiAgICAgICAgdGhpcy5uYXR1cmFsRnJlcXVlbmN5ID0gMDtcbiAgICAgICAgdGhpcy5zZXREZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpO1xuICAgIH1cbiAgICBzZXREZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpIHtcbiAgICAgICAgdGhpcy5uYXR1cmFsRnJlcXVlbmN5ID1cbiAgICAgICAgICAgIDEgLyBNYXRoLm1heChNSU5fREVDQVlfTUlMTElTRUNPTkRTLCBkZWNheU1pbGxpc2Vjb25kcyk7XG4gICAgfVxuICAgIHVwZGF0ZSh4LCB4R29hbCwgdGltZVN0ZXBNaWxsaXNlY29uZHMsIHhOb3JtYWxpemF0aW9uKSB7XG4gICAgICAgIGNvbnN0IG5pbFNwZWVkID0gMC4wMDAyICogdGhpcy5uYXR1cmFsRnJlcXVlbmN5O1xuICAgICAgICBpZiAoeCA9PSBudWxsIHx8IHhOb3JtYWxpemF0aW9uID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4geEdvYWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHggPT09IHhHb2FsICYmIHRoaXMudmVsb2NpdHkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB4R29hbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZVN0ZXBNaWxsaXNlY29uZHMgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgfVxuICAgICAgICAvLyBFeGFjdCBzb2x1dGlvbiB0byBhIGNyaXRpY2FsbHkgZGFtcGVkIHNlY29uZC1vcmRlciBzeXN0ZW0sIHdoZXJlOlxuICAgICAgICAvLyBhY2NlbGVyYXRpb24gPSB0aGlzLm5hdHVyYWxGcmVxdWVuY3kgKiB0aGlzLm5hdHVyYWxGcmVxdWVuY3kgKiAoeEdvYWxcbiAgICAgICAgLy8gLSB4KSAtIDIgKiB0aGlzLm5hdHVyYWxGcmVxdWVuY3kgKiB0aGlzLnZlbG9jaXR5O1xuICAgICAgICBjb25zdCBkZWx0YVggPSAoeCAtIHhHb2FsKTtcbiAgICAgICAgY29uc3QgaW50ZXJtZWRpYXRlVmVsb2NpdHkgPSB0aGlzLnZlbG9jaXR5ICsgdGhpcy5uYXR1cmFsRnJlcXVlbmN5ICogZGVsdGFYO1xuICAgICAgICBjb25zdCBpbnRlcm1lZGlhdGVYID0gZGVsdGFYICsgdGltZVN0ZXBNaWxsaXNlY29uZHMgKiBpbnRlcm1lZGlhdGVWZWxvY2l0eTtcbiAgICAgICAgY29uc3QgZGVjYXkgPSBNYXRoLmV4cCgtdGhpcy5uYXR1cmFsRnJlcXVlbmN5ICogdGltZVN0ZXBNaWxsaXNlY29uZHMpO1xuICAgICAgICBjb25zdCBuZXdWZWxvY2l0eSA9IChpbnRlcm1lZGlhdGVWZWxvY2l0eSAtIHRoaXMubmF0dXJhbEZyZXF1ZW5jeSAqIGludGVybWVkaWF0ZVgpICogZGVjYXk7XG4gICAgICAgIGNvbnN0IGFjY2VsZXJhdGlvbiA9IC10aGlzLm5hdHVyYWxGcmVxdWVuY3kgKiAobmV3VmVsb2NpdHkgKyBpbnRlcm1lZGlhdGVWZWxvY2l0eSAqIGRlY2F5KTtcbiAgICAgICAgaWYgKE1hdGguYWJzKG5ld1ZlbG9jaXR5KSA8IG5pbFNwZWVkICogTWF0aC5hYnMoeE5vcm1hbGl6YXRpb24pICYmXG4gICAgICAgICAgICBhY2NlbGVyYXRpb24gKiBkZWx0YVggPj0gMCkge1xuICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBjb250cm9scyBzZXR0bGUgYW5kIHN0b3AgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIGluc3RlYWRcbiAgICAgICAgICAgIC8vIG9mIGFzeW1wdG90aWNhbGx5IGFwcHJvYWNoaW5nIHRoZWlyIGdvYWwuXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5ID0gMDtcbiAgICAgICAgICAgIHJldHVybiB4R29hbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkgPSBuZXdWZWxvY2l0eTtcbiAgICAgICAgICAgIHJldHVybiB4R29hbCArIGludGVybWVkaWF0ZVggKiBkZWNheTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURhbXBlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/Damper.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/Debugger.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/Debugger.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Debugger: () => (/* binding */ Debugger)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This Debugger exposes internal details of the <model-viewer> rendering\n * substructure so that external tools can more easily inspect and operate on\n * them.\n *\n * It also activates shader debugging on the associated GL context. Shader\n * debugging trades performance for useful error information, so it is not\n * recommended to activate this unless needed.\n */\nclass Debugger {\n    constructor(renderer) {\n        // Force WebGL shader debugging on:\n        renderer.threeRenderer.debug = { checkShaderErrors: true };\n        // Announce debug details at microtask timing to give the `Renderer`\n        // constructor time to complete its initialization, just to be on the safe\n        // side:\n        Promise.resolve().then(() => {\n            self.dispatchEvent(new CustomEvent('model-viewer-renderer-debug', {\n                detail: {\n                    renderer,\n                    THREE: {\n                        ShaderMaterial: three__WEBPACK_IMPORTED_MODULE_0__.ShaderMaterial,\n                        Texture: three__WEBPACK_IMPORTED_MODULE_0__.Texture,\n                        Mesh: three__WEBPACK_IMPORTED_MODULE_0__.Mesh,\n                        Scene: three__WEBPACK_IMPORTED_MODULE_0__.Scene,\n                        PlaneGeometry: three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry,\n                        OrthographicCamera: three__WEBPACK_IMPORTED_MODULE_0__.OrthographicCamera,\n                        WebGLRenderTarget: three__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderTarget\n                    }\n                }\n            }));\n        });\n    }\n    addScene(scene) {\n        self.dispatchEvent(new CustomEvent('model-viewer-scene-added-debug', { detail: { scene } }));\n    }\n    removeScene(scene) {\n        self.dispatchEvent(new CustomEvent('model-viewer-scene-removed-debug', { detail: { scene } }));\n    }\n}\n//# sourceMappingURL=Debugger.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvRGVidWdnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ21IO0FBQ25IO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLCtCQUErQjtBQUMvQiw0QkFBNEI7QUFDNUIsNkJBQTZCO0FBQzdCLHFDQUFxQztBQUNyQywwQ0FBMEM7QUFDMUMseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSwrRUFBK0UsVUFBVSxTQUFTO0FBQ2xHO0FBQ0E7QUFDQSxpRkFBaUYsVUFBVSxTQUFTO0FBQ3BHO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvdGhyZWUtY29tcG9uZW50cy9EZWJ1Z2dlci5qcz8xMDYxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IE1lc2gsIE9ydGhvZ3JhcGhpY0NhbWVyYSwgUGxhbmVHZW9tZXRyeSwgU2NlbmUsIFNoYWRlck1hdGVyaWFsLCBUZXh0dXJlLCBXZWJHTFJlbmRlclRhcmdldCB9IGZyb20gJ3RocmVlJztcbi8qKlxuICogVGhpcyBEZWJ1Z2dlciBleHBvc2VzIGludGVybmFsIGRldGFpbHMgb2YgdGhlIDxtb2RlbC12aWV3ZXI+IHJlbmRlcmluZ1xuICogc3Vic3RydWN0dXJlIHNvIHRoYXQgZXh0ZXJuYWwgdG9vbHMgY2FuIG1vcmUgZWFzaWx5IGluc3BlY3QgYW5kIG9wZXJhdGUgb25cbiAqIHRoZW0uXG4gKlxuICogSXQgYWxzbyBhY3RpdmF0ZXMgc2hhZGVyIGRlYnVnZ2luZyBvbiB0aGUgYXNzb2NpYXRlZCBHTCBjb250ZXh0LiBTaGFkZXJcbiAqIGRlYnVnZ2luZyB0cmFkZXMgcGVyZm9ybWFuY2UgZm9yIHVzZWZ1bCBlcnJvciBpbmZvcm1hdGlvbiwgc28gaXQgaXMgbm90XG4gKiByZWNvbW1lbmRlZCB0byBhY3RpdmF0ZSB0aGlzIHVubGVzcyBuZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWJ1Z2dlciB7XG4gICAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICAgICAgLy8gRm9yY2UgV2ViR0wgc2hhZGVyIGRlYnVnZ2luZyBvbjpcbiAgICAgICAgcmVuZGVyZXIudGhyZWVSZW5kZXJlci5kZWJ1ZyA9IHsgY2hlY2tTaGFkZXJFcnJvcnM6IHRydWUgfTtcbiAgICAgICAgLy8gQW5ub3VuY2UgZGVidWcgZGV0YWlscyBhdCBtaWNyb3Rhc2sgdGltaW5nIHRvIGdpdmUgdGhlIGBSZW5kZXJlcmBcbiAgICAgICAgLy8gY29uc3RydWN0b3IgdGltZSB0byBjb21wbGV0ZSBpdHMgaW5pdGlhbGl6YXRpb24sIGp1c3QgdG8gYmUgb24gdGhlIHNhZmVcbiAgICAgICAgLy8gc2lkZTpcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdtb2RlbC12aWV3ZXItcmVuZGVyZXItZGVidWcnLCB7XG4gICAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLFxuICAgICAgICAgICAgICAgICAgICBUSFJFRToge1xuICAgICAgICAgICAgICAgICAgICAgICAgU2hhZGVyTWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBUZXh0dXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgTWVzaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFNjZW5lLFxuICAgICAgICAgICAgICAgICAgICAgICAgUGxhbmVHZW9tZXRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE9ydGhvZ3JhcGhpY0NhbWVyYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlYkdMUmVuZGVyVGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRTY2VuZShzY2VuZSkge1xuICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdtb2RlbC12aWV3ZXItc2NlbmUtYWRkZWQtZGVidWcnLCB7IGRldGFpbDogeyBzY2VuZSB9IH0pKTtcbiAgICB9XG4gICAgcmVtb3ZlU2NlbmUoc2NlbmUpIHtcbiAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbW9kZWwtdmlld2VyLXNjZW5lLXJlbW92ZWQtZGVidWcnLCB7IGRldGFpbDogeyBzY2VuZSB9IH0pKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWJ1Z2dlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/Debugger.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/EnvironmentScene.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/EnvironmentScene.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EnvironmentScene)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass EnvironmentScene extends three__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor() {\n        super();\n        this.position.y = -3.5;\n        const geometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry();\n        geometry.deleteAttribute('uv');\n        const roomMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ metalness: 0, side: three__WEBPACK_IMPORTED_MODULE_0__.BackSide });\n        const boxMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ metalness: 0 });\n        const mainLight = new three__WEBPACK_IMPORTED_MODULE_0__.PointLight(0xffffff, 500.0, 28, 2);\n        mainLight.position.set(0.418, 16.199, 0.300);\n        this.add(mainLight);\n        const room = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, roomMaterial);\n        room.position.set(-0.757, 13.219, 0.717);\n        room.scale.set(31.713, 28.305, 28.591);\n        this.add(room);\n        const box1 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box1.position.set(-10.906, 2.009, 1.846);\n        box1.rotation.set(0, -0.195, 0);\n        box1.scale.set(2.328, 7.905, 4.651);\n        this.add(box1);\n        const box2 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box2.position.set(-5.607, -0.754, -0.758);\n        box2.rotation.set(0, 0.994, 0);\n        box2.scale.set(1.970, 1.534, 3.955);\n        this.add(box2);\n        const box3 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box3.position.set(6.167, 0.857, 7.803);\n        box3.rotation.set(0, 0.561, 0);\n        box3.scale.set(3.927, 6.285, 3.687);\n        this.add(box3);\n        const box4 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box4.position.set(-2.017, 0.018, 6.124);\n        box4.rotation.set(0, 0.333, 0);\n        box4.scale.set(2.002, 4.566, 2.064);\n        this.add(box4);\n        const box5 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box5.position.set(2.291, -0.756, -2.621);\n        box5.rotation.set(0, -0.286, 0);\n        box5.scale.set(1.546, 1.552, 1.496);\n        this.add(box5);\n        const box6 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box6.position.set(-2.193, -0.369, -5.547);\n        box6.rotation.set(0, 0.516, 0);\n        box6.scale.set(3.875, 3.487, 2.986);\n        this.add(box6);\n        // -x right\n        const light1 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(50));\n        light1.position.set(-16.116, 14.37, 8.208);\n        light1.scale.set(0.1, 2.428, 2.739);\n        this.add(light1);\n        // -x left\n        const light2 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(50));\n        light2.position.set(-16.109, 18.021, -8.207);\n        light2.scale.set(0.1, 2.425, 2.751);\n        this.add(light2);\n        // +x\n        const light3 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(17));\n        light3.position.set(14.904, 12.198, -1.832);\n        light3.scale.set(0.15, 4.265, 6.331);\n        this.add(light3);\n        // +z\n        const light4 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(43));\n        light4.position.set(-0.462, 8.89, 14.520);\n        light4.scale.set(4.38, 5.441, 0.088);\n        this.add(light4);\n        // -z\n        const light5 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(20));\n        light5.position.set(3.235, 11.486, -12.541);\n        light5.scale.set(2.5, 2.0, 0.1);\n        this.add(light5);\n        // +y\n        const light6 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(100));\n        light6.position.set(0.0, 20.0, 0.0);\n        light6.scale.set(1.0, 0.1, 1.0);\n        this.add(light6);\n    }\n    createAreaLightMaterial(intensity) {\n        const material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial();\n        material.color.setScalar(intensity);\n        return material;\n    }\n}\n//# sourceMappingURL=EnvironmentScene.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvRW52aXJvbm1lbnRTY2VuZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZ0g7QUFDakcsK0JBQStCLHdDQUFLO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw4Q0FBVztBQUN4QztBQUNBLGlDQUFpQyx1REFBb0IsR0FBRyxvQkFBb0IsMkNBQVEsRUFBRTtBQUN0RixnQ0FBZ0MsdURBQW9CLEdBQUcsY0FBYztBQUNyRSw4QkFBOEIsNkNBQVU7QUFDeEM7QUFDQTtBQUNBLHlCQUF5Qix1Q0FBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL0Vudmlyb25tZW50U2NlbmUuanM/ZDhiNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBCYWNrU2lkZSwgQm94R2VvbWV0cnksIE1lc2gsIE1lc2hCYXNpY01hdGVyaWFsLCBNZXNoU3RhbmRhcmRNYXRlcmlhbCwgUG9pbnRMaWdodCwgU2NlbmUgfSBmcm9tICd0aHJlZSc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnZpcm9ubWVudFNjZW5lIGV4dGVuZHMgU2NlbmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSAtMy41O1xuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBCb3hHZW9tZXRyeSgpO1xuICAgICAgICBnZW9tZXRyeS5kZWxldGVBdHRyaWJ1dGUoJ3V2Jyk7XG4gICAgICAgIGNvbnN0IHJvb21NYXRlcmlhbCA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCh7IG1ldGFsbmVzczogMCwgc2lkZTogQmFja1NpZGUgfSk7XG4gICAgICAgIGNvbnN0IGJveE1hdGVyaWFsID0gbmV3IE1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgbWV0YWxuZXNzOiAwIH0pO1xuICAgICAgICBjb25zdCBtYWluTGlnaHQgPSBuZXcgUG9pbnRMaWdodCgweGZmZmZmZiwgNTAwLjAsIDI4LCAyKTtcbiAgICAgICAgbWFpbkxpZ2h0LnBvc2l0aW9uLnNldCgwLjQxOCwgMTYuMTk5LCAwLjMwMCk7XG4gICAgICAgIHRoaXMuYWRkKG1haW5MaWdodCk7XG4gICAgICAgIGNvbnN0IHJvb20gPSBuZXcgTWVzaChnZW9tZXRyeSwgcm9vbU1hdGVyaWFsKTtcbiAgICAgICAgcm9vbS5wb3NpdGlvbi5zZXQoLTAuNzU3LCAxMy4yMTksIDAuNzE3KTtcbiAgICAgICAgcm9vbS5zY2FsZS5zZXQoMzEuNzEzLCAyOC4zMDUsIDI4LjU5MSk7XG4gICAgICAgIHRoaXMuYWRkKHJvb20pO1xuICAgICAgICBjb25zdCBib3gxID0gbmV3IE1lc2goZ2VvbWV0cnksIGJveE1hdGVyaWFsKTtcbiAgICAgICAgYm94MS5wb3NpdGlvbi5zZXQoLTEwLjkwNiwgMi4wMDksIDEuODQ2KTtcbiAgICAgICAgYm94MS5yb3RhdGlvbi5zZXQoMCwgLTAuMTk1LCAwKTtcbiAgICAgICAgYm94MS5zY2FsZS5zZXQoMi4zMjgsIDcuOTA1LCA0LjY1MSk7XG4gICAgICAgIHRoaXMuYWRkKGJveDEpO1xuICAgICAgICBjb25zdCBib3gyID0gbmV3IE1lc2goZ2VvbWV0cnksIGJveE1hdGVyaWFsKTtcbiAgICAgICAgYm94Mi5wb3NpdGlvbi5zZXQoLTUuNjA3LCAtMC43NTQsIC0wLjc1OCk7XG4gICAgICAgIGJveDIucm90YXRpb24uc2V0KDAsIDAuOTk0LCAwKTtcbiAgICAgICAgYm94Mi5zY2FsZS5zZXQoMS45NzAsIDEuNTM0LCAzLjk1NSk7XG4gICAgICAgIHRoaXMuYWRkKGJveDIpO1xuICAgICAgICBjb25zdCBib3gzID0gbmV3IE1lc2goZ2VvbWV0cnksIGJveE1hdGVyaWFsKTtcbiAgICAgICAgYm94My5wb3NpdGlvbi5zZXQoNi4xNjcsIDAuODU3LCA3LjgwMyk7XG4gICAgICAgIGJveDMucm90YXRpb24uc2V0KDAsIDAuNTYxLCAwKTtcbiAgICAgICAgYm94My5zY2FsZS5zZXQoMy45MjcsIDYuMjg1LCAzLjY4Nyk7XG4gICAgICAgIHRoaXMuYWRkKGJveDMpO1xuICAgICAgICBjb25zdCBib3g0ID0gbmV3IE1lc2goZ2VvbWV0cnksIGJveE1hdGVyaWFsKTtcbiAgICAgICAgYm94NC5wb3NpdGlvbi5zZXQoLTIuMDE3LCAwLjAxOCwgNi4xMjQpO1xuICAgICAgICBib3g0LnJvdGF0aW9uLnNldCgwLCAwLjMzMywgMCk7XG4gICAgICAgIGJveDQuc2NhbGUuc2V0KDIuMDAyLCA0LjU2NiwgMi4wNjQpO1xuICAgICAgICB0aGlzLmFkZChib3g0KTtcbiAgICAgICAgY29uc3QgYm94NSA9IG5ldyBNZXNoKGdlb21ldHJ5LCBib3hNYXRlcmlhbCk7XG4gICAgICAgIGJveDUucG9zaXRpb24uc2V0KDIuMjkxLCAtMC43NTYsIC0yLjYyMSk7XG4gICAgICAgIGJveDUucm90YXRpb24uc2V0KDAsIC0wLjI4NiwgMCk7XG4gICAgICAgIGJveDUuc2NhbGUuc2V0KDEuNTQ2LCAxLjU1MiwgMS40OTYpO1xuICAgICAgICB0aGlzLmFkZChib3g1KTtcbiAgICAgICAgY29uc3QgYm94NiA9IG5ldyBNZXNoKGdlb21ldHJ5LCBib3hNYXRlcmlhbCk7XG4gICAgICAgIGJveDYucG9zaXRpb24uc2V0KC0yLjE5MywgLTAuMzY5LCAtNS41NDcpO1xuICAgICAgICBib3g2LnJvdGF0aW9uLnNldCgwLCAwLjUxNiwgMCk7XG4gICAgICAgIGJveDYuc2NhbGUuc2V0KDMuODc1LCAzLjQ4NywgMi45ODYpO1xuICAgICAgICB0aGlzLmFkZChib3g2KTtcbiAgICAgICAgLy8gLXggcmlnaHRcbiAgICAgICAgY29uc3QgbGlnaHQxID0gbmV3IE1lc2goZ2VvbWV0cnksIHRoaXMuY3JlYXRlQXJlYUxpZ2h0TWF0ZXJpYWwoNTApKTtcbiAgICAgICAgbGlnaHQxLnBvc2l0aW9uLnNldCgtMTYuMTE2LCAxNC4zNywgOC4yMDgpO1xuICAgICAgICBsaWdodDEuc2NhbGUuc2V0KDAuMSwgMi40MjgsIDIuNzM5KTtcbiAgICAgICAgdGhpcy5hZGQobGlnaHQxKTtcbiAgICAgICAgLy8gLXggbGVmdFxuICAgICAgICBjb25zdCBsaWdodDIgPSBuZXcgTWVzaChnZW9tZXRyeSwgdGhpcy5jcmVhdGVBcmVhTGlnaHRNYXRlcmlhbCg1MCkpO1xuICAgICAgICBsaWdodDIucG9zaXRpb24uc2V0KC0xNi4xMDksIDE4LjAyMSwgLTguMjA3KTtcbiAgICAgICAgbGlnaHQyLnNjYWxlLnNldCgwLjEsIDIuNDI1LCAyLjc1MSk7XG4gICAgICAgIHRoaXMuYWRkKGxpZ2h0Mik7XG4gICAgICAgIC8vICt4XG4gICAgICAgIGNvbnN0IGxpZ2h0MyA9IG5ldyBNZXNoKGdlb21ldHJ5LCB0aGlzLmNyZWF0ZUFyZWFMaWdodE1hdGVyaWFsKDE3KSk7XG4gICAgICAgIGxpZ2h0My5wb3NpdGlvbi5zZXQoMTQuOTA0LCAxMi4xOTgsIC0xLjgzMik7XG4gICAgICAgIGxpZ2h0My5zY2FsZS5zZXQoMC4xNSwgNC4yNjUsIDYuMzMxKTtcbiAgICAgICAgdGhpcy5hZGQobGlnaHQzKTtcbiAgICAgICAgLy8gK3pcbiAgICAgICAgY29uc3QgbGlnaHQ0ID0gbmV3IE1lc2goZ2VvbWV0cnksIHRoaXMuY3JlYXRlQXJlYUxpZ2h0TWF0ZXJpYWwoNDMpKTtcbiAgICAgICAgbGlnaHQ0LnBvc2l0aW9uLnNldCgtMC40NjIsIDguODksIDE0LjUyMCk7XG4gICAgICAgIGxpZ2h0NC5zY2FsZS5zZXQoNC4zOCwgNS40NDEsIDAuMDg4KTtcbiAgICAgICAgdGhpcy5hZGQobGlnaHQ0KTtcbiAgICAgICAgLy8gLXpcbiAgICAgICAgY29uc3QgbGlnaHQ1ID0gbmV3IE1lc2goZ2VvbWV0cnksIHRoaXMuY3JlYXRlQXJlYUxpZ2h0TWF0ZXJpYWwoMjApKTtcbiAgICAgICAgbGlnaHQ1LnBvc2l0aW9uLnNldCgzLjIzNSwgMTEuNDg2LCAtMTIuNTQxKTtcbiAgICAgICAgbGlnaHQ1LnNjYWxlLnNldCgyLjUsIDIuMCwgMC4xKTtcbiAgICAgICAgdGhpcy5hZGQobGlnaHQ1KTtcbiAgICAgICAgLy8gK3lcbiAgICAgICAgY29uc3QgbGlnaHQ2ID0gbmV3IE1lc2goZ2VvbWV0cnksIHRoaXMuY3JlYXRlQXJlYUxpZ2h0TWF0ZXJpYWwoMTAwKSk7XG4gICAgICAgIGxpZ2h0Ni5wb3NpdGlvbi5zZXQoMC4wLCAyMC4wLCAwLjApO1xuICAgICAgICBsaWdodDYuc2NhbGUuc2V0KDEuMCwgMC4xLCAxLjApO1xuICAgICAgICB0aGlzLmFkZChsaWdodDYpO1xuICAgIH1cbiAgICBjcmVhdGVBcmVhTGlnaHRNYXRlcmlhbChpbnRlbnNpdHkpIHtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoKTtcbiAgICAgICAgbWF0ZXJpYWwuY29sb3Iuc2V0U2NhbGFyKGludGVuc2l0eSk7XG4gICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbnZpcm9ubWVudFNjZW5lLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/EnvironmentScene.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/EnvironmentSceneAlt.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/EnvironmentSceneAlt.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EnvironmentSceneAlt)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass EnvironmentSceneAlt extends three__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor() {\n        super();\n        this.position.y = -3.5;\n        const geometry = new three__WEBPACK_IMPORTED_MODULE_0__.BoxGeometry();\n        geometry.deleteAttribute('uv');\n        const roomMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ metalness: 0, side: three__WEBPACK_IMPORTED_MODULE_0__.BackSide });\n        const boxMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshStandardMaterial({ metalness: 0 });\n        const mainLight = new three__WEBPACK_IMPORTED_MODULE_0__.PointLight(0xffffff, 400.0, 28, 2);\n        mainLight.position.set(0.5, 14.0, 0.5);\n        this.add(mainLight);\n        const room = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, roomMaterial);\n        room.position.set(0.0, 13.2, 0.0);\n        room.scale.set(31.5, 28.5, 31.5);\n        this.add(room);\n        const box1 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box1.position.set(-10.906, -1.0, 1.846);\n        box1.rotation.set(0, -0.195, 0);\n        box1.scale.set(2.328, 7.905, 4.651);\n        this.add(box1);\n        const box2 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box2.position.set(-5.607, -0.754, -0.758);\n        box2.rotation.set(0, 0.994, 0);\n        box2.scale.set(1.970, 1.534, 3.955);\n        this.add(box2);\n        const box3 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box3.position.set(6.167, -0.16, 7.803);\n        box3.rotation.set(0, 0.561, 0);\n        box3.scale.set(3.927, 6.285, 3.687);\n        this.add(box3);\n        const box4 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box4.position.set(-2.017, 0.018, 6.124);\n        box4.rotation.set(0, 0.333, 0);\n        box4.scale.set(2.002, 4.566, 2.064);\n        this.add(box4);\n        const box5 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box5.position.set(2.291, -0.756, -2.621);\n        box5.rotation.set(0, -0.286, 0);\n        box5.scale.set(1.546, 1.552, 1.496);\n        this.add(box5);\n        const box6 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, boxMaterial);\n        box6.position.set(-2.193, -0.369, -5.547);\n        box6.rotation.set(0, 0.516, 0);\n        box6.scale.set(3.875, 3.487, 2.986);\n        this.add(box6);\n        // -x_left\n        const light1 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(80));\n        light1.position.set(-14.0, 10.0, 8.0);\n        light1.scale.set(0.1, 2.5, 2.5);\n        this.add(light1);\n        // -x_right\n        const light2 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(80));\n        light2.position.set(-14.0, 14.0, -4.0);\n        light2.scale.set(0.1, 2.5, 2.5);\n        this.add(light2);\n        // +x only on light\n        const light3 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(23));\n        light3.position.set(14.0, 12.0, 0.0);\n        light3.scale.set(0.1, 5.0, 5.0);\n        this.add(light3);\n        // +z\n        const light4 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(16));\n        light4.position.set(0.0, 9.0, 14.0);\n        light4.scale.set(5.0, 5.0, 0.1);\n        this.add(light4);\n        // -z right\n        const light5 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(80));\n        light5.position.set(7.0, 8.0, -14.0);\n        light5.scale.set(2.5, 2.5, 0.1);\n        this.add(light5);\n        // -z left\n        const light6 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(80));\n        light6.position.set(-7.0, 16.0, -14.0);\n        light6.scale.set(2.5, 2.5, 0.1);\n        this.add(light6);\n        // +y\n        const light7 = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(geometry, this.createAreaLightMaterial(1));\n        light7.position.set(0.0, 20.0, 0.0);\n        light7.scale.set(0.1, 0.1, 0.1);\n        this.add(light7);\n    }\n    createAreaLightMaterial(intensity) {\n        const material = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial();\n        material.color.setScalar(intensity);\n        return material;\n    }\n}\n//# sourceMappingURL=EnvironmentSceneAlt.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvRW52aXJvbm1lbnRTY2VuZUFsdC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZ0g7QUFDakcsa0NBQWtDLHdDQUFLO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw4Q0FBVztBQUN4QztBQUNBLGlDQUFpQyx1REFBb0IsR0FBRyxvQkFBb0IsMkNBQVEsRUFBRTtBQUN0RixnQ0FBZ0MsdURBQW9CLEdBQUcsY0FBYztBQUNyRSw4QkFBOEIsNkNBQVU7QUFDeEM7QUFDQTtBQUNBLHlCQUF5Qix1Q0FBSTtBQUM3QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQix1Q0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFpQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL0Vudmlyb25tZW50U2NlbmVBbHQuanM/NGVlZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBCYWNrU2lkZSwgQm94R2VvbWV0cnksIE1lc2gsIE1lc2hCYXNpY01hdGVyaWFsLCBNZXNoU3RhbmRhcmRNYXRlcmlhbCwgUG9pbnRMaWdodCwgU2NlbmUgfSBmcm9tICd0aHJlZSc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbnZpcm9ubWVudFNjZW5lQWx0IGV4dGVuZHMgU2NlbmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSAtMy41O1xuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBCb3hHZW9tZXRyeSgpO1xuICAgICAgICBnZW9tZXRyeS5kZWxldGVBdHRyaWJ1dGUoJ3V2Jyk7XG4gICAgICAgIGNvbnN0IHJvb21NYXRlcmlhbCA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCh7IG1ldGFsbmVzczogMCwgc2lkZTogQmFja1NpZGUgfSk7XG4gICAgICAgIGNvbnN0IGJveE1hdGVyaWFsID0gbmV3IE1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgbWV0YWxuZXNzOiAwIH0pO1xuICAgICAgICBjb25zdCBtYWluTGlnaHQgPSBuZXcgUG9pbnRMaWdodCgweGZmZmZmZiwgNDAwLjAsIDI4LCAyKTtcbiAgICAgICAgbWFpbkxpZ2h0LnBvc2l0aW9uLnNldCgwLjUsIDE0LjAsIDAuNSk7XG4gICAgICAgIHRoaXMuYWRkKG1haW5MaWdodCk7XG4gICAgICAgIGNvbnN0IHJvb20gPSBuZXcgTWVzaChnZW9tZXRyeSwgcm9vbU1hdGVyaWFsKTtcbiAgICAgICAgcm9vbS5wb3NpdGlvbi5zZXQoMC4wLCAxMy4yLCAwLjApO1xuICAgICAgICByb29tLnNjYWxlLnNldCgzMS41LCAyOC41LCAzMS41KTtcbiAgICAgICAgdGhpcy5hZGQocm9vbSk7XG4gICAgICAgIGNvbnN0IGJveDEgPSBuZXcgTWVzaChnZW9tZXRyeSwgYm94TWF0ZXJpYWwpO1xuICAgICAgICBib3gxLnBvc2l0aW9uLnNldCgtMTAuOTA2LCAtMS4wLCAxLjg0Nik7XG4gICAgICAgIGJveDEucm90YXRpb24uc2V0KDAsIC0wLjE5NSwgMCk7XG4gICAgICAgIGJveDEuc2NhbGUuc2V0KDIuMzI4LCA3LjkwNSwgNC42NTEpO1xuICAgICAgICB0aGlzLmFkZChib3gxKTtcbiAgICAgICAgY29uc3QgYm94MiA9IG5ldyBNZXNoKGdlb21ldHJ5LCBib3hNYXRlcmlhbCk7XG4gICAgICAgIGJveDIucG9zaXRpb24uc2V0KC01LjYwNywgLTAuNzU0LCAtMC43NTgpO1xuICAgICAgICBib3gyLnJvdGF0aW9uLnNldCgwLCAwLjk5NCwgMCk7XG4gICAgICAgIGJveDIuc2NhbGUuc2V0KDEuOTcwLCAxLjUzNCwgMy45NTUpO1xuICAgICAgICB0aGlzLmFkZChib3gyKTtcbiAgICAgICAgY29uc3QgYm94MyA9IG5ldyBNZXNoKGdlb21ldHJ5LCBib3hNYXRlcmlhbCk7XG4gICAgICAgIGJveDMucG9zaXRpb24uc2V0KDYuMTY3LCAtMC4xNiwgNy44MDMpO1xuICAgICAgICBib3gzLnJvdGF0aW9uLnNldCgwLCAwLjU2MSwgMCk7XG4gICAgICAgIGJveDMuc2NhbGUuc2V0KDMuOTI3LCA2LjI4NSwgMy42ODcpO1xuICAgICAgICB0aGlzLmFkZChib3gzKTtcbiAgICAgICAgY29uc3QgYm94NCA9IG5ldyBNZXNoKGdlb21ldHJ5LCBib3hNYXRlcmlhbCk7XG4gICAgICAgIGJveDQucG9zaXRpb24uc2V0KC0yLjAxNywgMC4wMTgsIDYuMTI0KTtcbiAgICAgICAgYm94NC5yb3RhdGlvbi5zZXQoMCwgMC4zMzMsIDApO1xuICAgICAgICBib3g0LnNjYWxlLnNldCgyLjAwMiwgNC41NjYsIDIuMDY0KTtcbiAgICAgICAgdGhpcy5hZGQoYm94NCk7XG4gICAgICAgIGNvbnN0IGJveDUgPSBuZXcgTWVzaChnZW9tZXRyeSwgYm94TWF0ZXJpYWwpO1xuICAgICAgICBib3g1LnBvc2l0aW9uLnNldCgyLjI5MSwgLTAuNzU2LCAtMi42MjEpO1xuICAgICAgICBib3g1LnJvdGF0aW9uLnNldCgwLCAtMC4yODYsIDApO1xuICAgICAgICBib3g1LnNjYWxlLnNldCgxLjU0NiwgMS41NTIsIDEuNDk2KTtcbiAgICAgICAgdGhpcy5hZGQoYm94NSk7XG4gICAgICAgIGNvbnN0IGJveDYgPSBuZXcgTWVzaChnZW9tZXRyeSwgYm94TWF0ZXJpYWwpO1xuICAgICAgICBib3g2LnBvc2l0aW9uLnNldCgtMi4xOTMsIC0wLjM2OSwgLTUuNTQ3KTtcbiAgICAgICAgYm94Ni5yb3RhdGlvbi5zZXQoMCwgMC41MTYsIDApO1xuICAgICAgICBib3g2LnNjYWxlLnNldCgzLjg3NSwgMy40ODcsIDIuOTg2KTtcbiAgICAgICAgdGhpcy5hZGQoYm94Nik7XG4gICAgICAgIC8vIC14X2xlZnRcbiAgICAgICAgY29uc3QgbGlnaHQxID0gbmV3IE1lc2goZ2VvbWV0cnksIHRoaXMuY3JlYXRlQXJlYUxpZ2h0TWF0ZXJpYWwoODApKTtcbiAgICAgICAgbGlnaHQxLnBvc2l0aW9uLnNldCgtMTQuMCwgMTAuMCwgOC4wKTtcbiAgICAgICAgbGlnaHQxLnNjYWxlLnNldCgwLjEsIDIuNSwgMi41KTtcbiAgICAgICAgdGhpcy5hZGQobGlnaHQxKTtcbiAgICAgICAgLy8gLXhfcmlnaHRcbiAgICAgICAgY29uc3QgbGlnaHQyID0gbmV3IE1lc2goZ2VvbWV0cnksIHRoaXMuY3JlYXRlQXJlYUxpZ2h0TWF0ZXJpYWwoODApKTtcbiAgICAgICAgbGlnaHQyLnBvc2l0aW9uLnNldCgtMTQuMCwgMTQuMCwgLTQuMCk7XG4gICAgICAgIGxpZ2h0Mi5zY2FsZS5zZXQoMC4xLCAyLjUsIDIuNSk7XG4gICAgICAgIHRoaXMuYWRkKGxpZ2h0Mik7XG4gICAgICAgIC8vICt4IG9ubHkgb24gbGlnaHRcbiAgICAgICAgY29uc3QgbGlnaHQzID0gbmV3IE1lc2goZ2VvbWV0cnksIHRoaXMuY3JlYXRlQXJlYUxpZ2h0TWF0ZXJpYWwoMjMpKTtcbiAgICAgICAgbGlnaHQzLnBvc2l0aW9uLnNldCgxNC4wLCAxMi4wLCAwLjApO1xuICAgICAgICBsaWdodDMuc2NhbGUuc2V0KDAuMSwgNS4wLCA1LjApO1xuICAgICAgICB0aGlzLmFkZChsaWdodDMpO1xuICAgICAgICAvLyArelxuICAgICAgICBjb25zdCBsaWdodDQgPSBuZXcgTWVzaChnZW9tZXRyeSwgdGhpcy5jcmVhdGVBcmVhTGlnaHRNYXRlcmlhbCgxNikpO1xuICAgICAgICBsaWdodDQucG9zaXRpb24uc2V0KDAuMCwgOS4wLCAxNC4wKTtcbiAgICAgICAgbGlnaHQ0LnNjYWxlLnNldCg1LjAsIDUuMCwgMC4xKTtcbiAgICAgICAgdGhpcy5hZGQobGlnaHQ0KTtcbiAgICAgICAgLy8gLXogcmlnaHRcbiAgICAgICAgY29uc3QgbGlnaHQ1ID0gbmV3IE1lc2goZ2VvbWV0cnksIHRoaXMuY3JlYXRlQXJlYUxpZ2h0TWF0ZXJpYWwoODApKTtcbiAgICAgICAgbGlnaHQ1LnBvc2l0aW9uLnNldCg3LjAsIDguMCwgLTE0LjApO1xuICAgICAgICBsaWdodDUuc2NhbGUuc2V0KDIuNSwgMi41LCAwLjEpO1xuICAgICAgICB0aGlzLmFkZChsaWdodDUpO1xuICAgICAgICAvLyAteiBsZWZ0XG4gICAgICAgIGNvbnN0IGxpZ2h0NiA9IG5ldyBNZXNoKGdlb21ldHJ5LCB0aGlzLmNyZWF0ZUFyZWFMaWdodE1hdGVyaWFsKDgwKSk7XG4gICAgICAgIGxpZ2h0Ni5wb3NpdGlvbi5zZXQoLTcuMCwgMTYuMCwgLTE0LjApO1xuICAgICAgICBsaWdodDYuc2NhbGUuc2V0KDIuNSwgMi41LCAwLjEpO1xuICAgICAgICB0aGlzLmFkZChsaWdodDYpO1xuICAgICAgICAvLyAreVxuICAgICAgICBjb25zdCBsaWdodDcgPSBuZXcgTWVzaChnZW9tZXRyeSwgdGhpcy5jcmVhdGVBcmVhTGlnaHRNYXRlcmlhbCgxKSk7XG4gICAgICAgIGxpZ2h0Ny5wb3NpdGlvbi5zZXQoMC4wLCAyMC4wLCAwLjApO1xuICAgICAgICBsaWdodDcuc2NhbGUuc2V0KDAuMSwgMC4xLCAwLjEpO1xuICAgICAgICB0aGlzLmFkZChsaWdodDcpO1xuICAgIH1cbiAgICBjcmVhdGVBcmVhTGlnaHRNYXRlcmlhbChpbnRlbnNpdHkpIHtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoKTtcbiAgICAgICAgbWF0ZXJpYWwuY29sb3Iuc2V0U2NhbGFyKGludGVuc2l0eSk7XG4gICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FbnZpcm9ubWVudFNjZW5lQWx0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/EnvironmentSceneAlt.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/GLTFInstance.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/GLTFInstance.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $clone: () => (/* binding */ $clone),\n/* harmony export */   $prepare: () => (/* binding */ $prepare),\n/* harmony export */   $prepared: () => (/* binding */ $prepared),\n/* harmony export */   $preparedGLTF: () => (/* binding */ $preparedGLTF),\n/* harmony export */   GLTFInstance: () => (/* binding */ GLTFInstance)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three/examples/jsm/utils/SkeletonUtils.js */ \"(ssr)/./node_modules/three/examples/jsm/utils/SkeletonUtils.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nconst $prepared = Symbol('prepared');\nconst $prepare = Symbol('prepare');\nconst $preparedGLTF = Symbol('preparedGLTF');\nconst $clone = Symbol('clone');\n/**\n * Represents the preparation and enhancement of the output of a Three.js\n * GLTFLoader (a Three.js-flavor \"GLTF\"), to make it suitable for optimal,\n * correct viewing in a given presentation context and also make the cloning\n * process more explicit and legible.\n *\n * A GLTFInstance is API-compatible with a Three.js-flavor \"GLTF\", so it should\n * be considered to be interchangeable with the loaded result of a GLTFLoader.\n *\n * This basic implementation only implements trivial preparation and enhancement\n * of a GLTF. These operations are intended to be enhanced by inheriting\n * classes.\n */\nclass GLTFInstance {\n    constructor(preparedGLTF) {\n        this[$preparedGLTF] = preparedGLTF;\n    }\n    /**\n     * Prepares a given GLTF for presentation and future cloning. A GLTF that is\n     * prepared can safely have this method invoked on it multiple times; it will\n     * only be prepared once, including after being cloned.\n     */\n    static prepare(source) {\n        if (source.scene == null) {\n            throw new Error('Model does not have a scene');\n        }\n        if (source[$prepared]) {\n            return source;\n        }\n        const prepared = this[$prepare](source);\n        // NOTE: ES5 Symbol polyfill is not compatible with spread operator\n        // so {...prepared, [$prepared]: true} does not work\n        prepared[$prepared] = true;\n        return prepared;\n    }\n    /**\n     * Override in an inheriting class to apply specialty one-time preparations\n     * for a given input GLTF.\n     */\n    static [$prepare](source) {\n        // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n        // bother preparing extra scenes for now:\n        const { scene } = source;\n        const scenes = [scene];\n        return Object.assign(Object.assign({}, source), { scene, scenes });\n    }\n    get parser() {\n        return this[$preparedGLTF].parser;\n    }\n    get animations() {\n        return this[$preparedGLTF].animations;\n    }\n    get scene() {\n        return this[$preparedGLTF].scene;\n    }\n    get scenes() {\n        return this[$preparedGLTF].scenes;\n    }\n    get cameras() {\n        return this[$preparedGLTF].cameras;\n    }\n    get asset() {\n        return this[$preparedGLTF].asset;\n    }\n    get userData() {\n        return this[$preparedGLTF].userData;\n    }\n    /**\n     * Creates and returns a copy of this instance.\n     */\n    clone() {\n        const GLTFInstanceConstructor = this.constructor;\n        const clonedGLTF = this[$clone]();\n        return new GLTFInstanceConstructor(clonedGLTF);\n    }\n    /**\n     * Cleans up any retained memory that might not otherwise be released when\n     * this instance is done being used.\n     */\n    dispose() {\n        this.scenes.forEach((scene) => {\n            scene.traverse((object) => {\n                if (!object.isMesh) {\n                    return;\n                }\n                const mesh = object;\n                const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n                materials.forEach(material => {\n                    // Explicitly dispose any textures assigned to this material\n                    for (const propertyName in material) {\n                        const texture = material[propertyName];\n                        if (texture instanceof three__WEBPACK_IMPORTED_MODULE_0__.Texture) {\n                            const image = texture.source.data;\n                            if (image.close != null) {\n                                image.close();\n                            }\n                            texture.dispose();\n                        }\n                    }\n                    material.dispose();\n                });\n                mesh.geometry.dispose();\n            });\n        });\n    }\n    /**\n     * Override in an inheriting class to implement specialized cloning strategies\n     */\n    [$clone]() {\n        const source = this[$preparedGLTF];\n        // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n        // bother cloning extra scenes for now:\n        const scene = three_examples_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_1__.clone(this.scene);\n        cloneVariantMaterials(scene, this.scene);\n        const scenes = [scene];\n        const userData = source.userData ? Object.assign({}, source.userData) : {};\n        return Object.assign(Object.assign({}, source), { scene, scenes, userData });\n    }\n}\n// Variant materials and original material instances are stored under\n// object.userData.variantMaterials/originalMaterial.\n// Three.js Object3D.clone() doesn't clone Three.js objects under\n// .userData so this function is a workaround.\nconst cloneVariantMaterials = (dst, src) => {\n    traversePair(dst, src, (dst, src) => {\n        if (src.userData.variantMaterials !== undefined) {\n            dst.userData.variantMaterials = new Map(src.userData.variantMaterials);\n        }\n        if (src.userData.variantData !== undefined) {\n            dst.userData.variantData = src.userData.variantData;\n        }\n        if (src.userData.originalMaterial !== undefined) {\n            dst.userData.originalMaterial = src.userData.originalMaterial;\n        }\n    });\n};\nconst traversePair = (obj1, obj2, callback) => {\n    callback(obj1, obj2);\n    // Assume obj1 and obj2 have the same tree structure\n    for (let i = 0; i < obj1.children.length; i++) {\n        traversePair(obj1.children[i], obj2.children[i], callback);\n    }\n};\n//# sourceMappingURL=GLTFInstance.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvR0xURkluc3RhbmNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2dDO0FBQzJDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0NBQWdDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQSw2Q0FBNkMsYUFBYSxlQUFlO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDBDQUFPO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNEVBQW1CO0FBQ3pDO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0QsNkNBQTZDLGFBQWEseUJBQXlCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMEJBQTBCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL0dMVEZJbnN0YW5jZS5qcz9hNjliIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IFRleHR1cmUgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgKiBhcyBTa2VsZXRvblV0aWxzIGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS91dGlscy9Ta2VsZXRvblV0aWxzLmpzJztcbmV4cG9ydCBjb25zdCAkcHJlcGFyZWQgPSBTeW1ib2woJ3ByZXBhcmVkJyk7XG5leHBvcnQgY29uc3QgJHByZXBhcmUgPSBTeW1ib2woJ3ByZXBhcmUnKTtcbmV4cG9ydCBjb25zdCAkcHJlcGFyZWRHTFRGID0gU3ltYm9sKCdwcmVwYXJlZEdMVEYnKTtcbmV4cG9ydCBjb25zdCAkY2xvbmUgPSBTeW1ib2woJ2Nsb25lJyk7XG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIHByZXBhcmF0aW9uIGFuZCBlbmhhbmNlbWVudCBvZiB0aGUgb3V0cHV0IG9mIGEgVGhyZWUuanNcbiAqIEdMVEZMb2FkZXIgKGEgVGhyZWUuanMtZmxhdm9yIFwiR0xURlwiKSwgdG8gbWFrZSBpdCBzdWl0YWJsZSBmb3Igb3B0aW1hbCxcbiAqIGNvcnJlY3Qgdmlld2luZyBpbiBhIGdpdmVuIHByZXNlbnRhdGlvbiBjb250ZXh0IGFuZCBhbHNvIG1ha2UgdGhlIGNsb25pbmdcbiAqIHByb2Nlc3MgbW9yZSBleHBsaWNpdCBhbmQgbGVnaWJsZS5cbiAqXG4gKiBBIEdMVEZJbnN0YW5jZSBpcyBBUEktY29tcGF0aWJsZSB3aXRoIGEgVGhyZWUuanMtZmxhdm9yIFwiR0xURlwiLCBzbyBpdCBzaG91bGRcbiAqIGJlIGNvbnNpZGVyZWQgdG8gYmUgaW50ZXJjaGFuZ2VhYmxlIHdpdGggdGhlIGxvYWRlZCByZXN1bHQgb2YgYSBHTFRGTG9hZGVyLlxuICpcbiAqIFRoaXMgYmFzaWMgaW1wbGVtZW50YXRpb24gb25seSBpbXBsZW1lbnRzIHRyaXZpYWwgcHJlcGFyYXRpb24gYW5kIGVuaGFuY2VtZW50XG4gKiBvZiBhIEdMVEYuIFRoZXNlIG9wZXJhdGlvbnMgYXJlIGludGVuZGVkIHRvIGJlIGVuaGFuY2VkIGJ5IGluaGVyaXRpbmdcbiAqIGNsYXNzZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBHTFRGSW5zdGFuY2Uge1xuICAgIGNvbnN0cnVjdG9yKHByZXBhcmVkR0xURikge1xuICAgICAgICB0aGlzWyRwcmVwYXJlZEdMVEZdID0gcHJlcGFyZWRHTFRGO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmVwYXJlcyBhIGdpdmVuIEdMVEYgZm9yIHByZXNlbnRhdGlvbiBhbmQgZnV0dXJlIGNsb25pbmcuIEEgR0xURiB0aGF0IGlzXG4gICAgICogcHJlcGFyZWQgY2FuIHNhZmVseSBoYXZlIHRoaXMgbWV0aG9kIGludm9rZWQgb24gaXQgbXVsdGlwbGUgdGltZXM7IGl0IHdpbGxcbiAgICAgKiBvbmx5IGJlIHByZXBhcmVkIG9uY2UsIGluY2x1ZGluZyBhZnRlciBiZWluZyBjbG9uZWQuXG4gICAgICovXG4gICAgc3RhdGljIHByZXBhcmUoc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2Uuc2NlbmUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2RlbCBkb2VzIG5vdCBoYXZlIGEgc2NlbmUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc291cmNlWyRwcmVwYXJlZF0pIHtcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJlcGFyZWQgPSB0aGlzWyRwcmVwYXJlXShzb3VyY2UpO1xuICAgICAgICAvLyBOT1RFOiBFUzUgU3ltYm9sIHBvbHlmaWxsIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggc3ByZWFkIG9wZXJhdG9yXG4gICAgICAgIC8vIHNvIHsuLi5wcmVwYXJlZCwgWyRwcmVwYXJlZF06IHRydWV9IGRvZXMgbm90IHdvcmtcbiAgICAgICAgcHJlcGFyZWRbJHByZXBhcmVkXSA9IHRydWU7XG4gICAgICAgIHJldHVybiBwcmVwYXJlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgaW4gYW4gaW5oZXJpdGluZyBjbGFzcyB0byBhcHBseSBzcGVjaWFsdHkgb25lLXRpbWUgcHJlcGFyYXRpb25zXG4gICAgICogZm9yIGEgZ2l2ZW4gaW5wdXQgR0xURi5cbiAgICAgKi9cbiAgICBzdGF0aWMgWyRwcmVwYXJlXShzb3VyY2UpIHtcbiAgICAgICAgLy8gVE9ETygjMTk1LCMxMDAzKTogV2UgZG9uJ3QgY3VycmVudGx5IHN1cHBvcnQgbXVsdGlwbGUgc2NlbmVzLCBzbyB3ZSBkb24ndFxuICAgICAgICAvLyBib3RoZXIgcHJlcGFyaW5nIGV4dHJhIHNjZW5lcyBmb3Igbm93OlxuICAgICAgICBjb25zdCB7IHNjZW5lIH0gPSBzb3VyY2U7XG4gICAgICAgIGNvbnN0IHNjZW5lcyA9IFtzY2VuZV07XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNvdXJjZSksIHsgc2NlbmUsIHNjZW5lcyB9KTtcbiAgICB9XG4gICAgZ2V0IHBhcnNlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHByZXBhcmVkR0xURl0ucGFyc2VyO1xuICAgIH1cbiAgICBnZXQgYW5pbWF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHByZXBhcmVkR0xURl0uYW5pbWF0aW9ucztcbiAgICB9XG4gICAgZ2V0IHNjZW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skcHJlcGFyZWRHTFRGXS5zY2VuZTtcbiAgICB9XG4gICAgZ2V0IHNjZW5lcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHByZXBhcmVkR0xURl0uc2NlbmVzO1xuICAgIH1cbiAgICBnZXQgY2FtZXJhcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHByZXBhcmVkR0xURl0uY2FtZXJhcztcbiAgICB9XG4gICAgZ2V0IGFzc2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpc1skcHJlcGFyZWRHTFRGXS5hc3NldDtcbiAgICB9XG4gICAgZ2V0IHVzZXJEYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skcHJlcGFyZWRHTFRGXS51c2VyRGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGNvcHkgb2YgdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgR0xURkluc3RhbmNlQ29uc3RydWN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBjbG9uZWRHTFRGID0gdGhpc1skY2xvbmVdKCk7XG4gICAgICAgIHJldHVybiBuZXcgR0xURkluc3RhbmNlQ29uc3RydWN0b3IoY2xvbmVkR0xURik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFucyB1cCBhbnkgcmV0YWluZWQgbWVtb3J5IHRoYXQgbWlnaHQgbm90IG90aGVyd2lzZSBiZSByZWxlYXNlZCB3aGVuXG4gICAgICogdGhpcyBpbnN0YW5jZSBpcyBkb25lIGJlaW5nIHVzZWQuXG4gICAgICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5zY2VuZXMuZm9yRWFjaCgoc2NlbmUpID0+IHtcbiAgICAgICAgICAgIHNjZW5lLnRyYXZlcnNlKChvYmplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIW9iamVjdC5pc01lc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gb2JqZWN0O1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFscyA9IEFycmF5LmlzQXJyYXkobWVzaC5tYXRlcmlhbCkgPyBtZXNoLm1hdGVyaWFsIDogW21lc2gubWF0ZXJpYWxdO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFscy5mb3JFYWNoKG1hdGVyaWFsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhwbGljaXRseSBkaXNwb3NlIGFueSB0ZXh0dXJlcyBhc3NpZ25lZCB0byB0aGlzIG1hdGVyaWFsXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcHJvcGVydHlOYW1lIGluIG1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gbWF0ZXJpYWxbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlIGluc3RhbmNlb2YgVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlID0gdGV4dHVyZS5zb3VyY2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuY2xvc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIGluIGFuIGluaGVyaXRpbmcgY2xhc3MgdG8gaW1wbGVtZW50IHNwZWNpYWxpemVkIGNsb25pbmcgc3RyYXRlZ2llc1xuICAgICAqL1xuICAgIFskY2xvbmVdKCkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzWyRwcmVwYXJlZEdMVEZdO1xuICAgICAgICAvLyBUT0RPKCMxOTUsIzEwMDMpOiBXZSBkb24ndCBjdXJyZW50bHkgc3VwcG9ydCBtdWx0aXBsZSBzY2VuZXMsIHNvIHdlIGRvbid0XG4gICAgICAgIC8vIGJvdGhlciBjbG9uaW5nIGV4dHJhIHNjZW5lcyBmb3Igbm93OlxuICAgICAgICBjb25zdCBzY2VuZSA9IFNrZWxldG9uVXRpbHMuY2xvbmUodGhpcy5zY2VuZSk7XG4gICAgICAgIGNsb25lVmFyaWFudE1hdGVyaWFscyhzY2VuZSwgdGhpcy5zY2VuZSk7XG4gICAgICAgIGNvbnN0IHNjZW5lcyA9IFtzY2VuZV07XG4gICAgICAgIGNvbnN0IHVzZXJEYXRhID0gc291cmNlLnVzZXJEYXRhID8gT2JqZWN0LmFzc2lnbih7fSwgc291cmNlLnVzZXJEYXRhKSA6IHt9O1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzb3VyY2UpLCB7IHNjZW5lLCBzY2VuZXMsIHVzZXJEYXRhIH0pO1xuICAgIH1cbn1cbi8vIFZhcmlhbnQgbWF0ZXJpYWxzIGFuZCBvcmlnaW5hbCBtYXRlcmlhbCBpbnN0YW5jZXMgYXJlIHN0b3JlZCB1bmRlclxuLy8gb2JqZWN0LnVzZXJEYXRhLnZhcmlhbnRNYXRlcmlhbHMvb3JpZ2luYWxNYXRlcmlhbC5cbi8vIFRocmVlLmpzIE9iamVjdDNELmNsb25lKCkgZG9lc24ndCBjbG9uZSBUaHJlZS5qcyBvYmplY3RzIHVuZGVyXG4vLyAudXNlckRhdGEgc28gdGhpcyBmdW5jdGlvbiBpcyBhIHdvcmthcm91bmQuXG5jb25zdCBjbG9uZVZhcmlhbnRNYXRlcmlhbHMgPSAoZHN0LCBzcmMpID0+IHtcbiAgICB0cmF2ZXJzZVBhaXIoZHN0LCBzcmMsIChkc3QsIHNyYykgPT4ge1xuICAgICAgICBpZiAoc3JjLnVzZXJEYXRhLnZhcmlhbnRNYXRlcmlhbHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHN0LnVzZXJEYXRhLnZhcmlhbnRNYXRlcmlhbHMgPSBuZXcgTWFwKHNyYy51c2VyRGF0YS52YXJpYW50TWF0ZXJpYWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3JjLnVzZXJEYXRhLnZhcmlhbnREYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRzdC51c2VyRGF0YS52YXJpYW50RGF0YSA9IHNyYy51c2VyRGF0YS52YXJpYW50RGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3JjLnVzZXJEYXRhLm9yaWdpbmFsTWF0ZXJpYWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHN0LnVzZXJEYXRhLm9yaWdpbmFsTWF0ZXJpYWwgPSBzcmMudXNlckRhdGEub3JpZ2luYWxNYXRlcmlhbDtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbmNvbnN0IHRyYXZlcnNlUGFpciA9IChvYmoxLCBvYmoyLCBjYWxsYmFjaykgPT4ge1xuICAgIGNhbGxiYWNrKG9iajEsIG9iajIpO1xuICAgIC8vIEFzc3VtZSBvYmoxIGFuZCBvYmoyIGhhdmUgdGhlIHNhbWUgdHJlZSBzdHJ1Y3R1cmVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iajEuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHJhdmVyc2VQYWlyKG9iajEuY2hpbGRyZW5baV0sIG9iajIuY2hpbGRyZW5baV0sIGNhbGxiYWNrKTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R0xURkluc3RhbmNlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/GLTFInstance.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/Hotspot.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/Hotspot.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Hotspot: () => (/* binding */ Hotspot)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_renderers_CSS2DRenderer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three/examples/jsm/renderers/CSS2DRenderer.js */ \"(ssr)/./node_modules/three/examples/jsm/renderers/CSS2DRenderer.js\");\n/* harmony import */ var _styles_conversions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../styles/conversions.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/conversions.js\");\n/* harmony import */ var _styles_parsers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/parsers.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n/**\n * The Hotspot object is a reference-counted slot. If decrement() returns true,\n * it should be removed from the tree so it can be garbage-collected.\n */\nclass Hotspot extends three_examples_jsm_renderers_CSS2DRenderer_js__WEBPACK_IMPORTED_MODULE_2__.CSS2DObject {\n    constructor(config) {\n        super(document.createElement('div'));\n        this.normal = new three__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1, 0);\n        this.initialized = false;\n        this.referenceCount = 1;\n        this.pivot = document.createElement('div');\n        this.slot = document.createElement('slot');\n        this.element.classList.add('annotation-wrapper');\n        this.slot.name = config.name;\n        this.element.appendChild(this.pivot);\n        this.pivot.appendChild(this.slot);\n        this.updatePosition(config.position);\n        this.updateNormal(config.normal);\n    }\n    get facingCamera() {\n        return !this.element.classList.contains('hide');\n    }\n    /**\n     * Sets the hotspot to be in the highly visible foreground state.\n     */\n    show() {\n        if (!this.facingCamera || !this.initialized) {\n            this.updateVisibility(true);\n        }\n    }\n    /**\n     * Sets the hotspot to be in the diminished background state.\n     */\n    hide() {\n        if (this.facingCamera || !this.initialized) {\n            this.updateVisibility(false);\n        }\n    }\n    /**\n     * Call this when adding elements to the same slot to keep track.\n     */\n    increment() {\n        this.referenceCount++;\n    }\n    /**\n     * Call this when removing elements from the slot; returns true when the slot\n     * is unused.\n     */\n    decrement() {\n        if (this.referenceCount > 0) {\n            --this.referenceCount;\n        }\n        return this.referenceCount === 0;\n    }\n    /**\n     * Change the position of the hotspot to the input string, in the same format\n     * as the data-position attribute.\n     */\n    updatePosition(position) {\n        if (position == null)\n            return;\n        const positionNodes = (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_1__.parseExpressions)(position)[0].terms;\n        for (let i = 0; i < 3; ++i) {\n            this.position.setComponent(i, (0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_0__.normalizeUnit)(positionNodes[i]).number);\n        }\n        this.updateMatrixWorld();\n    }\n    /**\n     * Change the hotspot's normal to the input string, in the same format as the\n     * data-normal attribute.\n     */\n    updateNormal(normal) {\n        if (normal == null)\n            return;\n        const normalNodes = (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_1__.parseExpressions)(normal)[0].terms;\n        for (let i = 0; i < 3; ++i) {\n            this.normal.setComponent(i, (0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_0__.normalizeUnit)(normalNodes[i]).number);\n        }\n    }\n    orient(radians) {\n        this.pivot.style.transform = `rotate(${radians}rad)`;\n    }\n    updateVisibility(show) {\n        // NOTE: IE11 doesn't support a second arg for classList.toggle\n        if (show) {\n            this.element.classList.remove('hide');\n        }\n        else {\n            this.element.classList.add('hide');\n        }\n        // NOTE: ShadyDOM doesn't support slot.assignedElements, otherwise we could\n        // use that here.\n        this.slot.assignedNodes().forEach((node) => {\n            if (node.nodeType !== Node.ELEMENT_NODE) {\n                return;\n            }\n            const element = node;\n            // Visibility attribute can be configured per-node in the hotspot:\n            const visibilityAttribute = element.dataset.visibilityAttribute;\n            if (visibilityAttribute != null) {\n                const attributeName = `data-${visibilityAttribute}`;\n                // NOTE: IE11 doesn't support toggleAttribute\n                if (show) {\n                    element.setAttribute(attributeName, '');\n                }\n                else {\n                    element.removeAttribute(attributeName);\n                }\n            }\n            element.dispatchEvent(new CustomEvent('hotspot-visibility', {\n                detail: {\n                    visible: show,\n                },\n            }));\n        });\n        this.initialized = true;\n    }\n}\n//# sourceMappingURL=Hotspot.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvSG90c3BvdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZ0M7QUFDNEM7QUFDbkI7QUFDRDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNPLHNCQUFzQixzRkFBVztBQUN4QztBQUNBO0FBQ0EsMEJBQTBCLDBDQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixvRUFBZ0I7QUFDOUMsd0JBQXdCLE9BQU87QUFDL0IsMENBQTBDLHFFQUFhO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG9FQUFnQjtBQUM1Qyx3QkFBd0IsT0FBTztBQUMvQix3Q0FBd0MscUVBQWE7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsb0JBQW9CO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvdGhyZWUtY29tcG9uZW50cy9Ib3RzcG90LmpzP2FjMTUiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7IENTUzJET2JqZWN0IH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL3JlbmRlcmVycy9DU1MyRFJlbmRlcmVyLmpzJztcbmltcG9ydCB7IG5vcm1hbGl6ZVVuaXQgfSBmcm9tICcuLi9zdHlsZXMvY29udmVyc2lvbnMuanMnO1xuaW1wb3J0IHsgcGFyc2VFeHByZXNzaW9ucyB9IGZyb20gJy4uL3N0eWxlcy9wYXJzZXJzLmpzJztcbi8qKlxuICogVGhlIEhvdHNwb3Qgb2JqZWN0IGlzIGEgcmVmZXJlbmNlLWNvdW50ZWQgc2xvdC4gSWYgZGVjcmVtZW50KCkgcmV0dXJucyB0cnVlLFxuICogaXQgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSB0aGUgdHJlZSBzbyBpdCBjYW4gYmUgZ2FyYmFnZS1jb2xsZWN0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBIb3RzcG90IGV4dGVuZHMgQ1NTMkRPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgICAgIHRoaXMubm9ybWFsID0gbmV3IFZlY3RvcjMoMCwgMSwgMCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VDb3VudCA9IDE7XG4gICAgICAgIHRoaXMucGl2b3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5zbG90ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2xvdCcpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYW5ub3RhdGlvbi13cmFwcGVyJyk7XG4gICAgICAgIHRoaXMuc2xvdC5uYW1lID0gY29uZmlnLm5hbWU7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnBpdm90KTtcbiAgICAgICAgdGhpcy5waXZvdC5hcHBlbmRDaGlsZCh0aGlzLnNsb3QpO1xuICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKGNvbmZpZy5wb3NpdGlvbik7XG4gICAgICAgIHRoaXMudXBkYXRlTm9ybWFsKGNvbmZpZy5ub3JtYWwpO1xuICAgIH1cbiAgICBnZXQgZmFjaW5nQ2FtZXJhKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaG90c3BvdCB0byBiZSBpbiB0aGUgaGlnaGx5IHZpc2libGUgZm9yZWdyb3VuZCBzdGF0ZS5cbiAgICAgKi9cbiAgICBzaG93KCkge1xuICAgICAgICBpZiAoIXRoaXMuZmFjaW5nQ2FtZXJhIHx8ICF0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpc2liaWxpdHkodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgaG90c3BvdCB0byBiZSBpbiB0aGUgZGltaW5pc2hlZCBiYWNrZ3JvdW5kIHN0YXRlLlxuICAgICAqL1xuICAgIGhpZGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmZhY2luZ0NhbWVyYSB8fCAhdGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaXNpYmlsaXR5KGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHRoaXMgd2hlbiBhZGRpbmcgZWxlbWVudHMgdG8gdGhlIHNhbWUgc2xvdCB0byBrZWVwIHRyYWNrLlxuICAgICAqL1xuICAgIGluY3JlbWVudCgpIHtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VDb3VudCsrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHRoaXMgd2hlbiByZW1vdmluZyBlbGVtZW50cyBmcm9tIHRoZSBzbG90OyByZXR1cm5zIHRydWUgd2hlbiB0aGUgc2xvdFxuICAgICAqIGlzIHVudXNlZC5cbiAgICAgKi9cbiAgICBkZWNyZW1lbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlZmVyZW5jZUNvdW50ID4gMCkge1xuICAgICAgICAgICAgLS10aGlzLnJlZmVyZW5jZUNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZUNvdW50ID09PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2UgdGhlIHBvc2l0aW9uIG9mIHRoZSBob3RzcG90IHRvIHRoZSBpbnB1dCBzdHJpbmcsIGluIHRoZSBzYW1lIGZvcm1hdFxuICAgICAqIGFzIHRoZSBkYXRhLXBvc2l0aW9uIGF0dHJpYnV0ZS5cbiAgICAgKi9cbiAgICB1cGRhdGVQb3NpdGlvbihwb3NpdGlvbikge1xuICAgICAgICBpZiAocG9zaXRpb24gPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcG9zaXRpb25Ob2RlcyA9IHBhcnNlRXhwcmVzc2lvbnMocG9zaXRpb24pWzBdLnRlcm1zO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi5zZXRDb21wb25lbnQoaSwgbm9ybWFsaXplVW5pdChwb3NpdGlvbk5vZGVzW2ldKS5udW1iZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlIHRoZSBob3RzcG90J3Mgbm9ybWFsIHRvIHRoZSBpbnB1dCBzdHJpbmcsIGluIHRoZSBzYW1lIGZvcm1hdCBhcyB0aGVcbiAgICAgKiBkYXRhLW5vcm1hbCBhdHRyaWJ1dGUuXG4gICAgICovXG4gICAgdXBkYXRlTm9ybWFsKG5vcm1hbCkge1xuICAgICAgICBpZiAobm9ybWFsID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IG5vcm1hbE5vZGVzID0gcGFyc2VFeHByZXNzaW9ucyhub3JtYWwpWzBdLnRlcm1zO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5ub3JtYWwuc2V0Q29tcG9uZW50KGksIG5vcm1hbGl6ZVVuaXQobm9ybWFsTm9kZXNbaV0pLm51bWJlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3JpZW50KHJhZGlhbnMpIHtcbiAgICAgICAgdGhpcy5waXZvdC5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlKCR7cmFkaWFuc31yYWQpYDtcbiAgICB9XG4gICAgdXBkYXRlVmlzaWJpbGl0eShzaG93KSB7XG4gICAgICAgIC8vIE5PVEU6IElFMTEgZG9lc24ndCBzdXBwb3J0IGEgc2Vjb25kIGFyZyBmb3IgY2xhc3NMaXN0LnRvZ2dsZVxuICAgICAgICBpZiAoc2hvdykge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTk9URTogU2hhZHlET00gZG9lc24ndCBzdXBwb3J0IHNsb3QuYXNzaWduZWRFbGVtZW50cywgb3RoZXJ3aXNlIHdlIGNvdWxkXG4gICAgICAgIC8vIHVzZSB0aGF0IGhlcmUuXG4gICAgICAgIHRoaXMuc2xvdC5hc3NpZ25lZE5vZGVzKCkuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGU7XG4gICAgICAgICAgICAvLyBWaXNpYmlsaXR5IGF0dHJpYnV0ZSBjYW4gYmUgY29uZmlndXJlZCBwZXItbm9kZSBpbiB0aGUgaG90c3BvdDpcbiAgICAgICAgICAgIGNvbnN0IHZpc2liaWxpdHlBdHRyaWJ1dGUgPSBlbGVtZW50LmRhdGFzZXQudmlzaWJpbGl0eUF0dHJpYnV0ZTtcbiAgICAgICAgICAgIGlmICh2aXNpYmlsaXR5QXR0cmlidXRlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gYGRhdGEtJHt2aXNpYmlsaXR5QXR0cmlidXRlfWA7XG4gICAgICAgICAgICAgICAgLy8gTk9URTogSUUxMSBkb2Vzbid0IHN1cHBvcnQgdG9nZ2xlQXR0cmlidXRlXG4gICAgICAgICAgICAgICAgaWYgKHNob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnaG90c3BvdC12aXNpYmlsaXR5Jywge1xuICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBzaG93LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ib3RzcG90LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/Hotspot.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/ModelScene.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/ModelScene.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IlluminationRole: () => (/* binding */ IlluminationRole),\n/* harmony export */   ModelScene: () => (/* binding */ ModelScene)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_renderers_CSS2DRenderer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! three/examples/jsm/renderers/CSS2DRenderer.js */ \"(ssr)/./node_modules/three/examples/jsm/renderers/CSS2DRenderer.js\");\n/* harmony import */ var _features_scene_graph_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../features/scene-graph.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/scene-graph.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _styles_conversions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../styles/conversions.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/conversions.js\");\n/* harmony import */ var _styles_parsers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../styles/parsers.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/styles/parsers.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* harmony import */ var _Damper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Damper.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Damper.js\");\n/* harmony import */ var _Hotspot_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Hotspot.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Hotspot.js\");\n/* harmony import */ var _ModelUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ModelUtils.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/ModelUtils.js\");\n/* harmony import */ var _Shadow_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Shadow.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Shadow.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\n\n\n\n\n\nconst MIN_SHADOW_RATIO = 100;\nconst IlluminationRole = {\n    Primary: 'primary',\n    Secondary: 'secondary'\n};\nconst view = new three__WEBPACK_IMPORTED_MODULE_9__.Vector3();\nconst target = new three__WEBPACK_IMPORTED_MODULE_9__.Vector3();\nconst normalWorld = new three__WEBPACK_IMPORTED_MODULE_9__.Vector3();\nconst raycaster = new three__WEBPACK_IMPORTED_MODULE_9__.Raycaster();\nconst vector3 = new three__WEBPACK_IMPORTED_MODULE_9__.Vector3();\nconst ndc = new three__WEBPACK_IMPORTED_MODULE_9__.Vector2();\n/**\n * A THREE.Scene object that takes a Model and CanvasHTMLElement and\n * constructs a framed scene based off of the canvas dimensions.\n * Provides lights and cameras to be used in a renderer.\n */\nclass ModelScene extends three__WEBPACK_IMPORTED_MODULE_9__.Scene {\n    constructor({ canvas, element, width, height }) {\n        super();\n        this.annotationRenderer = new three_examples_jsm_renderers_CSS2DRenderer_js__WEBPACK_IMPORTED_MODULE_10__.CSS2DRenderer();\n        this.schemaElement = document.createElement('script');\n        this.width = 1;\n        this.height = 1;\n        this.aspect = 1;\n        this.scaleStep = 0;\n        this.renderCount = 0;\n        this.externalRenderer = null;\n        // These default camera values are never used, as they are reset once the\n        // model is loaded and framing is computed.\n        this.camera = new three__WEBPACK_IMPORTED_MODULE_9__.PerspectiveCamera(45, 1, 0.1, 100);\n        this.xrCamera = null;\n        this.url = null;\n        this.target = new three__WEBPACK_IMPORTED_MODULE_9__.Object3D();\n        this.animationNames = [];\n        this.boundingBox = new three__WEBPACK_IMPORTED_MODULE_9__.Box3();\n        this.boundingSphere = new three__WEBPACK_IMPORTED_MODULE_9__.Sphere();\n        this.size = new three__WEBPACK_IMPORTED_MODULE_9__.Vector3();\n        this.idealAspect = 0;\n        this.framedFoVDeg = 0;\n        this.shadow = null;\n        this.shadowIntensity = 0;\n        this.shadowSoftness = 1;\n        this.bakedShadows = new Set();\n        this.exposure = 1;\n        this.canScale = true;\n        this.isDirty = false;\n        this.goalTarget = new three__WEBPACK_IMPORTED_MODULE_9__.Vector3();\n        this.targetDamperX = new _Damper_js__WEBPACK_IMPORTED_MODULE_5__.Damper();\n        this.targetDamperY = new _Damper_js__WEBPACK_IMPORTED_MODULE_5__.Damper();\n        this.targetDamperZ = new _Damper_js__WEBPACK_IMPORTED_MODULE_5__.Damper();\n        this._currentGLTF = null;\n        this._model = null;\n        this.cancelPendingSourceChange = null;\n        this.animationsByName = new Map();\n        this.currentAnimationAction = null;\n        this.name = 'ModelScene';\n        this.element = element;\n        this.canvas = canvas;\n        // These default camera values are never used, as they are reset once the\n        // model is loaded and framing is computed.\n        this.camera = new three__WEBPACK_IMPORTED_MODULE_9__.PerspectiveCamera(45, 1, 0.1, 100);\n        this.camera.name = 'MainCamera';\n        this.add(this.target);\n        this.setSize(width, height);\n        this.target.name = 'Target';\n        this.mixer = new three__WEBPACK_IMPORTED_MODULE_9__.AnimationMixer(this.target);\n        const { domElement } = this.annotationRenderer;\n        const { style } = domElement;\n        style.display = 'none';\n        style.pointerEvents = 'none';\n        style.position = 'absolute';\n        style.top = '0';\n        this.element.shadowRoot.querySelector('.default').appendChild(domElement);\n        this.schemaElement.setAttribute('type', 'application/ld+json');\n    }\n    /**\n     * Function to create the context lazily, as when there is only one\n     * <model-viewer> element, the renderer's 3D context can be displayed\n     * directly. This extra context is necessary to copy the renderings into when\n     * there are more than one.\n     */\n    get context() {\n        return this.canvas.getContext('2d');\n    }\n    getCamera() {\n        return this.xrCamera != null ? this.xrCamera : this.camera;\n    }\n    queueRender() {\n        this.isDirty = true;\n    }\n    shouldRender() {\n        return this.isDirty;\n    }\n    hasRendered() {\n        this.isDirty = false;\n    }\n    forceRescale() {\n        this.scaleStep = -1;\n        this.queueRender();\n    }\n    /**\n     * Pass in a THREE.Object3D to be controlled\n     * by this model.\n     */\n    async setObject(model) {\n        this.reset();\n        this._model = model;\n        this.target.add(model);\n        await this.setupScene();\n    }\n    /**\n     * Sets the model via URL.\n     */\n    async setSource(url, progressCallback = () => { }) {\n        if (!url || url === this.url) {\n            progressCallback(1);\n            return;\n        }\n        this.reset();\n        this.url = url;\n        if (this.externalRenderer != null) {\n            const framingInfo = await this.externalRenderer.load(progressCallback);\n            this.boundingSphere.radius = framingInfo.framedRadius;\n            this.idealAspect = framingInfo.fieldOfViewAspect;\n            return;\n        }\n        // If we have pending work due to a previous source change in progress,\n        // cancel it so that we do not incur a race condition:\n        if (this.cancelPendingSourceChange != null) {\n            this.cancelPendingSourceChange();\n            this.cancelPendingSourceChange = null;\n        }\n        let gltf;\n        try {\n            gltf = await new Promise(async (resolve, reject) => {\n                this.cancelPendingSourceChange = () => reject();\n                try {\n                    const result = await this.element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$renderer].loader.load(url, this.element, progressCallback);\n                    resolve(result);\n                }\n                catch (error) {\n                    reject(error);\n                }\n            });\n        }\n        catch (error) {\n            if (error == null) {\n                // Loading was cancelled, so silently return\n                return;\n            }\n            throw error;\n        }\n        this.cancelPendingSourceChange = null;\n        this.reset();\n        this.url = url;\n        this._currentGLTF = gltf;\n        if (gltf != null) {\n            this._model = gltf.scene;\n            this.target.add(gltf.scene);\n        }\n        const { animations } = gltf;\n        const animationsByName = new Map();\n        const animationNames = [];\n        for (const animation of animations) {\n            animationsByName.set(animation.name, animation);\n            animationNames.push(animation.name);\n        }\n        this.animations = animations;\n        this.animationsByName = animationsByName;\n        this.animationNames = animationNames;\n        await this.setupScene();\n    }\n    async setupScene() {\n        this.applyTransform();\n        this.updateBoundingBox();\n        await this.updateFraming();\n        this.updateShadow();\n        this.setShadowIntensity(this.shadowIntensity);\n    }\n    reset() {\n        this.url = null;\n        this.queueRender();\n        if (this.shadow != null) {\n            this.shadow.setIntensity(0);\n        }\n        this.bakedShadows.clear();\n        const { _model } = this;\n        if (_model != null) {\n            _model.removeFromParent();\n            this._model = null;\n        }\n        const gltf = this._currentGLTF;\n        if (gltf != null) {\n            gltf.dispose();\n            this._currentGLTF = null;\n        }\n        if (this.currentAnimationAction != null) {\n            this.currentAnimationAction.stop();\n            this.currentAnimationAction = null;\n        }\n        this.mixer.stopAllAction();\n        this.mixer.uncacheRoot(this);\n    }\n    dispose() {\n        this.reset();\n        if (this.shadow != null) {\n            this.shadow.dispose();\n            this.shadow = null;\n        }\n        this.element[_features_scene_graph_js__WEBPACK_IMPORTED_MODULE_0__.$currentGLTF] = null;\n        this.element[_features_scene_graph_js__WEBPACK_IMPORTED_MODULE_0__.$originalGltfJson] = null;\n        this.element[_features_scene_graph_js__WEBPACK_IMPORTED_MODULE_0__.$model] = null;\n    }\n    get currentGLTF() {\n        return this._currentGLTF;\n    }\n    /**\n     * Updates the ModelScene for a new container size in CSS pixels.\n     */\n    setSize(width, height) {\n        if (this.width === width && this.height === height) {\n            return;\n        }\n        this.width = Math.max(width, 1);\n        this.height = Math.max(height, 1);\n        this.annotationRenderer.setSize(width, height);\n        this.aspect = this.width / this.height;\n        if (this.externalRenderer != null) {\n            const dpr = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_4__.resolveDpr)();\n            this.externalRenderer.resize(width * dpr, height * dpr);\n        }\n        this.queueRender();\n    }\n    markBakedShadow(mesh) {\n        mesh.userData.shadow = true;\n        this.bakedShadows.add(mesh);\n    }\n    unmarkBakedShadow(mesh) {\n        mesh.userData.shadow = false;\n        mesh.visible = true;\n        this.bakedShadows.delete(mesh);\n        this.boundingBox.expandByObject(mesh);\n    }\n    findBakedShadows(group) {\n        const boundingBox = new three__WEBPACK_IMPORTED_MODULE_9__.Box3();\n        group.traverse((object) => {\n            const mesh = object;\n            if (!mesh.isMesh) {\n                return;\n            }\n            const material = mesh.material;\n            if (!material.transparent) {\n                return;\n            }\n            boundingBox.setFromObject(mesh);\n            const size = boundingBox.getSize(vector3);\n            const minDim = Math.min(size.x, size.y, size.z);\n            const maxDim = Math.max(size.x, size.y, size.z);\n            if (maxDim < MIN_SHADOW_RATIO * minDim) {\n                return;\n            }\n            this.markBakedShadow(mesh);\n        });\n    }\n    checkBakedShadows() {\n        const { min, max } = this.boundingBox;\n        const shadowBox = new three__WEBPACK_IMPORTED_MODULE_9__.Box3();\n        this.boundingBox.getSize(this.size);\n        for (const mesh of this.bakedShadows) {\n            shadowBox.setFromObject(mesh);\n            if (shadowBox.min.y < min.y + this.size.y / MIN_SHADOW_RATIO &&\n                shadowBox.min.x <= min.x && shadowBox.max.x >= max.x &&\n                shadowBox.min.z <= min.z && shadowBox.max.z >= max.z) {\n                // floor shadow\n                continue;\n            }\n            if (shadowBox.min.z < min.z + this.size.z / MIN_SHADOW_RATIO &&\n                shadowBox.min.x <= min.x && shadowBox.max.x >= max.x &&\n                shadowBox.min.y <= min.y && shadowBox.max.y >= max.y) {\n                // wall shadow\n                continue;\n            }\n            this.unmarkBakedShadow(mesh);\n        }\n    }\n    applyTransform() {\n        const { model } = this;\n        if (model == null) {\n            return;\n        }\n        const orientation = (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_3__.parseExpressions)(this.element.orientation)[0]\n            .terms;\n        const roll = (0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_2__.normalizeUnit)(orientation[0]).number;\n        const pitch = (0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_2__.normalizeUnit)(orientation[1]).number;\n        const yaw = (0,_styles_conversions_js__WEBPACK_IMPORTED_MODULE_2__.normalizeUnit)(orientation[2]).number;\n        model.quaternion.setFromEuler(new three__WEBPACK_IMPORTED_MODULE_9__.Euler(pitch, yaw, roll, 'YXZ'));\n        const scale = (0,_styles_parsers_js__WEBPACK_IMPORTED_MODULE_3__.parseExpressions)(this.element.scale)[0]\n            .terms;\n        model.scale.set(scale[0].number, scale[1].number, scale[2].number);\n    }\n    updateBoundingBox() {\n        const { model } = this;\n        if (model == null) {\n            return;\n        }\n        this.target.remove(model);\n        this.findBakedShadows(model);\n        const bound = (box, vertex) => {\n            return box.expandByPoint(vertex);\n        };\n        this.setBakedShadowVisibility(false);\n        this.boundingBox = (0,_ModelUtils_js__WEBPACK_IMPORTED_MODULE_7__.reduceVertices)(model, bound, new three__WEBPACK_IMPORTED_MODULE_9__.Box3());\n        // If there's nothing but the baked shadow, then it's not a baked shadow.\n        if (this.boundingBox.isEmpty()) {\n            this.setBakedShadowVisibility(true);\n            this.bakedShadows.forEach((mesh) => this.unmarkBakedShadow(mesh));\n            this.boundingBox = (0,_ModelUtils_js__WEBPACK_IMPORTED_MODULE_7__.reduceVertices)(model, bound, new three__WEBPACK_IMPORTED_MODULE_9__.Box3());\n        }\n        this.checkBakedShadows();\n        this.setBakedShadowVisibility();\n        this.boundingBox.getSize(this.size);\n        this.target.add(model);\n    }\n    /**\n     * Calculates the boundingSphere and idealAspect that allows the 3D\n     * object to be framed tightly in a 2D window of any aspect ratio without\n     * clipping at any camera orbit. The camera's center target point can be\n     * optionally specified. If no center is specified, it defaults to the center\n     * of the bounding box, which means asymmetric models will tend to be tight on\n     * one side instead of both. Proper choice of center can correct this.\n     */\n    async updateFraming() {\n        const { model } = this;\n        if (model == null) {\n            return;\n        }\n        this.target.remove(model);\n        this.setBakedShadowVisibility(false);\n        const { center } = this.boundingSphere;\n        this.element.requestUpdate('cameraTarget');\n        await this.element.updateComplete;\n        center.copy(this.getTarget());\n        const radiusSquared = (value, vertex) => {\n            return Math.max(value, center.distanceToSquared(vertex));\n        };\n        this.boundingSphere.radius =\n            Math.sqrt((0,_ModelUtils_js__WEBPACK_IMPORTED_MODULE_7__.reduceVertices)(model, radiusSquared, 0));\n        const horizontalTanFov = (value, vertex) => {\n            vertex.sub(center);\n            const radiusXZ = Math.sqrt(vertex.x * vertex.x + vertex.z * vertex.z);\n            return Math.max(value, radiusXZ / (this.idealCameraDistance() - Math.abs(vertex.y)));\n        };\n        this.idealAspect = (0,_ModelUtils_js__WEBPACK_IMPORTED_MODULE_7__.reduceVertices)(model, horizontalTanFov, 0) /\n            Math.tan((this.framedFoVDeg / 2) * Math.PI / 180);\n        this.setBakedShadowVisibility();\n        this.target.add(model);\n    }\n    setBakedShadowVisibility(visible = this.shadowIntensity <= 0) {\n        for (const shadow of this.bakedShadows) {\n            shadow.visible = visible;\n        }\n    }\n    idealCameraDistance() {\n        const halfFovRad = (this.framedFoVDeg / 2) * Math.PI / 180;\n        return this.boundingSphere.radius / Math.sin(halfFovRad);\n    }\n    /**\n     * Set's the framedFieldOfView based on the aspect ratio of the window in\n     * order to keep the model fully visible at any camera orientation.\n     */\n    adjustedFoV(fovDeg) {\n        const vertical = Math.tan((fovDeg / 2) * Math.PI / 180) *\n            Math.max(1, this.idealAspect / this.aspect);\n        return 2 * Math.atan(vertical) * 180 / Math.PI;\n    }\n    getNDC(clientX, clientY) {\n        if (this.xrCamera != null) {\n            ndc.set(clientX / window.screen.width, clientY / window.screen.height);\n        }\n        else {\n            const rect = this.element.getBoundingClientRect();\n            ndc.set((clientX - rect.x) / this.width, (clientY - rect.y) / this.height);\n        }\n        ndc.multiplyScalar(2).subScalar(1);\n        ndc.y *= -1;\n        return ndc;\n    }\n    /**\n     * Returns the size of the corresponding canvas element.\n     */\n    getSize() {\n        return { width: this.width, height: this.height };\n    }\n    setEnvironmentAndSkybox(environment, skybox) {\n        if (this.element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$renderer].arRenderer.presentedScene === this) {\n            return;\n        }\n        this.environment = environment;\n        this.background = skybox;\n        this.queueRender();\n    }\n    /**\n     * Sets the point in model coordinates the model should orbit/pivot around.\n     */\n    setTarget(modelX, modelY, modelZ) {\n        this.goalTarget.set(-modelX, -modelY, -modelZ);\n    }\n    /**\n     * Set the decay time of, affects the speed of target transitions.\n     */\n    setTargetDamperDecayTime(decayMilliseconds) {\n        this.targetDamperX.setDecayTime(decayMilliseconds);\n        this.targetDamperY.setDecayTime(decayMilliseconds);\n        this.targetDamperZ.setDecayTime(decayMilliseconds);\n    }\n    /**\n     * Gets the point in model coordinates the model should orbit/pivot around.\n     */\n    getTarget() {\n        return this.goalTarget.clone().multiplyScalar(-1);\n    }\n    /**\n     * Shifts the model to the target point immediately instead of easing in.\n     */\n    jumpToGoal() {\n        this.updateTarget(_Damper_js__WEBPACK_IMPORTED_MODULE_5__.SETTLING_TIME);\n    }\n    /**\n     * This should be called every frame with the frame delta to cause the target\n     * to transition to its set point.\n     */\n    updateTarget(delta) {\n        const goal = this.goalTarget;\n        const target = this.target.position;\n        if (!goal.equals(target)) {\n            const normalization = this.boundingSphere.radius / 10;\n            let { x, y, z } = target;\n            x = this.targetDamperX.update(x, goal.x, delta, normalization);\n            y = this.targetDamperY.update(y, goal.y, delta, normalization);\n            z = this.targetDamperZ.update(z, goal.z, delta, normalization);\n            this.target.position.set(x, y, z);\n            this.target.updateMatrixWorld();\n            this.queueRender();\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /**\n     * Yaw the +z (front) of the model toward the indicated world coordinates.\n     */\n    pointTowards(worldX, worldZ) {\n        const { x, z } = this.position;\n        this.yaw = Math.atan2(worldX - x, worldZ - z);\n    }\n    get model() {\n        return this._model;\n    }\n    /**\n     * Yaw is the scene's orientation about the y-axis, around the rotation\n     * center.\n     */\n    set yaw(radiansY) {\n        this.rotation.y = radiansY;\n        this.queueRender();\n    }\n    get yaw() {\n        return this.rotation.y;\n    }\n    set animationTime(value) {\n        this.mixer.setTime(value);\n        this.queueShadowRender();\n    }\n    get animationTime() {\n        if (this.currentAnimationAction != null) {\n            const loopCount = Math.max(this.currentAnimationAction._loopCount, 0);\n            if (this.currentAnimationAction.loop === three__WEBPACK_IMPORTED_MODULE_9__.LoopPingPong &&\n                (loopCount & 1) === 1) {\n                return this.duration - this.currentAnimationAction.time;\n            }\n            else {\n                return this.currentAnimationAction.time;\n            }\n        }\n        return 0;\n    }\n    set animationTimeScale(value) {\n        this.mixer.timeScale = value;\n    }\n    get animationTimeScale() {\n        return this.mixer.timeScale;\n    }\n    get duration() {\n        if (this.currentAnimationAction != null &&\n            this.currentAnimationAction.getClip()) {\n            return this.currentAnimationAction.getClip().duration;\n        }\n        return 0;\n    }\n    get hasActiveAnimation() {\n        return this.currentAnimationAction != null;\n    }\n    /**\n     * Plays an animation if there are any associated with the current model.\n     * Accepts an optional string name of an animation to play. If no name is\n     * provided, or if no animation is found by the given name, always falls back\n     * to playing the first animation.\n     */\n    playAnimation(name = null, crossfadeTime = 0, loopMode = three__WEBPACK_IMPORTED_MODULE_9__.LoopRepeat, repetitionCount = Infinity) {\n        if (this._currentGLTF == null) {\n            return;\n        }\n        const { animations } = this;\n        if (animations == null || animations.length === 0) {\n            console.warn(`Cannot play animation (model does not have any animations)`);\n            return;\n        }\n        let animationClip = null;\n        if (name != null) {\n            animationClip = this.animationsByName.get(name);\n            if (animationClip == null) {\n                const parsedAnimationIndex = parseInt(name);\n                if (!isNaN(parsedAnimationIndex) && parsedAnimationIndex >= 0 &&\n                    parsedAnimationIndex < animations.length) {\n                    animationClip = animations[parsedAnimationIndex];\n                }\n            }\n        }\n        if (animationClip == null) {\n            animationClip = animations[0];\n        }\n        try {\n            const { currentAnimationAction: lastAnimationAction } = this;\n            const action = this.mixer.clipAction(animationClip, this);\n            this.currentAnimationAction = action;\n            if (this.element.paused) {\n                this.mixer.stopAllAction();\n            }\n            else {\n                action.paused = false;\n                if (lastAnimationAction != null && action !== lastAnimationAction) {\n                    action.crossFadeFrom(lastAnimationAction, crossfadeTime, false);\n                }\n                else if (this.animationTimeScale > 0 &&\n                    this.animationTime == this.duration) {\n                    // This is a workaround for what I believe is a three.js bug.\n                    this.animationTime = 0;\n                }\n            }\n            action.setLoop(loopMode, repetitionCount);\n            action.enabled = true;\n            action.clampWhenFinished = true;\n            action.play();\n        }\n        catch (error) {\n            console.error(error);\n        }\n    }\n    stopAnimation() {\n        this.currentAnimationAction = null;\n        this.mixer.stopAllAction();\n    }\n    updateAnimation(step) {\n        this.mixer.update(step);\n        this.queueShadowRender();\n    }\n    subscribeMixerEvent(event, callback) {\n        this.mixer.addEventListener(event, callback);\n    }\n    /**\n     * Call if the object has been changed in such a way that the shadow's shape\n     * has changed (not a rotation about the Y axis).\n     */\n    updateShadow() {\n        const shadow = this.shadow;\n        if (shadow != null) {\n            const side = this.element.arPlacement === 'wall' ? 'back' : 'bottom';\n            shadow.setScene(this, this.shadowSoftness, side);\n            shadow.needsUpdate = true;\n        }\n    }\n    renderShadow(renderer) {\n        const shadow = this.shadow;\n        if (shadow != null && shadow.needsUpdate == true) {\n            shadow.render(renderer, this);\n            shadow.needsUpdate = false;\n        }\n    }\n    queueShadowRender() {\n        if (this.shadow != null) {\n            this.shadow.needsUpdate = true;\n        }\n    }\n    /**\n     * Sets the shadow's intensity, lazily creating the shadow as necessary.\n     */\n    setShadowIntensity(shadowIntensity) {\n        this.shadowIntensity = shadowIntensity;\n        if (this._currentGLTF == null) {\n            return;\n        }\n        this.setBakedShadowVisibility();\n        if (shadowIntensity <= 0 && this.shadow == null) {\n            return;\n        }\n        if (this.shadow == null) {\n            const side = this.element.arPlacement === 'wall' ? 'back' : 'bottom';\n            this.shadow = new _Shadow_js__WEBPACK_IMPORTED_MODULE_8__.Shadow(this, this.shadowSoftness, side);\n        }\n        this.shadow.setIntensity(shadowIntensity);\n    }\n    /**\n     * Sets the shadow's softness by mapping a [0, 1] softness parameter to the\n     * shadow's resolution. This involves reallocation, so it should not be\n     * changed frequently. Softer shadows are cheaper to render.\n     */\n    setShadowSoftness(softness) {\n        this.shadowSoftness = softness;\n        const shadow = this.shadow;\n        if (shadow != null) {\n            shadow.setSoftness(softness);\n        }\n    }\n    /**\n     * Shift the floor vertically from the bottom of the model's bounding box by\n     * offset (should generally be negative).\n     */\n    setShadowOffset(offset) {\n        const shadow = this.shadow;\n        if (shadow != null) {\n            shadow.setOffset(offset);\n        }\n    }\n    get raycaster() {\n        return raycaster;\n    }\n    /**\n     * This method returns the world position, model-space normal and texture\n     * coordinate of the point on the mesh corresponding to the input pixel\n     * coordinates given relative to the model-viewer element. If the mesh\n     * is not hit, the result is null.\n     */\n    positionAndNormalFromPoint(ndcPosition, object = this) {\n        this.raycaster.setFromCamera(ndcPosition, this.getCamera());\n        const hits = this.raycaster.intersectObject(object, true);\n        const hit = hits.find((hit) => hit.object.visible && !hit.object.userData.shadow);\n        if (hit == null || hit.face == null) {\n            return null;\n        }\n        if (hit.uv == null) {\n            return { position: hit.point, normal: hit.face.normal, uv: null };\n        }\n        hit.face.normal.applyNormalMatrix(new three__WEBPACK_IMPORTED_MODULE_9__.Matrix3().getNormalMatrix(hit.object.matrixWorld));\n        return { position: hit.point, normal: hit.face.normal, uv: hit.uv };\n    }\n    /**\n     * The following methods are for operating on the set of Hotspot objects\n     * attached to the scene. These come from DOM elements, provided to slots by\n     * the Annotation Mixin.\n     */\n    addHotspot(hotspot) {\n        this.target.add(hotspot);\n        // This happens automatically in render(), but we do it early so that\n        // the slots appear in the shadow DOM and the elements get attached,\n        // allowing us to dispatch events on them.\n        this.annotationRenderer.domElement.appendChild(hotspot.element);\n    }\n    removeHotspot(hotspot) {\n        this.target.remove(hotspot);\n    }\n    /**\n     * Helper method to apply a function to all hotspots.\n     */\n    forHotspots(func) {\n        const { children } = this.target;\n        for (let i = 0, l = children.length; i < l; i++) {\n            const hotspot = children[i];\n            if (hotspot instanceof _Hotspot_js__WEBPACK_IMPORTED_MODULE_6__.Hotspot) {\n                func(hotspot);\n            }\n        }\n    }\n    /**\n     * Update the CSS visibility of the hotspots based on whether their normals\n     * point toward the camera.\n     */\n    updateHotspots(viewerPosition) {\n        this.forHotspots((hotspot) => {\n            view.copy(viewerPosition);\n            target.setFromMatrixPosition(hotspot.matrixWorld);\n            view.sub(target);\n            normalWorld.copy(hotspot.normal)\n                .transformDirection(this.target.matrixWorld);\n            if (view.dot(normalWorld) < 0) {\n                hotspot.hide();\n            }\n            else {\n                hotspot.show();\n            }\n        });\n    }\n    /**\n     * Rotate all hotspots to an absolute orientation given by the input number of\n     * radians. Zero returns them to upright.\n     */\n    orientHotspots(radians) {\n        this.forHotspots((hotspot) => {\n            hotspot.orient(radians);\n        });\n    }\n    /**\n     * Set the rendering visibility of all hotspots. This is used to hide them\n     * during transitions and such.\n     */\n    setHotspotsVisibility(visible) {\n        this.forHotspots((hotspot) => {\n            hotspot.visible = visible;\n        });\n    }\n    updateSchema(src) {\n        var _a;\n        const { schemaElement, element } = this;\n        const { alt, poster, iosSrc } = element;\n        if (src != null) {\n            const encoding = [{\n                    '@type': 'MediaObject',\n                    contentUrl: src,\n                    encodingFormat: ((_a = src.split('.').pop()) === null || _a === void 0 ? void 0 : _a.toLowerCase()) === 'gltf' ?\n                        'model/gltf+json' :\n                        'model/gltf-binary'\n                }];\n            if (iosSrc) {\n                encoding.push({\n                    '@type': 'MediaObject',\n                    contentUrl: iosSrc,\n                    encodingFormat: 'model/vnd.usdz+zip'\n                });\n            }\n            const structuredData = {\n                '@context': 'http://schema.org/',\n                '@type': '3DModel',\n                image: poster !== null && poster !== void 0 ? poster : undefined,\n                name: alt !== null && alt !== void 0 ? alt : undefined,\n                encoding\n            };\n            schemaElement.textContent = JSON.stringify(structuredData);\n            document.head.appendChild(schemaElement);\n        }\n        else if (schemaElement.parentElement != null) {\n            schemaElement.parentElement.removeChild(schemaElement);\n        }\n    }\n}\n//# sourceMappingURL=ModelScene.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvTW9kZWxTY2VuZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNnSztBQUNsRjtBQUNPO0FBQ2pDO0FBQ0s7QUFDRDtBQUNYO0FBQ087QUFDYjtBQUNVO0FBQ1o7QUFDckM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwwQ0FBTztBQUN4QixtQkFBbUIsMENBQU87QUFDMUIsd0JBQXdCLDBDQUFPO0FBQy9CLHNCQUFzQiw0Q0FBUztBQUMvQixvQkFBb0IsMENBQU87QUFDM0IsZ0JBQWdCLDBDQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyx5QkFBeUIsd0NBQUs7QUFDckMsa0JBQWtCLGdDQUFnQztBQUNsRDtBQUNBLHNDQUFzQyx5RkFBYTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQWlCO0FBQzNDO0FBQ0E7QUFDQSwwQkFBMEIsMkNBQVE7QUFDbEM7QUFDQSwrQkFBK0IsdUNBQUk7QUFDbkMsa0NBQWtDLHlDQUFNO0FBQ3hDLHdCQUF3QiwwQ0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsMENBQU87QUFDckMsaUNBQWlDLDhDQUFNO0FBQ3ZDLGlDQUFpQyw4Q0FBTTtBQUN2QyxpQ0FBaUMsOENBQU07QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsb0RBQWlCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFjO0FBQ3ZDLGdCQUFnQixhQUFhO0FBQzdCLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDREQUFTO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtFQUFZO0FBQ2pDLHFCQUFxQix1RUFBaUI7QUFDdEMscUJBQXFCLDREQUFNO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlEQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx1Q0FBSTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQiw4QkFBOEIsdUNBQUk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsb0VBQWdCO0FBQzVDO0FBQ0EscUJBQXFCLHFFQUFhO0FBQ2xDLHNCQUFzQixxRUFBYTtBQUNuQyxvQkFBb0IscUVBQWE7QUFDakMsMENBQTBDLHdDQUFLO0FBQy9DLHNCQUFzQixvRUFBZ0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsOERBQWMsbUJBQW1CLHVDQUFJO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDhEQUFjLG1CQUFtQix1Q0FBSTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsOERBQWM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw4REFBYztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSx5QkFBeUIsNERBQVM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHFEQUFhO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFVBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELCtDQUFZO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELDZDQUFVO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhDQUE4QztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDhDQUFNO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLDhDQUE4QywwQ0FBTztBQUNyRCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixXQUFXO0FBQzNCLDZDQUE2QyxPQUFPO0FBQ3BEO0FBQ0EsbUNBQW1DLGdEQUFPO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHlCQUF5QjtBQUN6QyxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvdGhyZWUtY29tcG9uZW50cy9Nb2RlbFNjZW5lLmpzP2ZlMDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgQW5pbWF0aW9uTWl4ZXIsIEJveDMsIEV1bGVyLCBMb29wUGluZ1BvbmcsIExvb3BSZXBlYXQsIE1hdHJpeDMsIE9iamVjdDNELCBQZXJzcGVjdGl2ZUNhbWVyYSwgUmF5Y2FzdGVyLCBTY2VuZSwgU3BoZXJlLCBWZWN0b3IyLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgQ1NTMkRSZW5kZXJlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9yZW5kZXJlcnMvQ1NTMkRSZW5kZXJlci5qcyc7XG5pbXBvcnQgeyAkY3VycmVudEdMVEYsICRtb2RlbCwgJG9yaWdpbmFsR2x0Zkpzb24gfSBmcm9tICcuLi9mZWF0dXJlcy9zY2VuZS1ncmFwaC5qcyc7XG5pbXBvcnQgeyAkcmVuZGVyZXIgfSBmcm9tICcuLi9tb2RlbC12aWV3ZXItYmFzZS5qcyc7XG5pbXBvcnQgeyBub3JtYWxpemVVbml0IH0gZnJvbSAnLi4vc3R5bGVzL2NvbnZlcnNpb25zLmpzJztcbmltcG9ydCB7IHBhcnNlRXhwcmVzc2lvbnMgfSBmcm9tICcuLi9zdHlsZXMvcGFyc2Vycy5qcyc7XG5pbXBvcnQgeyByZXNvbHZlRHByIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJztcbmltcG9ydCB7IERhbXBlciwgU0VUVExJTkdfVElNRSB9IGZyb20gJy4vRGFtcGVyLmpzJztcbmltcG9ydCB7IEhvdHNwb3QgfSBmcm9tICcuL0hvdHNwb3QuanMnO1xuaW1wb3J0IHsgcmVkdWNlVmVydGljZXMgfSBmcm9tICcuL01vZGVsVXRpbHMuanMnO1xuaW1wb3J0IHsgU2hhZG93IH0gZnJvbSAnLi9TaGFkb3cuanMnO1xuY29uc3QgTUlOX1NIQURPV19SQVRJTyA9IDEwMDtcbmV4cG9ydCBjb25zdCBJbGx1bWluYXRpb25Sb2xlID0ge1xuICAgIFByaW1hcnk6ICdwcmltYXJ5JyxcbiAgICBTZWNvbmRhcnk6ICdzZWNvbmRhcnknXG59O1xuY29uc3QgdmlldyA9IG5ldyBWZWN0b3IzKCk7XG5jb25zdCB0YXJnZXQgPSBuZXcgVmVjdG9yMygpO1xuY29uc3Qgbm9ybWFsV29ybGQgPSBuZXcgVmVjdG9yMygpO1xuY29uc3QgcmF5Y2FzdGVyID0gbmV3IFJheWNhc3RlcigpO1xuY29uc3QgdmVjdG9yMyA9IG5ldyBWZWN0b3IzKCk7XG5jb25zdCBuZGMgPSBuZXcgVmVjdG9yMigpO1xuLyoqXG4gKiBBIFRIUkVFLlNjZW5lIG9iamVjdCB0aGF0IHRha2VzIGEgTW9kZWwgYW5kIENhbnZhc0hUTUxFbGVtZW50IGFuZFxuICogY29uc3RydWN0cyBhIGZyYW1lZCBzY2VuZSBiYXNlZCBvZmYgb2YgdGhlIGNhbnZhcyBkaW1lbnNpb25zLlxuICogUHJvdmlkZXMgbGlnaHRzIGFuZCBjYW1lcmFzIHRvIGJlIHVzZWQgaW4gYSByZW5kZXJlci5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsU2NlbmUgZXh0ZW5kcyBTY2VuZSB7XG4gICAgY29uc3RydWN0b3IoeyBjYW52YXMsIGVsZW1lbnQsIHdpZHRoLCBoZWlnaHQgfSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmFubm90YXRpb25SZW5kZXJlciA9IG5ldyBDU1MyRFJlbmRlcmVyKCk7XG4gICAgICAgIHRoaXMuc2NoZW1hRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICB0aGlzLndpZHRoID0gMTtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAxO1xuICAgICAgICB0aGlzLmFzcGVjdCA9IDE7XG4gICAgICAgIHRoaXMuc2NhbGVTdGVwID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZXh0ZXJuYWxSZW5kZXJlciA9IG51bGw7XG4gICAgICAgIC8vIFRoZXNlIGRlZmF1bHQgY2FtZXJhIHZhbHVlcyBhcmUgbmV2ZXIgdXNlZCwgYXMgdGhleSBhcmUgcmVzZXQgb25jZSB0aGVcbiAgICAgICAgLy8gbW9kZWwgaXMgbG9hZGVkIGFuZCBmcmFtaW5nIGlzIGNvbXB1dGVkLlxuICAgICAgICB0aGlzLmNhbWVyYSA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSg0NSwgMSwgMC4xLCAxMDApO1xuICAgICAgICB0aGlzLnhyQ2FtZXJhID0gbnVsbDtcbiAgICAgICAgdGhpcy51cmwgPSBudWxsO1xuICAgICAgICB0aGlzLnRhcmdldCA9IG5ldyBPYmplY3QzRCgpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbk5hbWVzID0gW107XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm94MygpO1xuICAgICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlID0gbmV3IFNwaGVyZSgpO1xuICAgICAgICB0aGlzLnNpemUgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB0aGlzLmlkZWFsQXNwZWN0ID0gMDtcbiAgICAgICAgdGhpcy5mcmFtZWRGb1ZEZWcgPSAwO1xuICAgICAgICB0aGlzLnNoYWRvdyA9IG51bGw7XG4gICAgICAgIHRoaXMuc2hhZG93SW50ZW5zaXR5ID0gMDtcbiAgICAgICAgdGhpcy5zaGFkb3dTb2Z0bmVzcyA9IDE7XG4gICAgICAgIHRoaXMuYmFrZWRTaGFkb3dzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmV4cG9zdXJlID0gMTtcbiAgICAgICAgdGhpcy5jYW5TY2FsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNEaXJ0eSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdvYWxUYXJnZXQgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB0aGlzLnRhcmdldERhbXBlclggPSBuZXcgRGFtcGVyKCk7XG4gICAgICAgIHRoaXMudGFyZ2V0RGFtcGVyWSA9IG5ldyBEYW1wZXIoKTtcbiAgICAgICAgdGhpcy50YXJnZXREYW1wZXJaID0gbmV3IERhbXBlcigpO1xuICAgICAgICB0aGlzLl9jdXJyZW50R0xURiA9IG51bGw7XG4gICAgICAgIHRoaXMuX21vZGVsID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYW5jZWxQZW5kaW5nU291cmNlQ2hhbmdlID0gbnVsbDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25zQnlOYW1lID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmN1cnJlbnRBbmltYXRpb25BY3Rpb24gPSBudWxsO1xuICAgICAgICB0aGlzLm5hbWUgPSAnTW9kZWxTY2VuZSc7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgICAvLyBUaGVzZSBkZWZhdWx0IGNhbWVyYSB2YWx1ZXMgYXJlIG5ldmVyIHVzZWQsIGFzIHRoZXkgYXJlIHJlc2V0IG9uY2UgdGhlXG4gICAgICAgIC8vIG1vZGVsIGlzIGxvYWRlZCBhbmQgZnJhbWluZyBpcyBjb21wdXRlZC5cbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoNDUsIDEsIDAuMSwgMTAwKTtcbiAgICAgICAgdGhpcy5jYW1lcmEubmFtZSA9ICdNYWluQ2FtZXJhJztcbiAgICAgICAgdGhpcy5hZGQodGhpcy50YXJnZXQpO1xuICAgICAgICB0aGlzLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMudGFyZ2V0Lm5hbWUgPSAnVGFyZ2V0JztcbiAgICAgICAgdGhpcy5taXhlciA9IG5ldyBBbmltYXRpb25NaXhlcih0aGlzLnRhcmdldCk7XG4gICAgICAgIGNvbnN0IHsgZG9tRWxlbWVudCB9ID0gdGhpcy5hbm5vdGF0aW9uUmVuZGVyZXI7XG4gICAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IGRvbUVsZW1lbnQ7XG4gICAgICAgIHN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgc3R5bGUudG9wID0gJzAnO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuZGVmYXVsdCcpLmFwcGVuZENoaWxkKGRvbUVsZW1lbnQpO1xuICAgICAgICB0aGlzLnNjaGVtYUVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2FwcGxpY2F0aW9uL2xkK2pzb24nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBjb250ZXh0IGxhemlseSwgYXMgd2hlbiB0aGVyZSBpcyBvbmx5IG9uZVxuICAgICAqIDxtb2RlbC12aWV3ZXI+IGVsZW1lbnQsIHRoZSByZW5kZXJlcidzIDNEIGNvbnRleHQgY2FuIGJlIGRpc3BsYXllZFxuICAgICAqIGRpcmVjdGx5LiBUaGlzIGV4dHJhIGNvbnRleHQgaXMgbmVjZXNzYXJ5IHRvIGNvcHkgdGhlIHJlbmRlcmluZ3MgaW50byB3aGVuXG4gICAgICogdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUuXG4gICAgICovXG4gICAgZ2V0IGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIH1cbiAgICBnZXRDYW1lcmEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnhyQ2FtZXJhICE9IG51bGwgPyB0aGlzLnhyQ2FtZXJhIDogdGhpcy5jYW1lcmE7XG4gICAgfVxuICAgIHF1ZXVlUmVuZGVyKCkge1xuICAgICAgICB0aGlzLmlzRGlydHkgPSB0cnVlO1xuICAgIH1cbiAgICBzaG91bGRSZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRGlydHk7XG4gICAgfVxuICAgIGhhc1JlbmRlcmVkKCkge1xuICAgICAgICB0aGlzLmlzRGlydHkgPSBmYWxzZTtcbiAgICB9XG4gICAgZm9yY2VSZXNjYWxlKCkge1xuICAgICAgICB0aGlzLnNjYWxlU3RlcCA9IC0xO1xuICAgICAgICB0aGlzLnF1ZXVlUmVuZGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhc3MgaW4gYSBUSFJFRS5PYmplY3QzRCB0byBiZSBjb250cm9sbGVkXG4gICAgICogYnkgdGhpcyBtb2RlbC5cbiAgICAgKi9cbiAgICBhc3luYyBzZXRPYmplY3QobW9kZWwpIHtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB0aGlzLl9tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLnRhcmdldC5hZGQobW9kZWwpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldHVwU2NlbmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbW9kZWwgdmlhIFVSTC5cbiAgICAgKi9cbiAgICBhc3luYyBzZXRTb3VyY2UodXJsLCBwcm9ncmVzc0NhbGxiYWNrID0gKCkgPT4geyB9KSB7XG4gICAgICAgIGlmICghdXJsIHx8IHVybCA9PT0gdGhpcy51cmwpIHtcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgaWYgKHRoaXMuZXh0ZXJuYWxSZW5kZXJlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtaW5nSW5mbyA9IGF3YWl0IHRoaXMuZXh0ZXJuYWxSZW5kZXJlci5sb2FkKHByb2dyZXNzQ2FsbGJhY2spO1xuICAgICAgICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXMgPSBmcmFtaW5nSW5mby5mcmFtZWRSYWRpdXM7XG4gICAgICAgICAgICB0aGlzLmlkZWFsQXNwZWN0ID0gZnJhbWluZ0luZm8uZmllbGRPZlZpZXdBc3BlY3Q7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBwZW5kaW5nIHdvcmsgZHVlIHRvIGEgcHJldmlvdXMgc291cmNlIGNoYW5nZSBpbiBwcm9ncmVzcyxcbiAgICAgICAgLy8gY2FuY2VsIGl0IHNvIHRoYXQgd2UgZG8gbm90IGluY3VyIGEgcmFjZSBjb25kaXRpb246XG4gICAgICAgIGlmICh0aGlzLmNhbmNlbFBlbmRpbmdTb3VyY2VDaGFuZ2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxQZW5kaW5nU291cmNlQ2hhbmdlKCk7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbFBlbmRpbmdTb3VyY2VDaGFuZ2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCBnbHRmO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZ2x0ZiA9IGF3YWl0IG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFBlbmRpbmdTb3VyY2VDaGFuZ2UgPSAoKSA9PiByZWplY3QoKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmVsZW1lbnRbJHJlbmRlcmVyXS5sb2FkZXIubG9hZCh1cmwsIHRoaXMuZWxlbWVudCwgcHJvZ3Jlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIExvYWRpbmcgd2FzIGNhbmNlbGxlZCwgc28gc2lsZW50bHkgcmV0dXJuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW5jZWxQZW5kaW5nU291cmNlQ2hhbmdlID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgdGhpcy5fY3VycmVudEdMVEYgPSBnbHRmO1xuICAgICAgICBpZiAoZ2x0ZiAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9tb2RlbCA9IGdsdGYuc2NlbmU7XG4gICAgICAgICAgICB0aGlzLnRhcmdldC5hZGQoZ2x0Zi5zY2VuZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBhbmltYXRpb25zIH0gPSBnbHRmO1xuICAgICAgICBjb25zdCBhbmltYXRpb25zQnlOYW1lID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBhbmltYXRpb25OYW1lcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGFuaW1hdGlvbiBvZiBhbmltYXRpb25zKSB7XG4gICAgICAgICAgICBhbmltYXRpb25zQnlOYW1lLnNldChhbmltYXRpb24ubmFtZSwgYW5pbWF0aW9uKTtcbiAgICAgICAgICAgIGFuaW1hdGlvbk5hbWVzLnB1c2goYW5pbWF0aW9uLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucyA9IGFuaW1hdGlvbnM7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc0J5TmFtZSA9IGFuaW1hdGlvbnNCeU5hbWU7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uTmFtZXMgPSBhbmltYXRpb25OYW1lcztcbiAgICAgICAgYXdhaXQgdGhpcy5zZXR1cFNjZW5lKCk7XG4gICAgfVxuICAgIGFzeW5jIHNldHVwU2NlbmUoKSB7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUZyYW1pbmcoKTtcbiAgICAgICAgdGhpcy51cGRhdGVTaGFkb3coKTtcbiAgICAgICAgdGhpcy5zZXRTaGFkb3dJbnRlbnNpdHkodGhpcy5zaGFkb3dJbnRlbnNpdHkpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy51cmwgPSBudWxsO1xuICAgICAgICB0aGlzLnF1ZXVlUmVuZGVyKCk7XG4gICAgICAgIGlmICh0aGlzLnNoYWRvdyAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNoYWRvdy5zZXRJbnRlbnNpdHkoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iYWtlZFNoYWRvd3MuY2xlYXIoKTtcbiAgICAgICAgY29uc3QgeyBfbW9kZWwgfSA9IHRoaXM7XG4gICAgICAgIGlmIChfbW9kZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgX21vZGVsLnJlbW92ZUZyb21QYXJlbnQoKTtcbiAgICAgICAgICAgIHRoaXMuX21vZGVsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnbHRmID0gdGhpcy5fY3VycmVudEdMVEY7XG4gICAgICAgIGlmIChnbHRmICE9IG51bGwpIHtcbiAgICAgICAgICAgIGdsdGYuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudEdMVEYgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRBbmltYXRpb25BY3Rpb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50QW5pbWF0aW9uQWN0aW9uLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbkFjdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5taXhlci5zdG9wQWxsQWN0aW9uKCk7XG4gICAgICAgIHRoaXMubWl4ZXIudW5jYWNoZVJvb3QodGhpcyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgaWYgKHRoaXMuc2hhZG93ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhZG93LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2hhZG93ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnRbJGN1cnJlbnRHTFRGXSA9IG51bGw7XG4gICAgICAgIHRoaXMuZWxlbWVudFskb3JpZ2luYWxHbHRmSnNvbl0gPSBudWxsO1xuICAgICAgICB0aGlzLmVsZW1lbnRbJG1vZGVsXSA9IG51bGw7XG4gICAgfVxuICAgIGdldCBjdXJyZW50R0xURigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRHTFRGO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBNb2RlbFNjZW5lIGZvciBhIG5ldyBjb250YWluZXIgc2l6ZSBpbiBDU1MgcGl4ZWxzLlxuICAgICAqL1xuICAgIHNldFNpemUod2lkdGgsIGhlaWdodCkge1xuICAgICAgICBpZiAodGhpcy53aWR0aCA9PT0gd2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IGhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2lkdGggPSBNYXRoLm1heCh3aWR0aCwgMSk7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoaGVpZ2h0LCAxKTtcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uUmVuZGVyZXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5hc3BlY3QgPSB0aGlzLndpZHRoIC8gdGhpcy5oZWlnaHQ7XG4gICAgICAgIGlmICh0aGlzLmV4dGVybmFsUmVuZGVyZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgZHByID0gcmVzb2x2ZURwcigpO1xuICAgICAgICAgICAgdGhpcy5leHRlcm5hbFJlbmRlcmVyLnJlc2l6ZSh3aWR0aCAqIGRwciwgaGVpZ2h0ICogZHByKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXVlUmVuZGVyKCk7XG4gICAgfVxuICAgIG1hcmtCYWtlZFNoYWRvdyhtZXNoKSB7XG4gICAgICAgIG1lc2gudXNlckRhdGEuc2hhZG93ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5iYWtlZFNoYWRvd3MuYWRkKG1lc2gpO1xuICAgIH1cbiAgICB1bm1hcmtCYWtlZFNoYWRvdyhtZXNoKSB7XG4gICAgICAgIG1lc2gudXNlckRhdGEuc2hhZG93ID0gZmFsc2U7XG4gICAgICAgIG1lc2gudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYmFrZWRTaGFkb3dzLmRlbGV0ZShtZXNoKTtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5leHBhbmRCeU9iamVjdChtZXNoKTtcbiAgICB9XG4gICAgZmluZEJha2VkU2hhZG93cyhncm91cCkge1xuICAgICAgICBjb25zdCBib3VuZGluZ0JveCA9IG5ldyBCb3gzKCk7XG4gICAgICAgIGdyb3VwLnRyYXZlcnNlKChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1lc2ggPSBvYmplY3Q7XG4gICAgICAgICAgICBpZiAoIW1lc2guaXNNZXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsO1xuICAgICAgICAgICAgaWYgKCFtYXRlcmlhbC50cmFuc3BhcmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvdW5kaW5nQm94LnNldEZyb21PYmplY3QobWVzaCk7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gYm91bmRpbmdCb3guZ2V0U2l6ZSh2ZWN0b3IzKTtcbiAgICAgICAgICAgIGNvbnN0IG1pbkRpbSA9IE1hdGgubWluKHNpemUueCwgc2l6ZS55LCBzaXplLnopO1xuICAgICAgICAgICAgY29uc3QgbWF4RGltID0gTWF0aC5tYXgoc2l6ZS54LCBzaXplLnksIHNpemUueik7XG4gICAgICAgICAgICBpZiAobWF4RGltIDwgTUlOX1NIQURPV19SQVRJTyAqIG1pbkRpbSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWFya0Jha2VkU2hhZG93KG1lc2gpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2hlY2tCYWtlZFNoYWRvd3MoKSB7XG4gICAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IHRoaXMuYm91bmRpbmdCb3g7XG4gICAgICAgIGNvbnN0IHNoYWRvd0JveCA9IG5ldyBCb3gzKCk7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3guZ2V0U2l6ZSh0aGlzLnNpemUpO1xuICAgICAgICBmb3IgKGNvbnN0IG1lc2ggb2YgdGhpcy5iYWtlZFNoYWRvd3MpIHtcbiAgICAgICAgICAgIHNoYWRvd0JveC5zZXRGcm9tT2JqZWN0KG1lc2gpO1xuICAgICAgICAgICAgaWYgKHNoYWRvd0JveC5taW4ueSA8IG1pbi55ICsgdGhpcy5zaXplLnkgLyBNSU5fU0hBRE9XX1JBVElPICYmXG4gICAgICAgICAgICAgICAgc2hhZG93Qm94Lm1pbi54IDw9IG1pbi54ICYmIHNoYWRvd0JveC5tYXgueCA+PSBtYXgueCAmJlxuICAgICAgICAgICAgICAgIHNoYWRvd0JveC5taW4ueiA8PSBtaW4ueiAmJiBzaGFkb3dCb3gubWF4LnogPj0gbWF4LnopIHtcbiAgICAgICAgICAgICAgICAvLyBmbG9vciBzaGFkb3dcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaGFkb3dCb3gubWluLnogPCBtaW4ueiArIHRoaXMuc2l6ZS56IC8gTUlOX1NIQURPV19SQVRJTyAmJlxuICAgICAgICAgICAgICAgIHNoYWRvd0JveC5taW4ueCA8PSBtaW4ueCAmJiBzaGFkb3dCb3gubWF4LnggPj0gbWF4LnggJiZcbiAgICAgICAgICAgICAgICBzaGFkb3dCb3gubWluLnkgPD0gbWluLnkgJiYgc2hhZG93Qm94Lm1heC55ID49IG1heC55KSB7XG4gICAgICAgICAgICAgICAgLy8gd2FsbCBzaGFkb3dcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudW5tYXJrQmFrZWRTaGFkb3cobWVzaCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwbHlUcmFuc2Zvcm0oKSB7XG4gICAgICAgIGNvbnN0IHsgbW9kZWwgfSA9IHRoaXM7XG4gICAgICAgIGlmIChtb2RlbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSBwYXJzZUV4cHJlc3Npb25zKHRoaXMuZWxlbWVudC5vcmllbnRhdGlvbilbMF1cbiAgICAgICAgICAgIC50ZXJtcztcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5vcm1hbGl6ZVVuaXQob3JpZW50YXRpb25bMF0pLm51bWJlcjtcbiAgICAgICAgY29uc3QgcGl0Y2ggPSBub3JtYWxpemVVbml0KG9yaWVudGF0aW9uWzFdKS5udW1iZXI7XG4gICAgICAgIGNvbnN0IHlhdyA9IG5vcm1hbGl6ZVVuaXQob3JpZW50YXRpb25bMl0pLm51bWJlcjtcbiAgICAgICAgbW9kZWwucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIobmV3IEV1bGVyKHBpdGNoLCB5YXcsIHJvbGwsICdZWFonKSk7XG4gICAgICAgIGNvbnN0IHNjYWxlID0gcGFyc2VFeHByZXNzaW9ucyh0aGlzLmVsZW1lbnQuc2NhbGUpWzBdXG4gICAgICAgICAgICAudGVybXM7XG4gICAgICAgIG1vZGVsLnNjYWxlLnNldChzY2FsZVswXS5udW1iZXIsIHNjYWxlWzFdLm51bWJlciwgc2NhbGVbMl0ubnVtYmVyKTtcbiAgICB9XG4gICAgdXBkYXRlQm91bmRpbmdCb3goKSB7XG4gICAgICAgIGNvbnN0IHsgbW9kZWwgfSA9IHRoaXM7XG4gICAgICAgIGlmIChtb2RlbCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXQucmVtb3ZlKG1vZGVsKTtcbiAgICAgICAgdGhpcy5maW5kQmFrZWRTaGFkb3dzKG1vZGVsKTtcbiAgICAgICAgY29uc3QgYm91bmQgPSAoYm94LCB2ZXJ0ZXgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBib3guZXhwYW5kQnlQb2ludCh2ZXJ0ZXgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldEJha2VkU2hhZG93VmlzaWJpbGl0eShmYWxzZSk7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSByZWR1Y2VWZXJ0aWNlcyhtb2RlbCwgYm91bmQsIG5ldyBCb3gzKCkpO1xuICAgICAgICAvLyBJZiB0aGVyZSdzIG5vdGhpbmcgYnV0IHRoZSBiYWtlZCBzaGFkb3csIHRoZW4gaXQncyBub3QgYSBiYWtlZCBzaGFkb3cuXG4gICAgICAgIGlmICh0aGlzLmJvdW5kaW5nQm94LmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRCYWtlZFNoYWRvd1Zpc2liaWxpdHkodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmJha2VkU2hhZG93cy5mb3JFYWNoKChtZXNoKSA9PiB0aGlzLnVubWFya0Jha2VkU2hhZG93KG1lc2gpKTtcbiAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSByZWR1Y2VWZXJ0aWNlcyhtb2RlbCwgYm91bmQsIG5ldyBCb3gzKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hlY2tCYWtlZFNoYWRvd3MoKTtcbiAgICAgICAgdGhpcy5zZXRCYWtlZFNoYWRvd1Zpc2liaWxpdHkoKTtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5nZXRTaXplKHRoaXMuc2l6ZSk7XG4gICAgICAgIHRoaXMudGFyZ2V0LmFkZChtb2RlbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgdGhlIGJvdW5kaW5nU3BoZXJlIGFuZCBpZGVhbEFzcGVjdCB0aGF0IGFsbG93cyB0aGUgM0RcbiAgICAgKiBvYmplY3QgdG8gYmUgZnJhbWVkIHRpZ2h0bHkgaW4gYSAyRCB3aW5kb3cgb2YgYW55IGFzcGVjdCByYXRpbyB3aXRob3V0XG4gICAgICogY2xpcHBpbmcgYXQgYW55IGNhbWVyYSBvcmJpdC4gVGhlIGNhbWVyYSdzIGNlbnRlciB0YXJnZXQgcG9pbnQgY2FuIGJlXG4gICAgICogb3B0aW9uYWxseSBzcGVjaWZpZWQuIElmIG5vIGNlbnRlciBpcyBzcGVjaWZpZWQsIGl0IGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICAgKiBvZiB0aGUgYm91bmRpbmcgYm94LCB3aGljaCBtZWFucyBhc3ltbWV0cmljIG1vZGVscyB3aWxsIHRlbmQgdG8gYmUgdGlnaHQgb25cbiAgICAgKiBvbmUgc2lkZSBpbnN0ZWFkIG9mIGJvdGguIFByb3BlciBjaG9pY2Ugb2YgY2VudGVyIGNhbiBjb3JyZWN0IHRoaXMuXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlRnJhbWluZygpIHtcbiAgICAgICAgY29uc3QgeyBtb2RlbCB9ID0gdGhpcztcbiAgICAgICAgaWYgKG1vZGVsID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhcmdldC5yZW1vdmUobW9kZWwpO1xuICAgICAgICB0aGlzLnNldEJha2VkU2hhZG93VmlzaWJpbGl0eShmYWxzZSk7XG4gICAgICAgIGNvbnN0IHsgY2VudGVyIH0gPSB0aGlzLmJvdW5kaW5nU3BoZXJlO1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVxdWVzdFVwZGF0ZSgnY2FtZXJhVGFyZ2V0Jyk7XG4gICAgICAgIGF3YWl0IHRoaXMuZWxlbWVudC51cGRhdGVDb21wbGV0ZTtcbiAgICAgICAgY2VudGVyLmNvcHkodGhpcy5nZXRUYXJnZXQoKSk7XG4gICAgICAgIGNvbnN0IHJhZGl1c1NxdWFyZWQgPSAodmFsdWUsIHZlcnRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHZhbHVlLCBjZW50ZXIuZGlzdGFuY2VUb1NxdWFyZWQodmVydGV4KSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmUucmFkaXVzID1cbiAgICAgICAgICAgIE1hdGguc3FydChyZWR1Y2VWZXJ0aWNlcyhtb2RlbCwgcmFkaXVzU3F1YXJlZCwgMCkpO1xuICAgICAgICBjb25zdCBob3Jpem9udGFsVGFuRm92ID0gKHZhbHVlLCB2ZXJ0ZXgpID0+IHtcbiAgICAgICAgICAgIHZlcnRleC5zdWIoY2VudGVyKTtcbiAgICAgICAgICAgIGNvbnN0IHJhZGl1c1haID0gTWF0aC5zcXJ0KHZlcnRleC54ICogdmVydGV4LnggKyB2ZXJ0ZXgueiAqIHZlcnRleC56KTtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCh2YWx1ZSwgcmFkaXVzWFogLyAodGhpcy5pZGVhbENhbWVyYURpc3RhbmNlKCkgLSBNYXRoLmFicyh2ZXJ0ZXgueSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pZGVhbEFzcGVjdCA9IHJlZHVjZVZlcnRpY2VzKG1vZGVsLCBob3Jpem9udGFsVGFuRm92LCAwKSAvXG4gICAgICAgICAgICBNYXRoLnRhbigodGhpcy5mcmFtZWRGb1ZEZWcgLyAyKSAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICB0aGlzLnNldEJha2VkU2hhZG93VmlzaWJpbGl0eSgpO1xuICAgICAgICB0aGlzLnRhcmdldC5hZGQobW9kZWwpO1xuICAgIH1cbiAgICBzZXRCYWtlZFNoYWRvd1Zpc2liaWxpdHkodmlzaWJsZSA9IHRoaXMuc2hhZG93SW50ZW5zaXR5IDw9IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBzaGFkb3cgb2YgdGhpcy5iYWtlZFNoYWRvd3MpIHtcbiAgICAgICAgICAgIHNoYWRvdy52aXNpYmxlID0gdmlzaWJsZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZGVhbENhbWVyYURpc3RhbmNlKCkge1xuICAgICAgICBjb25zdCBoYWxmRm92UmFkID0gKHRoaXMuZnJhbWVkRm9WRGVnIC8gMikgKiBNYXRoLlBJIC8gMTgwO1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXMgLyBNYXRoLnNpbihoYWxmRm92UmFkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0J3MgdGhlIGZyYW1lZEZpZWxkT2ZWaWV3IGJhc2VkIG9uIHRoZSBhc3BlY3QgcmF0aW8gb2YgdGhlIHdpbmRvdyBpblxuICAgICAqIG9yZGVyIHRvIGtlZXAgdGhlIG1vZGVsIGZ1bGx5IHZpc2libGUgYXQgYW55IGNhbWVyYSBvcmllbnRhdGlvbi5cbiAgICAgKi9cbiAgICBhZGp1c3RlZEZvVihmb3ZEZWcpIHtcbiAgICAgICAgY29uc3QgdmVydGljYWwgPSBNYXRoLnRhbigoZm92RGVnIC8gMikgKiBNYXRoLlBJIC8gMTgwKSAqXG4gICAgICAgICAgICBNYXRoLm1heCgxLCB0aGlzLmlkZWFsQXNwZWN0IC8gdGhpcy5hc3BlY3QpO1xuICAgICAgICByZXR1cm4gMiAqIE1hdGguYXRhbih2ZXJ0aWNhbCkgKiAxODAgLyBNYXRoLlBJO1xuICAgIH1cbiAgICBnZXROREMoY2xpZW50WCwgY2xpZW50WSkge1xuICAgICAgICBpZiAodGhpcy54ckNhbWVyYSAhPSBudWxsKSB7XG4gICAgICAgICAgICBuZGMuc2V0KGNsaWVudFggLyB3aW5kb3cuc2NyZWVuLndpZHRoLCBjbGllbnRZIC8gd2luZG93LnNjcmVlbi5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIG5kYy5zZXQoKGNsaWVudFggLSByZWN0LngpIC8gdGhpcy53aWR0aCwgKGNsaWVudFkgLSByZWN0LnkpIC8gdGhpcy5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIG5kYy5tdWx0aXBseVNjYWxhcigyKS5zdWJTY2FsYXIoMSk7XG4gICAgICAgIG5kYy55ICo9IC0xO1xuICAgICAgICByZXR1cm4gbmRjO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzaXplIG9mIHRoZSBjb3JyZXNwb25kaW5nIGNhbnZhcyBlbGVtZW50LlxuICAgICAqL1xuICAgIGdldFNpemUoKSB7XG4gICAgICAgIHJldHVybiB7IHdpZHRoOiB0aGlzLndpZHRoLCBoZWlnaHQ6IHRoaXMuaGVpZ2h0IH07XG4gICAgfVxuICAgIHNldEVudmlyb25tZW50QW5kU2t5Ym94KGVudmlyb25tZW50LCBza3lib3gpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudFskcmVuZGVyZXJdLmFyUmVuZGVyZXIucHJlc2VudGVkU2NlbmUgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVudmlyb25tZW50ID0gZW52aXJvbm1lbnQ7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IHNreWJveDtcbiAgICAgICAgdGhpcy5xdWV1ZVJlbmRlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwb2ludCBpbiBtb2RlbCBjb29yZGluYXRlcyB0aGUgbW9kZWwgc2hvdWxkIG9yYml0L3Bpdm90IGFyb3VuZC5cbiAgICAgKi9cbiAgICBzZXRUYXJnZXQobW9kZWxYLCBtb2RlbFksIG1vZGVsWikge1xuICAgICAgICB0aGlzLmdvYWxUYXJnZXQuc2V0KC1tb2RlbFgsIC1tb2RlbFksIC1tb2RlbFopO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGRlY2F5IHRpbWUgb2YsIGFmZmVjdHMgdGhlIHNwZWVkIG9mIHRhcmdldCB0cmFuc2l0aW9ucy5cbiAgICAgKi9cbiAgICBzZXRUYXJnZXREYW1wZXJEZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpIHtcbiAgICAgICAgdGhpcy50YXJnZXREYW1wZXJYLnNldERlY2F5VGltZShkZWNheU1pbGxpc2Vjb25kcyk7XG4gICAgICAgIHRoaXMudGFyZ2V0RGFtcGVyWS5zZXREZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpO1xuICAgICAgICB0aGlzLnRhcmdldERhbXBlclouc2V0RGVjYXlUaW1lKGRlY2F5TWlsbGlzZWNvbmRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcG9pbnQgaW4gbW9kZWwgY29vcmRpbmF0ZXMgdGhlIG1vZGVsIHNob3VsZCBvcmJpdC9waXZvdCBhcm91bmQuXG4gICAgICovXG4gICAgZ2V0VGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nb2FsVGFyZ2V0LmNsb25lKCkubXVsdGlwbHlTY2FsYXIoLTEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaGlmdHMgdGhlIG1vZGVsIHRvIHRoZSB0YXJnZXQgcG9pbnQgaW1tZWRpYXRlbHkgaW5zdGVhZCBvZiBlYXNpbmcgaW4uXG4gICAgICovXG4gICAganVtcFRvR29hbCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUYXJnZXQoU0VUVExJTkdfVElNRSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBldmVyeSBmcmFtZSB3aXRoIHRoZSBmcmFtZSBkZWx0YSB0byBjYXVzZSB0aGUgdGFyZ2V0XG4gICAgICogdG8gdHJhbnNpdGlvbiB0byBpdHMgc2V0IHBvaW50LlxuICAgICAqL1xuICAgIHVwZGF0ZVRhcmdldChkZWx0YSkge1xuICAgICAgICBjb25zdCBnb2FsID0gdGhpcy5nb2FsVGFyZ2V0O1xuICAgICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLnRhcmdldC5wb3NpdGlvbjtcbiAgICAgICAgaWYgKCFnb2FsLmVxdWFscyh0YXJnZXQpKSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemF0aW9uID0gdGhpcy5ib3VuZGluZ1NwaGVyZS5yYWRpdXMgLyAxMDtcbiAgICAgICAgICAgIGxldCB7IHgsIHksIHogfSA9IHRhcmdldDtcbiAgICAgICAgICAgIHggPSB0aGlzLnRhcmdldERhbXBlclgudXBkYXRlKHgsIGdvYWwueCwgZGVsdGEsIG5vcm1hbGl6YXRpb24pO1xuICAgICAgICAgICAgeSA9IHRoaXMudGFyZ2V0RGFtcGVyWS51cGRhdGUoeSwgZ29hbC55LCBkZWx0YSwgbm9ybWFsaXphdGlvbik7XG4gICAgICAgICAgICB6ID0gdGhpcy50YXJnZXREYW1wZXJaLnVwZGF0ZSh6LCBnb2FsLnosIGRlbHRhLCBub3JtYWxpemF0aW9uKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnBvc2l0aW9uLnNldCh4LCB5LCB6KTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlUmVuZGVyKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBZYXcgdGhlICt6IChmcm9udCkgb2YgdGhlIG1vZGVsIHRvd2FyZCB0aGUgaW5kaWNhdGVkIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIHBvaW50VG93YXJkcyh3b3JsZFgsIHdvcmxkWikge1xuICAgICAgICBjb25zdCB7IHgsIHogfSA9IHRoaXMucG9zaXRpb247XG4gICAgICAgIHRoaXMueWF3ID0gTWF0aC5hdGFuMih3b3JsZFggLSB4LCB3b3JsZFogLSB6KTtcbiAgICB9XG4gICAgZ2V0IG1vZGVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbW9kZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFlhdyBpcyB0aGUgc2NlbmUncyBvcmllbnRhdGlvbiBhYm91dCB0aGUgeS1heGlzLCBhcm91bmQgdGhlIHJvdGF0aW9uXG4gICAgICogY2VudGVyLlxuICAgICAqL1xuICAgIHNldCB5YXcocmFkaWFuc1kpIHtcbiAgICAgICAgdGhpcy5yb3RhdGlvbi55ID0gcmFkaWFuc1k7XG4gICAgICAgIHRoaXMucXVldWVSZW5kZXIoKTtcbiAgICB9XG4gICAgZ2V0IHlhdygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm90YXRpb24ueTtcbiAgICB9XG4gICAgc2V0IGFuaW1hdGlvblRpbWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5taXhlci5zZXRUaW1lKHZhbHVlKTtcbiAgICAgICAgdGhpcy5xdWV1ZVNoYWRvd1JlbmRlcigpO1xuICAgIH1cbiAgICBnZXQgYW5pbWF0aW9uVGltZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEFuaW1hdGlvbkFjdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBsb29wQ291bnQgPSBNYXRoLm1heCh0aGlzLmN1cnJlbnRBbmltYXRpb25BY3Rpb24uX2xvb3BDb3VudCwgMCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50QW5pbWF0aW9uQWN0aW9uLmxvb3AgPT09IExvb3BQaW5nUG9uZyAmJlxuICAgICAgICAgICAgICAgIChsb29wQ291bnQgJiAxKSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmR1cmF0aW9uIC0gdGhpcy5jdXJyZW50QW5pbWF0aW9uQWN0aW9uLnRpbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50QW5pbWF0aW9uQWN0aW9uLnRpbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHNldCBhbmltYXRpb25UaW1lU2NhbGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5taXhlci50aW1lU2NhbGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGFuaW1hdGlvblRpbWVTY2FsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWl4ZXIudGltZVNjYWxlO1xuICAgIH1cbiAgICBnZXQgZHVyYXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRBbmltYXRpb25BY3Rpb24gIT0gbnVsbCAmJlxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QW5pbWF0aW9uQWN0aW9uLmdldENsaXAoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEFuaW1hdGlvbkFjdGlvbi5nZXRDbGlwKCkuZHVyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGdldCBoYXNBY3RpdmVBbmltYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRBbmltYXRpb25BY3Rpb24gIT0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGxheXMgYW4gYW5pbWF0aW9uIGlmIHRoZXJlIGFyZSBhbnkgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IG1vZGVsLlxuICAgICAqIEFjY2VwdHMgYW4gb3B0aW9uYWwgc3RyaW5nIG5hbWUgb2YgYW4gYW5pbWF0aW9uIHRvIHBsYXkuIElmIG5vIG5hbWUgaXNcbiAgICAgKiBwcm92aWRlZCwgb3IgaWYgbm8gYW5pbWF0aW9uIGlzIGZvdW5kIGJ5IHRoZSBnaXZlbiBuYW1lLCBhbHdheXMgZmFsbHMgYmFja1xuICAgICAqIHRvIHBsYXlpbmcgdGhlIGZpcnN0IGFuaW1hdGlvbi5cbiAgICAgKi9cbiAgICBwbGF5QW5pbWF0aW9uKG5hbWUgPSBudWxsLCBjcm9zc2ZhZGVUaW1lID0gMCwgbG9vcE1vZGUgPSBMb29wUmVwZWF0LCByZXBldGl0aW9uQ291bnQgPSBJbmZpbml0eSkge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudEdMVEYgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgYW5pbWF0aW9ucyB9ID0gdGhpcztcbiAgICAgICAgaWYgKGFuaW1hdGlvbnMgPT0gbnVsbCB8fCBhbmltYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBDYW5ub3QgcGxheSBhbmltYXRpb24gKG1vZGVsIGRvZXMgbm90IGhhdmUgYW55IGFuaW1hdGlvbnMpYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFuaW1hdGlvbkNsaXAgPSBudWxsO1xuICAgICAgICBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBhbmltYXRpb25DbGlwID0gdGhpcy5hbmltYXRpb25zQnlOYW1lLmdldChuYW1lKTtcbiAgICAgICAgICAgIGlmIChhbmltYXRpb25DbGlwID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBbmltYXRpb25JbmRleCA9IHBhcnNlSW50KG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VkQW5pbWF0aW9uSW5kZXgpICYmIHBhcnNlZEFuaW1hdGlvbkluZGV4ID49IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkQW5pbWF0aW9uSW5kZXggPCBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25DbGlwID0gYW5pbWF0aW9uc1twYXJzZWRBbmltYXRpb25JbmRleF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhbmltYXRpb25DbGlwID09IG51bGwpIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbkNsaXAgPSBhbmltYXRpb25zWzBdO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbnRBbmltYXRpb25BY3Rpb246IGxhc3RBbmltYXRpb25BY3Rpb24gfSA9IHRoaXM7XG4gICAgICAgICAgICBjb25zdCBhY3Rpb24gPSB0aGlzLm1peGVyLmNsaXBBY3Rpb24oYW5pbWF0aW9uQ2xpcCwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRBbmltYXRpb25BY3Rpb24gPSBhY3Rpb247XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50LnBhdXNlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWl4ZXIuc3RvcEFsbEFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0QW5pbWF0aW9uQWN0aW9uICE9IG51bGwgJiYgYWN0aW9uICE9PSBsYXN0QW5pbWF0aW9uQWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbi5jcm9zc0ZhZGVGcm9tKGxhc3RBbmltYXRpb25BY3Rpb24sIGNyb3NzZmFkZVRpbWUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hbmltYXRpb25UaW1lU2NhbGUgPiAwICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uVGltZSA9PSB0aGlzLmR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciB3aGF0IEkgYmVsaWV2ZSBpcyBhIHRocmVlLmpzIGJ1Zy5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25UaW1lID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3Rpb24uc2V0TG9vcChsb29wTW9kZSwgcmVwZXRpdGlvbkNvdW50KTtcbiAgICAgICAgICAgIGFjdGlvbi5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGFjdGlvbi5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICBhY3Rpb24ucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcEFuaW1hdGlvbigpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QW5pbWF0aW9uQWN0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5taXhlci5zdG9wQWxsQWN0aW9uKCk7XG4gICAgfVxuICAgIHVwZGF0ZUFuaW1hdGlvbihzdGVwKSB7XG4gICAgICAgIHRoaXMubWl4ZXIudXBkYXRlKHN0ZXApO1xuICAgICAgICB0aGlzLnF1ZXVlU2hhZG93UmVuZGVyKCk7XG4gICAgfVxuICAgIHN1YnNjcmliZU1peGVyRXZlbnQoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMubWl4ZXIuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIGlmIHRoZSBvYmplY3QgaGFzIGJlZW4gY2hhbmdlZCBpbiBzdWNoIGEgd2F5IHRoYXQgdGhlIHNoYWRvdydzIHNoYXBlXG4gICAgICogaGFzIGNoYW5nZWQgKG5vdCBhIHJvdGF0aW9uIGFib3V0IHRoZSBZIGF4aXMpLlxuICAgICAqL1xuICAgIHVwZGF0ZVNoYWRvdygpIHtcbiAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5zaGFkb3c7XG4gICAgICAgIGlmIChzaGFkb3cgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgc2lkZSA9IHRoaXMuZWxlbWVudC5hclBsYWNlbWVudCA9PT0gJ3dhbGwnID8gJ2JhY2snIDogJ2JvdHRvbSc7XG4gICAgICAgICAgICBzaGFkb3cuc2V0U2NlbmUodGhpcywgdGhpcy5zaGFkb3dTb2Z0bmVzcywgc2lkZSk7XG4gICAgICAgICAgICBzaGFkb3cubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlclNoYWRvdyhyZW5kZXJlcikge1xuICAgICAgICBjb25zdCBzaGFkb3cgPSB0aGlzLnNoYWRvdztcbiAgICAgICAgaWYgKHNoYWRvdyAhPSBudWxsICYmIHNoYWRvdy5uZWVkc1VwZGF0ZSA9PSB0cnVlKSB7XG4gICAgICAgICAgICBzaGFkb3cucmVuZGVyKHJlbmRlcmVyLCB0aGlzKTtcbiAgICAgICAgICAgIHNoYWRvdy5uZWVkc1VwZGF0ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlU2hhZG93UmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5zaGFkb3cgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zaGFkb3cubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNoYWRvdydzIGludGVuc2l0eSwgbGF6aWx5IGNyZWF0aW5nIHRoZSBzaGFkb3cgYXMgbmVjZXNzYXJ5LlxuICAgICAqL1xuICAgIHNldFNoYWRvd0ludGVuc2l0eShzaGFkb3dJbnRlbnNpdHkpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dJbnRlbnNpdHkgPSBzaGFkb3dJbnRlbnNpdHk7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50R0xURiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRCYWtlZFNoYWRvd1Zpc2liaWxpdHkoKTtcbiAgICAgICAgaWYgKHNoYWRvd0ludGVuc2l0eSA8PSAwICYmIHRoaXMuc2hhZG93ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zaGFkb3cgPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgc2lkZSA9IHRoaXMuZWxlbWVudC5hclBsYWNlbWVudCA9PT0gJ3dhbGwnID8gJ2JhY2snIDogJ2JvdHRvbSc7XG4gICAgICAgICAgICB0aGlzLnNoYWRvdyA9IG5ldyBTaGFkb3codGhpcywgdGhpcy5zaGFkb3dTb2Z0bmVzcywgc2lkZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaGFkb3cuc2V0SW50ZW5zaXR5KHNoYWRvd0ludGVuc2l0eSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNoYWRvdydzIHNvZnRuZXNzIGJ5IG1hcHBpbmcgYSBbMCwgMV0gc29mdG5lc3MgcGFyYW1ldGVyIHRvIHRoZVxuICAgICAqIHNoYWRvdydzIHJlc29sdXRpb24uIFRoaXMgaW52b2x2ZXMgcmVhbGxvY2F0aW9uLCBzbyBpdCBzaG91bGQgbm90IGJlXG4gICAgICogY2hhbmdlZCBmcmVxdWVudGx5LiBTb2Z0ZXIgc2hhZG93cyBhcmUgY2hlYXBlciB0byByZW5kZXIuXG4gICAgICovXG4gICAgc2V0U2hhZG93U29mdG5lc3Moc29mdG5lc3MpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dTb2Z0bmVzcyA9IHNvZnRuZXNzO1xuICAgICAgICBjb25zdCBzaGFkb3cgPSB0aGlzLnNoYWRvdztcbiAgICAgICAgaWYgKHNoYWRvdyAhPSBudWxsKSB7XG4gICAgICAgICAgICBzaGFkb3cuc2V0U29mdG5lc3Moc29mdG5lc3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNoaWZ0IHRoZSBmbG9vciB2ZXJ0aWNhbGx5IGZyb20gdGhlIGJvdHRvbSBvZiB0aGUgbW9kZWwncyBib3VuZGluZyBib3ggYnlcbiAgICAgKiBvZmZzZXQgKHNob3VsZCBnZW5lcmFsbHkgYmUgbmVnYXRpdmUpLlxuICAgICAqL1xuICAgIHNldFNoYWRvd09mZnNldChvZmZzZXQpIHtcbiAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5zaGFkb3c7XG4gICAgICAgIGlmIChzaGFkb3cgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2hhZG93LnNldE9mZnNldChvZmZzZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCByYXljYXN0ZXIoKSB7XG4gICAgICAgIHJldHVybiByYXljYXN0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIHdvcmxkIHBvc2l0aW9uLCBtb2RlbC1zcGFjZSBub3JtYWwgYW5kIHRleHR1cmVcbiAgICAgKiBjb29yZGluYXRlIG9mIHRoZSBwb2ludCBvbiB0aGUgbWVzaCBjb3JyZXNwb25kaW5nIHRvIHRoZSBpbnB1dCBwaXhlbFxuICAgICAqIGNvb3JkaW5hdGVzIGdpdmVuIHJlbGF0aXZlIHRvIHRoZSBtb2RlbC12aWV3ZXIgZWxlbWVudC4gSWYgdGhlIG1lc2hcbiAgICAgKiBpcyBub3QgaGl0LCB0aGUgcmVzdWx0IGlzIG51bGwuXG4gICAgICovXG4gICAgcG9zaXRpb25BbmROb3JtYWxGcm9tUG9pbnQobmRjUG9zaXRpb24sIG9iamVjdCA9IHRoaXMpIHtcbiAgICAgICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShuZGNQb3NpdGlvbiwgdGhpcy5nZXRDYW1lcmEoKSk7XG4gICAgICAgIGNvbnN0IGhpdHMgPSB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3Qob2JqZWN0LCB0cnVlKTtcbiAgICAgICAgY29uc3QgaGl0ID0gaGl0cy5maW5kKChoaXQpID0+IGhpdC5vYmplY3QudmlzaWJsZSAmJiAhaGl0Lm9iamVjdC51c2VyRGF0YS5zaGFkb3cpO1xuICAgICAgICBpZiAoaGl0ID09IG51bGwgfHwgaGl0LmZhY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhpdC51diA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4geyBwb3NpdGlvbjogaGl0LnBvaW50LCBub3JtYWw6IGhpdC5mYWNlLm5vcm1hbCwgdXY6IG51bGwgfTtcbiAgICAgICAgfVxuICAgICAgICBoaXQuZmFjZS5ub3JtYWwuYXBwbHlOb3JtYWxNYXRyaXgobmV3IE1hdHJpeDMoKS5nZXROb3JtYWxNYXRyaXgoaGl0Lm9iamVjdC5tYXRyaXhXb3JsZCkpO1xuICAgICAgICByZXR1cm4geyBwb3NpdGlvbjogaGl0LnBvaW50LCBub3JtYWw6IGhpdC5mYWNlLm5vcm1hbCwgdXY6IGhpdC51diB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIGZvciBvcGVyYXRpbmcgb24gdGhlIHNldCBvZiBIb3RzcG90IG9iamVjdHNcbiAgICAgKiBhdHRhY2hlZCB0byB0aGUgc2NlbmUuIFRoZXNlIGNvbWUgZnJvbSBET00gZWxlbWVudHMsIHByb3ZpZGVkIHRvIHNsb3RzIGJ5XG4gICAgICogdGhlIEFubm90YXRpb24gTWl4aW4uXG4gICAgICovXG4gICAgYWRkSG90c3BvdChob3RzcG90KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0LmFkZChob3RzcG90KTtcbiAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGF1dG9tYXRpY2FsbHkgaW4gcmVuZGVyKCksIGJ1dCB3ZSBkbyBpdCBlYXJseSBzbyB0aGF0XG4gICAgICAgIC8vIHRoZSBzbG90cyBhcHBlYXIgaW4gdGhlIHNoYWRvdyBET00gYW5kIHRoZSBlbGVtZW50cyBnZXQgYXR0YWNoZWQsXG4gICAgICAgIC8vIGFsbG93aW5nIHVzIHRvIGRpc3BhdGNoIGV2ZW50cyBvbiB0aGVtLlxuICAgICAgICB0aGlzLmFubm90YXRpb25SZW5kZXJlci5kb21FbGVtZW50LmFwcGVuZENoaWxkKGhvdHNwb3QuZWxlbWVudCk7XG4gICAgfVxuICAgIHJlbW92ZUhvdHNwb3QoaG90c3BvdCkge1xuICAgICAgICB0aGlzLnRhcmdldC5yZW1vdmUoaG90c3BvdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhlbHBlciBtZXRob2QgdG8gYXBwbHkgYSBmdW5jdGlvbiB0byBhbGwgaG90c3BvdHMuXG4gICAgICovXG4gICAgZm9ySG90c3BvdHMoZnVuYykge1xuICAgICAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSB0aGlzLnRhcmdldDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGhvdHNwb3QgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChob3RzcG90IGluc3RhbmNlb2YgSG90c3BvdCkge1xuICAgICAgICAgICAgICAgIGZ1bmMoaG90c3BvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBDU1MgdmlzaWJpbGl0eSBvZiB0aGUgaG90c3BvdHMgYmFzZWQgb24gd2hldGhlciB0aGVpciBub3JtYWxzXG4gICAgICogcG9pbnQgdG93YXJkIHRoZSBjYW1lcmEuXG4gICAgICovXG4gICAgdXBkYXRlSG90c3BvdHModmlld2VyUG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5mb3JIb3RzcG90cygoaG90c3BvdCkgPT4ge1xuICAgICAgICAgICAgdmlldy5jb3B5KHZpZXdlclBvc2l0aW9uKTtcbiAgICAgICAgICAgIHRhcmdldC5zZXRGcm9tTWF0cml4UG9zaXRpb24oaG90c3BvdC5tYXRyaXhXb3JsZCk7XG4gICAgICAgICAgICB2aWV3LnN1Yih0YXJnZXQpO1xuICAgICAgICAgICAgbm9ybWFsV29ybGQuY29weShob3RzcG90Lm5vcm1hbClcbiAgICAgICAgICAgICAgICAudHJhbnNmb3JtRGlyZWN0aW9uKHRoaXMudGFyZ2V0Lm1hdHJpeFdvcmxkKTtcbiAgICAgICAgICAgIGlmICh2aWV3LmRvdChub3JtYWxXb3JsZCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgaG90c3BvdC5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3RzcG90LnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBhbGwgaG90c3BvdHMgdG8gYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gZ2l2ZW4gYnkgdGhlIGlucHV0IG51bWJlciBvZlxuICAgICAqIHJhZGlhbnMuIFplcm8gcmV0dXJucyB0aGVtIHRvIHVwcmlnaHQuXG4gICAgICovXG4gICAgb3JpZW50SG90c3BvdHMocmFkaWFucykge1xuICAgICAgICB0aGlzLmZvckhvdHNwb3RzKChob3RzcG90KSA9PiB7XG4gICAgICAgICAgICBob3RzcG90Lm9yaWVudChyYWRpYW5zKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcmVuZGVyaW5nIHZpc2liaWxpdHkgb2YgYWxsIGhvdHNwb3RzLiBUaGlzIGlzIHVzZWQgdG8gaGlkZSB0aGVtXG4gICAgICogZHVyaW5nIHRyYW5zaXRpb25zIGFuZCBzdWNoLlxuICAgICAqL1xuICAgIHNldEhvdHNwb3RzVmlzaWJpbGl0eSh2aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuZm9ySG90c3BvdHMoKGhvdHNwb3QpID0+IHtcbiAgICAgICAgICAgIGhvdHNwb3QudmlzaWJsZSA9IHZpc2libGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGVTY2hlbWEoc3JjKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgeyBzY2hlbWFFbGVtZW50LCBlbGVtZW50IH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB7IGFsdCwgcG9zdGVyLCBpb3NTcmMgfSA9IGVsZW1lbnQ7XG4gICAgICAgIGlmIChzcmMgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgZW5jb2RpbmcgPSBbe1xuICAgICAgICAgICAgICAgICAgICAnQHR5cGUnOiAnTWVkaWFPYmplY3QnLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VXJsOiBzcmMsXG4gICAgICAgICAgICAgICAgICAgIGVuY29kaW5nRm9ybWF0OiAoKF9hID0gc3JjLnNwbGl0KCcuJykucG9wKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0xvd2VyQ2FzZSgpKSA9PT0gJ2dsdGYnID9cbiAgICAgICAgICAgICAgICAgICAgICAgICdtb2RlbC9nbHRmK2pzb24nIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICdtb2RlbC9nbHRmLWJpbmFyeSdcbiAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIGlmIChpb3NTcmMpIHtcbiAgICAgICAgICAgICAgICBlbmNvZGluZy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgJ0B0eXBlJzogJ01lZGlhT2JqZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFVybDogaW9zU3JjLFxuICAgICAgICAgICAgICAgICAgICBlbmNvZGluZ0Zvcm1hdDogJ21vZGVsL3ZuZC51c2R6K3ppcCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHN0cnVjdHVyZWREYXRhID0ge1xuICAgICAgICAgICAgICAgICdAY29udGV4dCc6ICdodHRwOi8vc2NoZW1hLm9yZy8nLFxuICAgICAgICAgICAgICAgICdAdHlwZSc6ICczRE1vZGVsJyxcbiAgICAgICAgICAgICAgICBpbWFnZTogcG9zdGVyICE9PSBudWxsICYmIHBvc3RlciAhPT0gdm9pZCAwID8gcG9zdGVyIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGFsdCAhPT0gbnVsbCAmJiBhbHQgIT09IHZvaWQgMCA/IGFsdCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBlbmNvZGluZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNjaGVtYUVsZW1lbnQudGV4dENvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShzdHJ1Y3R1cmVkRGF0YSk7XG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjaGVtYUVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNjaGVtYUVsZW1lbnQucGFyZW50RWxlbWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICBzY2hlbWFFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoc2NoZW1hRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb2RlbFNjZW5lLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/ModelScene.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/ModelUtils.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/ModelUtils.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   moveChildren: () => (/* binding */ moveChildren),\n/* harmony export */   reduceVertices: () => (/* binding */ reduceVertices)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Moves Three.js objects from one parent to another\n */\nconst moveChildren = (from, to) => {\n    while (from.children.length) {\n        to.add(from.children.shift());\n    }\n};\n/**\n * Performs a reduction across all the vertices of the input model and all its\n * children. The supplied function takes the reduced value and a vertex and\n * returns the newly reduced value. The value is initialized as zero.\n *\n * Adapted from Three.js, @see https://github.com/mrdoob/three.js/blob/7e0a78beb9317e580d7fa4da9b5b12be051c6feb/src/math/Box3.js#L241\n */\nconst reduceVertices = (model, func, initialValue) => {\n    let value = initialValue;\n    const vertex = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3();\n    model.traverseVisible((object) => {\n        let i, l;\n        object.updateWorldMatrix(false, false);\n        const geometry = object.geometry;\n        if (geometry !== undefined) {\n            if (geometry.isGeometry) {\n                const vertices = geometry.vertices;\n                for (i = 0, l = vertices.length; i < l; i++) {\n                    vertex.copy(vertices[i]);\n                    if (object.isSkinnedMesh) {\n                        object.boneTransform(i, vertex);\n                    }\n                    else {\n                        vertex.applyMatrix4(object.matrixWorld);\n                    }\n                    value = func(value, vertex);\n                }\n            }\n            else if (geometry.isBufferGeometry) {\n                const { position } = geometry.attributes;\n                if (position !== undefined) {\n                    for (i = 0, l = position.count; i < l; i++) {\n                        vertex.fromBufferAttribute(position, i);\n                        if (object.isSkinnedMesh) {\n                            object.boneTransform(i, vertex);\n                        }\n                        else {\n                            vertex.applyMatrix4(object.matrixWorld);\n                        }\n                        value = func(value, vertex);\n                    }\n                }\n            }\n        }\n    });\n    return value;\n};\n//# sourceMappingURL=ModelUtils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvTW9kZWxVdGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2dDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSx1QkFBdUIsMENBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsT0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFdBQVc7QUFDbkM7QUFDQSxvREFBb0QsT0FBTztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL01vZGVsVXRpbHMuanM/ZDE2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xuLyoqXG4gKiBNb3ZlcyBUaHJlZS5qcyBvYmplY3RzIGZyb20gb25lIHBhcmVudCB0byBhbm90aGVyXG4gKi9cbmV4cG9ydCBjb25zdCBtb3ZlQ2hpbGRyZW4gPSAoZnJvbSwgdG8pID0+IHtcbiAgICB3aGlsZSAoZnJvbS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgdG8uYWRkKGZyb20uY2hpbGRyZW4uc2hpZnQoKSk7XG4gICAgfVxufTtcbi8qKlxuICogUGVyZm9ybXMgYSByZWR1Y3Rpb24gYWNyb3NzIGFsbCB0aGUgdmVydGljZXMgb2YgdGhlIGlucHV0IG1vZGVsIGFuZCBhbGwgaXRzXG4gKiBjaGlsZHJlbi4gVGhlIHN1cHBsaWVkIGZ1bmN0aW9uIHRha2VzIHRoZSByZWR1Y2VkIHZhbHVlIGFuZCBhIHZlcnRleCBhbmRcbiAqIHJldHVybnMgdGhlIG5ld2x5IHJlZHVjZWQgdmFsdWUuIFRoZSB2YWx1ZSBpcyBpbml0aWFsaXplZCBhcyB6ZXJvLlxuICpcbiAqIEFkYXB0ZWQgZnJvbSBUaHJlZS5qcywgQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2Jsb2IvN2UwYTc4YmViOTMxN2U1ODBkN2ZhNGRhOWI1YjEyYmUwNTFjNmZlYi9zcmMvbWF0aC9Cb3gzLmpzI0wyNDFcbiAqL1xuZXhwb3J0IGNvbnN0IHJlZHVjZVZlcnRpY2VzID0gKG1vZGVsLCBmdW5jLCBpbml0aWFsVmFsdWUpID0+IHtcbiAgICBsZXQgdmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gICAgY29uc3QgdmVydGV4ID0gbmV3IFZlY3RvcjMoKTtcbiAgICBtb2RlbC50cmF2ZXJzZVZpc2libGUoKG9iamVjdCkgPT4ge1xuICAgICAgICBsZXQgaSwgbDtcbiAgICAgICAgb2JqZWN0LnVwZGF0ZVdvcmxkTWF0cml4KGZhbHNlLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gb2JqZWN0Lmdlb21ldHJ5O1xuICAgICAgICBpZiAoZ2VvbWV0cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGdlb21ldHJ5LmlzR2VvbWV0cnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IGdlb21ldHJ5LnZlcnRpY2VzO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB2ZXJ0aWNlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4LmNvcHkodmVydGljZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0LmlzU2tpbm5lZE1lc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5ib25lVHJhbnNmb3JtKGksIHZlcnRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXguYXBwbHlNYXRyaXg0KG9iamVjdC5tYXRyaXhXb3JsZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmdW5jKHZhbHVlLCB2ZXJ0ZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGdlb21ldHJ5LmlzQnVmZmVyR2VvbWV0cnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBvc2l0aW9uIH0gPSBnZW9tZXRyeS5hdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBwb3NpdGlvbi5jb3VudDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4LmZyb21CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb24sIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC5pc1NraW5uZWRNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmJvbmVUcmFuc2Zvcm0oaSwgdmVydGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleC5hcHBseU1hdHJpeDQob2JqZWN0Lm1hdHJpeFdvcmxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZnVuYyh2YWx1ZSwgdmVydGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb2RlbFV0aWxzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/ModelUtils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/PlacementBox.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/PlacementBox.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PlacementBox: () => (/* binding */ PlacementBox)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _Damper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Damper.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Damper.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nconst RADIUS = 0.2;\nconst LINE_WIDTH = 0.03;\nconst MAX_OPACITY = 0.75;\nconst SEGMENTS = 12;\nconst DELTA_PHI = Math.PI / (2 * SEGMENTS);\nconst vector2 = new three__WEBPACK_IMPORTED_MODULE_1__.Vector2();\n/**\n * Adds a quarter-annulus of vertices to the array, centered on cornerX,\n * cornerY.\n */\nconst addCorner = (vertices, cornerX, cornerY) => {\n    let phi = cornerX > 0 ? (cornerY > 0 ? 0 : -Math.PI / 2) :\n        (cornerY > 0 ? Math.PI / 2 : Math.PI);\n    for (let i = 0; i <= SEGMENTS; ++i) {\n        vertices.push(cornerX + (RADIUS - LINE_WIDTH) * Math.cos(phi), cornerY + (RADIUS - LINE_WIDTH) * Math.sin(phi), 0, cornerX + RADIUS * Math.cos(phi), cornerY + RADIUS * Math.sin(phi), 0);\n        phi += DELTA_PHI;\n    }\n};\n/**\n * This class is a set of two coincident planes. The first is just a cute box\n * outline with rounded corners and damped opacity to indicate the floor extents\n * of a scene. It is purposely larger than the scene's bounding box by RADIUS on\n * all sides so that small scenes are still visible / selectable. Its center is\n * actually carved out by vertices to ensure its fragment shader doesn't add\n * much time.\n *\n * The child plane is a simple plane with the same extents for use in hit\n * testing (translation is triggered when the touch hits the plane, rotation\n * otherwise).\n */\nclass PlacementBox extends three__WEBPACK_IMPORTED_MODULE_1__.Mesh {\n    constructor(scene, side) {\n        const geometry = new three__WEBPACK_IMPORTED_MODULE_1__.BufferGeometry();\n        const triangles = [];\n        const vertices = [];\n        const { size, boundingBox } = scene;\n        const x = size.x / 2;\n        const y = (side === 'back' ? size.y : size.z) / 2;\n        addCorner(vertices, x, y);\n        addCorner(vertices, -x, y);\n        addCorner(vertices, -x, -y);\n        addCorner(vertices, x, -y);\n        const numVertices = vertices.length / 3;\n        for (let i = 0; i < numVertices - 2; i += 2) {\n            triangles.push(i, i + 1, i + 3, i, i + 3, i + 2);\n        }\n        const i = numVertices - 2;\n        triangles.push(i, i + 1, 1, i, 1, 0);\n        geometry.setAttribute('position', new three__WEBPACK_IMPORTED_MODULE_1__.Float32BufferAttribute(vertices, 3));\n        geometry.setIndex(triangles);\n        super(geometry);\n        this.side = side;\n        const material = this.material;\n        material.side = three__WEBPACK_IMPORTED_MODULE_1__.DoubleSide;\n        material.transparent = true;\n        material.opacity = 0;\n        this.goalOpacity = 0;\n        this.opacityDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_0__.Damper();\n        this.hitPlane =\n            new three__WEBPACK_IMPORTED_MODULE_1__.Mesh(new three__WEBPACK_IMPORTED_MODULE_1__.PlaneGeometry(2 * (x + RADIUS), 2 * (y + RADIUS)));\n        this.hitPlane.visible = false;\n        this.hitPlane.material.side = three__WEBPACK_IMPORTED_MODULE_1__.DoubleSide;\n        this.add(this.hitPlane);\n        boundingBox.getCenter(this.position);\n        switch (side) {\n            case 'bottom':\n                this.rotateX(-Math.PI / 2);\n                this.shadowHeight = boundingBox.min.y;\n                this.position.y = this.shadowHeight;\n                break;\n            case 'back':\n                this.shadowHeight = boundingBox.min.z;\n                this.position.z = this.shadowHeight;\n        }\n        scene.target.add(this);\n        this.offsetHeight = 0;\n    }\n    /**\n     * Get the world hit position if the touch coordinates hit the box, and null\n     * otherwise. Pass the scene in to get access to its raycaster.\n     */\n    getHit(scene, screenX, screenY) {\n        vector2.set(screenX, -screenY);\n        this.hitPlane.visible = true;\n        const hitResult = scene.positionAndNormalFromPoint(vector2, this.hitPlane);\n        this.hitPlane.visible = false;\n        return hitResult == null ? null : hitResult.position;\n    }\n    getExpandedHit(scene, screenX, screenY) {\n        this.hitPlane.scale.set(1000, 1000, 1000);\n        this.hitPlane.updateMatrixWorld();\n        const hitResult = this.getHit(scene, screenX, screenY);\n        this.hitPlane.scale.set(1, 1, 1);\n        return hitResult;\n    }\n    /**\n     * Offset the height of the box relative to the bottom of the scene. Positive\n     * is up, so generally only negative values are used.\n     */\n    set offsetHeight(offset) {\n        offset -= 0.001; // push 1 mm below shadow to avoid z-fighting\n        if (this.side === 'back') {\n            this.position.z = this.shadowHeight + offset;\n        }\n        else {\n            this.position.y = this.shadowHeight + offset;\n        }\n    }\n    get offsetHeight() {\n        if (this.side === 'back') {\n            return this.position.z - this.shadowHeight;\n        }\n        else {\n            return this.position.y - this.shadowHeight;\n        }\n    }\n    /**\n     * Set the box's visibility; it will fade in and out.\n     */\n    set show(visible) {\n        this.goalOpacity = visible ? MAX_OPACITY : 0;\n    }\n    /**\n     * Call on each frame with the frame delta to fade the box.\n     */\n    updateOpacity(delta) {\n        const material = this.material;\n        material.opacity =\n            this.opacityDamper.update(material.opacity, this.goalOpacity, delta, 1);\n        this.visible = material.opacity > 0;\n    }\n    /**\n     * Call this to clean up Three's cache when you remove the box.\n     */\n    dispose() {\n        var _a;\n        const { geometry, material } = this.hitPlane;\n        geometry.dispose();\n        material.dispose();\n        this.geometry.dispose();\n        this.material.dispose();\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.remove(this);\n    }\n}\n//# sourceMappingURL=PlacementBox.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvUGxhY2VtZW50Qm94LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDeUc7QUFDcEU7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwQ0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sMkJBQTJCLHVDQUFJO0FBQ3RDO0FBQ0EsNkJBQTZCLGlEQUFjO0FBQzNDO0FBQ0E7QUFDQSxnQkFBZ0Isb0JBQW9CO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFCQUFxQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyx5REFBc0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkNBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDhDQUFNO0FBQ3ZDO0FBQ0EsZ0JBQWdCLHVDQUFJLEtBQUssZ0RBQWE7QUFDdEM7QUFDQSxzQ0FBc0MsNkNBQVU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscUJBQXFCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvUGxhY2VtZW50Qm94LmpzP2ZiZDkiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgQnVmZmVyR2VvbWV0cnksIERvdWJsZVNpZGUsIEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUsIE1lc2gsIFBsYW5lR2VvbWV0cnksIFZlY3RvcjIgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgeyBEYW1wZXIgfSBmcm9tICcuL0RhbXBlci5qcyc7XG5jb25zdCBSQURJVVMgPSAwLjI7XG5jb25zdCBMSU5FX1dJRFRIID0gMC4wMztcbmNvbnN0IE1BWF9PUEFDSVRZID0gMC43NTtcbmNvbnN0IFNFR01FTlRTID0gMTI7XG5jb25zdCBERUxUQV9QSEkgPSBNYXRoLlBJIC8gKDIgKiBTRUdNRU5UUyk7XG5jb25zdCB2ZWN0b3IyID0gbmV3IFZlY3RvcjIoKTtcbi8qKlxuICogQWRkcyBhIHF1YXJ0ZXItYW5udWx1cyBvZiB2ZXJ0aWNlcyB0byB0aGUgYXJyYXksIGNlbnRlcmVkIG9uIGNvcm5lclgsXG4gKiBjb3JuZXJZLlxuICovXG5jb25zdCBhZGRDb3JuZXIgPSAodmVydGljZXMsIGNvcm5lclgsIGNvcm5lclkpID0+IHtcbiAgICBsZXQgcGhpID0gY29ybmVyWCA+IDAgPyAoY29ybmVyWSA+IDAgPyAwIDogLU1hdGguUEkgLyAyKSA6XG4gICAgICAgIChjb3JuZXJZID4gMCA/IE1hdGguUEkgLyAyIDogTWF0aC5QSSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gU0VHTUVOVFM7ICsraSkge1xuICAgICAgICB2ZXJ0aWNlcy5wdXNoKGNvcm5lclggKyAoUkFESVVTIC0gTElORV9XSURUSCkgKiBNYXRoLmNvcyhwaGkpLCBjb3JuZXJZICsgKFJBRElVUyAtIExJTkVfV0lEVEgpICogTWF0aC5zaW4ocGhpKSwgMCwgY29ybmVyWCArIFJBRElVUyAqIE1hdGguY29zKHBoaSksIGNvcm5lclkgKyBSQURJVVMgKiBNYXRoLnNpbihwaGkpLCAwKTtcbiAgICAgICAgcGhpICs9IERFTFRBX1BISTtcbiAgICB9XG59O1xuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGEgc2V0IG9mIHR3byBjb2luY2lkZW50IHBsYW5lcy4gVGhlIGZpcnN0IGlzIGp1c3QgYSBjdXRlIGJveFxuICogb3V0bGluZSB3aXRoIHJvdW5kZWQgY29ybmVycyBhbmQgZGFtcGVkIG9wYWNpdHkgdG8gaW5kaWNhdGUgdGhlIGZsb29yIGV4dGVudHNcbiAqIG9mIGEgc2NlbmUuIEl0IGlzIHB1cnBvc2VseSBsYXJnZXIgdGhhbiB0aGUgc2NlbmUncyBib3VuZGluZyBib3ggYnkgUkFESVVTIG9uXG4gKiBhbGwgc2lkZXMgc28gdGhhdCBzbWFsbCBzY2VuZXMgYXJlIHN0aWxsIHZpc2libGUgLyBzZWxlY3RhYmxlLiBJdHMgY2VudGVyIGlzXG4gKiBhY3R1YWxseSBjYXJ2ZWQgb3V0IGJ5IHZlcnRpY2VzIHRvIGVuc3VyZSBpdHMgZnJhZ21lbnQgc2hhZGVyIGRvZXNuJ3QgYWRkXG4gKiBtdWNoIHRpbWUuXG4gKlxuICogVGhlIGNoaWxkIHBsYW5lIGlzIGEgc2ltcGxlIHBsYW5lIHdpdGggdGhlIHNhbWUgZXh0ZW50cyBmb3IgdXNlIGluIGhpdFxuICogdGVzdGluZyAodHJhbnNsYXRpb24gaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHRvdWNoIGhpdHMgdGhlIHBsYW5lLCByb3RhdGlvblxuICogb3RoZXJ3aXNlKS5cbiAqL1xuZXhwb3J0IGNsYXNzIFBsYWNlbWVudEJveCBleHRlbmRzIE1lc2gge1xuICAgIGNvbnN0cnVjdG9yKHNjZW5lLCBzaWRlKSB7XG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG4gICAgICAgIGNvbnN0IHRyaWFuZ2xlcyA9IFtdO1xuICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdO1xuICAgICAgICBjb25zdCB7IHNpemUsIGJvdW5kaW5nQm94IH0gPSBzY2VuZTtcbiAgICAgICAgY29uc3QgeCA9IHNpemUueCAvIDI7XG4gICAgICAgIGNvbnN0IHkgPSAoc2lkZSA9PT0gJ2JhY2snID8gc2l6ZS55IDogc2l6ZS56KSAvIDI7XG4gICAgICAgIGFkZENvcm5lcih2ZXJ0aWNlcywgeCwgeSk7XG4gICAgICAgIGFkZENvcm5lcih2ZXJ0aWNlcywgLXgsIHkpO1xuICAgICAgICBhZGRDb3JuZXIodmVydGljZXMsIC14LCAteSk7XG4gICAgICAgIGFkZENvcm5lcih2ZXJ0aWNlcywgeCwgLXkpO1xuICAgICAgICBjb25zdCBudW1WZXJ0aWNlcyA9IHZlcnRpY2VzLmxlbmd0aCAvIDM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXMgLSAyOyBpICs9IDIpIHtcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGksIGkgKyAxLCBpICsgMywgaSwgaSArIDMsIGkgKyAyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpID0gbnVtVmVydGljZXMgLSAyO1xuICAgICAgICB0cmlhbmdsZXMucHVzaChpLCBpICsgMSwgMSwgaSwgMSwgMCk7XG4gICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywgMykpO1xuICAgICAgICBnZW9tZXRyeS5zZXRJbmRleCh0cmlhbmdsZXMpO1xuICAgICAgICBzdXBlcihnZW9tZXRyeSk7XG4gICAgICAgIHRoaXMuc2lkZSA9IHNpZGU7XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcbiAgICAgICAgbWF0ZXJpYWwuc2lkZSA9IERvdWJsZVNpZGU7XG4gICAgICAgIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgbWF0ZXJpYWwub3BhY2l0eSA9IDA7XG4gICAgICAgIHRoaXMuZ29hbE9wYWNpdHkgPSAwO1xuICAgICAgICB0aGlzLm9wYWNpdHlEYW1wZXIgPSBuZXcgRGFtcGVyKCk7XG4gICAgICAgIHRoaXMuaGl0UGxhbmUgPVxuICAgICAgICAgICAgbmV3IE1lc2gobmV3IFBsYW5lR2VvbWV0cnkoMiAqICh4ICsgUkFESVVTKSwgMiAqICh5ICsgUkFESVVTKSkpO1xuICAgICAgICB0aGlzLmhpdFBsYW5lLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oaXRQbGFuZS5tYXRlcmlhbC5zaWRlID0gRG91YmxlU2lkZTtcbiAgICAgICAgdGhpcy5hZGQodGhpcy5oaXRQbGFuZSk7XG4gICAgICAgIGJvdW5kaW5nQm94LmdldENlbnRlcih0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgc3dpdGNoIChzaWRlKSB7XG4gICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgIHRoaXMucm90YXRlWCgtTWF0aC5QSSAvIDIpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93SGVpZ2h0ID0gYm91bmRpbmdCb3gubWluLnk7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gdGhpcy5zaGFkb3dIZWlnaHQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdiYWNrJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd0hlaWdodCA9IGJvdW5kaW5nQm94Lm1pbi56O1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueiA9IHRoaXMuc2hhZG93SGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHNjZW5lLnRhcmdldC5hZGQodGhpcyk7XG4gICAgICAgIHRoaXMub2Zmc2V0SGVpZ2h0ID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3b3JsZCBoaXQgcG9zaXRpb24gaWYgdGhlIHRvdWNoIGNvb3JkaW5hdGVzIGhpdCB0aGUgYm94LCBhbmQgbnVsbFxuICAgICAqIG90aGVyd2lzZS4gUGFzcyB0aGUgc2NlbmUgaW4gdG8gZ2V0IGFjY2VzcyB0byBpdHMgcmF5Y2FzdGVyLlxuICAgICAqL1xuICAgIGdldEhpdChzY2VuZSwgc2NyZWVuWCwgc2NyZWVuWSkge1xuICAgICAgICB2ZWN0b3IyLnNldChzY3JlZW5YLCAtc2NyZWVuWSk7XG4gICAgICAgIHRoaXMuaGl0UGxhbmUudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIGNvbnN0IGhpdFJlc3VsdCA9IHNjZW5lLnBvc2l0aW9uQW5kTm9ybWFsRnJvbVBvaW50KHZlY3RvcjIsIHRoaXMuaGl0UGxhbmUpO1xuICAgICAgICB0aGlzLmhpdFBsYW5lLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGhpdFJlc3VsdCA9PSBudWxsID8gbnVsbCA6IGhpdFJlc3VsdC5wb3NpdGlvbjtcbiAgICB9XG4gICAgZ2V0RXhwYW5kZWRIaXQoc2NlbmUsIHNjcmVlblgsIHNjcmVlblkpIHtcbiAgICAgICAgdGhpcy5oaXRQbGFuZS5zY2FsZS5zZXQoMTAwMCwgMTAwMCwgMTAwMCk7XG4gICAgICAgIHRoaXMuaGl0UGxhbmUudXBkYXRlTWF0cml4V29ybGQoKTtcbiAgICAgICAgY29uc3QgaGl0UmVzdWx0ID0gdGhpcy5nZXRIaXQoc2NlbmUsIHNjcmVlblgsIHNjcmVlblkpO1xuICAgICAgICB0aGlzLmhpdFBsYW5lLnNjYWxlLnNldCgxLCAxLCAxKTtcbiAgICAgICAgcmV0dXJuIGhpdFJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2Zmc2V0IHRoZSBoZWlnaHQgb2YgdGhlIGJveCByZWxhdGl2ZSB0byB0aGUgYm90dG9tIG9mIHRoZSBzY2VuZS4gUG9zaXRpdmVcbiAgICAgKiBpcyB1cCwgc28gZ2VuZXJhbGx5IG9ubHkgbmVnYXRpdmUgdmFsdWVzIGFyZSB1c2VkLlxuICAgICAqL1xuICAgIHNldCBvZmZzZXRIZWlnaHQob2Zmc2V0KSB7XG4gICAgICAgIG9mZnNldCAtPSAwLjAwMTsgLy8gcHVzaCAxIG1tIGJlbG93IHNoYWRvdyB0byBhdm9pZCB6LWZpZ2h0aW5nXG4gICAgICAgIGlmICh0aGlzLnNpZGUgPT09ICdiYWNrJykge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi56ID0gdGhpcy5zaGFkb3dIZWlnaHQgKyBvZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgPSB0aGlzLnNoYWRvd0hlaWdodCArIG9mZnNldDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgb2Zmc2V0SGVpZ2h0KCkge1xuICAgICAgICBpZiAodGhpcy5zaWRlID09PSAnYmFjaycpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnogLSB0aGlzLnNoYWRvd0hlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnkgLSB0aGlzLnNoYWRvd0hlaWdodDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGJveCdzIHZpc2liaWxpdHk7IGl0IHdpbGwgZmFkZSBpbiBhbmQgb3V0LlxuICAgICAqL1xuICAgIHNldCBzaG93KHZpc2libGUpIHtcbiAgICAgICAgdGhpcy5nb2FsT3BhY2l0eSA9IHZpc2libGUgPyBNQVhfT1BBQ0lUWSA6IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgb24gZWFjaCBmcmFtZSB3aXRoIHRoZSBmcmFtZSBkZWx0YSB0byBmYWRlIHRoZSBib3guXG4gICAgICovXG4gICAgdXBkYXRlT3BhY2l0eShkZWx0YSkge1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gICAgICAgIG1hdGVyaWFsLm9wYWNpdHkgPVxuICAgICAgICAgICAgdGhpcy5vcGFjaXR5RGFtcGVyLnVwZGF0ZShtYXRlcmlhbC5vcGFjaXR5LCB0aGlzLmdvYWxPcGFjaXR5LCBkZWx0YSwgMSk7XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IG1hdGVyaWFsLm9wYWNpdHkgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHRoaXMgdG8gY2xlYW4gdXAgVGhyZWUncyBjYWNoZSB3aGVuIHlvdSByZW1vdmUgdGhlIGJveC5cbiAgICAgKi9cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IHsgZ2VvbWV0cnksIG1hdGVyaWFsIH0gPSB0aGlzLmhpdFBsYW5lO1xuICAgICAgICBnZW9tZXRyeS5kaXNwb3NlKCk7XG4gICAgICAgIG1hdGVyaWFsLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwuZGlzcG9zZSgpO1xuICAgICAgICAoX2EgPSB0aGlzLnBhcmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlbW92ZSh0aGlzKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QbGFjZW1lbnRCb3guanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/PlacementBox.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/Renderer.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/Renderer.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_POWER_PREFERENCE: () => (/* binding */ DEFAULT_POWER_PREFERENCE),\n/* harmony export */   Renderer: () => (/* binding */ Renderer)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _features_environment_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../features/environment.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/environment.js\");\n/* harmony import */ var _model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model-viewer-base.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/model-viewer-base.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* harmony import */ var _ARRenderer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ARRenderer.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/ARRenderer.js\");\n/* harmony import */ var _CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CachingGLTFLoader.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/CachingGLTFLoader.js\");\n/* harmony import */ var _Debugger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Debugger.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Debugger.js\");\n/* harmony import */ var _gltf_instance_ModelViewerGLTFInstance_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./gltf-instance/ModelViewerGLTFInstance.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/ModelViewerGLTFInstance.js\");\n/* harmony import */ var _TextureUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./TextureUtils.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/TextureUtils.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\n\n\n\n\n// Between 0 and 1: larger means the average responds faster and is less smooth.\nconst DURATION_DECAY = 0.2;\nconst LOW_FRAME_DURATION_MS = 40;\nconst HIGH_FRAME_DURATION_MS = 60;\nconst MAX_AVG_CHANGE_MS = 5;\nconst SCALE_STEPS = [1, 0.79, 0.62, 0.5, 0.4, 0.31, 0.25];\nconst DEFAULT_LAST_STEP = 3;\nconst DEFAULT_POWER_PREFERENCE = 'high-performance';\n/**\n * Registers canvases with Canvas2DRenderingContexts and renders them\n * all in the same WebGLRenderingContext, spitting out textures to apply\n * to the canvases. Creates a fullscreen WebGL canvas that is not added\n * to the DOM, and on each frame, renders each registered canvas on a portion\n * of the WebGL canvas, and applies the texture on the registered canvas.\n *\n * In the future, can use ImageBitmapRenderingContext instead of\n * Canvas2DRenderingContext if supported for cheaper transferring of\n * the texture.\n */\nclass Renderer extends three__WEBPACK_IMPORTED_MODULE_8__.EventDispatcher {\n    constructor(options) {\n        super();\n        this.loader = new _CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_4__.CachingGLTFLoader(_gltf_instance_ModelViewerGLTFInstance_js__WEBPACK_IMPORTED_MODULE_6__.ModelViewerGLTFInstance);\n        this.width = 0;\n        this.height = 0;\n        this.dpr = 1;\n        this.debugger = null;\n        this.scenes = new Set();\n        this.multipleScenesVisible = false;\n        this.lastTick = performance.now();\n        this.renderedLastFrame = false;\n        this.scaleStep = 0;\n        this.lastStep = DEFAULT_LAST_STEP;\n        this.avgFrameDuration = (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n        this.onWebGLContextLost = (event) => {\n            this.dispatchEvent({ type: 'contextlost', sourceEvent: event });\n        };\n        this.onWebGLContextRestored = () => {\n            var _a;\n            (_a = this.textureUtils) === null || _a === void 0 ? void 0 : _a.dispose();\n            this.textureUtils = new _TextureUtils_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.threeRenderer);\n            for (const scene of this.scenes) {\n                scene.element[_features_environment_js__WEBPACK_IMPORTED_MODULE_0__.$updateEnvironment]();\n            }\n        };\n        this.dpr = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.resolveDpr)();\n        this.canvas3D = document.createElement('canvas');\n        this.canvas3D.id = 'webgl-canvas';\n        this.canvas3D.classList.add('show');\n        try {\n            this.threeRenderer = new three__WEBPACK_IMPORTED_MODULE_8__.WebGLRenderer({\n                canvas: this.canvas3D,\n                alpha: true,\n                antialias: true,\n                powerPreference: options.powerPreference,\n                preserveDrawingBuffer: true\n            });\n            this.threeRenderer.autoClear = true;\n            this.threeRenderer.outputEncoding = three__WEBPACK_IMPORTED_MODULE_8__.sRGBEncoding;\n            this.threeRenderer.physicallyCorrectLights = true;\n            this.threeRenderer.setPixelRatio(1); // handle pixel ratio externally\n            this.debugger = !!options.debug ? new _Debugger_js__WEBPACK_IMPORTED_MODULE_5__.Debugger(this) : null;\n            this.threeRenderer.debug = { checkShaderErrors: !!this.debugger };\n            // ACESFilmicToneMapping appears to be the most \"saturated\",\n            // and similar to Filament's gltf-viewer.\n            this.threeRenderer.toneMapping = three__WEBPACK_IMPORTED_MODULE_8__.ACESFilmicToneMapping;\n        }\n        catch (error) {\n            console.warn(error);\n        }\n        this.arRenderer = new _ARRenderer_js__WEBPACK_IMPORTED_MODULE_3__.ARRenderer(this);\n        this.textureUtils =\n            this.canRender ? new _TextureUtils_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.threeRenderer) : null;\n        _CachingGLTFLoader_js__WEBPACK_IMPORTED_MODULE_4__.CachingGLTFLoader.initializeKTX2Loader(this.threeRenderer);\n        this.canvas3D.addEventListener('webglcontextlost', this.onWebGLContextLost);\n        this.canvas3D.addEventListener('webglcontextrestored', this.onWebGLContextRestored);\n        this.updateRendererSize();\n    }\n    static get singleton() {\n        return this._singleton;\n    }\n    static resetSingleton() {\n        const elements = this._singleton.dispose();\n        for (const element of elements) {\n            element.disconnectedCallback();\n        }\n        this._singleton = new Renderer({\n            powerPreference: (self.ModelViewerElement || {})\n                .powerPreference ||\n                DEFAULT_POWER_PREFERENCE,\n            debug: (0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.isDebugMode)()\n        });\n        for (const element of elements) {\n            element.connectedCallback();\n        }\n    }\n    get canRender() {\n        return this.threeRenderer != null;\n    }\n    get scaleFactor() {\n        return SCALE_STEPS[this.scaleStep];\n    }\n    set minScale(scale) {\n        let i = 1;\n        while (i < SCALE_STEPS.length) {\n            if (SCALE_STEPS[i] < scale) {\n                break;\n            }\n            ++i;\n        }\n        this.lastStep = i - 1;\n    }\n    registerScene(scene) {\n        this.scenes.add(scene);\n        scene.forceRescale();\n        const size = new three__WEBPACK_IMPORTED_MODULE_8__.Vector2();\n        this.threeRenderer.getSize(size);\n        scene.canvas.width = size.x;\n        scene.canvas.height = size.y;\n        if (this.canRender && this.scenes.size > 0) {\n            this.threeRenderer.setAnimationLoop((time, frame) => this.render(time, frame));\n        }\n        if (this.debugger != null) {\n            this.debugger.addScene(scene);\n        }\n    }\n    unregisterScene(scene) {\n        this.scenes.delete(scene);\n        if (this.canvas3D.parentElement === scene.canvas.parentElement) {\n            scene.canvas.parentElement.removeChild(this.canvas3D);\n        }\n        if (this.canRender && this.scenes.size === 0) {\n            this.threeRenderer.setAnimationLoop(null);\n        }\n        if (this.debugger != null) {\n            this.debugger.removeScene(scene);\n        }\n    }\n    displayCanvas(scene) {\n        return this.multipleScenesVisible ? scene.element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$canvas] : this.canvas3D;\n    }\n    /**\n     * The function enables an optimization, where when there is only a single\n     * <model-viewer> element, we can use the renderer's 3D canvas directly for\n     * display. Otherwise we need to use the element's 2D canvas and copy the\n     * renderer's result into it.\n     */\n    countVisibleScenes() {\n        const { canvas3D } = this;\n        let visibleScenes = 0;\n        let canvas3DScene = null;\n        for (const scene of this.scenes) {\n            const { element } = scene;\n            if (element.modelIsVisible && scene.externalRenderer == null) {\n                ++visibleScenes;\n            }\n            if (canvas3D.parentElement === scene.canvas.parentElement) {\n                canvas3DScene = scene;\n            }\n        }\n        const multipleScenesVisible = visibleScenes > 1;\n        if (canvas3DScene != null) {\n            const newlyMultiple = multipleScenesVisible && !this.multipleScenesVisible;\n            const disappearing = !canvas3DScene.element.modelIsVisible;\n            if (newlyMultiple || disappearing) {\n                const { width, height } = this.sceneSize(canvas3DScene);\n                this.copyPixels(canvas3DScene, width, height);\n                canvas3D.parentElement.removeChild(canvas3D);\n            }\n        }\n        this.multipleScenesVisible = multipleScenesVisible;\n    }\n    /**\n     * Updates the renderer's size based on the largest scene and any changes to\n     * device pixel ratio.\n     */\n    updateRendererSize() {\n        const dpr = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.resolveDpr)();\n        if (dpr !== this.dpr) {\n            // If the device pixel ratio has changed due to page zoom, elements\n            // specified by % width do not fire a resize event even though their CSS\n            // pixel dimensions change, so we force them to update their size here.\n            for (const scene of this.scenes) {\n                const { element } = scene;\n                element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$updateSize](element.getBoundingClientRect());\n            }\n        }\n        // Make the renderer the size of the largest scene\n        let width = 0;\n        let height = 0;\n        for (const scene of this.scenes) {\n            width = Math.max(width, scene.width);\n            height = Math.max(height, scene.height);\n        }\n        if (width === this.width && height === this.height && dpr === this.dpr) {\n            return;\n        }\n        this.width = width;\n        this.height = height;\n        this.dpr = dpr;\n        width = Math.ceil(width * dpr);\n        height = Math.ceil(height * dpr);\n        if (this.canRender) {\n            this.threeRenderer.setSize(width, height, false);\n        }\n        // Each scene's canvas must match the renderer size. In general they can be\n        // larger than the element that contains them, but the overflow is hidden\n        // and only the portion that is shown is copied over.\n        for (const scene of this.scenes) {\n            const { canvas } = scene;\n            canvas.width = width;\n            canvas.height = height;\n            scene.forceRescale();\n        }\n    }\n    updateRendererScale(delta) {\n        const scaleStep = this.scaleStep;\n        this.avgFrameDuration += (0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(DURATION_DECAY * (delta - this.avgFrameDuration), -MAX_AVG_CHANGE_MS, MAX_AVG_CHANGE_MS);\n        if (this.avgFrameDuration > HIGH_FRAME_DURATION_MS) {\n            ++this.scaleStep;\n        }\n        else if (this.avgFrameDuration < LOW_FRAME_DURATION_MS && this.scaleStep > 0) {\n            --this.scaleStep;\n        }\n        this.scaleStep = Math.min(this.scaleStep, this.lastStep);\n        if (scaleStep !== this.scaleStep) {\n            this.avgFrameDuration =\n                (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n        }\n    }\n    shouldRender(scene) {\n        if (!scene.shouldRender()) {\n            // The first frame we stop rendering the scene (because it stops moving),\n            // trigger one extra render at full scale.\n            if (scene.scaleStep != 0) {\n                scene.scaleStep = 0;\n                this.rescaleCanvas(scene);\n            }\n            else {\n                return false;\n            }\n        }\n        else if (scene.scaleStep != this.scaleStep) {\n            // Update render scale\n            scene.scaleStep = this.scaleStep;\n            this.rescaleCanvas(scene);\n        }\n        return true;\n    }\n    rescaleCanvas(scene) {\n        const scale = SCALE_STEPS[scene.scaleStep];\n        const width = Math.ceil(this.width / scale);\n        const height = Math.ceil(this.height / scale);\n        const { style } = scene.canvas;\n        style.width = `${width}px`;\n        style.height = `${height}px`;\n        this.canvas3D.style.width = `${width}px`;\n        this.canvas3D.style.height = `${height}px`;\n        const renderedDpr = this.dpr * scale;\n        const reason = scale < 1 ? 'GPU throttling' :\n            this.dpr !== window.devicePixelRatio ? 'No meta viewport tag' :\n                '';\n        scene.element.dispatchEvent(new CustomEvent('render-scale', {\n            detail: {\n                reportedDpr: window.devicePixelRatio,\n                renderedDpr: renderedDpr,\n                minimumDpr: this.dpr * SCALE_STEPS[this.lastStep],\n                pixelWidth: Math.ceil(scene.width * renderedDpr),\n                pixelHeight: Math.ceil(scene.height * renderedDpr),\n                reason: reason\n            }\n        }));\n    }\n    sceneSize(scene) {\n        const { dpr } = this;\n        const scaleFactor = SCALE_STEPS[scene.scaleStep];\n        // We avoid using the Three.js PixelRatio and handle it ourselves here so\n        // that we can do proper rounding and avoid white boundary pixels.\n        const width = Math.min(Math.ceil(scene.width * scaleFactor * dpr), this.canvas3D.width);\n        const height = Math.min(Math.ceil(scene.height * scaleFactor * dpr), this.canvas3D.height);\n        return { width, height };\n    }\n    copyPixels(scene, width, height) {\n        const context2D = scene.context;\n        if (context2D == null) {\n            console.log('could not acquire 2d context');\n            return;\n        }\n        context2D.clearRect(0, 0, width, height);\n        context2D.drawImage(this.canvas3D, 0, 0, width, height, 0, 0, width, height);\n        scene.canvas.classList.add('show');\n    }\n    /**\n     * Returns an array version of this.scenes where the non-visible ones are\n     * first. This allows eager scenes to be rendered before they are visible,\n     * without needing the multi-canvas render path.\n     */\n    orderedScenes() {\n        const scenes = [];\n        for (const visible of [false, true]) {\n            for (const scene of this.scenes) {\n                if (scene.element.modelIsVisible === visible) {\n                    scenes.push(scene);\n                }\n            }\n        }\n        return scenes;\n    }\n    get isPresenting() {\n        return this.arRenderer.isPresenting;\n    }\n    /**\n     * This method takes care of updating the element and renderer state based on\n     * the time that has passed since the last rendered frame.\n     */\n    preRender(scene, t, delta) {\n        const { element, exposure } = scene;\n        element[_model_viewer_base_js__WEBPACK_IMPORTED_MODULE_1__.$tick](t, delta);\n        const exposureIsNumber = typeof exposure === 'number' && !Number.isNaN(exposure);\n        this.threeRenderer.toneMappingExposure = exposureIsNumber ? exposure : 1.0;\n    }\n    render(t, frame) {\n        if (frame != null) {\n            this.arRenderer.onWebXRFrame(t, frame);\n            return;\n        }\n        const delta = t - this.lastTick;\n        this.lastTick = t;\n        if (!this.canRender || this.isPresenting) {\n            return;\n        }\n        this.countVisibleScenes();\n        this.updateRendererSize();\n        if (this.renderedLastFrame) {\n            this.updateRendererScale(delta);\n            this.renderedLastFrame = false;\n        }\n        const { canvas3D } = this;\n        for (const scene of this.orderedScenes()) {\n            const { element } = scene;\n            if (!element.loaded ||\n                (!element.modelIsVisible && scene.renderCount > 0)) {\n                continue;\n            }\n            this.preRender(scene, t, delta);\n            if (!this.shouldRender(scene)) {\n                continue;\n            }\n            if (scene.externalRenderer != null) {\n                const camera = scene.getCamera();\n                camera.updateMatrix();\n                const { matrix, projectionMatrix } = camera;\n                const viewMatrix = matrix.elements.slice();\n                const target = scene.getTarget();\n                viewMatrix[12] += target.x;\n                viewMatrix[13] += target.y;\n                viewMatrix[14] += target.z;\n                scene.externalRenderer.render({\n                    viewMatrix: viewMatrix,\n                    projectionMatrix: projectionMatrix.elements\n                });\n                continue;\n            }\n            if (!element.modelIsVisible && !this.multipleScenesVisible) {\n                // Here we are pre-rendering on the visible canvas, so we must mark the\n                // visible scene dirty to ensure it overwrites us.\n                for (const visibleScene of this.scenes) {\n                    if (visibleScene.element.modelIsVisible) {\n                        visibleScene.queueRender();\n                    }\n                }\n            }\n            const { width, height } = this.sceneSize(scene);\n            scene.renderShadow(this.threeRenderer);\n            // Need to set the render target in order to prevent\n            // clearing the depth from a different buffer\n            this.threeRenderer.setRenderTarget(null);\n            this.threeRenderer.setViewport(0, Math.ceil(this.height * this.dpr) - height, width, height);\n            this.threeRenderer.render(scene, scene.camera);\n            if (this.multipleScenesVisible || scene.renderCount === 0) {\n                this.copyPixels(scene, width, height);\n            }\n            else {\n                if (canvas3D.parentElement !== scene.canvas.parentElement) {\n                    scene.canvas.parentElement.appendChild(canvas3D);\n                    scene.canvas.classList.remove('show');\n                }\n            }\n            scene.hasRendered();\n            ++scene.renderCount;\n            this.renderedLastFrame = true;\n        }\n    }\n    dispose() {\n        if (this.textureUtils != null) {\n            this.textureUtils.dispose();\n        }\n        if (this.threeRenderer != null) {\n            this.threeRenderer.dispose();\n        }\n        this.textureUtils = null;\n        this.threeRenderer = null;\n        const elements = [];\n        for (const scene of this.scenes) {\n            elements.push(scene.element);\n        }\n        this.canvas3D.removeEventListener('webglcontextlost', this.onWebGLContextLost);\n        this.canvas3D.removeEventListener('webglcontextrestored', this.onWebGLContextRestored);\n        return elements;\n    }\n}\nRenderer._singleton = new Renderer({\n    powerPreference: (self.ModelViewerElement || {})\n        .powerPreference ||\n        DEFAULT_POWER_PREFERENCE,\n    debug: (0,_utilities_js__WEBPACK_IMPORTED_MODULE_2__.isDebugMode)()\n});\n//# sourceMappingURL=Renderer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvUmVuZGVyZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3FHO0FBQ3JDO0FBQ007QUFDTDtBQUNwQjtBQUNjO0FBQ2xCO0FBQzRDO0FBQ3hDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sdUJBQXVCLGtEQUFlO0FBQzdDO0FBQ0E7QUFDQSwwQkFBMEIsb0VBQWlCLENBQUMsOEZBQXVCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx5Q0FBeUM7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msd0RBQVk7QUFDaEQ7QUFDQSw4QkFBOEIsd0VBQWtCO0FBQ2hEO0FBQ0E7QUFDQSxtQkFBbUIseURBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsZ0RBQWE7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGdEQUFnRCwrQ0FBWTtBQUM1RDtBQUNBLGlEQUFpRDtBQUNqRCxrREFBa0Qsa0RBQVE7QUFDMUQseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSw2Q0FBNkMsd0RBQXFCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHNEQUFVO0FBQ3hDO0FBQ0EsaUNBQWlDLHdEQUFZO0FBQzdDLFFBQVEsb0VBQWlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQSxtQkFBbUIsMERBQVc7QUFDOUIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMENBQU87QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCwwREFBTztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFdBQVc7QUFDM0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlEQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsVUFBVTtBQUNsQyx3QkFBd0IsOERBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsb0RBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLHlCQUF5QixNQUFNO0FBQy9CLDBCQUEwQixPQUFPO0FBQ2pDLHVDQUF1QyxNQUFNO0FBQzdDLHdDQUF3QyxPQUFPO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsTUFBTTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0JBQW9CO0FBQ3BDLGdCQUFnQix3REFBSztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixXQUFXO0FBQzNCO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyQkFBMkI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBLFdBQVcsMERBQVc7QUFDdEIsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL1JlbmRlcmVyLmpzPzMyMGQiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgQUNFU0ZpbG1pY1RvbmVNYXBwaW5nLCBFdmVudERpc3BhdGNoZXIsIHNSR0JFbmNvZGluZywgVmVjdG9yMiwgV2ViR0xSZW5kZXJlciB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7ICR1cGRhdGVFbnZpcm9ubWVudCB9IGZyb20gJy4uL2ZlYXR1cmVzL2Vudmlyb25tZW50LmpzJztcbmltcG9ydCB7ICRjYW52YXMsICR0aWNrLCAkdXBkYXRlU2l6ZSB9IGZyb20gJy4uL21vZGVsLXZpZXdlci1iYXNlLmpzJztcbmltcG9ydCB7IGNsYW1wLCBpc0RlYnVnTW9kZSwgcmVzb2x2ZURwciB9IGZyb20gJy4uL3V0aWxpdGllcy5qcyc7XG5pbXBvcnQgeyBBUlJlbmRlcmVyIH0gZnJvbSAnLi9BUlJlbmRlcmVyLmpzJztcbmltcG9ydCB7IENhY2hpbmdHTFRGTG9hZGVyIH0gZnJvbSAnLi9DYWNoaW5nR0xURkxvYWRlci5qcyc7XG5pbXBvcnQgeyBEZWJ1Z2dlciB9IGZyb20gJy4vRGVidWdnZXIuanMnO1xuaW1wb3J0IHsgTW9kZWxWaWV3ZXJHTFRGSW5zdGFuY2UgfSBmcm9tICcuL2dsdGYtaW5zdGFuY2UvTW9kZWxWaWV3ZXJHTFRGSW5zdGFuY2UuanMnO1xuaW1wb3J0IFRleHR1cmVVdGlscyBmcm9tICcuL1RleHR1cmVVdGlscy5qcyc7XG4vLyBCZXR3ZWVuIDAgYW5kIDE6IGxhcmdlciBtZWFucyB0aGUgYXZlcmFnZSByZXNwb25kcyBmYXN0ZXIgYW5kIGlzIGxlc3Mgc21vb3RoLlxuY29uc3QgRFVSQVRJT05fREVDQVkgPSAwLjI7XG5jb25zdCBMT1dfRlJBTUVfRFVSQVRJT05fTVMgPSA0MDtcbmNvbnN0IEhJR0hfRlJBTUVfRFVSQVRJT05fTVMgPSA2MDtcbmNvbnN0IE1BWF9BVkdfQ0hBTkdFX01TID0gNTtcbmNvbnN0IFNDQUxFX1NURVBTID0gWzEsIDAuNzksIDAuNjIsIDAuNSwgMC40LCAwLjMxLCAwLjI1XTtcbmNvbnN0IERFRkFVTFRfTEFTVF9TVEVQID0gMztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1BPV0VSX1BSRUZFUkVOQ0UgPSAnaGlnaC1wZXJmb3JtYW5jZSc7XG4vKipcbiAqIFJlZ2lzdGVycyBjYW52YXNlcyB3aXRoIENhbnZhczJEUmVuZGVyaW5nQ29udGV4dHMgYW5kIHJlbmRlcnMgdGhlbVxuICogYWxsIGluIHRoZSBzYW1lIFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgc3BpdHRpbmcgb3V0IHRleHR1cmVzIHRvIGFwcGx5XG4gKiB0byB0aGUgY2FudmFzZXMuIENyZWF0ZXMgYSBmdWxsc2NyZWVuIFdlYkdMIGNhbnZhcyB0aGF0IGlzIG5vdCBhZGRlZFxuICogdG8gdGhlIERPTSwgYW5kIG9uIGVhY2ggZnJhbWUsIHJlbmRlcnMgZWFjaCByZWdpc3RlcmVkIGNhbnZhcyBvbiBhIHBvcnRpb25cbiAqIG9mIHRoZSBXZWJHTCBjYW52YXMsIGFuZCBhcHBsaWVzIHRoZSB0ZXh0dXJlIG9uIHRoZSByZWdpc3RlcmVkIGNhbnZhcy5cbiAqXG4gKiBJbiB0aGUgZnV0dXJlLCBjYW4gdXNlIEltYWdlQml0bWFwUmVuZGVyaW5nQ29udGV4dCBpbnN0ZWFkIG9mXG4gKiBDYW52YXMyRFJlbmRlcmluZ0NvbnRleHQgaWYgc3VwcG9ydGVkIGZvciBjaGVhcGVyIHRyYW5zZmVycmluZyBvZlxuICogdGhlIHRleHR1cmUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZW5kZXJlciBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlciB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmxvYWRlciA9IG5ldyBDYWNoaW5nR0xURkxvYWRlcihNb2RlbFZpZXdlckdMVEZJbnN0YW5jZSk7XG4gICAgICAgIHRoaXMud2lkdGggPSAwO1xuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgICAgIHRoaXMuZHByID0gMTtcbiAgICAgICAgdGhpcy5kZWJ1Z2dlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc2NlbmVzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLm11bHRpcGxlU2NlbmVzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxhc3RUaWNrID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIHRoaXMucmVuZGVyZWRMYXN0RnJhbWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zY2FsZVN0ZXAgPSAwO1xuICAgICAgICB0aGlzLmxhc3RTdGVwID0gREVGQVVMVF9MQVNUX1NURVA7XG4gICAgICAgIHRoaXMuYXZnRnJhbWVEdXJhdGlvbiA9IChISUdIX0ZSQU1FX0RVUkFUSU9OX01TICsgTE9XX0ZSQU1FX0RVUkFUSU9OX01TKSAvIDI7XG4gICAgICAgIHRoaXMub25XZWJHTENvbnRleHRMb3N0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAnY29udGV4dGxvc3QnLCBzb3VyY2VFdmVudDogZXZlbnQgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25XZWJHTENvbnRleHRSZXN0b3JlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IHRoaXMudGV4dHVyZVV0aWxzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy50ZXh0dXJlVXRpbHMgPSBuZXcgVGV4dHVyZVV0aWxzKHRoaXMudGhyZWVSZW5kZXJlcik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzKSB7XG4gICAgICAgICAgICAgICAgc2NlbmUuZWxlbWVudFskdXBkYXRlRW52aXJvbm1lbnRdKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZHByID0gcmVzb2x2ZURwcigpO1xuICAgICAgICB0aGlzLmNhbnZhczNEID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIHRoaXMuY2FudmFzM0QuaWQgPSAnd2ViZ2wtY2FudmFzJztcbiAgICAgICAgdGhpcy5jYW52YXMzRC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnRocmVlUmVuZGVyZXIgPSBuZXcgV2ViR0xSZW5kZXJlcih7XG4gICAgICAgICAgICAgICAgY2FudmFzOiB0aGlzLmNhbnZhczNELFxuICAgICAgICAgICAgICAgIGFscGhhOiB0cnVlLFxuICAgICAgICAgICAgICAgIGFudGlhbGlhczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwb3dlclByZWZlcmVuY2U6IG9wdGlvbnMucG93ZXJQcmVmZXJlbmNlLFxuICAgICAgICAgICAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnRocmVlUmVuZGVyZXIuYXV0b0NsZWFyID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci5vdXRwdXRFbmNvZGluZyA9IHNSR0JFbmNvZGluZztcbiAgICAgICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci5waHlzaWNhbGx5Q29ycmVjdExpZ2h0cyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnRocmVlUmVuZGVyZXIuc2V0UGl4ZWxSYXRpbygxKTsgLy8gaGFuZGxlIHBpeGVsIHJhdGlvIGV4dGVybmFsbHlcbiAgICAgICAgICAgIHRoaXMuZGVidWdnZXIgPSAhIW9wdGlvbnMuZGVidWcgPyBuZXcgRGVidWdnZXIodGhpcykgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy50aHJlZVJlbmRlcmVyLmRlYnVnID0geyBjaGVja1NoYWRlckVycm9yczogISF0aGlzLmRlYnVnZ2VyIH07XG4gICAgICAgICAgICAvLyBBQ0VTRmlsbWljVG9uZU1hcHBpbmcgYXBwZWFycyB0byBiZSB0aGUgbW9zdCBcInNhdHVyYXRlZFwiLFxuICAgICAgICAgICAgLy8gYW5kIHNpbWlsYXIgdG8gRmlsYW1lbnQncyBnbHRmLXZpZXdlci5cbiAgICAgICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci50b25lTWFwcGluZyA9IEFDRVNGaWxtaWNUb25lTWFwcGluZztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hclJlbmRlcmVyID0gbmV3IEFSUmVuZGVyZXIodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dHVyZVV0aWxzID1cbiAgICAgICAgICAgIHRoaXMuY2FuUmVuZGVyID8gbmV3IFRleHR1cmVVdGlscyh0aGlzLnRocmVlUmVuZGVyZXIpIDogbnVsbDtcbiAgICAgICAgQ2FjaGluZ0dMVEZMb2FkZXIuaW5pdGlhbGl6ZUtUWDJMb2FkZXIodGhpcy50aHJlZVJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5jYW52YXMzRC5hZGRFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRsb3N0JywgdGhpcy5vbldlYkdMQ29udGV4dExvc3QpO1xuICAgICAgICB0aGlzLmNhbnZhczNELmFkZEV2ZW50TGlzdGVuZXIoJ3dlYmdsY29udGV4dHJlc3RvcmVkJywgdGhpcy5vbldlYkdMQ29udGV4dFJlc3RvcmVkKTtcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJlclNpemUoKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBzaW5nbGV0b24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaW5nbGV0b247XG4gICAgfVxuICAgIHN0YXRpYyByZXNldFNpbmdsZXRvbigpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLl9zaW5nbGV0b24uZGlzcG9zZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zaW5nbGV0b24gPSBuZXcgUmVuZGVyZXIoe1xuICAgICAgICAgICAgcG93ZXJQcmVmZXJlbmNlOiAoc2VsZi5Nb2RlbFZpZXdlckVsZW1lbnQgfHwge30pXG4gICAgICAgICAgICAgICAgLnBvd2VyUHJlZmVyZW5jZSB8fFxuICAgICAgICAgICAgICAgIERFRkFVTFRfUE9XRVJfUFJFRkVSRU5DRSxcbiAgICAgICAgICAgIGRlYnVnOiBpc0RlYnVnTW9kZSgpXG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY2FuUmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aHJlZVJlbmRlcmVyICE9IG51bGw7XG4gICAgfVxuICAgIGdldCBzY2FsZUZhY3RvcigpIHtcbiAgICAgICAgcmV0dXJuIFNDQUxFX1NURVBTW3RoaXMuc2NhbGVTdGVwXTtcbiAgICB9XG4gICAgc2V0IG1pblNjYWxlKHNjYWxlKSB7XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgd2hpbGUgKGkgPCBTQ0FMRV9TVEVQUy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChTQ0FMRV9TVEVQU1tpXSA8IHNjYWxlKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0U3RlcCA9IGkgLSAxO1xuICAgIH1cbiAgICByZWdpc3RlclNjZW5lKHNjZW5lKSB7XG4gICAgICAgIHRoaXMuc2NlbmVzLmFkZChzY2VuZSk7XG4gICAgICAgIHNjZW5lLmZvcmNlUmVzY2FsZSgpO1xuICAgICAgICBjb25zdCBzaXplID0gbmV3IFZlY3RvcjIoKTtcbiAgICAgICAgdGhpcy50aHJlZVJlbmRlcmVyLmdldFNpemUoc2l6ZSk7XG4gICAgICAgIHNjZW5lLmNhbnZhcy53aWR0aCA9IHNpemUueDtcbiAgICAgICAgc2NlbmUuY2FudmFzLmhlaWdodCA9IHNpemUueTtcbiAgICAgICAgaWYgKHRoaXMuY2FuUmVuZGVyICYmIHRoaXMuc2NlbmVzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnRocmVlUmVuZGVyZXIuc2V0QW5pbWF0aW9uTG9vcCgodGltZSwgZnJhbWUpID0+IHRoaXMucmVuZGVyKHRpbWUsIGZyYW1lKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVidWdnZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5kZWJ1Z2dlci5hZGRTY2VuZShzY2VuZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5yZWdpc3RlclNjZW5lKHNjZW5lKSB7XG4gICAgICAgIHRoaXMuc2NlbmVzLmRlbGV0ZShzY2VuZSk7XG4gICAgICAgIGlmICh0aGlzLmNhbnZhczNELnBhcmVudEVsZW1lbnQgPT09IHNjZW5lLmNhbnZhcy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICBzY2VuZS5jYW52YXMucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmNhbnZhczNEKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jYW5SZW5kZXIgJiYgdGhpcy5zY2VuZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy50aHJlZVJlbmRlcmVyLnNldEFuaW1hdGlvbkxvb3AobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVidWdnZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5kZWJ1Z2dlci5yZW1vdmVTY2VuZShzY2VuZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzcGxheUNhbnZhcyhzY2VuZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBsZVNjZW5lc1Zpc2libGUgPyBzY2VuZS5lbGVtZW50WyRjYW52YXNdIDogdGhpcy5jYW52YXMzRDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZ1bmN0aW9uIGVuYWJsZXMgYW4gb3B0aW1pemF0aW9uLCB3aGVyZSB3aGVuIHRoZXJlIGlzIG9ubHkgYSBzaW5nbGVcbiAgICAgKiA8bW9kZWwtdmlld2VyPiBlbGVtZW50LCB3ZSBjYW4gdXNlIHRoZSByZW5kZXJlcidzIDNEIGNhbnZhcyBkaXJlY3RseSBmb3JcbiAgICAgKiBkaXNwbGF5LiBPdGhlcndpc2Ugd2UgbmVlZCB0byB1c2UgdGhlIGVsZW1lbnQncyAyRCBjYW52YXMgYW5kIGNvcHkgdGhlXG4gICAgICogcmVuZGVyZXIncyByZXN1bHQgaW50byBpdC5cbiAgICAgKi9cbiAgICBjb3VudFZpc2libGVTY2VuZXMoKSB7XG4gICAgICAgIGNvbnN0IHsgY2FudmFzM0QgfSA9IHRoaXM7XG4gICAgICAgIGxldCB2aXNpYmxlU2NlbmVzID0gMDtcbiAgICAgICAgbGV0IGNhbnZhczNEU2NlbmUgPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzKSB7XG4gICAgICAgICAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHNjZW5lO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQubW9kZWxJc1Zpc2libGUgJiYgc2NlbmUuZXh0ZXJuYWxSZW5kZXJlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgKyt2aXNpYmxlU2NlbmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhbnZhczNELnBhcmVudEVsZW1lbnQgPT09IHNjZW5lLmNhbnZhcy5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY2FudmFzM0RTY2VuZSA9IHNjZW5lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG11bHRpcGxlU2NlbmVzVmlzaWJsZSA9IHZpc2libGVTY2VuZXMgPiAxO1xuICAgICAgICBpZiAoY2FudmFzM0RTY2VuZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdseU11bHRpcGxlID0gbXVsdGlwbGVTY2VuZXNWaXNpYmxlICYmICF0aGlzLm11bHRpcGxlU2NlbmVzVmlzaWJsZTtcbiAgICAgICAgICAgIGNvbnN0IGRpc2FwcGVhcmluZyA9ICFjYW52YXMzRFNjZW5lLmVsZW1lbnQubW9kZWxJc1Zpc2libGU7XG4gICAgICAgICAgICBpZiAobmV3bHlNdWx0aXBsZSB8fCBkaXNhcHBlYXJpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NlbmVTaXplKGNhbnZhczNEU2NlbmUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29weVBpeGVscyhjYW52YXMzRFNjZW5lLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjYW52YXMzRC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGNhbnZhczNEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm11bHRpcGxlU2NlbmVzVmlzaWJsZSA9IG11bHRpcGxlU2NlbmVzVmlzaWJsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcmVuZGVyZXIncyBzaXplIGJhc2VkIG9uIHRoZSBsYXJnZXN0IHNjZW5lIGFuZCBhbnkgY2hhbmdlcyB0b1xuICAgICAqIGRldmljZSBwaXhlbCByYXRpby5cbiAgICAgKi9cbiAgICB1cGRhdGVSZW5kZXJlclNpemUoKSB7XG4gICAgICAgIGNvbnN0IGRwciA9IHJlc29sdmVEcHIoKTtcbiAgICAgICAgaWYgKGRwciAhPT0gdGhpcy5kcHIpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBkZXZpY2UgcGl4ZWwgcmF0aW8gaGFzIGNoYW5nZWQgZHVlIHRvIHBhZ2Ugem9vbSwgZWxlbWVudHNcbiAgICAgICAgICAgIC8vIHNwZWNpZmllZCBieSAlIHdpZHRoIGRvIG5vdCBmaXJlIGEgcmVzaXplIGV2ZW50IGV2ZW4gdGhvdWdoIHRoZWlyIENTU1xuICAgICAgICAgICAgLy8gcGl4ZWwgZGltZW5zaW9ucyBjaGFuZ2UsIHNvIHdlIGZvcmNlIHRoZW0gdG8gdXBkYXRlIHRoZWlyIHNpemUgaGVyZS5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2NlbmUgb2YgdGhpcy5zY2VuZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHNjZW5lO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRbJHVwZGF0ZVNpemVdKGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2UgdGhlIHJlbmRlcmVyIHRoZSBzaXplIG9mIHRoZSBsYXJnZXN0IHNjZW5lXG4gICAgICAgIGxldCB3aWR0aCA9IDA7XG4gICAgICAgIGxldCBoZWlnaHQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzKSB7XG4gICAgICAgICAgICB3aWR0aCA9IE1hdGgubWF4KHdpZHRoLCBzY2VuZS53aWR0aCk7XG4gICAgICAgICAgICBoZWlnaHQgPSBNYXRoLm1heChoZWlnaHQsIHNjZW5lLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLndpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5oZWlnaHQgJiYgZHByID09PSB0aGlzLmRwcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuZHByID0gZHByO1xuICAgICAgICB3aWR0aCA9IE1hdGguY2VpbCh3aWR0aCAqIGRwcik7XG4gICAgICAgIGhlaWdodCA9IE1hdGguY2VpbChoZWlnaHQgKiBkcHIpO1xuICAgICAgICBpZiAodGhpcy5jYW5SZW5kZXIpIHtcbiAgICAgICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci5zZXRTaXplKHdpZHRoLCBoZWlnaHQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFYWNoIHNjZW5lJ3MgY2FudmFzIG11c3QgbWF0Y2ggdGhlIHJlbmRlcmVyIHNpemUuIEluIGdlbmVyYWwgdGhleSBjYW4gYmVcbiAgICAgICAgLy8gbGFyZ2VyIHRoYW4gdGhlIGVsZW1lbnQgdGhhdCBjb250YWlucyB0aGVtLCBidXQgdGhlIG92ZXJmbG93IGlzIGhpZGRlblxuICAgICAgICAvLyBhbmQgb25seSB0aGUgcG9ydGlvbiB0aGF0IGlzIHNob3duIGlzIGNvcGllZCBvdmVyLlxuICAgICAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzKSB7XG4gICAgICAgICAgICBjb25zdCB7IGNhbnZhcyB9ID0gc2NlbmU7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICBzY2VuZS5mb3JjZVJlc2NhbGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVSZW5kZXJlclNjYWxlKGRlbHRhKSB7XG4gICAgICAgIGNvbnN0IHNjYWxlU3RlcCA9IHRoaXMuc2NhbGVTdGVwO1xuICAgICAgICB0aGlzLmF2Z0ZyYW1lRHVyYXRpb24gKz0gY2xhbXAoRFVSQVRJT05fREVDQVkgKiAoZGVsdGEgLSB0aGlzLmF2Z0ZyYW1lRHVyYXRpb24pLCAtTUFYX0FWR19DSEFOR0VfTVMsIE1BWF9BVkdfQ0hBTkdFX01TKTtcbiAgICAgICAgaWYgKHRoaXMuYXZnRnJhbWVEdXJhdGlvbiA+IEhJR0hfRlJBTUVfRFVSQVRJT05fTVMpIHtcbiAgICAgICAgICAgICsrdGhpcy5zY2FsZVN0ZXA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hdmdGcmFtZUR1cmF0aW9uIDwgTE9XX0ZSQU1FX0RVUkFUSU9OX01TICYmIHRoaXMuc2NhbGVTdGVwID4gMCkge1xuICAgICAgICAgICAgLS10aGlzLnNjYWxlU3RlcDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjYWxlU3RlcCA9IE1hdGgubWluKHRoaXMuc2NhbGVTdGVwLCB0aGlzLmxhc3RTdGVwKTtcbiAgICAgICAgaWYgKHNjYWxlU3RlcCAhPT0gdGhpcy5zY2FsZVN0ZXApIHtcbiAgICAgICAgICAgIHRoaXMuYXZnRnJhbWVEdXJhdGlvbiA9XG4gICAgICAgICAgICAgICAgKEhJR0hfRlJBTUVfRFVSQVRJT05fTVMgKyBMT1dfRlJBTUVfRFVSQVRJT05fTVMpIC8gMjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG91bGRSZW5kZXIoc2NlbmUpIHtcbiAgICAgICAgaWYgKCFzY2VuZS5zaG91bGRSZW5kZXIoKSkge1xuICAgICAgICAgICAgLy8gVGhlIGZpcnN0IGZyYW1lIHdlIHN0b3AgcmVuZGVyaW5nIHRoZSBzY2VuZSAoYmVjYXVzZSBpdCBzdG9wcyBtb3ZpbmcpLFxuICAgICAgICAgICAgLy8gdHJpZ2dlciBvbmUgZXh0cmEgcmVuZGVyIGF0IGZ1bGwgc2NhbGUuXG4gICAgICAgICAgICBpZiAoc2NlbmUuc2NhbGVTdGVwICE9IDApIHtcbiAgICAgICAgICAgICAgICBzY2VuZS5zY2FsZVN0ZXAgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzY2FsZUNhbnZhcyhzY2VuZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2NlbmUuc2NhbGVTdGVwICE9IHRoaXMuc2NhbGVTdGVwKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgcmVuZGVyIHNjYWxlXG4gICAgICAgICAgICBzY2VuZS5zY2FsZVN0ZXAgPSB0aGlzLnNjYWxlU3RlcDtcbiAgICAgICAgICAgIHRoaXMucmVzY2FsZUNhbnZhcyhzY2VuZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJlc2NhbGVDYW52YXMoc2NlbmUpIHtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBTQ0FMRV9TVEVQU1tzY2VuZS5zY2FsZVN0ZXBdO1xuICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGguY2VpbCh0aGlzLndpZHRoIC8gc2NhbGUpO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5oZWlnaHQgLyBzY2FsZSk7XG4gICAgICAgIGNvbnN0IHsgc3R5bGUgfSA9IHNjZW5lLmNhbnZhcztcbiAgICAgICAgc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG4gICAgICAgIHN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG4gICAgICAgIHRoaXMuY2FudmFzM0Quc3R5bGUud2lkdGggPSBgJHt3aWR0aH1weGA7XG4gICAgICAgIHRoaXMuY2FudmFzM0Quc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgICAgICAgY29uc3QgcmVuZGVyZWREcHIgPSB0aGlzLmRwciAqIHNjYWxlO1xuICAgICAgICBjb25zdCByZWFzb24gPSBzY2FsZSA8IDEgPyAnR1BVIHRocm90dGxpbmcnIDpcbiAgICAgICAgICAgIHRoaXMuZHByICE9PSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA/ICdObyBtZXRhIHZpZXdwb3J0IHRhZycgOlxuICAgICAgICAgICAgICAgICcnO1xuICAgICAgICBzY2VuZS5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdyZW5kZXItc2NhbGUnLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICByZXBvcnRlZERwcjogd2luZG93LmRldmljZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICAgICAgcmVuZGVyZWREcHI6IHJlbmRlcmVkRHByLFxuICAgICAgICAgICAgICAgIG1pbmltdW1EcHI6IHRoaXMuZHByICogU0NBTEVfU1RFUFNbdGhpcy5sYXN0U3RlcF0sXG4gICAgICAgICAgICAgICAgcGl4ZWxXaWR0aDogTWF0aC5jZWlsKHNjZW5lLndpZHRoICogcmVuZGVyZWREcHIpLFxuICAgICAgICAgICAgICAgIHBpeGVsSGVpZ2h0OiBNYXRoLmNlaWwoc2NlbmUuaGVpZ2h0ICogcmVuZGVyZWREcHIpLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogcmVhc29uXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2NlbmVTaXplKHNjZW5lKSB7XG4gICAgICAgIGNvbnN0IHsgZHByIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBzY2FsZUZhY3RvciA9IFNDQUxFX1NURVBTW3NjZW5lLnNjYWxlU3RlcF07XG4gICAgICAgIC8vIFdlIGF2b2lkIHVzaW5nIHRoZSBUaHJlZS5qcyBQaXhlbFJhdGlvIGFuZCBoYW5kbGUgaXQgb3Vyc2VsdmVzIGhlcmUgc29cbiAgICAgICAgLy8gdGhhdCB3ZSBjYW4gZG8gcHJvcGVyIHJvdW5kaW5nIGFuZCBhdm9pZCB3aGl0ZSBib3VuZGFyeSBwaXhlbHMuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5taW4oTWF0aC5jZWlsKHNjZW5lLndpZHRoICogc2NhbGVGYWN0b3IgKiBkcHIpLCB0aGlzLmNhbnZhczNELndpZHRoKTtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5taW4oTWF0aC5jZWlsKHNjZW5lLmhlaWdodCAqIHNjYWxlRmFjdG9yICogZHByKSwgdGhpcy5jYW52YXMzRC5oZWlnaHQpO1xuICAgICAgICByZXR1cm4geyB3aWR0aCwgaGVpZ2h0IH07XG4gICAgfVxuICAgIGNvcHlQaXhlbHMoc2NlbmUsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgY29uc3QgY29udGV4dDJEID0gc2NlbmUuY29udGV4dDtcbiAgICAgICAgaWYgKGNvbnRleHQyRCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY291bGQgbm90IGFjcXVpcmUgMmQgY29udGV4dCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQyRC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGNvbnRleHQyRC5kcmF3SW1hZ2UodGhpcy5jYW52YXMzRCwgMCwgMCwgd2lkdGgsIGhlaWdodCwgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHNjZW5lLmNhbnZhcy5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgdmVyc2lvbiBvZiB0aGlzLnNjZW5lcyB3aGVyZSB0aGUgbm9uLXZpc2libGUgb25lcyBhcmVcbiAgICAgKiBmaXJzdC4gVGhpcyBhbGxvd3MgZWFnZXIgc2NlbmVzIHRvIGJlIHJlbmRlcmVkIGJlZm9yZSB0aGV5IGFyZSB2aXNpYmxlLFxuICAgICAqIHdpdGhvdXQgbmVlZGluZyB0aGUgbXVsdGktY2FudmFzIHJlbmRlciBwYXRoLlxuICAgICAqL1xuICAgIG9yZGVyZWRTY2VuZXMoKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHZpc2libGUgb2YgW2ZhbHNlLCB0cnVlXSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzY2VuZSBvZiB0aGlzLnNjZW5lcykge1xuICAgICAgICAgICAgICAgIGlmIChzY2VuZS5lbGVtZW50Lm1vZGVsSXNWaXNpYmxlID09PSB2aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjZW5lcy5wdXNoKHNjZW5lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjZW5lcztcbiAgICB9XG4gICAgZ2V0IGlzUHJlc2VudGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJSZW5kZXJlci5pc1ByZXNlbnRpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHRha2VzIGNhcmUgb2YgdXBkYXRpbmcgdGhlIGVsZW1lbnQgYW5kIHJlbmRlcmVyIHN0YXRlIGJhc2VkIG9uXG4gICAgICogdGhlIHRpbWUgdGhhdCBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHJlbmRlcmVkIGZyYW1lLlxuICAgICAqL1xuICAgIHByZVJlbmRlcihzY2VuZSwgdCwgZGVsdGEpIHtcbiAgICAgICAgY29uc3QgeyBlbGVtZW50LCBleHBvc3VyZSB9ID0gc2NlbmU7XG4gICAgICAgIGVsZW1lbnRbJHRpY2tdKHQsIGRlbHRhKTtcbiAgICAgICAgY29uc3QgZXhwb3N1cmVJc051bWJlciA9IHR5cGVvZiBleHBvc3VyZSA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTihleHBvc3VyZSk7XG4gICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci50b25lTWFwcGluZ0V4cG9zdXJlID0gZXhwb3N1cmVJc051bWJlciA/IGV4cG9zdXJlIDogMS4wO1xuICAgIH1cbiAgICByZW5kZXIodCwgZnJhbWUpIHtcbiAgICAgICAgaWYgKGZyYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuYXJSZW5kZXJlci5vbldlYlhSRnJhbWUodCwgZnJhbWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlbHRhID0gdCAtIHRoaXMubGFzdFRpY2s7XG4gICAgICAgIHRoaXMubGFzdFRpY2sgPSB0O1xuICAgICAgICBpZiAoIXRoaXMuY2FuUmVuZGVyIHx8IHRoaXMuaXNQcmVzZW50aW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb3VudFZpc2libGVTY2VuZXMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVSZW5kZXJlclNpemUoKTtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRMYXN0RnJhbWUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVuZGVyZXJTY2FsZShkZWx0YSk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkTGFzdEZyYW1lID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBjYW52YXMzRCB9ID0gdGhpcztcbiAgICAgICAgZm9yIChjb25zdCBzY2VuZSBvZiB0aGlzLm9yZGVyZWRTY2VuZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgeyBlbGVtZW50IH0gPSBzY2VuZTtcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5sb2FkZWQgfHxcbiAgICAgICAgICAgICAgICAoIWVsZW1lbnQubW9kZWxJc1Zpc2libGUgJiYgc2NlbmUucmVuZGVyQ291bnQgPiAwKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmVSZW5kZXIoc2NlbmUsIHQsIGRlbHRhKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5zaG91bGRSZW5kZXIoc2NlbmUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2NlbmUuZXh0ZXJuYWxSZW5kZXJlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FtZXJhID0gc2NlbmUuZ2V0Q2FtZXJhKCk7XG4gICAgICAgICAgICAgICAgY2FtZXJhLnVwZGF0ZU1hdHJpeCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgbWF0cml4LCBwcm9qZWN0aW9uTWF0cml4IH0gPSBjYW1lcmE7XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld01hdHJpeCA9IG1hdHJpeC5lbGVtZW50cy5zbGljZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHNjZW5lLmdldFRhcmdldCgpO1xuICAgICAgICAgICAgICAgIHZpZXdNYXRyaXhbMTJdICs9IHRhcmdldC54O1xuICAgICAgICAgICAgICAgIHZpZXdNYXRyaXhbMTNdICs9IHRhcmdldC55O1xuICAgICAgICAgICAgICAgIHZpZXdNYXRyaXhbMTRdICs9IHRhcmdldC56O1xuICAgICAgICAgICAgICAgIHNjZW5lLmV4dGVybmFsUmVuZGVyZXIucmVuZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgdmlld01hdHJpeDogdmlld01hdHJpeCxcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdGlvbk1hdHJpeDogcHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlbGVtZW50Lm1vZGVsSXNWaXNpYmxlICYmICF0aGlzLm11bHRpcGxlU2NlbmVzVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIC8vIEhlcmUgd2UgYXJlIHByZS1yZW5kZXJpbmcgb24gdGhlIHZpc2libGUgY2FudmFzLCBzbyB3ZSBtdXN0IG1hcmsgdGhlXG4gICAgICAgICAgICAgICAgLy8gdmlzaWJsZSBzY2VuZSBkaXJ0eSB0byBlbnN1cmUgaXQgb3ZlcndyaXRlcyB1cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZpc2libGVTY2VuZSBvZiB0aGlzLnNjZW5lcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmlzaWJsZVNjZW5lLmVsZW1lbnQubW9kZWxJc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVTY2VuZS5xdWV1ZVJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjZW5lU2l6ZShzY2VuZSk7XG4gICAgICAgICAgICBzY2VuZS5yZW5kZXJTaGFkb3codGhpcy50aHJlZVJlbmRlcmVyKTtcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gc2V0IHRoZSByZW5kZXIgdGFyZ2V0IGluIG9yZGVyIHRvIHByZXZlbnRcbiAgICAgICAgICAgIC8vIGNsZWFyaW5nIHRoZSBkZXB0aCBmcm9tIGEgZGlmZmVyZW50IGJ1ZmZlclxuICAgICAgICAgICAgdGhpcy50aHJlZVJlbmRlcmVyLnNldFJlbmRlclRhcmdldChudWxsKTtcbiAgICAgICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci5zZXRWaWV3cG9ydCgwLCBNYXRoLmNlaWwodGhpcy5oZWlnaHQgKiB0aGlzLmRwcikgLSBoZWlnaHQsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy50aHJlZVJlbmRlcmVyLnJlbmRlcihzY2VuZSwgc2NlbmUuY2FtZXJhKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm11bHRpcGxlU2NlbmVzVmlzaWJsZSB8fCBzY2VuZS5yZW5kZXJDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29weVBpeGVscyhzY2VuZSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FudmFzM0QucGFyZW50RWxlbWVudCAhPT0gc2NlbmUuY2FudmFzLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUuY2FudmFzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2FudmFzM0QpO1xuICAgICAgICAgICAgICAgICAgICBzY2VuZS5jYW52YXMuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjZW5lLmhhc1JlbmRlcmVkKCk7XG4gICAgICAgICAgICArK3NjZW5lLnJlbmRlckNvdW50O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZExhc3RGcmFtZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMudGV4dHVyZVV0aWxzICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZVV0aWxzLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50aHJlZVJlbmRlcmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGhyZWVSZW5kZXJlci5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0dXJlVXRpbHMgPSBudWxsO1xuICAgICAgICB0aGlzLnRocmVlUmVuZGVyZXIgPSBudWxsO1xuICAgICAgICBjb25zdCBlbGVtZW50cyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIHRoaXMuc2NlbmVzKSB7XG4gICAgICAgICAgICBlbGVtZW50cy5wdXNoKHNjZW5lLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FudmFzM0QucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2ViZ2xjb250ZXh0bG9zdCcsIHRoaXMub25XZWJHTENvbnRleHRMb3N0KTtcbiAgICAgICAgdGhpcy5jYW52YXMzRC5yZW1vdmVFdmVudExpc3RlbmVyKCd3ZWJnbGNvbnRleHRyZXN0b3JlZCcsIHRoaXMub25XZWJHTENvbnRleHRSZXN0b3JlZCk7XG4gICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICB9XG59XG5SZW5kZXJlci5fc2luZ2xldG9uID0gbmV3IFJlbmRlcmVyKHtcbiAgICBwb3dlclByZWZlcmVuY2U6IChzZWxmLk1vZGVsVmlld2VyRWxlbWVudCB8fCB7fSlcbiAgICAgICAgLnBvd2VyUHJlZmVyZW5jZSB8fFxuICAgICAgICBERUZBVUxUX1BPV0VSX1BSRUZFUkVOQ0UsXG4gICAgZGVidWc6IGlzRGVidWdNb2RlKClcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVuZGVyZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/Renderer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/Shadow.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/Shadow.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Shadow: () => (/* binding */ Shadow)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_shaders_HorizontalBlurShader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three/examples/jsm/shaders/HorizontalBlurShader.js */ \"(ssr)/./node_modules/three/examples/jsm/shaders/HorizontalBlurShader.js\");\n/* harmony import */ var three_examples_jsm_shaders_VerticalBlurShader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three/examples/jsm/shaders/VerticalBlurShader.js */ \"(ssr)/./node_modules/three/examples/jsm/shaders/VerticalBlurShader.js\");\n/* harmony import */ var three_src_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/src/math/MathUtils.js */ \"(ssr)/./node_modules/three/src/math/MathUtils.js\");\n/* @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n// The softness [0, 1] of the shadow is mapped to a resolution between\n// 2^LOG_MAX_RESOLUTION and 2^LOG_MIN_RESOLUTION.\nconst LOG_MAX_RESOLUTION = 9;\nconst LOG_MIN_RESOLUTION = 6;\n// Animated models are not in general contained in their bounding box, as this\n// is calculated only for their resting pose. We create a cubic shadow volume\n// for animated models sized to their largest bounding box dimension multiplied\n// by this scale factor.\nconst ANIMATION_SCALING = 2;\n// Since hard shadows are not lightened by blurring and depth, set a lower\n// default intensity to make them more perceptually similar to the intensity of\n// the soft shadows.\nconst DEFAULT_HARD_INTENSITY = 0.3;\n/**\n * The Shadow class creates a shadow that fits a given scene and follows a\n * target. This shadow will follow the scene without any updates needed so long\n * as the shadow and scene are both parented to the same object (call it the\n * scene) and this scene is passed as the target parameter to the shadow's\n * constructor. We also must constrain the scene to motion within the horizontal\n * plane and call the setRotation() method whenever the scene's Y-axis rotation\n * changes. For motion outside of the horizontal plane, this.needsUpdate must be\n * set to true.\n *\n * The softness of the shadow is controlled by changing its resolution, making\n * softer shadows faster, but less precise.\n */\nclass Shadow extends three__WEBPACK_IMPORTED_MODULE_0__.Object3D {\n    constructor(scene, softness, side) {\n        super();\n        this.camera = new three__WEBPACK_IMPORTED_MODULE_0__.OrthographicCamera();\n        // private cameraHelper = new CameraHelper(this.camera);\n        this.renderTarget = null;\n        this.renderTargetBlur = null;\n        this.depthMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshDepthMaterial();\n        this.horizontalBlurMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.ShaderMaterial(three_examples_jsm_shaders_HorizontalBlurShader_js__WEBPACK_IMPORTED_MODULE_1__.HorizontalBlurShader);\n        this.verticalBlurMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.ShaderMaterial(three_examples_jsm_shaders_VerticalBlurShader_js__WEBPACK_IMPORTED_MODULE_2__.VerticalBlurShader);\n        this.intensity = 0;\n        this.softness = 1;\n        this.boundingBox = new three__WEBPACK_IMPORTED_MODULE_0__.Box3;\n        this.size = new three__WEBPACK_IMPORTED_MODULE_0__.Vector3;\n        this.maxDimension = 0;\n        this.isAnimated = false;\n        this.needsUpdate = false;\n        const { camera } = this;\n        camera.rotation.x = Math.PI / 2;\n        camera.left = -0.5;\n        camera.right = 0.5;\n        camera.bottom = -0.5;\n        camera.top = 0.5;\n        this.add(camera);\n        // this.add(this.cameraHelper);\n        // this.cameraHelper.updateMatrixWorld = function() {\n        //   this.matrixWorld = this.camera.matrixWorld;\n        // };\n        const plane = new three__WEBPACK_IMPORTED_MODULE_0__.PlaneGeometry();\n        const shadowMaterial = new three__WEBPACK_IMPORTED_MODULE_0__.MeshBasicMaterial({\n            // color: new Color(1, 0, 0),\n            opacity: 1,\n            transparent: true,\n            side: three__WEBPACK_IMPORTED_MODULE_0__.BackSide,\n        });\n        this.floor = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(plane, shadowMaterial);\n        this.floor.userData.shadow = true;\n        camera.add(this.floor);\n        // the plane onto which to blur the texture\n        this.blurPlane = new three__WEBPACK_IMPORTED_MODULE_0__.Mesh(plane);\n        this.blurPlane.visible = false;\n        camera.add(this.blurPlane);\n        scene.target.add(this);\n        // like MeshDepthMaterial, but goes from black to transparent\n        this.depthMaterial.onBeforeCompile = function (shader) {\n            shader.fragmentShader = shader.fragmentShader.replace('gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );', 'gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );');\n        };\n        this.horizontalBlurMaterial.depthTest = false;\n        this.verticalBlurMaterial.depthTest = false;\n        this.setScene(scene, softness, side);\n    }\n    /**\n     * Update the shadow's size and position for a new scene. Softness is also\n     * needed, as this controls the shadow's resolution.\n     */\n    setScene(scene, softness, side) {\n        const { boundingBox, size, rotation, position } = this;\n        this.isAnimated = scene.animationNames.length > 0;\n        this.boundingBox.copy(scene.boundingBox);\n        this.size.copy(scene.size);\n        this.maxDimension = Math.max(size.x, size.y, size.z) *\n            (this.isAnimated ? ANIMATION_SCALING : 1);\n        this.boundingBox.getCenter(position);\n        if (side === 'back') {\n            const { min, max } = boundingBox;\n            [min.y, min.z] = [min.z, min.y];\n            [max.y, max.z] = [max.z, max.y];\n            [size.y, size.z] = [size.z, size.y];\n            rotation.x = Math.PI / 2;\n            rotation.y = Math.PI;\n        }\n        else {\n            rotation.x = 0;\n            rotation.y = 0;\n        }\n        if (this.isAnimated) {\n            const minY = boundingBox.min.y;\n            const maxY = boundingBox.max.y;\n            size.y = this.maxDimension;\n            boundingBox.expandByVector(size.subScalar(this.maxDimension).multiplyScalar(-0.5));\n            boundingBox.min.y = minY;\n            boundingBox.max.y = maxY;\n            size.set(this.maxDimension, maxY - minY, this.maxDimension);\n        }\n        if (side === 'bottom') {\n            position.y = boundingBox.min.y;\n        }\n        else {\n            position.z = boundingBox.min.y;\n        }\n        this.setSoftness(softness);\n    }\n    /**\n     * Update the shadow's resolution based on softness (between 0 and 1). Should\n     * not be called frequently, as this results in reallocation.\n     */\n    setSoftness(softness) {\n        this.softness = softness;\n        const { size, camera } = this;\n        const scaleY = (this.isAnimated ? ANIMATION_SCALING : 1);\n        const resolution = scaleY *\n            Math.pow(2, LOG_MAX_RESOLUTION -\n                softness * (LOG_MAX_RESOLUTION - LOG_MIN_RESOLUTION));\n        this.setMapSize(resolution);\n        const softFar = size.y / 2;\n        const hardFar = size.y * scaleY;\n        camera.near = 0;\n        camera.far = (0,three_src_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.lerp)(hardFar, softFar, softness);\n        // we have co-opted opacity to scale the depth to clip\n        this.depthMaterial.opacity = 1.0 / softness;\n        camera.updateProjectionMatrix();\n        // this.cameraHelper.update();\n        this.setIntensity(this.intensity);\n        this.setOffset(0);\n    }\n    /**\n     * Lower-level version of the above function.\n     */\n    setMapSize(maxMapSize) {\n        const { size } = this;\n        if (this.isAnimated) {\n            maxMapSize *= ANIMATION_SCALING;\n        }\n        const baseWidth = Math.floor(size.x > size.z ? maxMapSize : maxMapSize * size.x / size.z);\n        const baseHeight = Math.floor(size.x > size.z ? maxMapSize * size.z / size.x : maxMapSize);\n        // width of blur filter in pixels (not adjustable)\n        const TAP_WIDTH = 10;\n        const width = TAP_WIDTH + baseWidth;\n        const height = TAP_WIDTH + baseHeight;\n        if (this.renderTarget != null &&\n            (this.renderTarget.width !== width ||\n                this.renderTarget.height !== height)) {\n            this.renderTarget.dispose();\n            this.renderTarget = null;\n            this.renderTargetBlur.dispose();\n            this.renderTargetBlur = null;\n        }\n        if (this.renderTarget == null) {\n            const params = { format: three__WEBPACK_IMPORTED_MODULE_0__.RGBAFormat };\n            this.renderTarget = new three__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderTarget(width, height, params);\n            this.renderTargetBlur = new three__WEBPACK_IMPORTED_MODULE_0__.WebGLRenderTarget(width, height, params);\n            this.floor.material.map =\n                this.renderTarget.texture;\n        }\n        // These pads account for the softening radius around the shadow.\n        this.camera.scale.set(size.x * (1 + TAP_WIDTH / baseWidth), size.z * (1 + TAP_WIDTH / baseHeight), 1);\n        this.needsUpdate = true;\n    }\n    /**\n     * Set the shadow's intensity (0 to 1), which is just its opacity. Turns off\n     * shadow rendering if zero.\n     */\n    setIntensity(intensity) {\n        this.intensity = intensity;\n        if (intensity > 0) {\n            this.visible = true;\n            this.floor.visible = true;\n            this.floor.material.opacity = intensity *\n                (0,three_src_math_MathUtils_js__WEBPACK_IMPORTED_MODULE_3__.lerp)(DEFAULT_HARD_INTENSITY, 1, this.softness * this.softness);\n        }\n        else {\n            this.visible = false;\n            this.floor.visible = false;\n        }\n    }\n    getIntensity() {\n        return this.intensity;\n    }\n    /**\n     * An offset can be specified to move the\n     * shadow vertically relative to the bottom of the scene. Positive is up, so\n     * values are generally negative. A small offset keeps our shadow from\n     * z-fighting with any baked-in shadow plane.\n     */\n    setOffset(offset) {\n        this.floor.position.z = -offset + 0.001 * this.maxDimension;\n    }\n    render(renderer, scene) {\n        // this.cameraHelper.visible = false;\n        // force the depthMaterial to everything\n        scene.overrideMaterial = this.depthMaterial;\n        // set renderer clear alpha\n        const initialClearAlpha = renderer.getClearAlpha();\n        renderer.setClearAlpha(0);\n        this.floor.visible = false;\n        // disable XR for offscreen rendering\n        const xrEnabled = renderer.xr.enabled;\n        renderer.xr.enabled = false;\n        // render to the render target to get the depths\n        const oldRenderTarget = renderer.getRenderTarget();\n        renderer.setRenderTarget(this.renderTarget);\n        renderer.render(scene, this.camera);\n        // and reset the override material\n        scene.overrideMaterial = null;\n        this.floor.visible = true;\n        this.blurShadow(renderer);\n        // reset and render the normal scene\n        renderer.xr.enabled = xrEnabled;\n        renderer.setRenderTarget(oldRenderTarget);\n        renderer.setClearAlpha(initialClearAlpha);\n        // this.cameraHelper.visible = true;\n    }\n    blurShadow(renderer) {\n        const { camera, horizontalBlurMaterial, verticalBlurMaterial, renderTarget, renderTargetBlur, blurPlane } = this;\n        blurPlane.visible = true;\n        // blur horizontally and draw in the renderTargetBlur\n        blurPlane.material = horizontalBlurMaterial;\n        horizontalBlurMaterial.uniforms.h.value = 1 / this.renderTarget.width;\n        horizontalBlurMaterial.uniforms.tDiffuse.value = this.renderTarget.texture;\n        renderer.setRenderTarget(renderTargetBlur);\n        renderer.render(blurPlane, camera);\n        // blur vertically and draw in the main renderTarget\n        blurPlane.material = verticalBlurMaterial;\n        verticalBlurMaterial.uniforms.v.value = 1 / this.renderTarget.height;\n        verticalBlurMaterial.uniforms.tDiffuse.value =\n            this.renderTargetBlur.texture;\n        renderer.setRenderTarget(renderTarget);\n        renderer.render(blurPlane, camera);\n        blurPlane.visible = false;\n    }\n    dispose() {\n        if (this.renderTarget != null) {\n            this.renderTarget.dispose();\n        }\n        if (this.renderTargetBlur != null) {\n            this.renderTargetBlur.dispose();\n        }\n        this.depthMaterial.dispose();\n        this.horizontalBlurMaterial.dispose();\n        this.verticalBlurMaterial.dispose();\n        this.floor.material.dispose();\n        this.floor.geometry.dispose();\n        this.blurPlane.geometry.dispose();\n        this.removeFromParent();\n    }\n}\n//# sourceMappingURL=Shadow.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvU2hhZG93LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN3TDtBQUM5RjtBQUNKO0FBQ25DO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxxQkFBcUIsMkNBQVE7QUFDcEM7QUFDQTtBQUNBLDBCQUEwQixxREFBa0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG9EQUFpQjtBQUNsRCwwQ0FBMEMsaURBQWMsQ0FBQyxvR0FBb0I7QUFDN0Usd0NBQXdDLGlEQUFjLENBQUMsZ0dBQWtCO0FBQ3pFO0FBQ0E7QUFDQSwrQkFBK0IsdUNBQUk7QUFDbkMsd0JBQXdCLDBDQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGdEQUFhO0FBQ3ZDLG1DQUFtQyxvREFBaUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDJDQUFRO0FBQzFCLFNBQVM7QUFDVCx5QkFBeUIsdUNBQUk7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVDQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0SEFBNEgsdUVBQXVFO0FBQ25NO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdDQUF3QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixlQUFlO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUVBQUk7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixRQUFRLDZDQUFVO0FBQy9DLG9DQUFvQyxvREFBaUI7QUFDckQsd0NBQXdDLG9EQUFpQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlFQUFJO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isa0dBQWtHO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvdGhyZWUtY29tcG9uZW50cy9TaGFkb3cuanM/YTU0OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBCYWNrU2lkZSwgQm94MywgTWVzaCwgTWVzaEJhc2ljTWF0ZXJpYWwsIE1lc2hEZXB0aE1hdGVyaWFsLCBPYmplY3QzRCwgT3J0aG9ncmFwaGljQ2FtZXJhLCBQbGFuZUdlb21ldHJ5LCBSR0JBRm9ybWF0LCBTaGFkZXJNYXRlcmlhbCwgVmVjdG9yMywgV2ViR0xSZW5kZXJUYXJnZXQgfSBmcm9tICd0aHJlZSc7XG5pbXBvcnQgeyBIb3Jpem9udGFsQmx1clNoYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9zaGFkZXJzL0hvcml6b250YWxCbHVyU2hhZGVyLmpzJztcbmltcG9ydCB7IFZlcnRpY2FsQmx1clNoYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9zaGFkZXJzL1ZlcnRpY2FsQmx1clNoYWRlci5qcyc7XG5pbXBvcnQgeyBsZXJwIH0gZnJvbSAndGhyZWUvc3JjL21hdGgvTWF0aFV0aWxzLmpzJztcbi8vIFRoZSBzb2Z0bmVzcyBbMCwgMV0gb2YgdGhlIHNoYWRvdyBpcyBtYXBwZWQgdG8gYSByZXNvbHV0aW9uIGJldHdlZW5cbi8vIDJeTE9HX01BWF9SRVNPTFVUSU9OIGFuZCAyXkxPR19NSU5fUkVTT0xVVElPTi5cbmNvbnN0IExPR19NQVhfUkVTT0xVVElPTiA9IDk7XG5jb25zdCBMT0dfTUlOX1JFU09MVVRJT04gPSA2O1xuLy8gQW5pbWF0ZWQgbW9kZWxzIGFyZSBub3QgaW4gZ2VuZXJhbCBjb250YWluZWQgaW4gdGhlaXIgYm91bmRpbmcgYm94LCBhcyB0aGlzXG4vLyBpcyBjYWxjdWxhdGVkIG9ubHkgZm9yIHRoZWlyIHJlc3RpbmcgcG9zZS4gV2UgY3JlYXRlIGEgY3ViaWMgc2hhZG93IHZvbHVtZVxuLy8gZm9yIGFuaW1hdGVkIG1vZGVscyBzaXplZCB0byB0aGVpciBsYXJnZXN0IGJvdW5kaW5nIGJveCBkaW1lbnNpb24gbXVsdGlwbGllZFxuLy8gYnkgdGhpcyBzY2FsZSBmYWN0b3IuXG5jb25zdCBBTklNQVRJT05fU0NBTElORyA9IDI7XG4vLyBTaW5jZSBoYXJkIHNoYWRvd3MgYXJlIG5vdCBsaWdodGVuZWQgYnkgYmx1cnJpbmcgYW5kIGRlcHRoLCBzZXQgYSBsb3dlclxuLy8gZGVmYXVsdCBpbnRlbnNpdHkgdG8gbWFrZSB0aGVtIG1vcmUgcGVyY2VwdHVhbGx5IHNpbWlsYXIgdG8gdGhlIGludGVuc2l0eSBvZlxuLy8gdGhlIHNvZnQgc2hhZG93cy5cbmNvbnN0IERFRkFVTFRfSEFSRF9JTlRFTlNJVFkgPSAwLjM7XG4vKipcbiAqIFRoZSBTaGFkb3cgY2xhc3MgY3JlYXRlcyBhIHNoYWRvdyB0aGF0IGZpdHMgYSBnaXZlbiBzY2VuZSBhbmQgZm9sbG93cyBhXG4gKiB0YXJnZXQuIFRoaXMgc2hhZG93IHdpbGwgZm9sbG93IHRoZSBzY2VuZSB3aXRob3V0IGFueSB1cGRhdGVzIG5lZWRlZCBzbyBsb25nXG4gKiBhcyB0aGUgc2hhZG93IGFuZCBzY2VuZSBhcmUgYm90aCBwYXJlbnRlZCB0byB0aGUgc2FtZSBvYmplY3QgKGNhbGwgaXQgdGhlXG4gKiBzY2VuZSkgYW5kIHRoaXMgc2NlbmUgaXMgcGFzc2VkIGFzIHRoZSB0YXJnZXQgcGFyYW1ldGVyIHRvIHRoZSBzaGFkb3cnc1xuICogY29uc3RydWN0b3IuIFdlIGFsc28gbXVzdCBjb25zdHJhaW4gdGhlIHNjZW5lIHRvIG1vdGlvbiB3aXRoaW4gdGhlIGhvcml6b250YWxcbiAqIHBsYW5lIGFuZCBjYWxsIHRoZSBzZXRSb3RhdGlvbigpIG1ldGhvZCB3aGVuZXZlciB0aGUgc2NlbmUncyBZLWF4aXMgcm90YXRpb25cbiAqIGNoYW5nZXMuIEZvciBtb3Rpb24gb3V0c2lkZSBvZiB0aGUgaG9yaXpvbnRhbCBwbGFuZSwgdGhpcy5uZWVkc1VwZGF0ZSBtdXN0IGJlXG4gKiBzZXQgdG8gdHJ1ZS5cbiAqXG4gKiBUaGUgc29mdG5lc3Mgb2YgdGhlIHNoYWRvdyBpcyBjb250cm9sbGVkIGJ5IGNoYW5naW5nIGl0cyByZXNvbHV0aW9uLCBtYWtpbmdcbiAqIHNvZnRlciBzaGFkb3dzIGZhc3RlciwgYnV0IGxlc3MgcHJlY2lzZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNoYWRvdyBleHRlbmRzIE9iamVjdDNEIHtcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSwgc29mdG5lc3MsIHNpZGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKCk7XG4gICAgICAgIC8vIHByaXZhdGUgY2FtZXJhSGVscGVyID0gbmV3IENhbWVyYUhlbHBlcih0aGlzLmNhbWVyYSk7XG4gICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZW5kZXJUYXJnZXRCbHVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5kZXB0aE1hdGVyaWFsID0gbmV3IE1lc2hEZXB0aE1hdGVyaWFsKCk7XG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbEJsdXJNYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbChIb3Jpem9udGFsQmx1clNoYWRlcik7XG4gICAgICAgIHRoaXMudmVydGljYWxCbHVyTWF0ZXJpYWwgPSBuZXcgU2hhZGVyTWF0ZXJpYWwoVmVydGljYWxCbHVyU2hhZGVyKTtcbiAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSAwO1xuICAgICAgICB0aGlzLnNvZnRuZXNzID0gMTtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3gzO1xuICAgICAgICB0aGlzLnNpemUgPSBuZXcgVmVjdG9yMztcbiAgICAgICAgdGhpcy5tYXhEaW1lbnNpb24gPSAwO1xuICAgICAgICB0aGlzLmlzQW5pbWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uZWVkc1VwZGF0ZSA9IGZhbHNlO1xuICAgICAgICBjb25zdCB7IGNhbWVyYSB9ID0gdGhpcztcbiAgICAgICAgY2FtZXJhLnJvdGF0aW9uLnggPSBNYXRoLlBJIC8gMjtcbiAgICAgICAgY2FtZXJhLmxlZnQgPSAtMC41O1xuICAgICAgICBjYW1lcmEucmlnaHQgPSAwLjU7XG4gICAgICAgIGNhbWVyYS5ib3R0b20gPSAtMC41O1xuICAgICAgICBjYW1lcmEudG9wID0gMC41O1xuICAgICAgICB0aGlzLmFkZChjYW1lcmEpO1xuICAgICAgICAvLyB0aGlzLmFkZCh0aGlzLmNhbWVyYUhlbHBlcik7XG4gICAgICAgIC8vIHRoaXMuY2FtZXJhSGVscGVyLnVwZGF0ZU1hdHJpeFdvcmxkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgdGhpcy5tYXRyaXhXb3JsZCA9IHRoaXMuY2FtZXJhLm1hdHJpeFdvcmxkO1xuICAgICAgICAvLyB9O1xuICAgICAgICBjb25zdCBwbGFuZSA9IG5ldyBQbGFuZUdlb21ldHJ5KCk7XG4gICAgICAgIGNvbnN0IHNoYWRvd01hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgICAgICAgIC8vIGNvbG9yOiBuZXcgQ29sb3IoMSwgMCwgMCksXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICAgICAgICBzaWRlOiBCYWNrU2lkZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZmxvb3IgPSBuZXcgTWVzaChwbGFuZSwgc2hhZG93TWF0ZXJpYWwpO1xuICAgICAgICB0aGlzLmZsb29yLnVzZXJEYXRhLnNoYWRvdyA9IHRydWU7XG4gICAgICAgIGNhbWVyYS5hZGQodGhpcy5mbG9vcik7XG4gICAgICAgIC8vIHRoZSBwbGFuZSBvbnRvIHdoaWNoIHRvIGJsdXIgdGhlIHRleHR1cmVcbiAgICAgICAgdGhpcy5ibHVyUGxhbmUgPSBuZXcgTWVzaChwbGFuZSk7XG4gICAgICAgIHRoaXMuYmx1clBsYW5lLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgY2FtZXJhLmFkZCh0aGlzLmJsdXJQbGFuZSk7XG4gICAgICAgIHNjZW5lLnRhcmdldC5hZGQodGhpcyk7XG4gICAgICAgIC8vIGxpa2UgTWVzaERlcHRoTWF0ZXJpYWwsIGJ1dCBnb2VzIGZyb20gYmxhY2sgdG8gdHJhbnNwYXJlbnRcbiAgICAgICAgdGhpcy5kZXB0aE1hdGVyaWFsLm9uQmVmb3JlQ29tcGlsZSA9IGZ1bmN0aW9uIChzaGFkZXIpIHtcbiAgICAgICAgICAgIHNoYWRlci5mcmFnbWVudFNoYWRlciA9IHNoYWRlci5mcmFnbWVudFNoYWRlci5yZXBsYWNlKCdnbF9GcmFnQ29sb3IgPSB2ZWM0KCB2ZWMzKCAxLjAgLSBmcmFnQ29vcmRaICksIG9wYWNpdHkgKTsnLCAnZ2xfRnJhZ0NvbG9yID0gdmVjNCggdmVjMyggMC4wICksICggMS4wIC0gZnJhZ0Nvb3JkWiApICogb3BhY2l0eSApOycpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhvcml6b250YWxCbHVyTWF0ZXJpYWwuZGVwdGhUZXN0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmVydGljYWxCbHVyTWF0ZXJpYWwuZGVwdGhUZXN0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2V0U2NlbmUoc2NlbmUsIHNvZnRuZXNzLCBzaWRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBzaGFkb3cncyBzaXplIGFuZCBwb3NpdGlvbiBmb3IgYSBuZXcgc2NlbmUuIFNvZnRuZXNzIGlzIGFsc29cbiAgICAgKiBuZWVkZWQsIGFzIHRoaXMgY29udHJvbHMgdGhlIHNoYWRvdydzIHJlc29sdXRpb24uXG4gICAgICovXG4gICAgc2V0U2NlbmUoc2NlbmUsIHNvZnRuZXNzLCBzaWRlKSB7XG4gICAgICAgIGNvbnN0IHsgYm91bmRpbmdCb3gsIHNpemUsIHJvdGF0aW9uLCBwb3NpdGlvbiB9ID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0FuaW1hdGVkID0gc2NlbmUuYW5pbWF0aW9uTmFtZXMubGVuZ3RoID4gMDtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5jb3B5KHNjZW5lLmJvdW5kaW5nQm94KTtcbiAgICAgICAgdGhpcy5zaXplLmNvcHkoc2NlbmUuc2l6ZSk7XG4gICAgICAgIHRoaXMubWF4RGltZW5zaW9uID0gTWF0aC5tYXgoc2l6ZS54LCBzaXplLnksIHNpemUueikgKlxuICAgICAgICAgICAgKHRoaXMuaXNBbmltYXRlZCA/IEFOSU1BVElPTl9TQ0FMSU5HIDogMSk7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3guZ2V0Q2VudGVyKHBvc2l0aW9uKTtcbiAgICAgICAgaWYgKHNpZGUgPT09ICdiYWNrJykge1xuICAgICAgICAgICAgY29uc3QgeyBtaW4sIG1heCB9ID0gYm91bmRpbmdCb3g7XG4gICAgICAgICAgICBbbWluLnksIG1pbi56XSA9IFttaW4ueiwgbWluLnldO1xuICAgICAgICAgICAgW21heC55LCBtYXguel0gPSBbbWF4LnosIG1heC55XTtcbiAgICAgICAgICAgIFtzaXplLnksIHNpemUuel0gPSBbc2l6ZS56LCBzaXplLnldO1xuICAgICAgICAgICAgcm90YXRpb24ueCA9IE1hdGguUEkgLyAyO1xuICAgICAgICAgICAgcm90YXRpb24ueSA9IE1hdGguUEk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByb3RhdGlvbi54ID0gMDtcbiAgICAgICAgICAgIHJvdGF0aW9uLnkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQW5pbWF0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1pblkgPSBib3VuZGluZ0JveC5taW4ueTtcbiAgICAgICAgICAgIGNvbnN0IG1heFkgPSBib3VuZGluZ0JveC5tYXgueTtcbiAgICAgICAgICAgIHNpemUueSA9IHRoaXMubWF4RGltZW5zaW9uO1xuICAgICAgICAgICAgYm91bmRpbmdCb3guZXhwYW5kQnlWZWN0b3Ioc2l6ZS5zdWJTY2FsYXIodGhpcy5tYXhEaW1lbnNpb24pLm11bHRpcGx5U2NhbGFyKC0wLjUpKTtcbiAgICAgICAgICAgIGJvdW5kaW5nQm94Lm1pbi55ID0gbWluWTtcbiAgICAgICAgICAgIGJvdW5kaW5nQm94Lm1heC55ID0gbWF4WTtcbiAgICAgICAgICAgIHNpemUuc2V0KHRoaXMubWF4RGltZW5zaW9uLCBtYXhZIC0gbWluWSwgdGhpcy5tYXhEaW1lbnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaWRlID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgcG9zaXRpb24ueSA9IGJvdW5kaW5nQm94Lm1pbi55O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9zaXRpb24ueiA9IGJvdW5kaW5nQm94Lm1pbi55O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U29mdG5lc3Moc29mdG5lc3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHNoYWRvdydzIHJlc29sdXRpb24gYmFzZWQgb24gc29mdG5lc3MgKGJldHdlZW4gMCBhbmQgMSkuIFNob3VsZFxuICAgICAqIG5vdCBiZSBjYWxsZWQgZnJlcXVlbnRseSwgYXMgdGhpcyByZXN1bHRzIGluIHJlYWxsb2NhdGlvbi5cbiAgICAgKi9cbiAgICBzZXRTb2Z0bmVzcyhzb2Z0bmVzcykge1xuICAgICAgICB0aGlzLnNvZnRuZXNzID0gc29mdG5lc3M7XG4gICAgICAgIGNvbnN0IHsgc2l6ZSwgY2FtZXJhIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBzY2FsZVkgPSAodGhpcy5pc0FuaW1hdGVkID8gQU5JTUFUSU9OX1NDQUxJTkcgOiAxKTtcbiAgICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IHNjYWxlWSAqXG4gICAgICAgICAgICBNYXRoLnBvdygyLCBMT0dfTUFYX1JFU09MVVRJT04gLVxuICAgICAgICAgICAgICAgIHNvZnRuZXNzICogKExPR19NQVhfUkVTT0xVVElPTiAtIExPR19NSU5fUkVTT0xVVElPTikpO1xuICAgICAgICB0aGlzLnNldE1hcFNpemUocmVzb2x1dGlvbik7XG4gICAgICAgIGNvbnN0IHNvZnRGYXIgPSBzaXplLnkgLyAyO1xuICAgICAgICBjb25zdCBoYXJkRmFyID0gc2l6ZS55ICogc2NhbGVZO1xuICAgICAgICBjYW1lcmEubmVhciA9IDA7XG4gICAgICAgIGNhbWVyYS5mYXIgPSBsZXJwKGhhcmRGYXIsIHNvZnRGYXIsIHNvZnRuZXNzKTtcbiAgICAgICAgLy8gd2UgaGF2ZSBjby1vcHRlZCBvcGFjaXR5IHRvIHNjYWxlIHRoZSBkZXB0aCB0byBjbGlwXG4gICAgICAgIHRoaXMuZGVwdGhNYXRlcmlhbC5vcGFjaXR5ID0gMS4wIC8gc29mdG5lc3M7XG4gICAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgIC8vIHRoaXMuY2FtZXJhSGVscGVyLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLnNldEludGVuc2l0eSh0aGlzLmludGVuc2l0eSk7XG4gICAgICAgIHRoaXMuc2V0T2Zmc2V0KDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb3dlci1sZXZlbCB2ZXJzaW9uIG9mIHRoZSBhYm92ZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBzZXRNYXBTaXplKG1heE1hcFNpemUpIHtcbiAgICAgICAgY29uc3QgeyBzaXplIH0gPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5pc0FuaW1hdGVkKSB7XG4gICAgICAgICAgICBtYXhNYXBTaXplICo9IEFOSU1BVElPTl9TQ0FMSU5HO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJhc2VXaWR0aCA9IE1hdGguZmxvb3Ioc2l6ZS54ID4gc2l6ZS56ID8gbWF4TWFwU2l6ZSA6IG1heE1hcFNpemUgKiBzaXplLnggLyBzaXplLnopO1xuICAgICAgICBjb25zdCBiYXNlSGVpZ2h0ID0gTWF0aC5mbG9vcihzaXplLnggPiBzaXplLnogPyBtYXhNYXBTaXplICogc2l6ZS56IC8gc2l6ZS54IDogbWF4TWFwU2l6ZSk7XG4gICAgICAgIC8vIHdpZHRoIG9mIGJsdXIgZmlsdGVyIGluIHBpeGVscyAobm90IGFkanVzdGFibGUpXG4gICAgICAgIGNvbnN0IFRBUF9XSURUSCA9IDEwO1xuICAgICAgICBjb25zdCB3aWR0aCA9IFRBUF9XSURUSCArIGJhc2VXaWR0aDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gVEFQX1dJRFRIICsgYmFzZUhlaWdodDtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyVGFyZ2V0ICE9IG51bGwgJiZcbiAgICAgICAgICAgICh0aGlzLnJlbmRlclRhcmdldC53aWR0aCAhPT0gd2lkdGggfHxcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRhcmdldC5oZWlnaHQgIT09IGhlaWdodCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0Qmx1ci5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRhcmdldEJsdXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlbmRlclRhcmdldCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7IGZvcm1hdDogUkdCQUZvcm1hdCB9O1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXJnZXQgPSBuZXcgV2ViR0xSZW5kZXJUYXJnZXQod2lkdGgsIGhlaWdodCwgcGFyYW1zKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0Qmx1ciA9IG5ldyBXZWJHTFJlbmRlclRhcmdldCh3aWR0aCwgaGVpZ2h0LCBwYXJhbXMpO1xuICAgICAgICAgICAgdGhpcy5mbG9vci5tYXRlcmlhbC5tYXAgPVxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVGFyZ2V0LnRleHR1cmU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlc2UgcGFkcyBhY2NvdW50IGZvciB0aGUgc29mdGVuaW5nIHJhZGl1cyBhcm91bmQgdGhlIHNoYWRvdy5cbiAgICAgICAgdGhpcy5jYW1lcmEuc2NhbGUuc2V0KHNpemUueCAqICgxICsgVEFQX1dJRFRIIC8gYmFzZVdpZHRoKSwgc2l6ZS56ICogKDEgKyBUQVBfV0lEVEggLyBiYXNlSGVpZ2h0KSwgMSk7XG4gICAgICAgIHRoaXMubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNoYWRvdydzIGludGVuc2l0eSAoMCB0byAxKSwgd2hpY2ggaXMganVzdCBpdHMgb3BhY2l0eS4gVHVybnMgb2ZmXG4gICAgICogc2hhZG93IHJlbmRlcmluZyBpZiB6ZXJvLlxuICAgICAqL1xuICAgIHNldEludGVuc2l0eShpbnRlbnNpdHkpIHtcbiAgICAgICAgdGhpcy5pbnRlbnNpdHkgPSBpbnRlbnNpdHk7XG4gICAgICAgIGlmIChpbnRlbnNpdHkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5mbG9vci52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZmxvb3IubWF0ZXJpYWwub3BhY2l0eSA9IGludGVuc2l0eSAqXG4gICAgICAgICAgICAgICAgbGVycChERUZBVUxUX0hBUkRfSU5URU5TSVRZLCAxLCB0aGlzLnNvZnRuZXNzICogdGhpcy5zb2Z0bmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmxvb3IudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEludGVuc2l0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZW5zaXR5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBvZmZzZXQgY2FuIGJlIHNwZWNpZmllZCB0byBtb3ZlIHRoZVxuICAgICAqIHNoYWRvdyB2ZXJ0aWNhbGx5IHJlbGF0aXZlIHRvIHRoZSBib3R0b20gb2YgdGhlIHNjZW5lLiBQb3NpdGl2ZSBpcyB1cCwgc29cbiAgICAgKiB2YWx1ZXMgYXJlIGdlbmVyYWxseSBuZWdhdGl2ZS4gQSBzbWFsbCBvZmZzZXQga2VlcHMgb3VyIHNoYWRvdyBmcm9tXG4gICAgICogei1maWdodGluZyB3aXRoIGFueSBiYWtlZC1pbiBzaGFkb3cgcGxhbmUuXG4gICAgICovXG4gICAgc2V0T2Zmc2V0KG9mZnNldCkge1xuICAgICAgICB0aGlzLmZsb29yLnBvc2l0aW9uLnogPSAtb2Zmc2V0ICsgMC4wMDEgKiB0aGlzLm1heERpbWVuc2lvbjtcbiAgICB9XG4gICAgcmVuZGVyKHJlbmRlcmVyLCBzY2VuZSkge1xuICAgICAgICAvLyB0aGlzLmNhbWVyYUhlbHBlci52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIC8vIGZvcmNlIHRoZSBkZXB0aE1hdGVyaWFsIHRvIGV2ZXJ5dGhpbmdcbiAgICAgICAgc2NlbmUub3ZlcnJpZGVNYXRlcmlhbCA9IHRoaXMuZGVwdGhNYXRlcmlhbDtcbiAgICAgICAgLy8gc2V0IHJlbmRlcmVyIGNsZWFyIGFscGhhXG4gICAgICAgIGNvbnN0IGluaXRpYWxDbGVhckFscGhhID0gcmVuZGVyZXIuZ2V0Q2xlYXJBbHBoYSgpO1xuICAgICAgICByZW5kZXJlci5zZXRDbGVhckFscGhhKDApO1xuICAgICAgICB0aGlzLmZsb29yLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgLy8gZGlzYWJsZSBYUiBmb3Igb2Zmc2NyZWVuIHJlbmRlcmluZ1xuICAgICAgICBjb25zdCB4ckVuYWJsZWQgPSByZW5kZXJlci54ci5lbmFibGVkO1xuICAgICAgICByZW5kZXJlci54ci5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIC8vIHJlbmRlciB0byB0aGUgcmVuZGVyIHRhcmdldCB0byBnZXQgdGhlIGRlcHRoc1xuICAgICAgICBjb25zdCBvbGRSZW5kZXJUYXJnZXQgPSByZW5kZXJlci5nZXRSZW5kZXJUYXJnZXQoKTtcbiAgICAgICAgcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHRoaXMucmVuZGVyVGFyZ2V0KTtcbiAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCB0aGlzLmNhbWVyYSk7XG4gICAgICAgIC8vIGFuZCByZXNldCB0aGUgb3ZlcnJpZGUgbWF0ZXJpYWxcbiAgICAgICAgc2NlbmUub3ZlcnJpZGVNYXRlcmlhbCA9IG51bGw7XG4gICAgICAgIHRoaXMuZmxvb3IudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYmx1clNoYWRvdyhyZW5kZXJlcik7XG4gICAgICAgIC8vIHJlc2V0IGFuZCByZW5kZXIgdGhlIG5vcm1hbCBzY2VuZVxuICAgICAgICByZW5kZXJlci54ci5lbmFibGVkID0geHJFbmFibGVkO1xuICAgICAgICByZW5kZXJlci5zZXRSZW5kZXJUYXJnZXQob2xkUmVuZGVyVGFyZ2V0KTtcbiAgICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJBbHBoYShpbml0aWFsQ2xlYXJBbHBoYSk7XG4gICAgICAgIC8vIHRoaXMuY2FtZXJhSGVscGVyLnZpc2libGUgPSB0cnVlO1xuICAgIH1cbiAgICBibHVyU2hhZG93KHJlbmRlcmVyKSB7XG4gICAgICAgIGNvbnN0IHsgY2FtZXJhLCBob3Jpem9udGFsQmx1ck1hdGVyaWFsLCB2ZXJ0aWNhbEJsdXJNYXRlcmlhbCwgcmVuZGVyVGFyZ2V0LCByZW5kZXJUYXJnZXRCbHVyLCBibHVyUGxhbmUgfSA9IHRoaXM7XG4gICAgICAgIGJsdXJQbGFuZS52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgLy8gYmx1ciBob3Jpem9udGFsbHkgYW5kIGRyYXcgaW4gdGhlIHJlbmRlclRhcmdldEJsdXJcbiAgICAgICAgYmx1clBsYW5lLm1hdGVyaWFsID0gaG9yaXpvbnRhbEJsdXJNYXRlcmlhbDtcbiAgICAgICAgaG9yaXpvbnRhbEJsdXJNYXRlcmlhbC51bmlmb3Jtcy5oLnZhbHVlID0gMSAvIHRoaXMucmVuZGVyVGFyZ2V0LndpZHRoO1xuICAgICAgICBob3Jpem9udGFsQmx1ck1hdGVyaWFsLnVuaWZvcm1zLnREaWZmdXNlLnZhbHVlID0gdGhpcy5yZW5kZXJUYXJnZXQudGV4dHVyZTtcbiAgICAgICAgcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHJlbmRlclRhcmdldEJsdXIpO1xuICAgICAgICByZW5kZXJlci5yZW5kZXIoYmx1clBsYW5lLCBjYW1lcmEpO1xuICAgICAgICAvLyBibHVyIHZlcnRpY2FsbHkgYW5kIGRyYXcgaW4gdGhlIG1haW4gcmVuZGVyVGFyZ2V0XG4gICAgICAgIGJsdXJQbGFuZS5tYXRlcmlhbCA9IHZlcnRpY2FsQmx1ck1hdGVyaWFsO1xuICAgICAgICB2ZXJ0aWNhbEJsdXJNYXRlcmlhbC51bmlmb3Jtcy52LnZhbHVlID0gMSAvIHRoaXMucmVuZGVyVGFyZ2V0LmhlaWdodDtcbiAgICAgICAgdmVydGljYWxCbHVyTWF0ZXJpYWwudW5pZm9ybXMudERpZmZ1c2UudmFsdWUgPVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXJnZXRCbHVyLnRleHR1cmU7XG4gICAgICAgIHJlbmRlcmVyLnNldFJlbmRlclRhcmdldChyZW5kZXJUYXJnZXQpO1xuICAgICAgICByZW5kZXJlci5yZW5kZXIoYmx1clBsYW5lLCBjYW1lcmEpO1xuICAgICAgICBibHVyUGxhbmUudmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJUYXJnZXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXJnZXQuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlbmRlclRhcmdldEJsdXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXJnZXRCbHVyLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlcHRoTWF0ZXJpYWwuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmhvcml6b250YWxCbHVyTWF0ZXJpYWwuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZlcnRpY2FsQmx1ck1hdGVyaWFsLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5mbG9vci5tYXRlcmlhbC5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuZmxvb3IuZ2VvbWV0cnkuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmJsdXJQbGFuZS5nZW9tZXRyeS5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlRnJvbVBhcmVudCgpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNoYWRvdy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/Shadow.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/SmoothControls.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/SmoothControls.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChangeSource: () => (/* binding */ ChangeSource),\n/* harmony export */   DEFAULT_OPTIONS: () => (/* binding */ DEFAULT_OPTIONS),\n/* harmony export */   KeyCode: () => (/* binding */ KeyCode),\n/* harmony export */   SmoothControls: () => (/* binding */ SmoothControls)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _features_controls_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../features/controls.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/features/controls.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* harmony import */ var _Damper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Damper.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/Damper.js\");\n/* @license\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\nconst PAN_SENSITIVITY = 0.018;\nconst TAP_DISTANCE = 2;\nconst TAP_MS = 300;\nconst vector2 = new three__WEBPACK_IMPORTED_MODULE_3__.Vector2();\nconst vector3 = new three__WEBPACK_IMPORTED_MODULE_3__.Vector3();\nconst DEFAULT_OPTIONS = Object.freeze({\n    minimumRadius: 0,\n    maximumRadius: Infinity,\n    minimumPolarAngle: Math.PI / 8,\n    maximumPolarAngle: Math.PI - Math.PI / 8,\n    minimumAzimuthalAngle: -Infinity,\n    maximumAzimuthalAngle: Infinity,\n    minimumFieldOfView: 10,\n    maximumFieldOfView: 45,\n    touchAction: 'none'\n});\n// Constants\nconst KEYBOARD_ORBIT_INCREMENT = Math.PI / 8;\nconst ZOOM_SENSITIVITY = 0.04;\n// The move size on pan key event\nconst PAN_KEY_INCREMENT = 10;\nconst KeyCode = {\n    PAGE_UP: 33,\n    PAGE_DOWN: 34,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40\n};\nconst ChangeSource = {\n    USER_INTERACTION: 'user-interaction',\n    NONE: 'none',\n    AUTOMATIC: 'automatic'\n};\n/**\n * SmoothControls is a Three.js helper for adding delightful pointer and\n * keyboard-based input to a staged Three.js scene. Its API is very similar to\n * OrbitControls, but it offers more opinionated (subjectively more delightful)\n * defaults, easy extensibility and subjectively better out-of-the-box keyboard\n * support.\n *\n * One important change compared to OrbitControls is that the `update` method\n * of SmoothControls must be invoked on every frame, otherwise the controls\n * will not have an effect.\n *\n * Another notable difference compared to OrbitControls is that SmoothControls\n * does not currently support panning (but probably will in a future revision).\n *\n * Like OrbitControls, SmoothControls assumes that the orientation of the camera\n * has been set in terms of position, rotation and scale, so it is important to\n * ensure that the camera's matrixWorld is in sync before using SmoothControls.\n */\nclass SmoothControls extends three__WEBPACK_IMPORTED_MODULE_3__.EventDispatcher {\n    constructor(camera, element, scene) {\n        super();\n        this.camera = camera;\n        this.element = element;\n        this.scene = scene;\n        this.orbitSensitivity = 1;\n        this.inputSensitivity = 1;\n        this.changeSource = ChangeSource.NONE;\n        this._interactionEnabled = false;\n        this._disableZoom = false;\n        this.isUserPointing = false;\n        // Pan state\n        this.enablePan = true;\n        this.enableTap = true;\n        this.panProjection = new three__WEBPACK_IMPORTED_MODULE_3__.Matrix3();\n        this.panPerPixel = 0;\n        // Internal orbital position state\n        this.spherical = new three__WEBPACK_IMPORTED_MODULE_3__.Spherical();\n        this.goalSpherical = new three__WEBPACK_IMPORTED_MODULE_3__.Spherical();\n        this.thetaDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_2__.Damper();\n        this.phiDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_2__.Damper();\n        this.radiusDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_2__.Damper();\n        this.logFov = Math.log(DEFAULT_OPTIONS.maximumFieldOfView);\n        this.goalLogFov = this.logFov;\n        this.fovDamper = new _Damper_js__WEBPACK_IMPORTED_MODULE_2__.Damper();\n        // Pointer state\n        this.touchMode = null;\n        this.pointers = [];\n        this.startTime = 0;\n        this.startPointerPosition = { clientX: 0, clientY: 0 };\n        this.lastSeparation = 0;\n        this.touchDecided = false;\n        this.onContext = (event) => {\n            if (this.enablePan) {\n                event.preventDefault();\n            }\n            else {\n                for (const pointer of this.pointers) {\n                    // Required because of a common browser bug where the context menu never\n                    // fires a pointercancel event.\n                    this.onPointerUp(new PointerEvent('pointercancel', Object.assign(Object.assign({}, this.startPointerPosition), { pointerId: pointer.id })));\n                }\n            }\n        };\n        this.touchModeZoom = (dx, dy) => {\n            if (!this._disableZoom) {\n                const touchDistance = this.twoTouchDistance(this.pointers[0], this.pointers[1]);\n                const deltaZoom = ZOOM_SENSITIVITY *\n                    (this.lastSeparation - touchDistance) * 50 / this.scene.height;\n                this.lastSeparation = touchDistance;\n                this.userAdjustOrbit(0, 0, deltaZoom);\n            }\n            if (this.panPerPixel > 0) {\n                this.movePan(dx, dy);\n            }\n        };\n        // We implement our own version of the browser's CSS touch-action, enforced by\n        // this function, because the iOS implementation of pan-y is bad and doesn't\n        // match Android. Specifically, even if a touch gesture begins by panning X,\n        // iOS will switch to scrolling as soon as the gesture moves in the Y, rather\n        // than staying in the same mode until the end of the gesture.\n        this.disableScroll = (event) => {\n            event.preventDefault();\n        };\n        this.touchModeRotate = (dx, dy) => {\n            const { touchAction } = this._options;\n            if (!this.touchDecided && touchAction !== 'none') {\n                this.touchDecided = true;\n                const dxMag = Math.abs(dx);\n                const dyMag = Math.abs(dy);\n                // If motion is mostly vertical, assume scrolling is the intent.\n                if (this.changeSource === ChangeSource.USER_INTERACTION &&\n                    ((touchAction === 'pan-y' && dyMag > dxMag) ||\n                        (touchAction === 'pan-x' && dxMag > dyMag))) {\n                    this.touchMode = null;\n                    return;\n                }\n                else {\n                    this.element.addEventListener('touchmove', this.disableScroll, { passive: false });\n                }\n            }\n            this.handleSinglePointerMove(dx, dy);\n        };\n        this.onPointerDown = (event) => {\n            if (this.pointers.length > 2) {\n                return;\n            }\n            const { element } = this;\n            if (this.pointers.length === 0) {\n                element.addEventListener('pointermove', this.onPointerMove);\n                element.addEventListener('pointerup', this.onPointerUp);\n                this.touchMode = null;\n                this.touchDecided = false;\n                this.startPointerPosition.clientX = event.clientX;\n                this.startPointerPosition.clientY = event.clientY;\n                this.startTime = performance.now();\n            }\n            try {\n                element.setPointerCapture(event.pointerId);\n            }\n            catch (_a) {\n            }\n            this.pointers.push({ clientX: event.clientX, clientY: event.clientY, id: event.pointerId });\n            this.isUserPointing = false;\n            if (event.pointerType === 'touch') {\n                this.changeSource = event.altKey ? // set by interact() in controls.ts\n                    ChangeSource.AUTOMATIC :\n                    ChangeSource.USER_INTERACTION;\n                this.onTouchChange(event);\n            }\n            else {\n                this.changeSource = ChangeSource.USER_INTERACTION;\n                this.onMouseDown(event);\n            }\n        };\n        this.onPointerMove = (event) => {\n            const pointer = this.pointers.find((pointer) => pointer.id === event.pointerId);\n            if (pointer == null) {\n                return;\n            }\n            const numTouches = this.pointers.length;\n            const dx = (event.clientX - pointer.clientX) / numTouches;\n            const dy = (event.clientY - pointer.clientY) / numTouches;\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            pointer.clientX = event.clientX;\n            pointer.clientY = event.clientY;\n            if (event.pointerType === 'touch') {\n                this.changeSource = event.altKey ? // set by interact() in controls.ts\n                    ChangeSource.AUTOMATIC :\n                    ChangeSource.USER_INTERACTION;\n                if (this.touchMode !== null) {\n                    this.touchMode(dx, dy);\n                }\n            }\n            else {\n                this.changeSource = ChangeSource.USER_INTERACTION;\n                if (this.panPerPixel > 0) {\n                    this.movePan(dx, dy);\n                }\n                else {\n                    this.handleSinglePointerMove(dx, dy);\n                }\n            }\n        };\n        this.onPointerUp = (event) => {\n            const { element } = this;\n            const index = this.pointers.findIndex((pointer) => pointer.id === event.pointerId);\n            if (index !== -1) {\n                this.pointers.splice(index, 1);\n            }\n            // altKey indicates an interaction prompt; don't reset radius in this case\n            // as it will cause the camera to drift.\n            if (this.panPerPixel > 0 && !event.altKey) {\n                this.resetRadius();\n            }\n            if (this.pointers.length === 0) {\n                element.removeEventListener('pointermove', this.onPointerMove);\n                element.removeEventListener('pointerup', this.onPointerUp);\n                element.removeEventListener('touchmove', this.disableScroll);\n                if (this.enablePan && this.enableTap) {\n                    this.recenter(event);\n                }\n            }\n            else if (this.touchMode !== null) {\n                this.onTouchChange(event);\n            }\n            this.scene.element[_features_controls_js__WEBPACK_IMPORTED_MODULE_0__.$panElement].style.opacity = 0;\n            element.style.cursor = 'grab';\n            this.panPerPixel = 0;\n            if (this.isUserPointing) {\n                this.dispatchEvent({ type: 'pointer-change-end' });\n            }\n        };\n        this.onWheel = (event) => {\n            this.changeSource = ChangeSource.USER_INTERACTION;\n            const deltaZoom = event.deltaY *\n                (event.deltaMode == 1 ? 18 : 1) * ZOOM_SENSITIVITY / 30;\n            this.userAdjustOrbit(0, 0, deltaZoom);\n            event.preventDefault();\n        };\n        this.onKeyDown = (event) => {\n            // We track if the key is actually one we respond to, so as not to\n            // accidentally clobber unrelated key inputs when the <model-viewer> has\n            // focus.\n            const { changeSource } = this;\n            this.changeSource = ChangeSource.USER_INTERACTION;\n            const relevantKey = (event.shiftKey && this.enablePan) ?\n                this.panKeyCodeHandler(event) :\n                this.orbitZoomKeyCodeHandler(event);\n            if (relevantKey) {\n                event.preventDefault();\n            }\n            else {\n                this.changeSource = changeSource;\n            }\n        };\n        this._options = Object.assign({}, DEFAULT_OPTIONS);\n        this.setOrbit(0, Math.PI / 2, 1);\n        this.setFieldOfView(100);\n        this.jumpToGoal();\n    }\n    get interactionEnabled() {\n        return this._interactionEnabled;\n    }\n    enableInteraction() {\n        if (this._interactionEnabled === false) {\n            const { element } = this;\n            element.addEventListener('pointerdown', this.onPointerDown);\n            element.addEventListener('pointercancel', this.onPointerUp);\n            if (!this._disableZoom) {\n                element.addEventListener('wheel', this.onWheel);\n            }\n            element.addEventListener('keydown', this.onKeyDown);\n            // This little beauty is to work around a WebKit bug that otherwise makes\n            // touch events randomly not cancelable.\n            element.addEventListener('touchmove', () => { }, { passive: false });\n            element.addEventListener('contextmenu', this.onContext);\n            this.element.style.cursor = 'grab';\n            this._interactionEnabled = true;\n            this.updateTouchActionStyle();\n        }\n    }\n    disableInteraction() {\n        if (this._interactionEnabled === true) {\n            const { element } = this;\n            element.removeEventListener('pointerdown', this.onPointerDown);\n            element.removeEventListener('pointermove', this.onPointerMove);\n            element.removeEventListener('pointerup', this.onPointerUp);\n            element.removeEventListener('pointercancel', this.onPointerUp);\n            element.removeEventListener('wheel', this.onWheel);\n            element.removeEventListener('keydown', this.onKeyDown);\n            element.removeEventListener('contextmenu', this.onContext);\n            element.style.cursor = '';\n            this.touchMode = null;\n            this._interactionEnabled = false;\n            this.updateTouchActionStyle();\n        }\n    }\n    /**\n     * The options that are currently configured for the controls instance.\n     */\n    get options() {\n        return this._options;\n    }\n    set disableZoom(disable) {\n        if (this._disableZoom != disable) {\n            this._disableZoom = disable;\n            if (disable === true) {\n                this.element.removeEventListener('wheel', this.onWheel);\n            }\n            else {\n                this.element.addEventListener('wheel', this.onWheel);\n            }\n            this.updateTouchActionStyle();\n        }\n    }\n    /**\n     * Copy the spherical values that represent the current camera orbital\n     * position relative to the configured target into a provided Spherical\n     * instance. If no Spherical is provided, a new Spherical will be allocated\n     * to copy the values into. The Spherical that values are copied into is\n     * returned.\n     */\n    getCameraSpherical(target = new three__WEBPACK_IMPORTED_MODULE_3__.Spherical()) {\n        return target.copy(this.spherical);\n    }\n    /**\n     * Returns the camera's current vertical field of view in degrees.\n     */\n    getFieldOfView() {\n        return this.camera.fov;\n    }\n    /**\n     * Configure the _options of the controls. Configured _options will be\n     * merged with whatever _options have already been configured for this\n     * controls instance.\n     */\n    applyOptions(_options) {\n        Object.assign(this._options, _options);\n        // Re-evaluates clamping based on potentially new values for min/max\n        // polar, azimuth and radius:\n        this.setOrbit();\n        this.setFieldOfView(Math.exp(this.goalLogFov));\n    }\n    /**\n     * Sets the near and far planes of the camera.\n     */\n    updateNearFar(nearPlane, farPlane) {\n        this.camera.near = Math.max(nearPlane, farPlane / 1000);\n        this.camera.far = farPlane;\n        this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Sets the aspect ratio of the camera\n     */\n    updateAspect(aspect) {\n        this.camera.aspect = aspect;\n        this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Set the absolute orbital goal of the camera. The change will be\n     * applied over a number of frames depending on configured acceleration and\n     * dampening _options.\n     *\n     * Returns true if invoking the method will result in the camera changing\n     * position and/or rotation, otherwise false.\n     */\n    setOrbit(goalTheta = this.goalSpherical.theta, goalPhi = this.goalSpherical.phi, goalRadius = this.goalSpherical.radius) {\n        const { minimumAzimuthalAngle, maximumAzimuthalAngle, minimumPolarAngle, maximumPolarAngle, minimumRadius, maximumRadius } = this._options;\n        const { theta, phi, radius } = this.goalSpherical;\n        const nextTheta = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(goalTheta, minimumAzimuthalAngle, maximumAzimuthalAngle);\n        if (!isFinite(minimumAzimuthalAngle) &&\n            !isFinite(maximumAzimuthalAngle)) {\n            this.spherical.theta =\n                this.wrapAngle(this.spherical.theta - nextTheta) + nextTheta;\n        }\n        const nextPhi = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(goalPhi, minimumPolarAngle, maximumPolarAngle);\n        const nextRadius = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(goalRadius, minimumRadius, maximumRadius);\n        if (nextTheta === theta && nextPhi === phi && nextRadius === radius) {\n            return false;\n        }\n        this.goalSpherical.theta = nextTheta;\n        this.goalSpherical.phi = nextPhi;\n        this.goalSpherical.radius = nextRadius;\n        this.goalSpherical.makeSafe();\n        return true;\n    }\n    /**\n     * Subset of setOrbit() above, which only sets the camera's radius.\n     */\n    setRadius(radius) {\n        this.goalSpherical.radius = radius;\n        this.setOrbit();\n    }\n    /**\n     * Sets the goal field of view for the camera\n     */\n    setFieldOfView(fov) {\n        const { minimumFieldOfView, maximumFieldOfView } = this._options;\n        fov = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(fov, minimumFieldOfView, maximumFieldOfView);\n        this.goalLogFov = Math.log(fov);\n    }\n    /**\n     * Sets the smoothing decay time.\n     */\n    setDamperDecayTime(decayMilliseconds) {\n        this.thetaDamper.setDecayTime(decayMilliseconds);\n        this.phiDamper.setDecayTime(decayMilliseconds);\n        this.radiusDamper.setDecayTime(decayMilliseconds);\n        this.fovDamper.setDecayTime(decayMilliseconds);\n    }\n    /**\n     * Adjust the orbital position of the camera relative to its current orbital\n     * position. Does not let the theta goal get more than pi ahead of the current\n     * theta, which ensures interpolation continues in the direction of the delta.\n     * The deltaZoom parameter adjusts both the field of view and the orbit radius\n     * such that they progress across their allowed ranges in sync.\n     */\n    adjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n        const { theta, phi, radius } = this.goalSpherical;\n        const { minimumRadius, maximumRadius, minimumFieldOfView, maximumFieldOfView } = this._options;\n        const dTheta = this.spherical.theta - theta;\n        const dThetaLimit = Math.PI - 0.001;\n        const goalTheta = theta - (0,_utilities_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(deltaTheta, -dThetaLimit - dTheta, dThetaLimit - dTheta);\n        const goalPhi = phi - deltaPhi;\n        const deltaRatio = deltaZoom === 0 ?\n            0 :\n            ((deltaZoom > 0 ? maximumRadius : minimumRadius) - radius) /\n                (Math.log(deltaZoom > 0 ? maximumFieldOfView : minimumFieldOfView) -\n                    this.goalLogFov);\n        const goalRadius = radius +\n            deltaZoom *\n                (isFinite(deltaRatio) ? deltaRatio :\n                    (maximumRadius - minimumRadius) * 2);\n        this.setOrbit(goalTheta, goalPhi, goalRadius);\n        if (deltaZoom !== 0) {\n            const goalLogFov = this.goalLogFov + deltaZoom;\n            this.setFieldOfView(Math.exp(goalLogFov));\n        }\n    }\n    /**\n     * Move the camera instantly instead of accelerating toward the goal\n     * parameters.\n     */\n    jumpToGoal() {\n        this.update(0, _Damper_js__WEBPACK_IMPORTED_MODULE_2__.SETTLING_TIME);\n    }\n    /**\n     * Update controls. In most cases, this will result in the camera\n     * interpolating its position and rotation until it lines up with the\n     * designated goal orbital position.\n     *\n     * Time and delta are measured in milliseconds.\n     */\n    update(_time, delta) {\n        if (this.isStationary()) {\n            return;\n        }\n        const { maximumPolarAngle, maximumRadius } = this._options;\n        const dTheta = this.spherical.theta - this.goalSpherical.theta;\n        if (Math.abs(dTheta) > Math.PI &&\n            !isFinite(this._options.minimumAzimuthalAngle) &&\n            !isFinite(this._options.maximumAzimuthalAngle)) {\n            this.spherical.theta -= Math.sign(dTheta) * 2 * Math.PI;\n        }\n        this.spherical.theta = this.thetaDamper.update(this.spherical.theta, this.goalSpherical.theta, delta, Math.PI);\n        this.spherical.phi = this.phiDamper.update(this.spherical.phi, this.goalSpherical.phi, delta, maximumPolarAngle);\n        this.spherical.radius = this.radiusDamper.update(this.spherical.radius, this.goalSpherical.radius, delta, maximumRadius);\n        this.logFov = this.fovDamper.update(this.logFov, this.goalLogFov, delta, 1);\n        this.moveCamera();\n    }\n    updateTouchActionStyle() {\n        const { style } = this.element;\n        if (this._interactionEnabled) {\n            const { touchAction } = this._options;\n            if (this._disableZoom && touchAction !== 'none') {\n                style.touchAction = 'manipulation';\n            }\n            else {\n                style.touchAction = touchAction;\n            }\n        }\n        else {\n            style.touchAction = '';\n        }\n    }\n    isStationary() {\n        return this.goalSpherical.theta === this.spherical.theta &&\n            this.goalSpherical.phi === this.spherical.phi &&\n            this.goalSpherical.radius === this.spherical.radius &&\n            this.goalLogFov === this.logFov;\n    }\n    dispatchChange() {\n        this.dispatchEvent({ type: 'change', source: this.changeSource });\n    }\n    moveCamera() {\n        // Derive the new camera position from the updated spherical:\n        this.spherical.makeSafe();\n        this.camera.position.setFromSpherical(this.spherical);\n        this.camera.setRotationFromEuler(new three__WEBPACK_IMPORTED_MODULE_3__.Euler(this.spherical.phi - Math.PI / 2, this.spherical.theta, 0, 'YXZ'));\n        if (this.camera.fov !== Math.exp(this.logFov)) {\n            this.camera.fov = Math.exp(this.logFov);\n            this.camera.updateProjectionMatrix();\n        }\n        this.dispatchChange();\n    }\n    userAdjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n        this.adjustOrbit(deltaTheta * this.orbitSensitivity * this.inputSensitivity, deltaPhi * this.orbitSensitivity * this.inputSensitivity, deltaZoom * this.inputSensitivity);\n        // Always make sure that an initial event is triggered in case there is\n        // contention between user interaction and imperative changes. This initial\n        // event will give external observers that chance to observe that\n        // interaction occurred at all:\n        this.dispatchChange();\n    }\n    // Wraps to between -pi and pi\n    wrapAngle(radians) {\n        const normalized = (radians + Math.PI) / (2 * Math.PI);\n        const wrapped = normalized - Math.floor(normalized);\n        return wrapped * 2 * Math.PI - Math.PI;\n    }\n    pixelLengthToSphericalAngle(pixelLength) {\n        return 2 * Math.PI * pixelLength / this.element.clientHeight;\n    }\n    twoTouchDistance(touchOne, touchTwo) {\n        const { clientX: xOne, clientY: yOne } = touchOne;\n        const { clientX: xTwo, clientY: yTwo } = touchTwo;\n        const xDelta = xTwo - xOne;\n        const yDelta = yTwo - yOne;\n        return Math.sqrt(xDelta * xDelta + yDelta * yDelta);\n    }\n    handleSinglePointerMove(dx, dy) {\n        const deltaTheta = this.pixelLengthToSphericalAngle(dx);\n        const deltaPhi = this.pixelLengthToSphericalAngle(dy);\n        if (this.isUserPointing === false) {\n            this.isUserPointing = true;\n            this.dispatchEvent({ type: 'pointer-change-start' });\n        }\n        this.userAdjustOrbit(deltaTheta, deltaPhi, 0);\n    }\n    initializePan() {\n        const { theta, phi } = this.spherical;\n        const psi = theta - this.scene.yaw;\n        this.panPerPixel = PAN_SENSITIVITY / this.scene.height;\n        this.panProjection.set(-Math.cos(psi), -Math.cos(phi) * Math.sin(psi), 0, 0, Math.sin(phi), 0, Math.sin(psi), -Math.cos(phi) * Math.cos(psi), 0);\n    }\n    movePan(dx, dy) {\n        const { scene } = this;\n        const dxy = vector3.set(dx, dy, 0).multiplyScalar(this.inputSensitivity);\n        const metersPerPixel = this.spherical.radius * Math.exp(this.logFov) * this.panPerPixel;\n        dxy.multiplyScalar(metersPerPixel);\n        const target = scene.getTarget();\n        target.add(dxy.applyMatrix3(this.panProjection));\n        scene.boundingSphere.clampPoint(target, target);\n        scene.setTarget(target.x, target.y, target.z);\n        this.dispatchChange();\n    }\n    recenter(pointer) {\n        if (performance.now() > this.startTime + TAP_MS ||\n            Math.abs(pointer.clientX - this.startPointerPosition.clientX) >\n                TAP_DISTANCE ||\n            Math.abs(pointer.clientY - this.startPointerPosition.clientY) >\n                TAP_DISTANCE) {\n            return;\n        }\n        const { scene } = this;\n        const hit = scene.positionAndNormalFromPoint(scene.getNDC(pointer.clientX, pointer.clientY));\n        if (hit == null) {\n            const { cameraTarget } = scene.element;\n            scene.element.cameraTarget = '';\n            scene.element.cameraTarget = cameraTarget;\n            // Zoom all the way out.\n            this.userAdjustOrbit(0, 0, 1);\n        }\n        else {\n            scene.target.worldToLocal(hit.position);\n            scene.setTarget(hit.position.x, hit.position.y, hit.position.z);\n        }\n    }\n    resetRadius() {\n        const { scene } = this;\n        const hit = scene.positionAndNormalFromPoint(vector2.set(0, 0));\n        if (hit == null) {\n            return;\n        }\n        scene.target.worldToLocal(hit.position);\n        const goalTarget = scene.getTarget();\n        const { theta, phi } = this.spherical;\n        // Set target to surface hit point, except the target is still settling,\n        // so offset the goal accordingly so the transition is smooth even though\n        // this will drift the target slightly away from the hit point.\n        const psi = theta - scene.yaw;\n        const n = vector3.set(Math.sin(phi) * Math.sin(psi), Math.cos(phi), Math.sin(phi) * Math.cos(psi));\n        const dr = n.dot(hit.position.sub(goalTarget));\n        goalTarget.add(n.multiplyScalar(dr));\n        scene.setTarget(goalTarget.x, goalTarget.y, goalTarget.z);\n        // Change the camera radius to match the change in target so that the\n        // camera itself does not move, unless it hits a radius bound.\n        this.setOrbit(undefined, undefined, this.goalSpherical.radius - dr);\n    }\n    onTouchChange(event) {\n        if (this.pointers.length === 1) {\n            this.touchMode = this.touchModeRotate;\n        }\n        else {\n            if (this._disableZoom) {\n                this.touchMode = null;\n                this.element.removeEventListener('touchmove', this.disableScroll);\n                return;\n            }\n            this.touchMode = (this.touchDecided && this.touchMode === null) ?\n                null :\n                this.touchModeZoom;\n            this.touchDecided = true;\n            this.element.addEventListener('touchmove', this.disableScroll, { passive: false });\n            this.lastSeparation =\n                this.twoTouchDistance(this.pointers[0], this.pointers[1]);\n            if (this.enablePan && this.touchMode != null) {\n                this.initializePan();\n                if (!event.altKey) { // user interaction, not prompt\n                    this.scene.element[_features_controls_js__WEBPACK_IMPORTED_MODULE_0__.$panElement].style.opacity = 1;\n                }\n            }\n        }\n    }\n    onMouseDown(event) {\n        this.panPerPixel = 0;\n        if (this.enablePan &&\n            (event.button === 2 || event.ctrlKey || event.metaKey ||\n                event.shiftKey)) {\n            this.initializePan();\n            this.scene.element[_features_controls_js__WEBPACK_IMPORTED_MODULE_0__.$panElement].style.opacity = 1;\n        }\n        this.element.style.cursor = 'grabbing';\n    }\n    /**\n     * Handles the orbit and Zoom key presses\n     * Uses constants for the increment.\n     * @param event The keyboard event for the .key value\n     * @returns boolean to indicate if the key event has been handled\n     */\n    orbitZoomKeyCodeHandler(event) {\n        let relevantKey = true;\n        switch (event.key) {\n            case 'PageUp':\n                this.userAdjustOrbit(0, 0, ZOOM_SENSITIVITY);\n                break;\n            case 'PageDown':\n                this.userAdjustOrbit(0, 0, -1 * ZOOM_SENSITIVITY);\n                break;\n            case 'ArrowUp':\n                this.userAdjustOrbit(0, -KEYBOARD_ORBIT_INCREMENT, 0);\n                break;\n            case 'ArrowDown':\n                this.userAdjustOrbit(0, KEYBOARD_ORBIT_INCREMENT, 0);\n                break;\n            case 'ArrowLeft':\n                this.userAdjustOrbit(-KEYBOARD_ORBIT_INCREMENT, 0, 0);\n                break;\n            case 'ArrowRight':\n                this.userAdjustOrbit(KEYBOARD_ORBIT_INCREMENT, 0, 0);\n                break;\n            default:\n                relevantKey = false;\n                break;\n        }\n        return relevantKey;\n    }\n    /**\n     * Handles the Pan key presses\n     * Uses constants for the increment.\n     * @param event The keyboard event for the .key value\n     * @returns boolean to indicate if the key event has been handled\n     */\n    panKeyCodeHandler(event) {\n        this.initializePan();\n        let relevantKey = true;\n        switch (event.key) {\n            case 'ArrowUp':\n                this.movePan(0, -1 * PAN_KEY_INCREMENT); // This is the negative one so that the\n                // model appears to move as the arrow\n                // direction rather than the view moving\n                break;\n            case 'ArrowDown':\n                this.movePan(0, PAN_KEY_INCREMENT);\n                break;\n            case 'ArrowLeft':\n                this.movePan(-1 * PAN_KEY_INCREMENT, 0);\n                break;\n            case 'ArrowRight':\n                this.movePan(PAN_KEY_INCREMENT, 0);\n                break;\n            default:\n                relevantKey = false;\n                break;\n        }\n        return relevantKey;\n    }\n}\n//# sourceMappingURL=SmoothControls.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvU21vb3RoQ29udHJvbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNxRjtBQUMvQjtBQUNkO0FBQ1k7QUFDcEQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDBDQUFPO0FBQzNCLG9CQUFvQiwwQ0FBTztBQUNwQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyw2QkFBNkIsa0RBQWU7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQywwQ0FBTztBQUN4QztBQUNBO0FBQ0EsNkJBQTZCLDRDQUFTO0FBQ3RDLGlDQUFpQyw0Q0FBUztBQUMxQywrQkFBK0IsOENBQU07QUFDckMsNkJBQTZCLDhDQUFNO0FBQ25DLGdDQUFnQyw4Q0FBTTtBQUN0QztBQUNBO0FBQ0EsNkJBQTZCLDhDQUFNO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUdBQXFHLGdDQUFnQyx1QkFBdUI7QUFDNUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLGdCQUFnQjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxxRUFBcUU7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4REFBVztBQUMxQztBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNEJBQTRCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGVBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsVUFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELElBQUksZ0JBQWdCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsVUFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDRDQUFTO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUhBQW1IO0FBQ25JLGdCQUFnQixxQkFBcUI7QUFDckMsMEJBQTBCLG9EQUFLO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0RBQUs7QUFDN0IsMkJBQTJCLG9EQUFLO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUNBQXlDO0FBQ3pELGNBQWMsb0RBQUs7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscUJBQXFCO0FBQ3JDLGdCQUFnQix1RUFBdUU7QUFDdkY7QUFDQTtBQUNBLGtDQUFrQyxvREFBSztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscURBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1DQUFtQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDJDQUEyQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHdDQUFLO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrQkFBK0I7QUFDL0MsZ0JBQWdCLCtCQUErQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsOEJBQThCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QjtBQUNBO0FBQ0Esb0JBQW9CLGVBQWU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUsZ0JBQWdCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLHVDQUF1Qyw4REFBVztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiw4REFBVztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvU21vb3RoQ29udHJvbHMuanM/MmRhMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IEV1bGVyLCBFdmVudERpc3BhdGNoZXIsIE1hdHJpeDMsIFNwaGVyaWNhbCwgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcbmltcG9ydCB7ICRwYW5FbGVtZW50IH0gZnJvbSAnLi4vZmVhdHVyZXMvY29udHJvbHMuanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnO1xuaW1wb3J0IHsgRGFtcGVyLCBTRVRUTElOR19USU1FIH0gZnJvbSAnLi9EYW1wZXIuanMnO1xuY29uc3QgUEFOX1NFTlNJVElWSVRZID0gMC4wMTg7XG5jb25zdCBUQVBfRElTVEFOQ0UgPSAyO1xuY29uc3QgVEFQX01TID0gMzAwO1xuY29uc3QgdmVjdG9yMiA9IG5ldyBWZWN0b3IyKCk7XG5jb25zdCB2ZWN0b3IzID0gbmV3IFZlY3RvcjMoKTtcbmV4cG9ydCBjb25zdCBERUZBVUxUX09QVElPTlMgPSBPYmplY3QuZnJlZXplKHtcbiAgICBtaW5pbXVtUmFkaXVzOiAwLFxuICAgIG1heGltdW1SYWRpdXM6IEluZmluaXR5LFxuICAgIG1pbmltdW1Qb2xhckFuZ2xlOiBNYXRoLlBJIC8gOCxcbiAgICBtYXhpbXVtUG9sYXJBbmdsZTogTWF0aC5QSSAtIE1hdGguUEkgLyA4LFxuICAgIG1pbmltdW1BemltdXRoYWxBbmdsZTogLUluZmluaXR5LFxuICAgIG1heGltdW1BemltdXRoYWxBbmdsZTogSW5maW5pdHksXG4gICAgbWluaW11bUZpZWxkT2ZWaWV3OiAxMCxcbiAgICBtYXhpbXVtRmllbGRPZlZpZXc6IDQ1LFxuICAgIHRvdWNoQWN0aW9uOiAnbm9uZSdcbn0pO1xuLy8gQ29uc3RhbnRzXG5jb25zdCBLRVlCT0FSRF9PUkJJVF9JTkNSRU1FTlQgPSBNYXRoLlBJIC8gODtcbmNvbnN0IFpPT01fU0VOU0lUSVZJVFkgPSAwLjA0O1xuLy8gVGhlIG1vdmUgc2l6ZSBvbiBwYW4ga2V5IGV2ZW50XG5jb25zdCBQQU5fS0VZX0lOQ1JFTUVOVCA9IDEwO1xuZXhwb3J0IGNvbnN0IEtleUNvZGUgPSB7XG4gICAgUEFHRV9VUDogMzMsXG4gICAgUEFHRV9ET1dOOiAzNCxcbiAgICBMRUZUOiAzNyxcbiAgICBVUDogMzgsXG4gICAgUklHSFQ6IDM5LFxuICAgIERPV046IDQwXG59O1xuZXhwb3J0IGNvbnN0IENoYW5nZVNvdXJjZSA9IHtcbiAgICBVU0VSX0lOVEVSQUNUSU9OOiAndXNlci1pbnRlcmFjdGlvbicsXG4gICAgTk9ORTogJ25vbmUnLFxuICAgIEFVVE9NQVRJQzogJ2F1dG9tYXRpYydcbn07XG4vKipcbiAqIFNtb290aENvbnRyb2xzIGlzIGEgVGhyZWUuanMgaGVscGVyIGZvciBhZGRpbmcgZGVsaWdodGZ1bCBwb2ludGVyIGFuZFxuICoga2V5Ym9hcmQtYmFzZWQgaW5wdXQgdG8gYSBzdGFnZWQgVGhyZWUuanMgc2NlbmUuIEl0cyBBUEkgaXMgdmVyeSBzaW1pbGFyIHRvXG4gKiBPcmJpdENvbnRyb2xzLCBidXQgaXQgb2ZmZXJzIG1vcmUgb3BpbmlvbmF0ZWQgKHN1YmplY3RpdmVseSBtb3JlIGRlbGlnaHRmdWwpXG4gKiBkZWZhdWx0cywgZWFzeSBleHRlbnNpYmlsaXR5IGFuZCBzdWJqZWN0aXZlbHkgYmV0dGVyIG91dC1vZi10aGUtYm94IGtleWJvYXJkXG4gKiBzdXBwb3J0LlxuICpcbiAqIE9uZSBpbXBvcnRhbnQgY2hhbmdlIGNvbXBhcmVkIHRvIE9yYml0Q29udHJvbHMgaXMgdGhhdCB0aGUgYHVwZGF0ZWAgbWV0aG9kXG4gKiBvZiBTbW9vdGhDb250cm9scyBtdXN0IGJlIGludm9rZWQgb24gZXZlcnkgZnJhbWUsIG90aGVyd2lzZSB0aGUgY29udHJvbHNcbiAqIHdpbGwgbm90IGhhdmUgYW4gZWZmZWN0LlxuICpcbiAqIEFub3RoZXIgbm90YWJsZSBkaWZmZXJlbmNlIGNvbXBhcmVkIHRvIE9yYml0Q29udHJvbHMgaXMgdGhhdCBTbW9vdGhDb250cm9sc1xuICogZG9lcyBub3QgY3VycmVudGx5IHN1cHBvcnQgcGFubmluZyAoYnV0IHByb2JhYmx5IHdpbGwgaW4gYSBmdXR1cmUgcmV2aXNpb24pLlxuICpcbiAqIExpa2UgT3JiaXRDb250cm9scywgU21vb3RoQ29udHJvbHMgYXNzdW1lcyB0aGF0IHRoZSBvcmllbnRhdGlvbiBvZiB0aGUgY2FtZXJhXG4gKiBoYXMgYmVlbiBzZXQgaW4gdGVybXMgb2YgcG9zaXRpb24sIHJvdGF0aW9uIGFuZCBzY2FsZSwgc28gaXQgaXMgaW1wb3J0YW50IHRvXG4gKiBlbnN1cmUgdGhhdCB0aGUgY2FtZXJhJ3MgbWF0cml4V29ybGQgaXMgaW4gc3luYyBiZWZvcmUgdXNpbmcgU21vb3RoQ29udHJvbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTbW9vdGhDb250cm9scyBleHRlbmRzIEV2ZW50RGlzcGF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IoY2FtZXJhLCBlbGVtZW50LCBzY2VuZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lO1xuICAgICAgICB0aGlzLm9yYml0U2Vuc2l0aXZpdHkgPSAxO1xuICAgICAgICB0aGlzLmlucHV0U2Vuc2l0aXZpdHkgPSAxO1xuICAgICAgICB0aGlzLmNoYW5nZVNvdXJjZSA9IENoYW5nZVNvdXJjZS5OT05FO1xuICAgICAgICB0aGlzLl9pbnRlcmFjdGlvbkVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZVpvb20gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1VzZXJQb2ludGluZyA9IGZhbHNlO1xuICAgICAgICAvLyBQYW4gc3RhdGVcbiAgICAgICAgdGhpcy5lbmFibGVQYW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmVuYWJsZVRhcCA9IHRydWU7XG4gICAgICAgIHRoaXMucGFuUHJvamVjdGlvbiA9IG5ldyBNYXRyaXgzKCk7XG4gICAgICAgIHRoaXMucGFuUGVyUGl4ZWwgPSAwO1xuICAgICAgICAvLyBJbnRlcm5hbCBvcmJpdGFsIHBvc2l0aW9uIHN0YXRlXG4gICAgICAgIHRoaXMuc3BoZXJpY2FsID0gbmV3IFNwaGVyaWNhbCgpO1xuICAgICAgICB0aGlzLmdvYWxTcGhlcmljYWwgPSBuZXcgU3BoZXJpY2FsKCk7XG4gICAgICAgIHRoaXMudGhldGFEYW1wZXIgPSBuZXcgRGFtcGVyKCk7XG4gICAgICAgIHRoaXMucGhpRGFtcGVyID0gbmV3IERhbXBlcigpO1xuICAgICAgICB0aGlzLnJhZGl1c0RhbXBlciA9IG5ldyBEYW1wZXIoKTtcbiAgICAgICAgdGhpcy5sb2dGb3YgPSBNYXRoLmxvZyhERUZBVUxUX09QVElPTlMubWF4aW11bUZpZWxkT2ZWaWV3KTtcbiAgICAgICAgdGhpcy5nb2FsTG9nRm92ID0gdGhpcy5sb2dGb3Y7XG4gICAgICAgIHRoaXMuZm92RGFtcGVyID0gbmV3IERhbXBlcigpO1xuICAgICAgICAvLyBQb2ludGVyIHN0YXRlXG4gICAgICAgIHRoaXMudG91Y2hNb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5wb2ludGVycyA9IFtdO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IDA7XG4gICAgICAgIHRoaXMuc3RhcnRQb2ludGVyUG9zaXRpb24gPSB7IGNsaWVudFg6IDAsIGNsaWVudFk6IDAgfTtcbiAgICAgICAgdGhpcy5sYXN0U2VwYXJhdGlvbiA9IDA7XG4gICAgICAgIHRoaXMudG91Y2hEZWNpZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25Db250ZXh0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVQYW4pIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwb2ludGVyIG9mIHRoaXMucG9pbnRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWlyZWQgYmVjYXVzZSBvZiBhIGNvbW1vbiBicm93c2VyIGJ1ZyB3aGVyZSB0aGUgY29udGV4dCBtZW51IG5ldmVyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpcmVzIGEgcG9pbnRlcmNhbmNlbCBldmVudC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblBvaW50ZXJVcChuZXcgUG9pbnRlckV2ZW50KCdwb2ludGVyY2FuY2VsJywgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnN0YXJ0UG9pbnRlclBvc2l0aW9uKSwgeyBwb2ludGVySWQ6IHBvaW50ZXIuaWQgfSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudG91Y2hNb2RlWm9vbSA9IChkeCwgZHkpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGlzYWJsZVpvb20pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b3VjaERpc3RhbmNlID0gdGhpcy50d29Ub3VjaERpc3RhbmNlKHRoaXMucG9pbnRlcnNbMF0sIHRoaXMucG9pbnRlcnNbMV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhWm9vbSA9IFpPT01fU0VOU0lUSVZJVFkgKlxuICAgICAgICAgICAgICAgICAgICAodGhpcy5sYXN0U2VwYXJhdGlvbiAtIHRvdWNoRGlzdGFuY2UpICogNTAgLyB0aGlzLnNjZW5lLmhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RTZXBhcmF0aW9uID0gdG91Y2hEaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJBZGp1c3RPcmJpdCgwLCAwLCBkZWx0YVpvb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFuUGVyUGl4ZWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlUGFuKGR4LCBkeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIFdlIGltcGxlbWVudCBvdXIgb3duIHZlcnNpb24gb2YgdGhlIGJyb3dzZXIncyBDU1MgdG91Y2gtYWN0aW9uLCBlbmZvcmNlZCBieVxuICAgICAgICAvLyB0aGlzIGZ1bmN0aW9uLCBiZWNhdXNlIHRoZSBpT1MgaW1wbGVtZW50YXRpb24gb2YgcGFuLXkgaXMgYmFkIGFuZCBkb2Vzbid0XG4gICAgICAgIC8vIG1hdGNoIEFuZHJvaWQuIFNwZWNpZmljYWxseSwgZXZlbiBpZiBhIHRvdWNoIGdlc3R1cmUgYmVnaW5zIGJ5IHBhbm5pbmcgWCxcbiAgICAgICAgLy8gaU9TIHdpbGwgc3dpdGNoIHRvIHNjcm9sbGluZyBhcyBzb29uIGFzIHRoZSBnZXN0dXJlIG1vdmVzIGluIHRoZSBZLCByYXRoZXJcbiAgICAgICAgLy8gdGhhbiBzdGF5aW5nIGluIHRoZSBzYW1lIG1vZGUgdW50aWwgdGhlIGVuZCBvZiB0aGUgZ2VzdHVyZS5cbiAgICAgICAgdGhpcy5kaXNhYmxlU2Nyb2xsID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRvdWNoTW9kZVJvdGF0ZSA9IChkeCwgZHkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdG91Y2hBY3Rpb24gfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgICAgICBpZiAoIXRoaXMudG91Y2hEZWNpZGVkICYmIHRvdWNoQWN0aW9uICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRGVjaWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZHhNYWcgPSBNYXRoLmFicyhkeCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZHlNYWcgPSBNYXRoLmFicyhkeSk7XG4gICAgICAgICAgICAgICAgLy8gSWYgbW90aW9uIGlzIG1vc3RseSB2ZXJ0aWNhbCwgYXNzdW1lIHNjcm9sbGluZyBpcyB0aGUgaW50ZW50LlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoYW5nZVNvdXJjZSA9PT0gQ2hhbmdlU291cmNlLlVTRVJfSU5URVJBQ1RJT04gJiZcbiAgICAgICAgICAgICAgICAgICAgKCh0b3VjaEFjdGlvbiA9PT0gJ3Bhbi15JyAmJiBkeU1hZyA+IGR4TWFnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRvdWNoQWN0aW9uID09PSAncGFuLXgnICYmIGR4TWFnID4gZHlNYWcpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmRpc2FibGVTY3JvbGwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGVQb2ludGVyTW92ZShkeCwgZHkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUG9pbnRlckRvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBvaW50ZXJzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wb2ludGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJtb3ZlJywgdGhpcy5vblBvaW50ZXJNb3ZlKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIHRoaXMub25Qb2ludGVyVXApO1xuICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRGVjaWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2ludGVyUG9zaXRpb24uY2xpZW50WCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFBvaW50ZXJQb3NpdGlvbi5jbGllbnRZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldFBvaW50ZXJDYXB0dXJlKGV2ZW50LnBvaW50ZXJJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucG9pbnRlcnMucHVzaCh7IGNsaWVudFg6IGV2ZW50LmNsaWVudFgsIGNsaWVudFk6IGV2ZW50LmNsaWVudFksIGlkOiBldmVudC5wb2ludGVySWQgfSk7XG4gICAgICAgICAgICB0aGlzLmlzVXNlclBvaW50aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoZXZlbnQucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVNvdXJjZSA9IGV2ZW50LmFsdEtleSA/IC8vIHNldCBieSBpbnRlcmFjdCgpIGluIGNvbnRyb2xzLnRzXG4gICAgICAgICAgICAgICAgICAgIENoYW5nZVNvdXJjZS5BVVRPTUFUSUMgOlxuICAgICAgICAgICAgICAgICAgICBDaGFuZ2VTb3VyY2UuVVNFUl9JTlRFUkFDVElPTjtcbiAgICAgICAgICAgICAgICB0aGlzLm9uVG91Y2hDaGFuZ2UoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTb3VyY2UgPSBDaGFuZ2VTb3VyY2UuVVNFUl9JTlRFUkFDVElPTjtcbiAgICAgICAgICAgICAgICB0aGlzLm9uTW91c2VEb3duKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBvaW50ZXJNb3ZlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwb2ludGVyID0gdGhpcy5wb2ludGVycy5maW5kKChwb2ludGVyKSA9PiBwb2ludGVyLmlkID09PSBldmVudC5wb2ludGVySWQpO1xuICAgICAgICAgICAgaWYgKHBvaW50ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG51bVRvdWNoZXMgPSB0aGlzLnBvaW50ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGR4ID0gKGV2ZW50LmNsaWVudFggLSBwb2ludGVyLmNsaWVudFgpIC8gbnVtVG91Y2hlcztcbiAgICAgICAgICAgIGNvbnN0IGR5ID0gKGV2ZW50LmNsaWVudFkgLSBwb2ludGVyLmNsaWVudFkpIC8gbnVtVG91Y2hlcztcbiAgICAgICAgICAgIGlmIChkeCA9PT0gMCAmJiBkeSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50ZXIuY2xpZW50WCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgICAgICBwb2ludGVyLmNsaWVudFkgPSBldmVudC5jbGllbnRZO1xuICAgICAgICAgICAgaWYgKGV2ZW50LnBvaW50ZXJUeXBlID09PSAndG91Y2gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTb3VyY2UgPSBldmVudC5hbHRLZXkgPyAvLyBzZXQgYnkgaW50ZXJhY3QoKSBpbiBjb250cm9scy50c1xuICAgICAgICAgICAgICAgICAgICBDaGFuZ2VTb3VyY2UuQVVUT01BVElDIDpcbiAgICAgICAgICAgICAgICAgICAgQ2hhbmdlU291cmNlLlVTRVJfSU5URVJBQ1RJT047XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudG91Y2hNb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb2RlKGR4LCBkeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTb3VyY2UgPSBDaGFuZ2VTb3VyY2UuVVNFUl9JTlRFUkFDVElPTjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYW5QZXJQaXhlbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlUGFuKGR4LCBkeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZVBvaW50ZXJNb3ZlKGR4LCBkeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUG9pbnRlclVwID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHRoaXM7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMucG9pbnRlcnMuZmluZEluZGV4KChwb2ludGVyKSA9PiBwb2ludGVyLmlkID09PSBldmVudC5wb2ludGVySWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFsdEtleSBpbmRpY2F0ZXMgYW4gaW50ZXJhY3Rpb24gcHJvbXB0OyBkb24ndCByZXNldCByYWRpdXMgaW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAvLyBhcyBpdCB3aWxsIGNhdXNlIHRoZSBjYW1lcmEgdG8gZHJpZnQuXG4gICAgICAgICAgICBpZiAodGhpcy5wYW5QZXJQaXhlbCA+IDAgJiYgIWV2ZW50LmFsdEtleSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRSYWRpdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBvaW50ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCB0aGlzLm9uUG9pbnRlck1vdmUpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgdGhpcy5vblBvaW50ZXJVcCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLmRpc2FibGVTY3JvbGwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZVBhbiAmJiB0aGlzLmVuYWJsZVRhcCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY2VudGVyKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnRvdWNoTW9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25Ub3VjaENoYW5nZShldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjZW5lLmVsZW1lbnRbJHBhbkVsZW1lbnRdLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5jdXJzb3IgPSAnZ3JhYic7XG4gICAgICAgICAgICB0aGlzLnBhblBlclBpeGVsID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVXNlclBvaW50aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHsgdHlwZTogJ3BvaW50ZXItY2hhbmdlLWVuZCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25XaGVlbCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VTb3VyY2UgPSBDaGFuZ2VTb3VyY2UuVVNFUl9JTlRFUkFDVElPTjtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhWm9vbSA9IGV2ZW50LmRlbHRhWSAqXG4gICAgICAgICAgICAgICAgKGV2ZW50LmRlbHRhTW9kZSA9PSAxID8gMTggOiAxKSAqIFpPT01fU0VOU0lUSVZJVFkgLyAzMDtcbiAgICAgICAgICAgIHRoaXMudXNlckFkanVzdE9yYml0KDAsIDAsIGRlbHRhWm9vbSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgLy8gV2UgdHJhY2sgaWYgdGhlIGtleSBpcyBhY3R1YWxseSBvbmUgd2UgcmVzcG9uZCB0bywgc28gYXMgbm90IHRvXG4gICAgICAgICAgICAvLyBhY2NpZGVudGFsbHkgY2xvYmJlciB1bnJlbGF0ZWQga2V5IGlucHV0cyB3aGVuIHRoZSA8bW9kZWwtdmlld2VyPiBoYXNcbiAgICAgICAgICAgIC8vIGZvY3VzLlxuICAgICAgICAgICAgY29uc3QgeyBjaGFuZ2VTb3VyY2UgfSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVNvdXJjZSA9IENoYW5nZVNvdXJjZS5VU0VSX0lOVEVSQUNUSU9OO1xuICAgICAgICAgICAgY29uc3QgcmVsZXZhbnRLZXkgPSAoZXZlbnQuc2hpZnRLZXkgJiYgdGhpcy5lbmFibGVQYW4pID9cbiAgICAgICAgICAgICAgICB0aGlzLnBhbktleUNvZGVIYW5kbGVyKGV2ZW50KSA6XG4gICAgICAgICAgICAgICAgdGhpcy5vcmJpdFpvb21LZXlDb2RlSGFuZGxlcihldmVudCk7XG4gICAgICAgICAgICBpZiAocmVsZXZhbnRLZXkpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTb3VyY2UgPSBjaGFuZ2VTb3VyY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX09QVElPTlMpO1xuICAgICAgICB0aGlzLnNldE9yYml0KDAsIE1hdGguUEkgLyAyLCAxKTtcbiAgICAgICAgdGhpcy5zZXRGaWVsZE9mVmlldygxMDApO1xuICAgICAgICB0aGlzLmp1bXBUb0dvYWwoKTtcbiAgICB9XG4gICAgZ2V0IGludGVyYWN0aW9uRW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVyYWN0aW9uRW5hYmxlZDtcbiAgICB9XG4gICAgZW5hYmxlSW50ZXJhY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9pbnRlcmFjdGlvbkVuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb25zdCB7IGVsZW1lbnQgfSA9IHRoaXM7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5vblBvaW50ZXJEb3duKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmNhbmNlbCcsIHRoaXMub25Qb2ludGVyVXApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9kaXNhYmxlWm9vbSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCB0aGlzLm9uV2hlZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xuICAgICAgICAgICAgLy8gVGhpcyBsaXR0bGUgYmVhdXR5IGlzIHRvIHdvcmsgYXJvdW5kIGEgV2ViS2l0IGJ1ZyB0aGF0IG90aGVyd2lzZSBtYWtlc1xuICAgICAgICAgICAgLy8gdG91Y2ggZXZlbnRzIHJhbmRvbWx5IG5vdCBjYW5jZWxhYmxlLlxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoKSA9PiB7IH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgdGhpcy5vbkNvbnRleHQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmN1cnNvciA9ICdncmFiJztcbiAgICAgICAgICAgIHRoaXMuX2ludGVyYWN0aW9uRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRvdWNoQWN0aW9uU3R5bGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNhYmxlSW50ZXJhY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9pbnRlcmFjdGlvbkVuYWJsZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZWxlbWVudCB9ID0gdGhpcztcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCB0aGlzLm9uUG9pbnRlckRvd24pO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIHRoaXMub25Qb2ludGVyTW92ZSk7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIHRoaXMub25Qb2ludGVyVXApO1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVyY2FuY2VsJywgdGhpcy5vblBvaW50ZXJVcCk7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5vbldoZWVsKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCB0aGlzLm9uQ29udGV4dCk7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmN1cnNvciA9ICcnO1xuICAgICAgICAgICAgdGhpcy50b3VjaE1vZGUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5faW50ZXJhY3Rpb25FbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRvdWNoQWN0aW9uU3R5bGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgb3B0aW9ucyB0aGF0IGFyZSBjdXJyZW50bHkgY29uZmlndXJlZCBmb3IgdGhlIGNvbnRyb2xzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgICB9XG4gICAgc2V0IGRpc2FibGVab29tKGRpc2FibGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Rpc2FibGVab29tICE9IGRpc2FibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVab29tID0gZGlzYWJsZTtcbiAgICAgICAgICAgIGlmIChkaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5vbldoZWVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMub25XaGVlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRvdWNoQWN0aW9uU3R5bGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb3B5IHRoZSBzcGhlcmljYWwgdmFsdWVzIHRoYXQgcmVwcmVzZW50IHRoZSBjdXJyZW50IGNhbWVyYSBvcmJpdGFsXG4gICAgICogcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGNvbmZpZ3VyZWQgdGFyZ2V0IGludG8gYSBwcm92aWRlZCBTcGhlcmljYWxcbiAgICAgKiBpbnN0YW5jZS4gSWYgbm8gU3BoZXJpY2FsIGlzIHByb3ZpZGVkLCBhIG5ldyBTcGhlcmljYWwgd2lsbCBiZSBhbGxvY2F0ZWRcbiAgICAgKiB0byBjb3B5IHRoZSB2YWx1ZXMgaW50by4gVGhlIFNwaGVyaWNhbCB0aGF0IHZhbHVlcyBhcmUgY29waWVkIGludG8gaXNcbiAgICAgKiByZXR1cm5lZC5cbiAgICAgKi9cbiAgICBnZXRDYW1lcmFTcGhlcmljYWwodGFyZ2V0ID0gbmV3IFNwaGVyaWNhbCgpKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQuY29weSh0aGlzLnNwaGVyaWNhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNhbWVyYSdzIGN1cnJlbnQgdmVydGljYWwgZmllbGQgb2YgdmlldyBpbiBkZWdyZWVzLlxuICAgICAqL1xuICAgIGdldEZpZWxkT2ZWaWV3KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW1lcmEuZm92O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmUgdGhlIF9vcHRpb25zIG9mIHRoZSBjb250cm9scy4gQ29uZmlndXJlZCBfb3B0aW9ucyB3aWxsIGJlXG4gICAgICogbWVyZ2VkIHdpdGggd2hhdGV2ZXIgX29wdGlvbnMgaGF2ZSBhbHJlYWR5IGJlZW4gY29uZmlndXJlZCBmb3IgdGhpc1xuICAgICAqIGNvbnRyb2xzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFwcGx5T3B0aW9ucyhfb3B0aW9ucykge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuX29wdGlvbnMsIF9vcHRpb25zKTtcbiAgICAgICAgLy8gUmUtZXZhbHVhdGVzIGNsYW1waW5nIGJhc2VkIG9uIHBvdGVudGlhbGx5IG5ldyB2YWx1ZXMgZm9yIG1pbi9tYXhcbiAgICAgICAgLy8gcG9sYXIsIGF6aW11dGggYW5kIHJhZGl1czpcbiAgICAgICAgdGhpcy5zZXRPcmJpdCgpO1xuICAgICAgICB0aGlzLnNldEZpZWxkT2ZWaWV3KE1hdGguZXhwKHRoaXMuZ29hbExvZ0ZvdikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBuZWFyIGFuZCBmYXIgcGxhbmVzIG9mIHRoZSBjYW1lcmEuXG4gICAgICovXG4gICAgdXBkYXRlTmVhckZhcihuZWFyUGxhbmUsIGZhclBsYW5lKSB7XG4gICAgICAgIHRoaXMuY2FtZXJhLm5lYXIgPSBNYXRoLm1heChuZWFyUGxhbmUsIGZhclBsYW5lIC8gMTAwMCk7XG4gICAgICAgIHRoaXMuY2FtZXJhLmZhciA9IGZhclBsYW5lO1xuICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGFzcGVjdCByYXRpbyBvZiB0aGUgY2FtZXJhXG4gICAgICovXG4gICAgdXBkYXRlQXNwZWN0KGFzcGVjdCkge1xuICAgICAgICB0aGlzLmNhbWVyYS5hc3BlY3QgPSBhc3BlY3Q7XG4gICAgICAgIHRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBhYnNvbHV0ZSBvcmJpdGFsIGdvYWwgb2YgdGhlIGNhbWVyYS4gVGhlIGNoYW5nZSB3aWxsIGJlXG4gICAgICogYXBwbGllZCBvdmVyIGEgbnVtYmVyIG9mIGZyYW1lcyBkZXBlbmRpbmcgb24gY29uZmlndXJlZCBhY2NlbGVyYXRpb24gYW5kXG4gICAgICogZGFtcGVuaW5nIF9vcHRpb25zLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGludm9raW5nIHRoZSBtZXRob2Qgd2lsbCByZXN1bHQgaW4gdGhlIGNhbWVyYSBjaGFuZ2luZ1xuICAgICAqIHBvc2l0aW9uIGFuZC9vciByb3RhdGlvbiwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgICAqL1xuICAgIHNldE9yYml0KGdvYWxUaGV0YSA9IHRoaXMuZ29hbFNwaGVyaWNhbC50aGV0YSwgZ29hbFBoaSA9IHRoaXMuZ29hbFNwaGVyaWNhbC5waGksIGdvYWxSYWRpdXMgPSB0aGlzLmdvYWxTcGhlcmljYWwucmFkaXVzKSB7XG4gICAgICAgIGNvbnN0IHsgbWluaW11bUF6aW11dGhhbEFuZ2xlLCBtYXhpbXVtQXppbXV0aGFsQW5nbGUsIG1pbmltdW1Qb2xhckFuZ2xlLCBtYXhpbXVtUG9sYXJBbmdsZSwgbWluaW11bVJhZGl1cywgbWF4aW11bVJhZGl1cyB9ID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgY29uc3QgeyB0aGV0YSwgcGhpLCByYWRpdXMgfSA9IHRoaXMuZ29hbFNwaGVyaWNhbDtcbiAgICAgICAgY29uc3QgbmV4dFRoZXRhID0gY2xhbXAoZ29hbFRoZXRhLCBtaW5pbXVtQXppbXV0aGFsQW5nbGUsIG1heGltdW1BemltdXRoYWxBbmdsZSk7XG4gICAgICAgIGlmICghaXNGaW5pdGUobWluaW11bUF6aW11dGhhbEFuZ2xlKSAmJlxuICAgICAgICAgICAgIWlzRmluaXRlKG1heGltdW1BemltdXRoYWxBbmdsZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3BoZXJpY2FsLnRoZXRhID1cbiAgICAgICAgICAgICAgICB0aGlzLndyYXBBbmdsZSh0aGlzLnNwaGVyaWNhbC50aGV0YSAtIG5leHRUaGV0YSkgKyBuZXh0VGhldGE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dFBoaSA9IGNsYW1wKGdvYWxQaGksIG1pbmltdW1Qb2xhckFuZ2xlLCBtYXhpbXVtUG9sYXJBbmdsZSk7XG4gICAgICAgIGNvbnN0IG5leHRSYWRpdXMgPSBjbGFtcChnb2FsUmFkaXVzLCBtaW5pbXVtUmFkaXVzLCBtYXhpbXVtUmFkaXVzKTtcbiAgICAgICAgaWYgKG5leHRUaGV0YSA9PT0gdGhldGEgJiYgbmV4dFBoaSA9PT0gcGhpICYmIG5leHRSYWRpdXMgPT09IHJhZGl1cykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ29hbFNwaGVyaWNhbC50aGV0YSA9IG5leHRUaGV0YTtcbiAgICAgICAgdGhpcy5nb2FsU3BoZXJpY2FsLnBoaSA9IG5leHRQaGk7XG4gICAgICAgIHRoaXMuZ29hbFNwaGVyaWNhbC5yYWRpdXMgPSBuZXh0UmFkaXVzO1xuICAgICAgICB0aGlzLmdvYWxTcGhlcmljYWwubWFrZVNhZmUoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN1YnNldCBvZiBzZXRPcmJpdCgpIGFib3ZlLCB3aGljaCBvbmx5IHNldHMgdGhlIGNhbWVyYSdzIHJhZGl1cy5cbiAgICAgKi9cbiAgICBzZXRSYWRpdXMocmFkaXVzKSB7XG4gICAgICAgIHRoaXMuZ29hbFNwaGVyaWNhbC5yYWRpdXMgPSByYWRpdXM7XG4gICAgICAgIHRoaXMuc2V0T3JiaXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZ29hbCBmaWVsZCBvZiB2aWV3IGZvciB0aGUgY2FtZXJhXG4gICAgICovXG4gICAgc2V0RmllbGRPZlZpZXcoZm92KSB7XG4gICAgICAgIGNvbnN0IHsgbWluaW11bUZpZWxkT2ZWaWV3LCBtYXhpbXVtRmllbGRPZlZpZXcgfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIGZvdiA9IGNsYW1wKGZvdiwgbWluaW11bUZpZWxkT2ZWaWV3LCBtYXhpbXVtRmllbGRPZlZpZXcpO1xuICAgICAgICB0aGlzLmdvYWxMb2dGb3YgPSBNYXRoLmxvZyhmb3YpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzbW9vdGhpbmcgZGVjYXkgdGltZS5cbiAgICAgKi9cbiAgICBzZXREYW1wZXJEZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpIHtcbiAgICAgICAgdGhpcy50aGV0YURhbXBlci5zZXREZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpO1xuICAgICAgICB0aGlzLnBoaURhbXBlci5zZXREZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpO1xuICAgICAgICB0aGlzLnJhZGl1c0RhbXBlci5zZXREZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpO1xuICAgICAgICB0aGlzLmZvdkRhbXBlci5zZXREZWNheVRpbWUoZGVjYXlNaWxsaXNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3QgdGhlIG9yYml0YWwgcG9zaXRpb24gb2YgdGhlIGNhbWVyYSByZWxhdGl2ZSB0byBpdHMgY3VycmVudCBvcmJpdGFsXG4gICAgICogcG9zaXRpb24uIERvZXMgbm90IGxldCB0aGUgdGhldGEgZ29hbCBnZXQgbW9yZSB0aGFuIHBpIGFoZWFkIG9mIHRoZSBjdXJyZW50XG4gICAgICogdGhldGEsIHdoaWNoIGVuc3VyZXMgaW50ZXJwb2xhdGlvbiBjb250aW51ZXMgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgZGVsdGEuXG4gICAgICogVGhlIGRlbHRhWm9vbSBwYXJhbWV0ZXIgYWRqdXN0cyBib3RoIHRoZSBmaWVsZCBvZiB2aWV3IGFuZCB0aGUgb3JiaXQgcmFkaXVzXG4gICAgICogc3VjaCB0aGF0IHRoZXkgcHJvZ3Jlc3MgYWNyb3NzIHRoZWlyIGFsbG93ZWQgcmFuZ2VzIGluIHN5bmMuXG4gICAgICovXG4gICAgYWRqdXN0T3JiaXQoZGVsdGFUaGV0YSwgZGVsdGFQaGksIGRlbHRhWm9vbSkge1xuICAgICAgICBjb25zdCB7IHRoZXRhLCBwaGksIHJhZGl1cyB9ID0gdGhpcy5nb2FsU3BoZXJpY2FsO1xuICAgICAgICBjb25zdCB7IG1pbmltdW1SYWRpdXMsIG1heGltdW1SYWRpdXMsIG1pbmltdW1GaWVsZE9mVmlldywgbWF4aW11bUZpZWxkT2ZWaWV3IH0gPSB0aGlzLl9vcHRpb25zO1xuICAgICAgICBjb25zdCBkVGhldGEgPSB0aGlzLnNwaGVyaWNhbC50aGV0YSAtIHRoZXRhO1xuICAgICAgICBjb25zdCBkVGhldGFMaW1pdCA9IE1hdGguUEkgLSAwLjAwMTtcbiAgICAgICAgY29uc3QgZ29hbFRoZXRhID0gdGhldGEgLSBjbGFtcChkZWx0YVRoZXRhLCAtZFRoZXRhTGltaXQgLSBkVGhldGEsIGRUaGV0YUxpbWl0IC0gZFRoZXRhKTtcbiAgICAgICAgY29uc3QgZ29hbFBoaSA9IHBoaSAtIGRlbHRhUGhpO1xuICAgICAgICBjb25zdCBkZWx0YVJhdGlvID0gZGVsdGFab29tID09PSAwID9cbiAgICAgICAgICAgIDAgOlxuICAgICAgICAgICAgKChkZWx0YVpvb20gPiAwID8gbWF4aW11bVJhZGl1cyA6IG1pbmltdW1SYWRpdXMpIC0gcmFkaXVzKSAvXG4gICAgICAgICAgICAgICAgKE1hdGgubG9nKGRlbHRhWm9vbSA+IDAgPyBtYXhpbXVtRmllbGRPZlZpZXcgOiBtaW5pbXVtRmllbGRPZlZpZXcpIC1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nb2FsTG9nRm92KTtcbiAgICAgICAgY29uc3QgZ29hbFJhZGl1cyA9IHJhZGl1cyArXG4gICAgICAgICAgICBkZWx0YVpvb20gKlxuICAgICAgICAgICAgICAgIChpc0Zpbml0ZShkZWx0YVJhdGlvKSA/IGRlbHRhUmF0aW8gOlxuICAgICAgICAgICAgICAgICAgICAobWF4aW11bVJhZGl1cyAtIG1pbmltdW1SYWRpdXMpICogMik7XG4gICAgICAgIHRoaXMuc2V0T3JiaXQoZ29hbFRoZXRhLCBnb2FsUGhpLCBnb2FsUmFkaXVzKTtcbiAgICAgICAgaWYgKGRlbHRhWm9vbSAhPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgZ29hbExvZ0ZvdiA9IHRoaXMuZ29hbExvZ0ZvdiArIGRlbHRhWm9vbTtcbiAgICAgICAgICAgIHRoaXMuc2V0RmllbGRPZlZpZXcoTWF0aC5leHAoZ29hbExvZ0ZvdikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vdmUgdGhlIGNhbWVyYSBpbnN0YW50bHkgaW5zdGVhZCBvZiBhY2NlbGVyYXRpbmcgdG93YXJkIHRoZSBnb2FsXG4gICAgICogcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICBqdW1wVG9Hb2FsKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZSgwLCBTRVRUTElOR19USU1FKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGNvbnRyb2xzLiBJbiBtb3N0IGNhc2VzLCB0aGlzIHdpbGwgcmVzdWx0IGluIHRoZSBjYW1lcmFcbiAgICAgKiBpbnRlcnBvbGF0aW5nIGl0cyBwb3NpdGlvbiBhbmQgcm90YXRpb24gdW50aWwgaXQgbGluZXMgdXAgd2l0aCB0aGVcbiAgICAgKiBkZXNpZ25hdGVkIGdvYWwgb3JiaXRhbCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIFRpbWUgYW5kIGRlbHRhIGFyZSBtZWFzdXJlZCBpbiBtaWxsaXNlY29uZHMuXG4gICAgICovXG4gICAgdXBkYXRlKF90aW1lLCBkZWx0YSkge1xuICAgICAgICBpZiAodGhpcy5pc1N0YXRpb25hcnkoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgbWF4aW11bVBvbGFyQW5nbGUsIG1heGltdW1SYWRpdXMgfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIGNvbnN0IGRUaGV0YSA9IHRoaXMuc3BoZXJpY2FsLnRoZXRhIC0gdGhpcy5nb2FsU3BoZXJpY2FsLnRoZXRhO1xuICAgICAgICBpZiAoTWF0aC5hYnMoZFRoZXRhKSA+IE1hdGguUEkgJiZcbiAgICAgICAgICAgICFpc0Zpbml0ZSh0aGlzLl9vcHRpb25zLm1pbmltdW1BemltdXRoYWxBbmdsZSkgJiZcbiAgICAgICAgICAgICFpc0Zpbml0ZSh0aGlzLl9vcHRpb25zLm1heGltdW1BemltdXRoYWxBbmdsZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3BoZXJpY2FsLnRoZXRhIC09IE1hdGguc2lnbihkVGhldGEpICogMiAqIE1hdGguUEk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcGhlcmljYWwudGhldGEgPSB0aGlzLnRoZXRhRGFtcGVyLnVwZGF0ZSh0aGlzLnNwaGVyaWNhbC50aGV0YSwgdGhpcy5nb2FsU3BoZXJpY2FsLnRoZXRhLCBkZWx0YSwgTWF0aC5QSSk7XG4gICAgICAgIHRoaXMuc3BoZXJpY2FsLnBoaSA9IHRoaXMucGhpRGFtcGVyLnVwZGF0ZSh0aGlzLnNwaGVyaWNhbC5waGksIHRoaXMuZ29hbFNwaGVyaWNhbC5waGksIGRlbHRhLCBtYXhpbXVtUG9sYXJBbmdsZSk7XG4gICAgICAgIHRoaXMuc3BoZXJpY2FsLnJhZGl1cyA9IHRoaXMucmFkaXVzRGFtcGVyLnVwZGF0ZSh0aGlzLnNwaGVyaWNhbC5yYWRpdXMsIHRoaXMuZ29hbFNwaGVyaWNhbC5yYWRpdXMsIGRlbHRhLCBtYXhpbXVtUmFkaXVzKTtcbiAgICAgICAgdGhpcy5sb2dGb3YgPSB0aGlzLmZvdkRhbXBlci51cGRhdGUodGhpcy5sb2dGb3YsIHRoaXMuZ29hbExvZ0ZvdiwgZGVsdGEsIDEpO1xuICAgICAgICB0aGlzLm1vdmVDYW1lcmEoKTtcbiAgICB9XG4gICAgdXBkYXRlVG91Y2hBY3Rpb25TdHlsZSgpIHtcbiAgICAgICAgY29uc3QgeyBzdHlsZSB9ID0gdGhpcy5lbGVtZW50O1xuICAgICAgICBpZiAodGhpcy5faW50ZXJhY3Rpb25FbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCB7IHRvdWNoQWN0aW9uIH0gPSB0aGlzLl9vcHRpb25zO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Rpc2FibGVab29tICYmIHRvdWNoQWN0aW9uICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS50b3VjaEFjdGlvbiA9ICdtYW5pcHVsYXRpb24nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3R5bGUudG91Y2hBY3Rpb24gPSB0b3VjaEFjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0eWxlLnRvdWNoQWN0aW9uID0gJyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNTdGF0aW9uYXJ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nb2FsU3BoZXJpY2FsLnRoZXRhID09PSB0aGlzLnNwaGVyaWNhbC50aGV0YSAmJlxuICAgICAgICAgICAgdGhpcy5nb2FsU3BoZXJpY2FsLnBoaSA9PT0gdGhpcy5zcGhlcmljYWwucGhpICYmXG4gICAgICAgICAgICB0aGlzLmdvYWxTcGhlcmljYWwucmFkaXVzID09PSB0aGlzLnNwaGVyaWNhbC5yYWRpdXMgJiZcbiAgICAgICAgICAgIHRoaXMuZ29hbExvZ0ZvdiA9PT0gdGhpcy5sb2dGb3Y7XG4gICAgfVxuICAgIGRpc3BhdGNoQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoeyB0eXBlOiAnY2hhbmdlJywgc291cmNlOiB0aGlzLmNoYW5nZVNvdXJjZSB9KTtcbiAgICB9XG4gICAgbW92ZUNhbWVyYSgpIHtcbiAgICAgICAgLy8gRGVyaXZlIHRoZSBuZXcgY2FtZXJhIHBvc2l0aW9uIGZyb20gdGhlIHVwZGF0ZWQgc3BoZXJpY2FsOlxuICAgICAgICB0aGlzLnNwaGVyaWNhbC5tYWtlU2FmZSgpO1xuICAgICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi5zZXRGcm9tU3BoZXJpY2FsKHRoaXMuc3BoZXJpY2FsKTtcbiAgICAgICAgdGhpcy5jYW1lcmEuc2V0Um90YXRpb25Gcm9tRXVsZXIobmV3IEV1bGVyKHRoaXMuc3BoZXJpY2FsLnBoaSAtIE1hdGguUEkgLyAyLCB0aGlzLnNwaGVyaWNhbC50aGV0YSwgMCwgJ1lYWicpKTtcbiAgICAgICAgaWYgKHRoaXMuY2FtZXJhLmZvdiAhPT0gTWF0aC5leHAodGhpcy5sb2dGb3YpKSB7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5mb3YgPSBNYXRoLmV4cCh0aGlzLmxvZ0Zvdik7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaENoYW5nZSgpO1xuICAgIH1cbiAgICB1c2VyQWRqdXN0T3JiaXQoZGVsdGFUaGV0YSwgZGVsdGFQaGksIGRlbHRhWm9vbSkge1xuICAgICAgICB0aGlzLmFkanVzdE9yYml0KGRlbHRhVGhldGEgKiB0aGlzLm9yYml0U2Vuc2l0aXZpdHkgKiB0aGlzLmlucHV0U2Vuc2l0aXZpdHksIGRlbHRhUGhpICogdGhpcy5vcmJpdFNlbnNpdGl2aXR5ICogdGhpcy5pbnB1dFNlbnNpdGl2aXR5LCBkZWx0YVpvb20gKiB0aGlzLmlucHV0U2Vuc2l0aXZpdHkpO1xuICAgICAgICAvLyBBbHdheXMgbWFrZSBzdXJlIHRoYXQgYW4gaW5pdGlhbCBldmVudCBpcyB0cmlnZ2VyZWQgaW4gY2FzZSB0aGVyZSBpc1xuICAgICAgICAvLyBjb250ZW50aW9uIGJldHdlZW4gdXNlciBpbnRlcmFjdGlvbiBhbmQgaW1wZXJhdGl2ZSBjaGFuZ2VzLiBUaGlzIGluaXRpYWxcbiAgICAgICAgLy8gZXZlbnQgd2lsbCBnaXZlIGV4dGVybmFsIG9ic2VydmVycyB0aGF0IGNoYW5jZSB0byBvYnNlcnZlIHRoYXRcbiAgICAgICAgLy8gaW50ZXJhY3Rpb24gb2NjdXJyZWQgYXQgYWxsOlxuICAgICAgICB0aGlzLmRpc3BhdGNoQ2hhbmdlKCk7XG4gICAgfVxuICAgIC8vIFdyYXBzIHRvIGJldHdlZW4gLXBpIGFuZCBwaVxuICAgIHdyYXBBbmdsZShyYWRpYW5zKSB7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSAocmFkaWFucyArIE1hdGguUEkpIC8gKDIgKiBNYXRoLlBJKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlZCA9IG5vcm1hbGl6ZWQgLSBNYXRoLmZsb29yKG5vcm1hbGl6ZWQpO1xuICAgICAgICByZXR1cm4gd3JhcHBlZCAqIDIgKiBNYXRoLlBJIC0gTWF0aC5QSTtcbiAgICB9XG4gICAgcGl4ZWxMZW5ndGhUb1NwaGVyaWNhbEFuZ2xlKHBpeGVsTGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiAyICogTWF0aC5QSSAqIHBpeGVsTGVuZ3RoIC8gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICB9XG4gICAgdHdvVG91Y2hEaXN0YW5jZSh0b3VjaE9uZSwgdG91Y2hUd28pIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnRYOiB4T25lLCBjbGllbnRZOiB5T25lIH0gPSB0b3VjaE9uZTtcbiAgICAgICAgY29uc3QgeyBjbGllbnRYOiB4VHdvLCBjbGllbnRZOiB5VHdvIH0gPSB0b3VjaFR3bztcbiAgICAgICAgY29uc3QgeERlbHRhID0geFR3byAtIHhPbmU7XG4gICAgICAgIGNvbnN0IHlEZWx0YSA9IHlUd28gLSB5T25lO1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHhEZWx0YSAqIHhEZWx0YSArIHlEZWx0YSAqIHlEZWx0YSk7XG4gICAgfVxuICAgIGhhbmRsZVNpbmdsZVBvaW50ZXJNb3ZlKGR4LCBkeSkge1xuICAgICAgICBjb25zdCBkZWx0YVRoZXRhID0gdGhpcy5waXhlbExlbmd0aFRvU3BoZXJpY2FsQW5nbGUoZHgpO1xuICAgICAgICBjb25zdCBkZWx0YVBoaSA9IHRoaXMucGl4ZWxMZW5ndGhUb1NwaGVyaWNhbEFuZ2xlKGR5KTtcbiAgICAgICAgaWYgKHRoaXMuaXNVc2VyUG9pbnRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLmlzVXNlclBvaW50aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh7IHR5cGU6ICdwb2ludGVyLWNoYW5nZS1zdGFydCcgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51c2VyQWRqdXN0T3JiaXQoZGVsdGFUaGV0YSwgZGVsdGFQaGksIDApO1xuICAgIH1cbiAgICBpbml0aWFsaXplUGFuKCkge1xuICAgICAgICBjb25zdCB7IHRoZXRhLCBwaGkgfSA9IHRoaXMuc3BoZXJpY2FsO1xuICAgICAgICBjb25zdCBwc2kgPSB0aGV0YSAtIHRoaXMuc2NlbmUueWF3O1xuICAgICAgICB0aGlzLnBhblBlclBpeGVsID0gUEFOX1NFTlNJVElWSVRZIC8gdGhpcy5zY2VuZS5oZWlnaHQ7XG4gICAgICAgIHRoaXMucGFuUHJvamVjdGlvbi5zZXQoLU1hdGguY29zKHBzaSksIC1NYXRoLmNvcyhwaGkpICogTWF0aC5zaW4ocHNpKSwgMCwgMCwgTWF0aC5zaW4ocGhpKSwgMCwgTWF0aC5zaW4ocHNpKSwgLU1hdGguY29zKHBoaSkgKiBNYXRoLmNvcyhwc2kpLCAwKTtcbiAgICB9XG4gICAgbW92ZVBhbihkeCwgZHkpIHtcbiAgICAgICAgY29uc3QgeyBzY2VuZSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgZHh5ID0gdmVjdG9yMy5zZXQoZHgsIGR5LCAwKS5tdWx0aXBseVNjYWxhcih0aGlzLmlucHV0U2Vuc2l0aXZpdHkpO1xuICAgICAgICBjb25zdCBtZXRlcnNQZXJQaXhlbCA9IHRoaXMuc3BoZXJpY2FsLnJhZGl1cyAqIE1hdGguZXhwKHRoaXMubG9nRm92KSAqIHRoaXMucGFuUGVyUGl4ZWw7XG4gICAgICAgIGR4eS5tdWx0aXBseVNjYWxhcihtZXRlcnNQZXJQaXhlbCk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHNjZW5lLmdldFRhcmdldCgpO1xuICAgICAgICB0YXJnZXQuYWRkKGR4eS5hcHBseU1hdHJpeDModGhpcy5wYW5Qcm9qZWN0aW9uKSk7XG4gICAgICAgIHNjZW5lLmJvdW5kaW5nU3BoZXJlLmNsYW1wUG9pbnQodGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgICBzY2VuZS5zZXRUYXJnZXQodGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueik7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hDaGFuZ2UoKTtcbiAgICB9XG4gICAgcmVjZW50ZXIocG9pbnRlcikge1xuICAgICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgPiB0aGlzLnN0YXJ0VGltZSArIFRBUF9NUyB8fFxuICAgICAgICAgICAgTWF0aC5hYnMocG9pbnRlci5jbGllbnRYIC0gdGhpcy5zdGFydFBvaW50ZXJQb3NpdGlvbi5jbGllbnRYKSA+XG4gICAgICAgICAgICAgICAgVEFQX0RJU1RBTkNFIHx8XG4gICAgICAgICAgICBNYXRoLmFicyhwb2ludGVyLmNsaWVudFkgLSB0aGlzLnN0YXJ0UG9pbnRlclBvc2l0aW9uLmNsaWVudFkpID5cbiAgICAgICAgICAgICAgICBUQVBfRElTVEFOQ0UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHNjZW5lIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBoaXQgPSBzY2VuZS5wb3NpdGlvbkFuZE5vcm1hbEZyb21Qb2ludChzY2VuZS5nZXROREMocG9pbnRlci5jbGllbnRYLCBwb2ludGVyLmNsaWVudFkpKTtcbiAgICAgICAgaWYgKGhpdCA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB7IGNhbWVyYVRhcmdldCB9ID0gc2NlbmUuZWxlbWVudDtcbiAgICAgICAgICAgIHNjZW5lLmVsZW1lbnQuY2FtZXJhVGFyZ2V0ID0gJyc7XG4gICAgICAgICAgICBzY2VuZS5lbGVtZW50LmNhbWVyYVRhcmdldCA9IGNhbWVyYVRhcmdldDtcbiAgICAgICAgICAgIC8vIFpvb20gYWxsIHRoZSB3YXkgb3V0LlxuICAgICAgICAgICAgdGhpcy51c2VyQWRqdXN0T3JiaXQoMCwgMCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzY2VuZS50YXJnZXQud29ybGRUb0xvY2FsKGhpdC5wb3NpdGlvbik7XG4gICAgICAgICAgICBzY2VuZS5zZXRUYXJnZXQoaGl0LnBvc2l0aW9uLngsIGhpdC5wb3NpdGlvbi55LCBoaXQucG9zaXRpb24ueik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVzZXRSYWRpdXMoKSB7XG4gICAgICAgIGNvbnN0IHsgc2NlbmUgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGhpdCA9IHNjZW5lLnBvc2l0aW9uQW5kTm9ybWFsRnJvbVBvaW50KHZlY3RvcjIuc2V0KDAsIDApKTtcbiAgICAgICAgaWYgKGhpdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudGFyZ2V0LndvcmxkVG9Mb2NhbChoaXQucG9zaXRpb24pO1xuICAgICAgICBjb25zdCBnb2FsVGFyZ2V0ID0gc2NlbmUuZ2V0VGFyZ2V0KCk7XG4gICAgICAgIGNvbnN0IHsgdGhldGEsIHBoaSB9ID0gdGhpcy5zcGhlcmljYWw7XG4gICAgICAgIC8vIFNldCB0YXJnZXQgdG8gc3VyZmFjZSBoaXQgcG9pbnQsIGV4Y2VwdCB0aGUgdGFyZ2V0IGlzIHN0aWxsIHNldHRsaW5nLFxuICAgICAgICAvLyBzbyBvZmZzZXQgdGhlIGdvYWwgYWNjb3JkaW5nbHkgc28gdGhlIHRyYW5zaXRpb24gaXMgc21vb3RoIGV2ZW4gdGhvdWdoXG4gICAgICAgIC8vIHRoaXMgd2lsbCBkcmlmdCB0aGUgdGFyZ2V0IHNsaWdodGx5IGF3YXkgZnJvbSB0aGUgaGl0IHBvaW50LlxuICAgICAgICBjb25zdCBwc2kgPSB0aGV0YSAtIHNjZW5lLnlhdztcbiAgICAgICAgY29uc3QgbiA9IHZlY3RvcjMuc2V0KE1hdGguc2luKHBoaSkgKiBNYXRoLnNpbihwc2kpLCBNYXRoLmNvcyhwaGkpLCBNYXRoLnNpbihwaGkpICogTWF0aC5jb3MocHNpKSk7XG4gICAgICAgIGNvbnN0IGRyID0gbi5kb3QoaGl0LnBvc2l0aW9uLnN1Yihnb2FsVGFyZ2V0KSk7XG4gICAgICAgIGdvYWxUYXJnZXQuYWRkKG4ubXVsdGlwbHlTY2FsYXIoZHIpKTtcbiAgICAgICAgc2NlbmUuc2V0VGFyZ2V0KGdvYWxUYXJnZXQueCwgZ29hbFRhcmdldC55LCBnb2FsVGFyZ2V0LnopO1xuICAgICAgICAvLyBDaGFuZ2UgdGhlIGNhbWVyYSByYWRpdXMgdG8gbWF0Y2ggdGhlIGNoYW5nZSBpbiB0YXJnZXQgc28gdGhhdCB0aGVcbiAgICAgICAgLy8gY2FtZXJhIGl0c2VsZiBkb2VzIG5vdCBtb3ZlLCB1bmxlc3MgaXQgaGl0cyBhIHJhZGl1cyBib3VuZC5cbiAgICAgICAgdGhpcy5zZXRPcmJpdCh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdGhpcy5nb2FsU3BoZXJpY2FsLnJhZGl1cyAtIGRyKTtcbiAgICB9XG4gICAgb25Ub3VjaENoYW5nZShldmVudCkge1xuICAgICAgICBpZiAodGhpcy5wb2ludGVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMudG91Y2hNb2RlID0gdGhpcy50b3VjaE1vZGVSb3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGlzYWJsZVpvb20pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuZGlzYWJsZVNjcm9sbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50b3VjaE1vZGUgPSAodGhpcy50b3VjaERlY2lkZWQgJiYgdGhpcy50b3VjaE1vZGUgPT09IG51bGwpID9cbiAgICAgICAgICAgICAgICBudWxsIDpcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW9kZVpvb207XG4gICAgICAgICAgICB0aGlzLnRvdWNoRGVjaWRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5kaXNhYmxlU2Nyb2xsLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgdGhpcy5sYXN0U2VwYXJhdGlvbiA9XG4gICAgICAgICAgICAgICAgdGhpcy50d29Ub3VjaERpc3RhbmNlKHRoaXMucG9pbnRlcnNbMF0sIHRoaXMucG9pbnRlcnNbMV0pO1xuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlUGFuICYmIHRoaXMudG91Y2hNb2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVQYW4oKTtcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmFsdEtleSkgeyAvLyB1c2VyIGludGVyYWN0aW9uLCBub3QgcHJvbXB0XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZWxlbWVudFskcGFuRWxlbWVudF0uc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucGFuUGVyUGl4ZWwgPSAwO1xuICAgICAgICBpZiAodGhpcy5lbmFibGVQYW4gJiZcbiAgICAgICAgICAgIChldmVudC5idXR0b24gPT09IDIgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgICAgICAgZXZlbnQuc2hpZnRLZXkpKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVQYW4oKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuZWxlbWVudFskcGFuRWxlbWVudF0uc3R5bGUub3BhY2l0eSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIG9yYml0IGFuZCBab29tIGtleSBwcmVzc2VzXG4gICAgICogVXNlcyBjb25zdGFudHMgZm9yIHRoZSBpbmNyZW1lbnQuXG4gICAgICogQHBhcmFtIGV2ZW50IFRoZSBrZXlib2FyZCBldmVudCBmb3IgdGhlIC5rZXkgdmFsdWVcbiAgICAgKiBAcmV0dXJucyBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBrZXkgZXZlbnQgaGFzIGJlZW4gaGFuZGxlZFxuICAgICAqL1xuICAgIG9yYml0Wm9vbUtleUNvZGVIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIGxldCByZWxldmFudEtleSA9IHRydWU7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgICAgICAgICBjYXNlICdQYWdlVXAnOlxuICAgICAgICAgICAgICAgIHRoaXMudXNlckFkanVzdE9yYml0KDAsIDAsIFpPT01fU0VOU0lUSVZJVFkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnUGFnZURvd24nOlxuICAgICAgICAgICAgICAgIHRoaXMudXNlckFkanVzdE9yYml0KDAsIDAsIC0xICogWk9PTV9TRU5TSVRJVklUWSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJBZGp1c3RPcmJpdCgwLCAtS0VZQk9BUkRfT1JCSVRfSU5DUkVNRU5ULCAwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93RG93bic6XG4gICAgICAgICAgICAgICAgdGhpcy51c2VyQWRqdXN0T3JiaXQoMCwgS0VZQk9BUkRfT1JCSVRfSU5DUkVNRU5ULCAwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICAgICAgdGhpcy51c2VyQWRqdXN0T3JiaXQoLUtFWUJPQVJEX09SQklUX0lOQ1JFTUVOVCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJBZGp1c3RPcmJpdChLRVlCT0FSRF9PUkJJVF9JTkNSRU1FTlQsIDAsIDApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWxldmFudEtleSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWxldmFudEtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgUGFuIGtleSBwcmVzc2VzXG4gICAgICogVXNlcyBjb25zdGFudHMgZm9yIHRoZSBpbmNyZW1lbnQuXG4gICAgICogQHBhcmFtIGV2ZW50IFRoZSBrZXlib2FyZCBldmVudCBmb3IgdGhlIC5rZXkgdmFsdWVcbiAgICAgKiBAcmV0dXJucyBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBrZXkgZXZlbnQgaGFzIGJlZW4gaGFuZGxlZFxuICAgICAqL1xuICAgIHBhbktleUNvZGVIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBhbigpO1xuICAgICAgICBsZXQgcmVsZXZhbnRLZXkgPSB0cnVlO1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlUGFuKDAsIC0xICogUEFOX0tFWV9JTkNSRU1FTlQpOyAvLyBUaGlzIGlzIHRoZSBuZWdhdGl2ZSBvbmUgc28gdGhhdCB0aGVcbiAgICAgICAgICAgICAgICAvLyBtb2RlbCBhcHBlYXJzIHRvIG1vdmUgYXMgdGhlIGFycm93XG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0aW9uIHJhdGhlciB0aGFuIHRoZSB2aWV3IG1vdmluZ1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVQYW4oMCwgUEFOX0tFWV9JTkNSRU1FTlQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVQYW4oLTEgKiBQQU5fS0VZX0lOQ1JFTUVOVCwgMCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVQYW4oUEFOX0tFWV9JTkNSRU1FTlQsIDApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZWxldmFudEtleSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWxldmFudEtleTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TbW9vdGhDb250cm9scy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/SmoothControls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/TextureUtils.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/TextureUtils.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ TextureUtils)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var three_examples_jsm_loaders_RGBELoader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three/examples/jsm/loaders/RGBELoader.js */ \"(ssr)/./node_modules/three/examples/jsm/loaders/RGBELoader.js\");\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* harmony import */ var _EnvironmentScene_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnvironmentScene.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/EnvironmentScene.js\");\n/* harmony import */ var _EnvironmentSceneAlt_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EnvironmentSceneAlt.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/EnvironmentSceneAlt.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n\n\nconst GENERATED_SIGMA = 0.04;\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\nconst HDR_FILE_RE = /\\.hdr(\\.js)?$/;\nconst ldrLoader = new three__WEBPACK_IMPORTED_MODULE_3__.TextureLoader();\nconst hdrLoader = new three_examples_jsm_loaders_RGBELoader_js__WEBPACK_IMPORTED_MODULE_4__.RGBELoader();\nhdrLoader.setDataType(three__WEBPACK_IMPORTED_MODULE_3__.HalfFloatType);\nclass TextureUtils extends three__WEBPACK_IMPORTED_MODULE_3__.EventDispatcher {\n    constructor(threeRenderer) {\n        super();\n        this.threeRenderer = threeRenderer;\n        this.generatedEnvironmentMap = null;\n        this.generatedEnvironmentMapAlt = null;\n        this.skyboxCache = new Map();\n        this.blurMaterial = null;\n        this.blurScene = null;\n    }\n    async load(url, progressCallback = () => { }) {\n        try {\n            const isHDR = HDR_FILE_RE.test(url);\n            const loader = isHDR ? hdrLoader : ldrLoader;\n            const texture = await new Promise((resolve, reject) => loader.load(url, resolve, (event) => {\n                progressCallback(event.loaded / event.total * 0.9);\n            }, reject));\n            progressCallback(1.0);\n            texture.name = url;\n            texture.mapping = three__WEBPACK_IMPORTED_MODULE_3__.EquirectangularReflectionMapping;\n            if (!isHDR) {\n                texture.encoding = three__WEBPACK_IMPORTED_MODULE_3__.sRGBEncoding;\n            }\n            return texture;\n        }\n        finally {\n            if (progressCallback) {\n                progressCallback(1);\n            }\n        }\n    }\n    /**\n     * Returns a { skybox, environmentMap } object with the targets/textures\n     * accordingly. `skybox` is a WebGLRenderCubeTarget, and `environmentMap`\n     * is a Texture from a WebGLRenderCubeTarget.\n     */\n    async generateEnvironmentMapAndSkybox(skyboxUrl = null, environmentMapUrl = null, progressCallback = () => { }) {\n        const useAltEnvironment = environmentMapUrl !== 'legacy';\n        if (environmentMapUrl === 'legacy' || environmentMapUrl === 'neutral') {\n            environmentMapUrl = null;\n        }\n        environmentMapUrl = (0,_utilities_js__WEBPACK_IMPORTED_MODULE_0__.deserializeUrl)(environmentMapUrl);\n        let skyboxLoads = Promise.resolve(null);\n        let environmentMapLoads;\n        // If we have a skybox URL, attempt to load it as a cubemap\n        if (!!skyboxUrl) {\n            skyboxLoads = this.loadEquirectFromUrl(skyboxUrl, progressCallback);\n        }\n        if (!!environmentMapUrl) {\n            // We have an available environment map URL\n            environmentMapLoads =\n                this.loadEquirectFromUrl(environmentMapUrl, progressCallback);\n        }\n        else if (!!skyboxUrl) {\n            // Fallback to deriving the environment map from an available skybox\n            environmentMapLoads =\n                this.loadEquirectFromUrl(skyboxUrl, progressCallback);\n        }\n        else {\n            // Fallback to generating the environment map\n            environmentMapLoads = useAltEnvironment ?\n                this.loadGeneratedEnvironmentMapAlt() :\n                this.loadGeneratedEnvironmentMap();\n        }\n        const [environmentMap, skybox] = await Promise.all([environmentMapLoads, skyboxLoads]);\n        if (environmentMap == null) {\n            throw new Error('Failed to load environment map.');\n        }\n        return { environmentMap, skybox };\n    }\n    /**\n     * Loads an equirect Texture from a given URL, for use as a skybox.\n     */\n    async loadEquirectFromUrl(url, progressCallback) {\n        if (!this.skyboxCache.has(url)) {\n            const skyboxMapLoads = this.load(url, progressCallback);\n            this.skyboxCache.set(url, skyboxMapLoads);\n        }\n        return this.skyboxCache.get(url);\n    }\n    async GenerateEnvironmentMap(scene, name) {\n        await (0,_utilities_js__WEBPACK_IMPORTED_MODULE_0__.timePasses)();\n        const renderer = this.threeRenderer;\n        const cubeTarget = new three__WEBPACK_IMPORTED_MODULE_3__.WebGLCubeRenderTarget(256, {\n            generateMipmaps: false,\n            type: three__WEBPACK_IMPORTED_MODULE_3__.HalfFloatType,\n            format: three__WEBPACK_IMPORTED_MODULE_3__.RGBAFormat,\n            encoding: three__WEBPACK_IMPORTED_MODULE_3__.LinearEncoding,\n            depthBuffer: true\n        });\n        const cubeCamera = new three__WEBPACK_IMPORTED_MODULE_3__.CubeCamera(0.1, 100, cubeTarget);\n        const generatedEnvironmentMap = cubeCamera.renderTarget.texture;\n        generatedEnvironmentMap.name = name;\n        const outputEncoding = renderer.outputEncoding;\n        const toneMapping = renderer.toneMapping;\n        renderer.toneMapping = three__WEBPACK_IMPORTED_MODULE_3__.NoToneMapping;\n        renderer.outputEncoding = three__WEBPACK_IMPORTED_MODULE_3__.LinearEncoding;\n        cubeCamera.update(renderer, scene);\n        this.blurCubemap(cubeTarget, GENERATED_SIGMA);\n        renderer.toneMapping = toneMapping;\n        renderer.outputEncoding = outputEncoding;\n        return generatedEnvironmentMap;\n    }\n    /**\n     * Loads a dynamically generated environment map.\n     */\n    async loadGeneratedEnvironmentMap() {\n        if (this.generatedEnvironmentMap == null) {\n            this.generatedEnvironmentMap =\n                this.GenerateEnvironmentMap(new _EnvironmentScene_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](), 'legacy');\n        }\n        return this.generatedEnvironmentMap;\n    }\n    /**\n     * Loads a dynamically generated environment map, designed to be neutral and\n     * color-preserving. Shows less contrast around the different sides of the\n     * object.\n     */\n    async loadGeneratedEnvironmentMapAlt() {\n        if (this.generatedEnvironmentMapAlt == null) {\n            this.generatedEnvironmentMapAlt =\n                this.GenerateEnvironmentMap(new _EnvironmentSceneAlt_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"](), 'neutral');\n        }\n        return this.generatedEnvironmentMapAlt;\n    }\n    blurCubemap(cubeTarget, sigma) {\n        if (this.blurMaterial == null) {\n            this.blurMaterial = this.getBlurShader(MAX_SAMPLES);\n            const box = new three__WEBPACK_IMPORTED_MODULE_3__.BoxGeometry();\n            const blurMesh = new three__WEBPACK_IMPORTED_MODULE_3__.Mesh(box, this.blurMaterial);\n            this.blurScene = new three__WEBPACK_IMPORTED_MODULE_3__.Scene();\n            this.blurScene.add(blurMesh);\n        }\n        const tempTarget = cubeTarget.clone();\n        this.halfblur(cubeTarget, tempTarget, sigma, 'latitudinal');\n        this.halfblur(tempTarget, cubeTarget, sigma, 'longitudinal');\n        // Disposing this target after we're done with it somehow corrupts Safari's\n        // whole graphics driver. It's random, but occurs more frequently on\n        // lower-powered GPUs (macbooks with intel graphics, older iPhones). It goes\n        // beyond just messing up the PMREM, as it also occasionally causes\n        // visible corruption on the canvas and even on the rest of the page.\n        /** tempTarget.dispose(); */\n    }\n    halfblur(targetIn, targetOut, sigmaRadians, direction) {\n        // Number of standard deviations at which to cut off the discrete\n        // approximation.\n        const STANDARD_DEVIATIONS = 3;\n        const pixels = targetIn.width;\n        const radiansPerPixel = isFinite(sigmaRadians) ?\n            Math.PI / (2 * pixels) :\n            2 * Math.PI / (2 * MAX_SAMPLES - 1);\n        const sigmaPixels = sigmaRadians / radiansPerPixel;\n        const samples = isFinite(sigmaRadians) ?\n            1 + Math.floor(STANDARD_DEVIATIONS * sigmaPixels) :\n            MAX_SAMPLES;\n        if (samples > MAX_SAMPLES) {\n            console.warn(`sigmaRadians, ${sigmaRadians}, is too large and will clip, as it requested ${samples} samples when the maximum is set to ${MAX_SAMPLES}`);\n        }\n        const weights = [];\n        let sum = 0;\n        for (let i = 0; i < MAX_SAMPLES; ++i) {\n            const x = i / sigmaPixels;\n            const weight = Math.exp(-x * x / 2);\n            weights.push(weight);\n            if (i == 0) {\n                sum += weight;\n            }\n            else if (i < samples) {\n                sum += 2 * weight;\n            }\n        }\n        for (let i = 0; i < weights.length; i++) {\n            weights[i] = weights[i] / sum;\n        }\n        const blurUniforms = this.blurMaterial.uniforms;\n        blurUniforms['envMap'].value = targetIn.texture;\n        blurUniforms['samples'].value = samples;\n        blurUniforms['weights'].value = weights;\n        blurUniforms['latitudinal'].value = direction === 'latitudinal';\n        blurUniforms['dTheta'].value = radiansPerPixel;\n        const cubeCamera = new three__WEBPACK_IMPORTED_MODULE_3__.CubeCamera(0.1, 100, targetOut);\n        cubeCamera.update(this.threeRenderer, this.blurScene);\n    }\n    getBlurShader(maxSamples) {\n        const weights = new Float32Array(maxSamples);\n        const poleAxis = new three__WEBPACK_IMPORTED_MODULE_3__.Vector3(0, 1, 0);\n        const shaderMaterial = new three__WEBPACK_IMPORTED_MODULE_3__.ShaderMaterial({\n            name: 'SphericalGaussianBlur',\n            defines: { 'n': maxSamples },\n            uniforms: {\n                'envMap': { value: null },\n                'samples': { value: 1 },\n                'weights': { value: weights },\n                'latitudinal': { value: false },\n                'dTheta': { value: 0 },\n                'poleAxis': { value: poleAxis }\n            },\n            vertexShader: /* glsl */ `\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    `,\n            fragmentShader: /* glsl */ `\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      `,\n            blending: three__WEBPACK_IMPORTED_MODULE_3__.NoBlending,\n            depthTest: false,\n            depthWrite: false,\n            side: three__WEBPACK_IMPORTED_MODULE_3__.BackSide\n        });\n        return shaderMaterial;\n    }\n    async dispose() {\n        for (const [, promise] of this.skyboxCache) {\n            const skybox = await promise;\n            skybox.dispose();\n        }\n        if (this.generatedEnvironmentMap != null) {\n            (await this.generatedEnvironmentMap).dispose();\n            this.generatedEnvironmentMap = null;\n        }\n        if (this.generatedEnvironmentMapAlt != null) {\n            (await this.generatedEnvironmentMapAlt).dispose();\n            this.generatedEnvironmentMapAlt = null;\n        }\n        if (this.blurMaterial != null) {\n            this.blurMaterial.dispose();\n        }\n    }\n}\n//# sourceMappingURL=TextureUtils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvVGV4dHVyZVV0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNlE7QUFDdk07QUFDVDtBQUNSO0FBQ007QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnREFBYTtBQUNuQyxzQkFBc0IsZ0ZBQVU7QUFDaEMsc0JBQXNCLGdEQUFhO0FBQ3BCLDJCQUEyQixrREFBZTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsOEJBQThCLG1FQUFnQztBQUM5RDtBQUNBLG1DQUFtQywrQ0FBWTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5QkFBeUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0Esa0hBQWtIO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDZEQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx5REFBVTtBQUN4QjtBQUNBLCtCQUErQix3REFBcUI7QUFDcEQ7QUFDQSxrQkFBa0IsZ0RBQWE7QUFDL0Isb0JBQW9CLDZDQUFVO0FBQzlCLHNCQUFzQixpREFBYztBQUNwQztBQUNBLFNBQVM7QUFDVCwrQkFBK0IsNkNBQVU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsZ0RBQWE7QUFDNUMsa0NBQWtDLGlEQUFjO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCw0REFBZ0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwrREFBbUI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDhDQUFXO0FBQ3ZDLGlDQUFpQyx1Q0FBSTtBQUNyQyxpQ0FBaUMsd0NBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxhQUFhLGdEQUFnRCxTQUFTLHFDQUFxQyxZQUFZO0FBQ2pLO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isb0JBQW9CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNkNBQVU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsMENBQU87QUFDcEMsbUNBQW1DLGlEQUFjO0FBQ2pEO0FBQ0EsdUJBQXVCLGlCQUFpQjtBQUN4QztBQUNBLDRCQUE0QixhQUFhO0FBQ3pDLDZCQUE2QixVQUFVO0FBQ3ZDLDZCQUE2QixnQkFBZ0I7QUFDN0MsaUNBQWlDLGNBQWM7QUFDL0MsNEJBQTRCLFVBQVU7QUFDdEMsOEJBQThCO0FBQzlCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZDQUFVO0FBQ2hDO0FBQ0E7QUFDQSxrQkFBa0IsMkNBQVE7QUFDMUIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvdGhyZWUtY29tcG9uZW50cy9UZXh0dXJlVXRpbHMuanM/ZTUxNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBCYWNrU2lkZSwgQm94R2VvbWV0cnksIEN1YmVDYW1lcmEsIEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nLCBFdmVudERpc3BhdGNoZXIsIEhhbGZGbG9hdFR5cGUsIExpbmVhckVuY29kaW5nLCBNZXNoLCBOb0JsZW5kaW5nLCBOb1RvbmVNYXBwaW5nLCBSR0JBRm9ybWF0LCBTY2VuZSwgU2hhZGVyTWF0ZXJpYWwsIHNSR0JFbmNvZGluZywgVGV4dHVyZUxvYWRlciwgVmVjdG9yMywgV2ViR0xDdWJlUmVuZGVyVGFyZ2V0IH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgUkdCRUxvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL1JHQkVMb2FkZXIuanMnO1xuaW1wb3J0IHsgZGVzZXJpYWxpemVVcmwsIHRpbWVQYXNzZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnO1xuaW1wb3J0IEVudmlyb25tZW50U2NlbmUgZnJvbSAnLi9FbnZpcm9ubWVudFNjZW5lLmpzJztcbmltcG9ydCBFbnZpcm9ubWVudFNjZW5lQWx0IGZyb20gJy4vRW52aXJvbm1lbnRTY2VuZUFsdC5qcyc7XG5jb25zdCBHRU5FUkFURURfU0lHTUEgPSAwLjA0O1xuLy8gVGhlIG1heGltdW0gbGVuZ3RoIG9mIHRoZSBibHVyIGZvciBsb29wLiBTbWFsbGVyIHNpZ21hcyB3aWxsIHVzZSBmZXdlclxuLy8gc2FtcGxlcyBhbmQgZXhpdCBlYXJseSwgYnV0IG5vdCByZWNvbXBpbGUgdGhlIHNoYWRlci5cbmNvbnN0IE1BWF9TQU1QTEVTID0gMjA7XG5jb25zdCBIRFJfRklMRV9SRSA9IC9cXC5oZHIoXFwuanMpPyQvO1xuY29uc3QgbGRyTG9hZGVyID0gbmV3IFRleHR1cmVMb2FkZXIoKTtcbmNvbnN0IGhkckxvYWRlciA9IG5ldyBSR0JFTG9hZGVyKCk7XG5oZHJMb2FkZXIuc2V0RGF0YVR5cGUoSGFsZkZsb2F0VHlwZSk7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXh0dXJlVXRpbHMgZXh0ZW5kcyBFdmVudERpc3BhdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKHRocmVlUmVuZGVyZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy50aHJlZVJlbmRlcmVyID0gdGhyZWVSZW5kZXJlcjtcbiAgICAgICAgdGhpcy5nZW5lcmF0ZWRFbnZpcm9ubWVudE1hcCA9IG51bGw7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVkRW52aXJvbm1lbnRNYXBBbHQgPSBudWxsO1xuICAgICAgICB0aGlzLnNreWJveENhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmJsdXJNYXRlcmlhbCA9IG51bGw7XG4gICAgICAgIHRoaXMuYmx1clNjZW5lID0gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgbG9hZCh1cmwsIHByb2dyZXNzQ2FsbGJhY2sgPSAoKSA9PiB7IH0pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlzSERSID0gSERSX0ZJTEVfUkUudGVzdCh1cmwpO1xuICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gaXNIRFIgPyBoZHJMb2FkZXIgOiBsZHJMb2FkZXI7XG4gICAgICAgICAgICBjb25zdCB0ZXh0dXJlID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gbG9hZGVyLmxvYWQodXJsLCByZXNvbHZlLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKGV2ZW50LmxvYWRlZCAvIGV2ZW50LnRvdGFsICogMC45KTtcbiAgICAgICAgICAgIH0sIHJlamVjdCkpO1xuICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjaygxLjApO1xuICAgICAgICAgICAgdGV4dHVyZS5uYW1lID0gdXJsO1xuICAgICAgICAgICAgdGV4dHVyZS5tYXBwaW5nID0gRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmc7XG4gICAgICAgICAgICBpZiAoIWlzSERSKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5lbmNvZGluZyA9IHNSR0JFbmNvZGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB7IHNreWJveCwgZW52aXJvbm1lbnRNYXAgfSBvYmplY3Qgd2l0aCB0aGUgdGFyZ2V0cy90ZXh0dXJlc1xuICAgICAqIGFjY29yZGluZ2x5LiBgc2t5Ym94YCBpcyBhIFdlYkdMUmVuZGVyQ3ViZVRhcmdldCwgYW5kIGBlbnZpcm9ubWVudE1hcGBcbiAgICAgKiBpcyBhIFRleHR1cmUgZnJvbSBhIFdlYkdMUmVuZGVyQ3ViZVRhcmdldC5cbiAgICAgKi9cbiAgICBhc3luYyBnZW5lcmF0ZUVudmlyb25tZW50TWFwQW5kU2t5Ym94KHNreWJveFVybCA9IG51bGwsIGVudmlyb25tZW50TWFwVXJsID0gbnVsbCwgcHJvZ3Jlc3NDYWxsYmFjayA9ICgpID0+IHsgfSkge1xuICAgICAgICBjb25zdCB1c2VBbHRFbnZpcm9ubWVudCA9IGVudmlyb25tZW50TWFwVXJsICE9PSAnbGVnYWN5JztcbiAgICAgICAgaWYgKGVudmlyb25tZW50TWFwVXJsID09PSAnbGVnYWN5JyB8fCBlbnZpcm9ubWVudE1hcFVybCA9PT0gJ25ldXRyYWwnKSB7XG4gICAgICAgICAgICBlbnZpcm9ubWVudE1hcFVybCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZW52aXJvbm1lbnRNYXBVcmwgPSBkZXNlcmlhbGl6ZVVybChlbnZpcm9ubWVudE1hcFVybCk7XG4gICAgICAgIGxldCBza3lib3hMb2FkcyA9IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgbGV0IGVudmlyb25tZW50TWFwTG9hZHM7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBza3lib3ggVVJMLCBhdHRlbXB0IHRvIGxvYWQgaXQgYXMgYSBjdWJlbWFwXG4gICAgICAgIGlmICghIXNreWJveFVybCkge1xuICAgICAgICAgICAgc2t5Ym94TG9hZHMgPSB0aGlzLmxvYWRFcXVpcmVjdEZyb21Vcmwoc2t5Ym94VXJsLCBwcm9ncmVzc0NhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISFlbnZpcm9ubWVudE1hcFVybCkge1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSBhbiBhdmFpbGFibGUgZW52aXJvbm1lbnQgbWFwIFVSTFxuICAgICAgICAgICAgZW52aXJvbm1lbnRNYXBMb2FkcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkRXF1aXJlY3RGcm9tVXJsKGVudmlyb25tZW50TWFwVXJsLCBwcm9ncmVzc0NhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghIXNreWJveFVybCkge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gZGVyaXZpbmcgdGhlIGVudmlyb25tZW50IG1hcCBmcm9tIGFuIGF2YWlsYWJsZSBza3lib3hcbiAgICAgICAgICAgIGVudmlyb25tZW50TWFwTG9hZHMgPVxuICAgICAgICAgICAgICAgIHRoaXMubG9hZEVxdWlyZWN0RnJvbVVybChza3lib3hVcmwsIHByb2dyZXNzQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gZ2VuZXJhdGluZyB0aGUgZW52aXJvbm1lbnQgbWFwXG4gICAgICAgICAgICBlbnZpcm9ubWVudE1hcExvYWRzID0gdXNlQWx0RW52aXJvbm1lbnQgP1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZEdlbmVyYXRlZEVudmlyb25tZW50TWFwQWx0KCkgOlxuICAgICAgICAgICAgICAgIHRoaXMubG9hZEdlbmVyYXRlZEVudmlyb25tZW50TWFwKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW2Vudmlyb25tZW50TWFwLCBza3lib3hdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2Vudmlyb25tZW50TWFwTG9hZHMsIHNreWJveExvYWRzXSk7XG4gICAgICAgIGlmIChlbnZpcm9ubWVudE1hcCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGVudmlyb25tZW50IG1hcC4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBlbnZpcm9ubWVudE1hcCwgc2t5Ym94IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIGFuIGVxdWlyZWN0IFRleHR1cmUgZnJvbSBhIGdpdmVuIFVSTCwgZm9yIHVzZSBhcyBhIHNreWJveC5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkRXF1aXJlY3RGcm9tVXJsKHVybCwgcHJvZ3Jlc3NDYWxsYmFjaykge1xuICAgICAgICBpZiAoIXRoaXMuc2t5Ym94Q2FjaGUuaGFzKHVybCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNreWJveE1hcExvYWRzID0gdGhpcy5sb2FkKHVybCwgcHJvZ3Jlc3NDYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLnNreWJveENhY2hlLnNldCh1cmwsIHNreWJveE1hcExvYWRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5za3lib3hDYWNoZS5nZXQodXJsKTtcbiAgICB9XG4gICAgYXN5bmMgR2VuZXJhdGVFbnZpcm9ubWVudE1hcChzY2VuZSwgbmFtZSkge1xuICAgICAgICBhd2FpdCB0aW1lUGFzc2VzKCk7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy50aHJlZVJlbmRlcmVyO1xuICAgICAgICBjb25zdCBjdWJlVGFyZ2V0ID0gbmV3IFdlYkdMQ3ViZVJlbmRlclRhcmdldCgyNTYsIHtcbiAgICAgICAgICAgIGdlbmVyYXRlTWlwbWFwczogZmFsc2UsXG4gICAgICAgICAgICB0eXBlOiBIYWxmRmxvYXRUeXBlLFxuICAgICAgICAgICAgZm9ybWF0OiBSR0JBRm9ybWF0LFxuICAgICAgICAgICAgZW5jb2Rpbmc6IExpbmVhckVuY29kaW5nLFxuICAgICAgICAgICAgZGVwdGhCdWZmZXI6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGN1YmVDYW1lcmEgPSBuZXcgQ3ViZUNhbWVyYSgwLjEsIDEwMCwgY3ViZVRhcmdldCk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRlZEVudmlyb25tZW50TWFwID0gY3ViZUNhbWVyYS5yZW5kZXJUYXJnZXQudGV4dHVyZTtcbiAgICAgICAgZ2VuZXJhdGVkRW52aXJvbm1lbnRNYXAubmFtZSA9IG5hbWU7XG4gICAgICAgIGNvbnN0IG91dHB1dEVuY29kaW5nID0gcmVuZGVyZXIub3V0cHV0RW5jb2Rpbmc7XG4gICAgICAgIGNvbnN0IHRvbmVNYXBwaW5nID0gcmVuZGVyZXIudG9uZU1hcHBpbmc7XG4gICAgICAgIHJlbmRlcmVyLnRvbmVNYXBwaW5nID0gTm9Ub25lTWFwcGluZztcbiAgICAgICAgcmVuZGVyZXIub3V0cHV0RW5jb2RpbmcgPSBMaW5lYXJFbmNvZGluZztcbiAgICAgICAgY3ViZUNhbWVyYS51cGRhdGUocmVuZGVyZXIsIHNjZW5lKTtcbiAgICAgICAgdGhpcy5ibHVyQ3ViZW1hcChjdWJlVGFyZ2V0LCBHRU5FUkFURURfU0lHTUEpO1xuICAgICAgICByZW5kZXJlci50b25lTWFwcGluZyA9IHRvbmVNYXBwaW5nO1xuICAgICAgICByZW5kZXJlci5vdXRwdXRFbmNvZGluZyA9IG91dHB1dEVuY29kaW5nO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGVkRW52aXJvbm1lbnRNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIGEgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIGVudmlyb25tZW50IG1hcC5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkR2VuZXJhdGVkRW52aXJvbm1lbnRNYXAoKSB7XG4gICAgICAgIGlmICh0aGlzLmdlbmVyYXRlZEVudmlyb25tZW50TWFwID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVkRW52aXJvbm1lbnRNYXAgPVxuICAgICAgICAgICAgICAgIHRoaXMuR2VuZXJhdGVFbnZpcm9ubWVudE1hcChuZXcgRW52aXJvbm1lbnRTY2VuZSgpLCAnbGVnYWN5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVkRW52aXJvbm1lbnRNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIGEgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIGVudmlyb25tZW50IG1hcCwgZGVzaWduZWQgdG8gYmUgbmV1dHJhbCBhbmRcbiAgICAgKiBjb2xvci1wcmVzZXJ2aW5nLiBTaG93cyBsZXNzIGNvbnRyYXN0IGFyb3VuZCB0aGUgZGlmZmVyZW50IHNpZGVzIG9mIHRoZVxuICAgICAqIG9iamVjdC5cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkR2VuZXJhdGVkRW52aXJvbm1lbnRNYXBBbHQoKSB7XG4gICAgICAgIGlmICh0aGlzLmdlbmVyYXRlZEVudmlyb25tZW50TWFwQWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVkRW52aXJvbm1lbnRNYXBBbHQgPVxuICAgICAgICAgICAgICAgIHRoaXMuR2VuZXJhdGVFbnZpcm9ubWVudE1hcChuZXcgRW52aXJvbm1lbnRTY2VuZUFsdCgpLCAnbmV1dHJhbCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlZEVudmlyb25tZW50TWFwQWx0O1xuICAgIH1cbiAgICBibHVyQ3ViZW1hcChjdWJlVGFyZ2V0LCBzaWdtYSkge1xuICAgICAgICBpZiAodGhpcy5ibHVyTWF0ZXJpYWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5ibHVyTWF0ZXJpYWwgPSB0aGlzLmdldEJsdXJTaGFkZXIoTUFYX1NBTVBMRVMpO1xuICAgICAgICAgICAgY29uc3QgYm94ID0gbmV3IEJveEdlb21ldHJ5KCk7XG4gICAgICAgICAgICBjb25zdCBibHVyTWVzaCA9IG5ldyBNZXNoKGJveCwgdGhpcy5ibHVyTWF0ZXJpYWwpO1xuICAgICAgICAgICAgdGhpcy5ibHVyU2NlbmUgPSBuZXcgU2NlbmUoKTtcbiAgICAgICAgICAgIHRoaXMuYmx1clNjZW5lLmFkZChibHVyTWVzaCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGVtcFRhcmdldCA9IGN1YmVUYXJnZXQuY2xvbmUoKTtcbiAgICAgICAgdGhpcy5oYWxmYmx1cihjdWJlVGFyZ2V0LCB0ZW1wVGFyZ2V0LCBzaWdtYSwgJ2xhdGl0dWRpbmFsJyk7XG4gICAgICAgIHRoaXMuaGFsZmJsdXIodGVtcFRhcmdldCwgY3ViZVRhcmdldCwgc2lnbWEsICdsb25naXR1ZGluYWwnKTtcbiAgICAgICAgLy8gRGlzcG9zaW5nIHRoaXMgdGFyZ2V0IGFmdGVyIHdlJ3JlIGRvbmUgd2l0aCBpdCBzb21laG93IGNvcnJ1cHRzIFNhZmFyaSdzXG4gICAgICAgIC8vIHdob2xlIGdyYXBoaWNzIGRyaXZlci4gSXQncyByYW5kb20sIGJ1dCBvY2N1cnMgbW9yZSBmcmVxdWVudGx5IG9uXG4gICAgICAgIC8vIGxvd2VyLXBvd2VyZWQgR1BVcyAobWFjYm9va3Mgd2l0aCBpbnRlbCBncmFwaGljcywgb2xkZXIgaVBob25lcykuIEl0IGdvZXNcbiAgICAgICAgLy8gYmV5b25kIGp1c3QgbWVzc2luZyB1cCB0aGUgUE1SRU0sIGFzIGl0IGFsc28gb2NjYXNpb25hbGx5IGNhdXNlc1xuICAgICAgICAvLyB2aXNpYmxlIGNvcnJ1cHRpb24gb24gdGhlIGNhbnZhcyBhbmQgZXZlbiBvbiB0aGUgcmVzdCBvZiB0aGUgcGFnZS5cbiAgICAgICAgLyoqIHRlbXBUYXJnZXQuZGlzcG9zZSgpOyAqL1xuICAgIH1cbiAgICBoYWxmYmx1cih0YXJnZXRJbiwgdGFyZ2V0T3V0LCBzaWdtYVJhZGlhbnMsIGRpcmVjdGlvbikge1xuICAgICAgICAvLyBOdW1iZXIgb2Ygc3RhbmRhcmQgZGV2aWF0aW9ucyBhdCB3aGljaCB0byBjdXQgb2ZmIHRoZSBkaXNjcmV0ZVxuICAgICAgICAvLyBhcHByb3hpbWF0aW9uLlxuICAgICAgICBjb25zdCBTVEFOREFSRF9ERVZJQVRJT05TID0gMztcbiAgICAgICAgY29uc3QgcGl4ZWxzID0gdGFyZ2V0SW4ud2lkdGg7XG4gICAgICAgIGNvbnN0IHJhZGlhbnNQZXJQaXhlbCA9IGlzRmluaXRlKHNpZ21hUmFkaWFucykgP1xuICAgICAgICAgICAgTWF0aC5QSSAvICgyICogcGl4ZWxzKSA6XG4gICAgICAgICAgICAyICogTWF0aC5QSSAvICgyICogTUFYX1NBTVBMRVMgLSAxKTtcbiAgICAgICAgY29uc3Qgc2lnbWFQaXhlbHMgPSBzaWdtYVJhZGlhbnMgLyByYWRpYW5zUGVyUGl4ZWw7XG4gICAgICAgIGNvbnN0IHNhbXBsZXMgPSBpc0Zpbml0ZShzaWdtYVJhZGlhbnMpID9cbiAgICAgICAgICAgIDEgKyBNYXRoLmZsb29yKFNUQU5EQVJEX0RFVklBVElPTlMgKiBzaWdtYVBpeGVscykgOlxuICAgICAgICAgICAgTUFYX1NBTVBMRVM7XG4gICAgICAgIGlmIChzYW1wbGVzID4gTUFYX1NBTVBMRVMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybihgc2lnbWFSYWRpYW5zLCAke3NpZ21hUmFkaWFuc30sIGlzIHRvbyBsYXJnZSBhbmQgd2lsbCBjbGlwLCBhcyBpdCByZXF1ZXN0ZWQgJHtzYW1wbGVzfSBzYW1wbGVzIHdoZW4gdGhlIG1heGltdW0gaXMgc2V0IHRvICR7TUFYX1NBTVBMRVN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2VpZ2h0cyA9IFtdO1xuICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNQVhfU0FNUExFUzsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB4ID0gaSAvIHNpZ21hUGl4ZWxzO1xuICAgICAgICAgICAgY29uc3Qgd2VpZ2h0ID0gTWF0aC5leHAoLXggKiB4IC8gMik7XG4gICAgICAgICAgICB3ZWlnaHRzLnB1c2god2VpZ2h0KTtcbiAgICAgICAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgICAgICAgICBzdW0gKz0gd2VpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaSA8IHNhbXBsZXMpIHtcbiAgICAgICAgICAgICAgICBzdW0gKz0gMiAqIHdlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHdlaWdodHNbaV0gPSB3ZWlnaHRzW2ldIC8gc3VtO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsdXJVbmlmb3JtcyA9IHRoaXMuYmx1ck1hdGVyaWFsLnVuaWZvcm1zO1xuICAgICAgICBibHVyVW5pZm9ybXNbJ2Vudk1hcCddLnZhbHVlID0gdGFyZ2V0SW4udGV4dHVyZTtcbiAgICAgICAgYmx1clVuaWZvcm1zWydzYW1wbGVzJ10udmFsdWUgPSBzYW1wbGVzO1xuICAgICAgICBibHVyVW5pZm9ybXNbJ3dlaWdodHMnXS52YWx1ZSA9IHdlaWdodHM7XG4gICAgICAgIGJsdXJVbmlmb3Jtc1snbGF0aXR1ZGluYWwnXS52YWx1ZSA9IGRpcmVjdGlvbiA9PT0gJ2xhdGl0dWRpbmFsJztcbiAgICAgICAgYmx1clVuaWZvcm1zWydkVGhldGEnXS52YWx1ZSA9IHJhZGlhbnNQZXJQaXhlbDtcbiAgICAgICAgY29uc3QgY3ViZUNhbWVyYSA9IG5ldyBDdWJlQ2FtZXJhKDAuMSwgMTAwLCB0YXJnZXRPdXQpO1xuICAgICAgICBjdWJlQ2FtZXJhLnVwZGF0ZSh0aGlzLnRocmVlUmVuZGVyZXIsIHRoaXMuYmx1clNjZW5lKTtcbiAgICB9XG4gICAgZ2V0Qmx1clNoYWRlcihtYXhTYW1wbGVzKSB7XG4gICAgICAgIGNvbnN0IHdlaWdodHMgPSBuZXcgRmxvYXQzMkFycmF5KG1heFNhbXBsZXMpO1xuICAgICAgICBjb25zdCBwb2xlQXhpcyA9IG5ldyBWZWN0b3IzKDAsIDEsIDApO1xuICAgICAgICBjb25zdCBzaGFkZXJNYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbCh7XG4gICAgICAgICAgICBuYW1lOiAnU3BoZXJpY2FsR2F1c3NpYW5CbHVyJyxcbiAgICAgICAgICAgIGRlZmluZXM6IHsgJ24nOiBtYXhTYW1wbGVzIH0sXG4gICAgICAgICAgICB1bmlmb3Jtczoge1xuICAgICAgICAgICAgICAgICdlbnZNYXAnOiB7IHZhbHVlOiBudWxsIH0sXG4gICAgICAgICAgICAgICAgJ3NhbXBsZXMnOiB7IHZhbHVlOiAxIH0sXG4gICAgICAgICAgICAgICAgJ3dlaWdodHMnOiB7IHZhbHVlOiB3ZWlnaHRzIH0sXG4gICAgICAgICAgICAgICAgJ2xhdGl0dWRpbmFsJzogeyB2YWx1ZTogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICAnZFRoZXRhJzogeyB2YWx1ZTogMCB9LFxuICAgICAgICAgICAgICAgICdwb2xlQXhpcyc6IHsgdmFsdWU6IHBvbGVBeGlzIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXI6IC8qIGdsc2wgKi8gYFxuICAgICAgXG4gICAgICB2YXJ5aW5nIHZlYzMgdk91dHB1dERpcmVjdGlvbjtcbiAgXG4gICAgICB2b2lkIG1haW4oKSB7XG4gIFxuICAgICAgICB2T3V0cHV0RGlyZWN0aW9uID0gdmVjMyggcG9zaXRpb24gKTtcbiAgICAgICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApO1xuICBcbiAgICAgIH1cbiAgICBgLFxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXI6IC8qIGdsc2wgKi8gYFxuICAgICAgICB2YXJ5aW5nIHZlYzMgdk91dHB1dERpcmVjdGlvbjtcbiAgXG4gICAgICAgIHVuaWZvcm0gc2FtcGxlckN1YmUgZW52TWFwO1xuICAgICAgICB1bmlmb3JtIGludCBzYW1wbGVzO1xuICAgICAgICB1bmlmb3JtIGZsb2F0IHdlaWdodHNbIG4gXTtcbiAgICAgICAgdW5pZm9ybSBib29sIGxhdGl0dWRpbmFsO1xuICAgICAgICB1bmlmb3JtIGZsb2F0IGRUaGV0YTtcbiAgICAgICAgdW5pZm9ybSB2ZWMzIHBvbGVBeGlzO1xuICBcbiAgICAgICAgdmVjMyBnZXRTYW1wbGUoIGZsb2F0IHRoZXRhLCB2ZWMzIGF4aXMgKSB7XG4gIFxuICAgICAgICAgIGZsb2F0IGNvc1RoZXRhID0gY29zKCB0aGV0YSApO1xuICAgICAgICAgIC8vIFJvZHJpZ3VlcycgYXhpcy1hbmdsZSByb3RhdGlvblxuICAgICAgICAgIHZlYzMgc2FtcGxlRGlyZWN0aW9uID0gdk91dHB1dERpcmVjdGlvbiAqIGNvc1RoZXRhXG4gICAgICAgICAgICArIGNyb3NzKCBheGlzLCB2T3V0cHV0RGlyZWN0aW9uICkgKiBzaW4oIHRoZXRhIClcbiAgICAgICAgICAgICsgYXhpcyAqIGRvdCggYXhpcywgdk91dHB1dERpcmVjdGlvbiApICogKCAxLjAgLSBjb3NUaGV0YSApO1xuICBcbiAgICAgICAgICByZXR1cm4gdmVjMyggdGV4dHVyZUN1YmUoIGVudk1hcCwgc2FtcGxlRGlyZWN0aW9uICkgKTtcbiAgXG4gICAgICAgIH1cbiAgXG4gICAgICAgIHZvaWQgbWFpbigpIHtcbiAgXG4gICAgICAgICAgdmVjMyBheGlzID0gbGF0aXR1ZGluYWwgPyBwb2xlQXhpcyA6IGNyb3NzKCBwb2xlQXhpcywgdk91dHB1dERpcmVjdGlvbiApO1xuICBcbiAgICAgICAgICBpZiAoIGFsbCggZXF1YWwoIGF4aXMsIHZlYzMoIDAuMCApICkgKSApIHtcbiAgXG4gICAgICAgICAgICBheGlzID0gdmVjMyggdk91dHB1dERpcmVjdGlvbi56LCAwLjAsIC0gdk91dHB1dERpcmVjdGlvbi54ICk7XG4gIFxuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgYXhpcyA9IG5vcm1hbGl6ZSggYXhpcyApO1xuICBcbiAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KCAwLjAsIDAuMCwgMC4wLCAxLjAgKTtcbiAgICAgICAgICBnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbIDAgXSAqIGdldFNhbXBsZSggMC4wLCBheGlzICk7XG4gIFxuICAgICAgICAgIGZvciAoIGludCBpID0gMTsgaSA8IG47IGkrKyApIHtcbiAgXG4gICAgICAgICAgICBpZiAoIGkgPj0gc2FtcGxlcyApIHtcbiAgXG4gICAgICAgICAgICAgIGJyZWFrO1xuICBcbiAgICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgICBmbG9hdCB0aGV0YSA9IGRUaGV0YSAqIGZsb2F0KCBpICk7XG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbIGkgXSAqIGdldFNhbXBsZSggLTEuMCAqIHRoZXRhLCBheGlzICk7XG4gICAgICAgICAgICBnbF9GcmFnQ29sb3IucmdiICs9IHdlaWdodHNbIGkgXSAqIGdldFNhbXBsZSggdGhldGEsIGF4aXMgKTtcbiAgXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgLFxuICAgICAgICAgICAgYmxlbmRpbmc6IE5vQmxlbmRpbmcsXG4gICAgICAgICAgICBkZXB0aFRlc3Q6IGZhbHNlLFxuICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXG4gICAgICAgICAgICBzaWRlOiBCYWNrU2lkZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNoYWRlck1hdGVyaWFsO1xuICAgIH1cbiAgICBhc3luYyBkaXNwb3NlKCkge1xuICAgICAgICBmb3IgKGNvbnN0IFssIHByb21pc2VdIG9mIHRoaXMuc2t5Ym94Q2FjaGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNreWJveCA9IGF3YWl0IHByb21pc2U7XG4gICAgICAgICAgICBza3lib3guZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdlbmVyYXRlZEVudmlyb25tZW50TWFwICE9IG51bGwpIHtcbiAgICAgICAgICAgIChhd2FpdCB0aGlzLmdlbmVyYXRlZEVudmlyb25tZW50TWFwKS5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlZEVudmlyb25tZW50TWFwID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nZW5lcmF0ZWRFbnZpcm9ubWVudE1hcEFsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAoYXdhaXQgdGhpcy5nZW5lcmF0ZWRFbnZpcm9ubWVudE1hcEFsdCkuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZWRFbnZpcm9ubWVudE1hcEFsdCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYmx1ck1hdGVyaWFsICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuYmx1ck1hdGVyaWFsLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRleHR1cmVVdGlscy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/TextureUtils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/ModelViewerGLTFInstance.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/gltf-instance/ModelViewerGLTFInstance.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelViewerGLTFInstance: () => (/* binding */ ModelViewerGLTFInstance)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n/* harmony import */ var _GLTFInstance_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../GLTFInstance.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/GLTFInstance.js\");\n/* harmony import */ var _correlated_scene_graph_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./correlated-scene-graph.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/correlated-scene-graph.js\");\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\nconst $correlatedSceneGraph = Symbol('correlatedSceneGraph');\n/**\n * This specialization of GLTFInstance collects all of the processing needed\n * to prepare a model and to clone it making special considerations for\n * <model-viewer> use cases.\n */\nclass ModelViewerGLTFInstance extends _GLTFInstance_js__WEBPACK_IMPORTED_MODULE_0__.GLTFInstance {\n    /**\n     * @override\n     */\n    static [_GLTFInstance_js__WEBPACK_IMPORTED_MODULE_0__.$prepare](source) {\n        const prepared = super[_GLTFInstance_js__WEBPACK_IMPORTED_MODULE_0__.$prepare](source);\n        if (prepared[$correlatedSceneGraph] == null) {\n            prepared[$correlatedSceneGraph] = _correlated_scene_graph_js__WEBPACK_IMPORTED_MODULE_1__.CorrelatedSceneGraph.from(prepared);\n        }\n        const { scene } = prepared;\n        const nullSphere = new three__WEBPACK_IMPORTED_MODULE_2__.Sphere(undefined, Infinity);\n        scene.traverse((node) => {\n            // Set a high renderOrder while we're here to ensure the model\n            // always renders on top of the sky sphere\n            node.renderOrder = 1000;\n            // Three.js seems to cull some animated models incorrectly. Since we\n            // expect to view our whole scene anyway, we turn off the frustum\n            // culling optimization here.\n            node.frustumCulled = false;\n            // Animations for objects without names target their UUID instead. When\n            // objects are cloned, they get new UUIDs which the animation can't\n            // find. To fix this, we assign their UUID as their name.\n            if (!node.name) {\n                node.name = node.uuid;\n            }\n            const mesh = node;\n            if (mesh.isMesh) {\n                const { geometry } = mesh;\n                mesh.castShadow = true;\n                if (mesh.isSkinnedMesh) {\n                    // Akin to disabling frustum culling above, we have to also manually\n                    // disable the bounds to make raycasting correct for skinned meshes.\n                    geometry.boundingSphere = nullSphere;\n                    // The bounding box is set in GLTFLoader by the accessor bounds, which\n                    // are not updated with animation.\n                    geometry.boundingBox = null;\n                }\n                const material = mesh.material;\n                if (material.isMeshBasicMaterial === true) {\n                    material.toneMapped = false;\n                }\n                // This makes shadows better for non-manifold meshes\n                material.shadowSide = three__WEBPACK_IMPORTED_MODULE_2__.FrontSide;\n                // Fixes an edge case with unused extra UV-coords being incorrectly\n                // referenced by three.js; remove when\n                // https://github.com/mrdoob/three.js/pull/23974 is merged.\n                if (material.aoMap) {\n                    const { gltf, threeObjectMap } = prepared[$correlatedSceneGraph];\n                    const gltfRef = threeObjectMap.get(material);\n                    if (gltf.materials != null && gltfRef != null &&\n                        gltfRef.materials != null) {\n                        const gltfMaterial = gltf.materials[gltfRef.materials];\n                        if (gltfMaterial.occlusionTexture &&\n                            gltfMaterial.occlusionTexture.texCoord === 0 &&\n                            geometry.attributes.uv != null) {\n                            geometry.setAttribute('uv2', geometry.attributes.uv);\n                        }\n                    }\n                }\n            }\n        });\n        return prepared;\n    }\n    get correlatedSceneGraph() {\n        return this[_GLTFInstance_js__WEBPACK_IMPORTED_MODULE_0__.$preparedGLTF][$correlatedSceneGraph];\n    }\n    /**\n     * @override\n     */\n    [_GLTFInstance_js__WEBPACK_IMPORTED_MODULE_0__.$clone]() {\n        const clone = super[_GLTFInstance_js__WEBPACK_IMPORTED_MODULE_0__.$clone]();\n        const sourceUUIDToClonedMaterial = new Map();\n        clone.scene.traverse((node) => {\n            // Materials aren't cloned when cloning meshes; geometry\n            // and materials are copied by reference. This is necessary\n            // for the same model to be used twice with different\n            // scene-graph operations.\n            if (node.isMesh) {\n                const mesh = node;\n                const material = mesh.material;\n                if (material != null) {\n                    if (sourceUUIDToClonedMaterial.has(material.uuid)) {\n                        mesh.material = sourceUUIDToClonedMaterial.get(material.uuid);\n                        return;\n                    }\n                    mesh.material = material.clone();\n                    sourceUUIDToClonedMaterial.set(material.uuid, mesh.material);\n                }\n            }\n        });\n        // Cross-correlate the scene graph by relying on information in the\n        // current scene graph; without this step, relationships between the\n        // Three.js object graph and the glTF scene graph will be lost.\n        clone[$correlatedSceneGraph] =\n            _correlated_scene_graph_js__WEBPACK_IMPORTED_MODULE_1__.CorrelatedSceneGraph.from(clone, this.correlatedSceneGraph);\n        return clone;\n    }\n}\n//# sourceMappingURL=ModelViewerGLTFInstance.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9Nb2RlbFZpZXdlckdMVEZJbnN0YW5jZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMwQztBQUN5QztBQUNoQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxzQ0FBc0MsMERBQVk7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsWUFBWSxzREFBUTtBQUNwQiwrQkFBK0Isc0RBQVE7QUFDdkM7QUFDQSw4Q0FBOEMsNEVBQW9CO0FBQ2xFO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEIsK0JBQStCLHlDQUFNO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFdBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw0Q0FBUztBQUMvQztBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0EsNEJBQTRCLHVCQUF1QjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJEQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxvREFBTTtBQUNYLDRCQUE0QixvREFBTTtBQUNsQztBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0EsWUFBWSw0RUFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9Nb2RlbFZpZXdlckdMVEZJbnN0YW5jZS5qcz8yZTE4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IEZyb250U2lkZSwgU3BoZXJlIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IHsgJGNsb25lLCAkcHJlcGFyZSwgJHByZXBhcmVkR0xURiwgR0xURkluc3RhbmNlIH0gZnJvbSAnLi4vR0xURkluc3RhbmNlLmpzJztcbmltcG9ydCB7IENvcnJlbGF0ZWRTY2VuZUdyYXBoIH0gZnJvbSAnLi9jb3JyZWxhdGVkLXNjZW5lLWdyYXBoLmpzJztcbmNvbnN0ICRjb3JyZWxhdGVkU2NlbmVHcmFwaCA9IFN5bWJvbCgnY29ycmVsYXRlZFNjZW5lR3JhcGgnKTtcbi8qKlxuICogVGhpcyBzcGVjaWFsaXphdGlvbiBvZiBHTFRGSW5zdGFuY2UgY29sbGVjdHMgYWxsIG9mIHRoZSBwcm9jZXNzaW5nIG5lZWRlZFxuICogdG8gcHJlcGFyZSBhIG1vZGVsIGFuZCB0byBjbG9uZSBpdCBtYWtpbmcgc3BlY2lhbCBjb25zaWRlcmF0aW9ucyBmb3JcbiAqIDxtb2RlbC12aWV3ZXI+IHVzZSBjYXNlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsVmlld2VyR0xURkluc3RhbmNlIGV4dGVuZHMgR0xURkluc3RhbmNlIHtcbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBzdGF0aWMgWyRwcmVwYXJlXShzb3VyY2UpIHtcbiAgICAgICAgY29uc3QgcHJlcGFyZWQgPSBzdXBlclskcHJlcGFyZV0oc291cmNlKTtcbiAgICAgICAgaWYgKHByZXBhcmVkWyRjb3JyZWxhdGVkU2NlbmVHcmFwaF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgcHJlcGFyZWRbJGNvcnJlbGF0ZWRTY2VuZUdyYXBoXSA9IENvcnJlbGF0ZWRTY2VuZUdyYXBoLmZyb20ocHJlcGFyZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc2NlbmUgfSA9IHByZXBhcmVkO1xuICAgICAgICBjb25zdCBudWxsU3BoZXJlID0gbmV3IFNwaGVyZSh1bmRlZmluZWQsIEluZmluaXR5KTtcbiAgICAgICAgc2NlbmUudHJhdmVyc2UoKG5vZGUpID0+IHtcbiAgICAgICAgICAgIC8vIFNldCBhIGhpZ2ggcmVuZGVyT3JkZXIgd2hpbGUgd2UncmUgaGVyZSB0byBlbnN1cmUgdGhlIG1vZGVsXG4gICAgICAgICAgICAvLyBhbHdheXMgcmVuZGVycyBvbiB0b3Agb2YgdGhlIHNreSBzcGhlcmVcbiAgICAgICAgICAgIG5vZGUucmVuZGVyT3JkZXIgPSAxMDAwO1xuICAgICAgICAgICAgLy8gVGhyZWUuanMgc2VlbXMgdG8gY3VsbCBzb21lIGFuaW1hdGVkIG1vZGVscyBpbmNvcnJlY3RseS4gU2luY2Ugd2VcbiAgICAgICAgICAgIC8vIGV4cGVjdCB0byB2aWV3IG91ciB3aG9sZSBzY2VuZSBhbnl3YXksIHdlIHR1cm4gb2ZmIHRoZSBmcnVzdHVtXG4gICAgICAgICAgICAvLyBjdWxsaW5nIG9wdGltaXphdGlvbiBoZXJlLlxuICAgICAgICAgICAgbm9kZS5mcnVzdHVtQ3VsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBBbmltYXRpb25zIGZvciBvYmplY3RzIHdpdGhvdXQgbmFtZXMgdGFyZ2V0IHRoZWlyIFVVSUQgaW5zdGVhZC4gV2hlblxuICAgICAgICAgICAgLy8gb2JqZWN0cyBhcmUgY2xvbmVkLCB0aGV5IGdldCBuZXcgVVVJRHMgd2hpY2ggdGhlIGFuaW1hdGlvbiBjYW4ndFxuICAgICAgICAgICAgLy8gZmluZC4gVG8gZml4IHRoaXMsIHdlIGFzc2lnbiB0aGVpciBVVUlEIGFzIHRoZWlyIG5hbWUuXG4gICAgICAgICAgICBpZiAoIW5vZGUubmFtZSkge1xuICAgICAgICAgICAgICAgIG5vZGUubmFtZSA9IG5vZGUudXVpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lc2ggPSBub2RlO1xuICAgICAgICAgICAgaWYgKG1lc2guaXNNZXNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBnZW9tZXRyeSB9ID0gbWVzaDtcbiAgICAgICAgICAgICAgICBtZXNoLmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChtZXNoLmlzU2tpbm5lZE1lc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWtpbiB0byBkaXNhYmxpbmcgZnJ1c3R1bSBjdWxsaW5nIGFib3ZlLCB3ZSBoYXZlIHRvIGFsc28gbWFudWFsbHlcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSB0aGUgYm91bmRzIHRvIG1ha2UgcmF5Y2FzdGluZyBjb3JyZWN0IGZvciBza2lubmVkIG1lc2hlcy5cbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUgPSBudWxsU3BoZXJlO1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYm91bmRpbmcgYm94IGlzIHNldCBpbiBHTFRGTG9hZGVyIGJ5IHRoZSBhY2Nlc3NvciBib3VuZHMsIHdoaWNoXG4gICAgICAgICAgICAgICAgICAgIC8vIGFyZSBub3QgdXBkYXRlZCB3aXRoIGFuaW1hdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYm91bmRpbmdCb3ggPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG1lc2gubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsLmlzTWVzaEJhc2ljTWF0ZXJpYWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudG9uZU1hcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1ha2VzIHNoYWRvd3MgYmV0dGVyIGZvciBub24tbWFuaWZvbGQgbWVzaGVzXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2hhZG93U2lkZSA9IEZyb250U2lkZTtcbiAgICAgICAgICAgICAgICAvLyBGaXhlcyBhbiBlZGdlIGNhc2Ugd2l0aCB1bnVzZWQgZXh0cmEgVVYtY29vcmRzIGJlaW5nIGluY29ycmVjdGx5XG4gICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlZCBieSB0aHJlZS5qczsgcmVtb3ZlIHdoZW5cbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL3B1bGwvMjM5NzQgaXMgbWVyZ2VkLlxuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC5hb01hcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGdsdGYsIHRocmVlT2JqZWN0TWFwIH0gPSBwcmVwYXJlZFskY29ycmVsYXRlZFNjZW5lR3JhcGhdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnbHRmUmVmID0gdGhyZWVPYmplY3RNYXAuZ2V0KG1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdsdGYubWF0ZXJpYWxzICE9IG51bGwgJiYgZ2x0ZlJlZiAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBnbHRmUmVmLm1hdGVyaWFscyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnbHRmTWF0ZXJpYWwgPSBnbHRmLm1hdGVyaWFsc1tnbHRmUmVmLm1hdGVyaWFsc107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2x0Zk1hdGVyaWFsLm9jY2x1c2lvblRleHR1cmUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbHRmTWF0ZXJpYWwub2NjbHVzaW9uVGV4dHVyZS50ZXhDb29yZCA9PT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMudXYgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgndXYyJywgZ2VvbWV0cnkuYXR0cmlidXRlcy51dik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcHJlcGFyZWQ7XG4gICAgfVxuICAgIGdldCBjb3JyZWxhdGVkU2NlbmVHcmFwaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHByZXBhcmVkR0xURl1bJGNvcnJlbGF0ZWRTY2VuZUdyYXBoXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgWyRjbG9uZV0oKSB7XG4gICAgICAgIGNvbnN0IGNsb25lID0gc3VwZXJbJGNsb25lXSgpO1xuICAgICAgICBjb25zdCBzb3VyY2VVVUlEVG9DbG9uZWRNYXRlcmlhbCA9IG5ldyBNYXAoKTtcbiAgICAgICAgY2xvbmUuc2NlbmUudHJhdmVyc2UoKG5vZGUpID0+IHtcbiAgICAgICAgICAgIC8vIE1hdGVyaWFscyBhcmVuJ3QgY2xvbmVkIHdoZW4gY2xvbmluZyBtZXNoZXM7IGdlb21ldHJ5XG4gICAgICAgICAgICAvLyBhbmQgbWF0ZXJpYWxzIGFyZSBjb3BpZWQgYnkgcmVmZXJlbmNlLiBUaGlzIGlzIG5lY2Vzc2FyeVxuICAgICAgICAgICAgLy8gZm9yIHRoZSBzYW1lIG1vZGVsIHRvIGJlIHVzZWQgdHdpY2Ugd2l0aCBkaWZmZXJlbnRcbiAgICAgICAgICAgIC8vIHNjZW5lLWdyYXBoIG9wZXJhdGlvbnMuXG4gICAgICAgICAgICBpZiAobm9kZS5pc01lc2gpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gbm9kZTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG1lc2gubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVVVSURUb0Nsb25lZE1hdGVyaWFsLmhhcyhtYXRlcmlhbC51dWlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5tYXRlcmlhbCA9IHNvdXJjZVVVSURUb0Nsb25lZE1hdGVyaWFsLmdldChtYXRlcmlhbC51dWlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtZXNoLm1hdGVyaWFsID0gbWF0ZXJpYWwuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVVVJRFRvQ2xvbmVkTWF0ZXJpYWwuc2V0KG1hdGVyaWFsLnV1aWQsIG1lc2gubWF0ZXJpYWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENyb3NzLWNvcnJlbGF0ZSB0aGUgc2NlbmUgZ3JhcGggYnkgcmVseWluZyBvbiBpbmZvcm1hdGlvbiBpbiB0aGVcbiAgICAgICAgLy8gY3VycmVudCBzY2VuZSBncmFwaDsgd2l0aG91dCB0aGlzIHN0ZXAsIHJlbGF0aW9uc2hpcHMgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gVGhyZWUuanMgb2JqZWN0IGdyYXBoIGFuZCB0aGUgZ2xURiBzY2VuZSBncmFwaCB3aWxsIGJlIGxvc3QuXG4gICAgICAgIGNsb25lWyRjb3JyZWxhdGVkU2NlbmVHcmFwaF0gPVxuICAgICAgICAgICAgQ29ycmVsYXRlZFNjZW5lR3JhcGguZnJvbShjbG9uZSwgdGhpcy5jb3JyZWxhdGVkU2NlbmVHcmFwaCk7XG4gICAgICAgIHJldHVybiBjbG9uZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb2RlbFZpZXdlckdMVEZJbnN0YW5jZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/ModelViewerGLTFInstance.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/VariantMaterialExporterPlugin.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/gltf-instance/VariantMaterialExporterPlugin.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GLTFExporterMaterialsVariantsExtension)\n/* harmony export */ });\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @param object {THREE.Object3D}\n * @return {boolean}\n */\nconst compatibleObject = (object) => {\n    // @TODO: Need properer variantMaterials format validation?\n    return object.material !==\n        undefined && // easier than (!object.isMesh && !object.isLine &&\n        // !object.isPoints)\n        object.userData && // just in case\n        object.userData.variantMaterials &&\n        // Is this line costly?\n        !!Array\n            .from(object.userData.variantMaterials\n            .values())\n            .filter(m => compatibleMaterial(m.material));\n};\n/**\n * @param material {THREE.Material}\n * @return {boolean}\n */\nconst compatibleMaterial = (material) => {\n    // @TODO: support multi materials?\n    return material && material.isMaterial && !Array.isArray(material);\n};\nclass GLTFExporterMaterialsVariantsExtension {\n    constructor(writer) {\n        this.writer = writer;\n        this.name = 'KHR_materials_variants';\n        this.variantNames = [];\n    }\n    beforeParse(objects) {\n        // Find all variant names and store them to the table\n        const variantNameSet = new Set();\n        for (const object of objects) {\n            object.traverse(o => {\n                if (!compatibleObject(o)) {\n                    return;\n                }\n                const variantMaterials = o.userData.variantMaterials;\n                const variantDataMap = o.userData.variantData;\n                for (const [variantName, variantData] of variantDataMap) {\n                    const variantMaterial = variantMaterials.get(variantData.index);\n                    // Ignore unloaded variant materials\n                    if (variantMaterial && compatibleMaterial(variantMaterial.material)) {\n                        variantNameSet.add(variantName);\n                    }\n                }\n            });\n        }\n        // We may want to sort?\n        variantNameSet.forEach(name => this.variantNames.push(name));\n    }\n    writeMesh(mesh, meshDef) {\n        if (!compatibleObject(mesh)) {\n            return;\n        }\n        const userData = mesh.userData;\n        const variantMaterials = userData.variantMaterials;\n        const variantDataMap = userData.variantData;\n        const mappingTable = new Map();\n        // Removes gaps in the variant indices list (caused by deleting variants).\n        const reIndexedVariants = new Map();\n        const variants = Array.from(variantDataMap.values()).sort((a, b) => {\n            return a.index - b.index;\n        });\n        for (const [i, variantData] of variants.entries()) {\n            reIndexedVariants.set(variantData.index, i);\n        }\n        for (const variantData of variantDataMap.values()) {\n            const variantInstance = variantMaterials.get(variantData.index);\n            if (!variantInstance || !compatibleMaterial(variantInstance.material)) {\n                continue;\n            }\n            const materialIndex = this.writer.processMaterial(variantInstance.material);\n            if (!mappingTable.has(materialIndex)) {\n                mappingTable.set(materialIndex, { material: materialIndex, variants: [] });\n            }\n            mappingTable.get(materialIndex).variants.push(reIndexedVariants.get(variantData.index));\n        }\n        const mappingsDef = Array.from(mappingTable.values())\n            .map((m => { return m.variants.sort((a, b) => a - b) && m; }))\n            .sort((a, b) => a.material - b.material);\n        if (mappingsDef.length === 0) {\n            return;\n        }\n        const originalMaterialIndex = compatibleMaterial(userData.originalMaterial) ?\n            this.writer.processMaterial(userData.originalMaterial) :\n            -1;\n        for (const primitiveDef of meshDef.primitives) {\n            // Override primitiveDef.material with original material.\n            if (originalMaterialIndex >= 0) {\n                primitiveDef.material = originalMaterialIndex;\n            }\n            primitiveDef.extensions = primitiveDef.extensions || {};\n            primitiveDef.extensions[this.name] = { mappings: mappingsDef };\n        }\n    }\n    afterParse() {\n        if (this.variantNames.length === 0) {\n            return;\n        }\n        const root = this.writer.json;\n        root.extensions = root.extensions || {};\n        const variantsDef = this.variantNames.map(n => {\n            return { name: n };\n        });\n        root.extensions[this.name] = { variants: variantsDef };\n        this.writer.extensionsUsed[this.name] = true;\n    }\n}\n//# sourceMappingURL=VariantMaterialExporterPlugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9WYXJpYW50TWF0ZXJpYWxFeHBvcnRlclBsdWdpbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHVDQUF1QztBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwrQ0FBK0M7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVCx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9WYXJpYW50TWF0ZXJpYWxFeHBvcnRlclBsdWdpbi5qcz83NzQwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQHBhcmFtIG9iamVjdCB7VEhSRUUuT2JqZWN0M0R9XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5jb25zdCBjb21wYXRpYmxlT2JqZWN0ID0gKG9iamVjdCkgPT4ge1xuICAgIC8vIEBUT0RPOiBOZWVkIHByb3BlcmVyIHZhcmlhbnRNYXRlcmlhbHMgZm9ybWF0IHZhbGlkYXRpb24/XG4gICAgcmV0dXJuIG9iamVjdC5tYXRlcmlhbCAhPT1cbiAgICAgICAgdW5kZWZpbmVkICYmIC8vIGVhc2llciB0aGFuICghb2JqZWN0LmlzTWVzaCAmJiAhb2JqZWN0LmlzTGluZSAmJlxuICAgICAgICAvLyAhb2JqZWN0LmlzUG9pbnRzKVxuICAgICAgICBvYmplY3QudXNlckRhdGEgJiYgLy8ganVzdCBpbiBjYXNlXG4gICAgICAgIG9iamVjdC51c2VyRGF0YS52YXJpYW50TWF0ZXJpYWxzICYmXG4gICAgICAgIC8vIElzIHRoaXMgbGluZSBjb3N0bHk/XG4gICAgICAgICEhQXJyYXlcbiAgICAgICAgICAgIC5mcm9tKG9iamVjdC51c2VyRGF0YS52YXJpYW50TWF0ZXJpYWxzXG4gICAgICAgICAgICAudmFsdWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKG0gPT4gY29tcGF0aWJsZU1hdGVyaWFsKG0ubWF0ZXJpYWwpKTtcbn07XG4vKipcbiAqIEBwYXJhbSBtYXRlcmlhbCB7VEhSRUUuTWF0ZXJpYWx9XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5jb25zdCBjb21wYXRpYmxlTWF0ZXJpYWwgPSAobWF0ZXJpYWwpID0+IHtcbiAgICAvLyBAVE9ETzogc3VwcG9ydCBtdWx0aSBtYXRlcmlhbHM/XG4gICAgcmV0dXJuIG1hdGVyaWFsICYmIG1hdGVyaWFsLmlzTWF0ZXJpYWwgJiYgIUFycmF5LmlzQXJyYXkobWF0ZXJpYWwpO1xufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdMVEZFeHBvcnRlck1hdGVyaWFsc1ZhcmlhbnRzRXh0ZW5zaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih3cml0ZXIpIHtcbiAgICAgICAgdGhpcy53cml0ZXIgPSB3cml0ZXI7XG4gICAgICAgIHRoaXMubmFtZSA9ICdLSFJfbWF0ZXJpYWxzX3ZhcmlhbnRzJztcbiAgICAgICAgdGhpcy52YXJpYW50TmFtZXMgPSBbXTtcbiAgICB9XG4gICAgYmVmb3JlUGFyc2Uob2JqZWN0cykge1xuICAgICAgICAvLyBGaW5kIGFsbCB2YXJpYW50IG5hbWVzIGFuZCBzdG9yZSB0aGVtIHRvIHRoZSB0YWJsZVxuICAgICAgICBjb25zdCB2YXJpYW50TmFtZVNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBvYmplY3Qgb2Ygb2JqZWN0cykge1xuICAgICAgICAgICAgb2JqZWN0LnRyYXZlcnNlKG8gPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY29tcGF0aWJsZU9iamVjdChvKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhbnRNYXRlcmlhbHMgPSBvLnVzZXJEYXRhLnZhcmlhbnRNYXRlcmlhbHM7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFyaWFudERhdGFNYXAgPSBvLnVzZXJEYXRhLnZhcmlhbnREYXRhO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3ZhcmlhbnROYW1lLCB2YXJpYW50RGF0YV0gb2YgdmFyaWFudERhdGFNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFudE1hdGVyaWFsID0gdmFyaWFudE1hdGVyaWFscy5nZXQodmFyaWFudERhdGEuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgdW5sb2FkZWQgdmFyaWFudCBtYXRlcmlhbHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhcmlhbnRNYXRlcmlhbCAmJiBjb21wYXRpYmxlTWF0ZXJpYWwodmFyaWFudE1hdGVyaWFsLm1hdGVyaWFsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudE5hbWVTZXQuYWRkKHZhcmlhbnROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG1heSB3YW50IHRvIHNvcnQ/XG4gICAgICAgIHZhcmlhbnROYW1lU2V0LmZvckVhY2gobmFtZSA9PiB0aGlzLnZhcmlhbnROYW1lcy5wdXNoKG5hbWUpKTtcbiAgICB9XG4gICAgd3JpdGVNZXNoKG1lc2gsIG1lc2hEZWYpIHtcbiAgICAgICAgaWYgKCFjb21wYXRpYmxlT2JqZWN0KG1lc2gpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBtZXNoLnVzZXJEYXRhO1xuICAgICAgICBjb25zdCB2YXJpYW50TWF0ZXJpYWxzID0gdXNlckRhdGEudmFyaWFudE1hdGVyaWFscztcbiAgICAgICAgY29uc3QgdmFyaWFudERhdGFNYXAgPSB1c2VyRGF0YS52YXJpYW50RGF0YTtcbiAgICAgICAgY29uc3QgbWFwcGluZ1RhYmxlID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyBSZW1vdmVzIGdhcHMgaW4gdGhlIHZhcmlhbnQgaW5kaWNlcyBsaXN0IChjYXVzZWQgYnkgZGVsZXRpbmcgdmFyaWFudHMpLlxuICAgICAgICBjb25zdCByZUluZGV4ZWRWYXJpYW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgdmFyaWFudHMgPSBBcnJheS5mcm9tKHZhcmlhbnREYXRhTWFwLnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IFtpLCB2YXJpYW50RGF0YV0gb2YgdmFyaWFudHMuZW50cmllcygpKSB7XG4gICAgICAgICAgICByZUluZGV4ZWRWYXJpYW50cy5zZXQodmFyaWFudERhdGEuaW5kZXgsIGkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdmFyaWFudERhdGEgb2YgdmFyaWFudERhdGFNYXAudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhcmlhbnRJbnN0YW5jZSA9IHZhcmlhbnRNYXRlcmlhbHMuZ2V0KHZhcmlhbnREYXRhLmluZGV4KTtcbiAgICAgICAgICAgIGlmICghdmFyaWFudEluc3RhbmNlIHx8ICFjb21wYXRpYmxlTWF0ZXJpYWwodmFyaWFudEluc3RhbmNlLm1hdGVyaWFsKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IHRoaXMud3JpdGVyLnByb2Nlc3NNYXRlcmlhbCh2YXJpYW50SW5zdGFuY2UubWF0ZXJpYWwpO1xuICAgICAgICAgICAgaWYgKCFtYXBwaW5nVGFibGUuaGFzKG1hdGVyaWFsSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgbWFwcGluZ1RhYmxlLnNldChtYXRlcmlhbEluZGV4LCB7IG1hdGVyaWFsOiBtYXRlcmlhbEluZGV4LCB2YXJpYW50czogW10gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXBwaW5nVGFibGUuZ2V0KG1hdGVyaWFsSW5kZXgpLnZhcmlhbnRzLnB1c2gocmVJbmRleGVkVmFyaWFudHMuZ2V0KHZhcmlhbnREYXRhLmluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWFwcGluZ3NEZWYgPSBBcnJheS5mcm9tKG1hcHBpbmdUYWJsZS52YWx1ZXMoKSlcbiAgICAgICAgICAgIC5tYXAoKG0gPT4geyByZXR1cm4gbS52YXJpYW50cy5zb3J0KChhLCBiKSA9PiBhIC0gYikgJiYgbTsgfSkpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5tYXRlcmlhbCAtIGIubWF0ZXJpYWwpO1xuICAgICAgICBpZiAobWFwcGluZ3NEZWYubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxNYXRlcmlhbEluZGV4ID0gY29tcGF0aWJsZU1hdGVyaWFsKHVzZXJEYXRhLm9yaWdpbmFsTWF0ZXJpYWwpID9cbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnByb2Nlc3NNYXRlcmlhbCh1c2VyRGF0YS5vcmlnaW5hbE1hdGVyaWFsKSA6XG4gICAgICAgICAgICAtMTtcbiAgICAgICAgZm9yIChjb25zdCBwcmltaXRpdmVEZWYgb2YgbWVzaERlZi5wcmltaXRpdmVzKSB7XG4gICAgICAgICAgICAvLyBPdmVycmlkZSBwcmltaXRpdmVEZWYubWF0ZXJpYWwgd2l0aCBvcmlnaW5hbCBtYXRlcmlhbC5cbiAgICAgICAgICAgIGlmIChvcmlnaW5hbE1hdGVyaWFsSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIHByaW1pdGl2ZURlZi5tYXRlcmlhbCA9IG9yaWdpbmFsTWF0ZXJpYWxJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByaW1pdGl2ZURlZi5leHRlbnNpb25zID0gcHJpbWl0aXZlRGVmLmV4dGVuc2lvbnMgfHwge307XG4gICAgICAgICAgICBwcmltaXRpdmVEZWYuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdID0geyBtYXBwaW5nczogbWFwcGluZ3NEZWYgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZnRlclBhcnNlKCkge1xuICAgICAgICBpZiAodGhpcy52YXJpYW50TmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMud3JpdGVyLmpzb247XG4gICAgICAgIHJvb3QuZXh0ZW5zaW9ucyA9IHJvb3QuZXh0ZW5zaW9ucyB8fCB7fTtcbiAgICAgICAgY29uc3QgdmFyaWFudHNEZWYgPSB0aGlzLnZhcmlhbnROYW1lcy5tYXAobiA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyBuYW1lOiBuIH07XG4gICAgICAgIH0pO1xuICAgICAgICByb290LmV4dGVuc2lvbnNbdGhpcy5uYW1lXSA9IHsgdmFyaWFudHM6IHZhcmlhbnRzRGVmIH07XG4gICAgICAgIHRoaXMud3JpdGVyLmV4dGVuc2lvbnNVc2VkW3RoaXMubmFtZV0gPSB0cnVlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZhcmlhbnRNYXRlcmlhbEV4cG9ydGVyUGx1Z2luLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/VariantMaterialExporterPlugin.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/VariantMaterialLoaderPlugin.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/gltf-instance/VariantMaterialLoaderPlugin.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ GLTFMaterialsVariantsExtension)\n/* harmony export */ });\n/* @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * KHR_materials_variants specification allows duplicated variant names\n * but it makes handling the extension complex.\n * We ensure tha names and make it easier.\n * If you want to export the extension with the original names\n * you are recommended to write GLTFExporter plugin to restore the names.\n *\n * @param variantNames {Array<string>}\n * @return {Array<string>}\n */\nconst ensureUniqueNames = (variantNames) => {\n    const uniqueNames = [];\n    const knownNames = new Set();\n    for (const name of variantNames) {\n        let uniqueName = name;\n        let suffix = 0;\n        // @TODO: An easy solution.\n        //        O(N^2) in the worst scenario where N is variantNames.length.\n        //        Fix me if needed.\n        while (knownNames.has(uniqueName)) {\n            uniqueName = name + '.' + (++suffix);\n        }\n        knownNames.add(uniqueName);\n        uniqueNames.push(uniqueName);\n    }\n    return uniqueNames;\n};\n/**\n * Convert mappings array to table object to make handling the extension easier.\n *\n * @param\n *     extensionDef {glTF.meshes[n].primitive.extensions.KHR_materials_variants}\n * @param variantNames {Array<string>} Required to be unique names\n * @return {Map}\n */\nconst mappingsArrayToTable = (extensionDef) => {\n    const table = new Map();\n    for (const mapping of extensionDef.mappings) {\n        for (const variant of mapping.variants) {\n            table.set(variant, { material: null, gltfMaterialIndex: mapping.material });\n        }\n    }\n    return table;\n};\nclass GLTFMaterialsVariantsExtension {\n    constructor(parser) {\n        this.parser = parser;\n        this.name = 'KHR_materials_variants';\n    }\n    // Note that the following properties will be overridden even if they are\n    // pre-defined\n    // - gltf.userData.variants\n    // - mesh.userData.variantMaterials\n    afterRoot(gltf) {\n        const parser = this.parser;\n        const json = parser.json;\n        if (json.extensions === undefined ||\n            json.extensions[this.name] === undefined) {\n            return null;\n        }\n        const extensionDef = json.extensions[this.name];\n        const variantsDef = extensionDef.variants || [];\n        const variants = ensureUniqueNames(variantsDef.map((v) => v.name));\n        for (const scene of gltf.scenes) {\n            // Save the variants data under associated mesh.userData\n            scene.traverse(object => {\n                const mesh = object;\n                if (!mesh.isMesh) {\n                    return;\n                }\n                const association = parser.associations.get(mesh);\n                if (association == null || association.meshes == null ||\n                    association.primitives == null) {\n                    return;\n                }\n                const meshDef = json.meshes[association.meshes];\n                const primitivesDef = meshDef.primitives;\n                const primitiveDef = primitivesDef[association.primitives];\n                const extensionsDef = primitiveDef.extensions;\n                if (!extensionsDef || !extensionsDef[this.name]) {\n                    return;\n                }\n                mesh.userData.variantMaterials =\n                    mappingsArrayToTable(extensionsDef[this.name]);\n            });\n        }\n        gltf.userData.variants = variants;\n        return Promise.resolve();\n    }\n}\n//# sourceMappingURL=VariantMaterialLoaderPlugin.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9WYXJpYW50TWF0ZXJpYWxMb2FkZXJQbHVnaW4uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsd0JBQXdCLGVBQWU7QUFDdkMsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMscURBQXFEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL2dsdGYtaW5zdGFuY2UvVmFyaWFudE1hdGVyaWFsTG9hZGVyUGx1Z2luLmpzPzNmNDIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBLSFJfbWF0ZXJpYWxzX3ZhcmlhbnRzIHNwZWNpZmljYXRpb24gYWxsb3dzIGR1cGxpY2F0ZWQgdmFyaWFudCBuYW1lc1xuICogYnV0IGl0IG1ha2VzIGhhbmRsaW5nIHRoZSBleHRlbnNpb24gY29tcGxleC5cbiAqIFdlIGVuc3VyZSB0aGEgbmFtZXMgYW5kIG1ha2UgaXQgZWFzaWVyLlxuICogSWYgeW91IHdhbnQgdG8gZXhwb3J0IHRoZSBleHRlbnNpb24gd2l0aCB0aGUgb3JpZ2luYWwgbmFtZXNcbiAqIHlvdSBhcmUgcmVjb21tZW5kZWQgdG8gd3JpdGUgR0xURkV4cG9ydGVyIHBsdWdpbiB0byByZXN0b3JlIHRoZSBuYW1lcy5cbiAqXG4gKiBAcGFyYW0gdmFyaWFudE5hbWVzIHtBcnJheTxzdHJpbmc+fVxuICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn1cbiAqL1xuY29uc3QgZW5zdXJlVW5pcXVlTmFtZXMgPSAodmFyaWFudE5hbWVzKSA9PiB7XG4gICAgY29uc3QgdW5pcXVlTmFtZXMgPSBbXTtcbiAgICBjb25zdCBrbm93bk5hbWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgbmFtZSBvZiB2YXJpYW50TmFtZXMpIHtcbiAgICAgICAgbGV0IHVuaXF1ZU5hbWUgPSBuYW1lO1xuICAgICAgICBsZXQgc3VmZml4ID0gMDtcbiAgICAgICAgLy8gQFRPRE86IEFuIGVhc3kgc29sdXRpb24uXG4gICAgICAgIC8vICAgICAgICBPKE5eMikgaW4gdGhlIHdvcnN0IHNjZW5hcmlvIHdoZXJlIE4gaXMgdmFyaWFudE5hbWVzLmxlbmd0aC5cbiAgICAgICAgLy8gICAgICAgIEZpeCBtZSBpZiBuZWVkZWQuXG4gICAgICAgIHdoaWxlIChrbm93bk5hbWVzLmhhcyh1bmlxdWVOYW1lKSkge1xuICAgICAgICAgICAgdW5pcXVlTmFtZSA9IG5hbWUgKyAnLicgKyAoKytzdWZmaXgpO1xuICAgICAgICB9XG4gICAgICAgIGtub3duTmFtZXMuYWRkKHVuaXF1ZU5hbWUpO1xuICAgICAgICB1bmlxdWVOYW1lcy5wdXNoKHVuaXF1ZU5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gdW5pcXVlTmFtZXM7XG59O1xuLyoqXG4gKiBDb252ZXJ0IG1hcHBpbmdzIGFycmF5IHRvIHRhYmxlIG9iamVjdCB0byBtYWtlIGhhbmRsaW5nIHRoZSBleHRlbnNpb24gZWFzaWVyLlxuICpcbiAqIEBwYXJhbVxuICogICAgIGV4dGVuc2lvbkRlZiB7Z2xURi5tZXNoZXNbbl0ucHJpbWl0aXZlLmV4dGVuc2lvbnMuS0hSX21hdGVyaWFsc192YXJpYW50c31cbiAqIEBwYXJhbSB2YXJpYW50TmFtZXMge0FycmF5PHN0cmluZz59IFJlcXVpcmVkIHRvIGJlIHVuaXF1ZSBuYW1lc1xuICogQHJldHVybiB7TWFwfVxuICovXG5jb25zdCBtYXBwaW5nc0FycmF5VG9UYWJsZSA9IChleHRlbnNpb25EZWYpID0+IHtcbiAgICBjb25zdCB0YWJsZSA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IG1hcHBpbmcgb2YgZXh0ZW5zaW9uRGVmLm1hcHBpbmdzKSB7XG4gICAgICAgIGZvciAoY29uc3QgdmFyaWFudCBvZiBtYXBwaW5nLnZhcmlhbnRzKSB7XG4gICAgICAgICAgICB0YWJsZS5zZXQodmFyaWFudCwgeyBtYXRlcmlhbDogbnVsbCwgZ2x0Zk1hdGVyaWFsSW5kZXg6IG1hcHBpbmcubWF0ZXJpYWwgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhYmxlO1xufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdMVEZNYXRlcmlhbHNWYXJpYW50c0V4dGVuc2lvbiB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLm5hbWUgPSAnS0hSX21hdGVyaWFsc192YXJpYW50cyc7XG4gICAgfVxuICAgIC8vIE5vdGUgdGhhdCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMgd2lsbCBiZSBvdmVycmlkZGVuIGV2ZW4gaWYgdGhleSBhcmVcbiAgICAvLyBwcmUtZGVmaW5lZFxuICAgIC8vIC0gZ2x0Zi51c2VyRGF0YS52YXJpYW50c1xuICAgIC8vIC0gbWVzaC51c2VyRGF0YS52YXJpYW50TWF0ZXJpYWxzXG4gICAgYWZ0ZXJSb290KGdsdGYpIHtcbiAgICAgICAgY29uc3QgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG4gICAgICAgIGNvbnN0IGpzb24gPSBwYXJzZXIuanNvbjtcbiAgICAgICAgaWYgKGpzb24uZXh0ZW5zaW9ucyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBqc29uLmV4dGVuc2lvbnNbdGhpcy5uYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleHRlbnNpb25EZWYgPSBqc29uLmV4dGVuc2lvbnNbdGhpcy5uYW1lXTtcbiAgICAgICAgY29uc3QgdmFyaWFudHNEZWYgPSBleHRlbnNpb25EZWYudmFyaWFudHMgfHwgW107XG4gICAgICAgIGNvbnN0IHZhcmlhbnRzID0gZW5zdXJlVW5pcXVlTmFtZXModmFyaWFudHNEZWYubWFwKCh2KSA9PiB2Lm5hbWUpKTtcbiAgICAgICAgZm9yIChjb25zdCBzY2VuZSBvZiBnbHRmLnNjZW5lcykge1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgdmFyaWFudHMgZGF0YSB1bmRlciBhc3NvY2lhdGVkIG1lc2gudXNlckRhdGFcbiAgICAgICAgICAgIHNjZW5lLnRyYXZlcnNlKG9iamVjdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IG9iamVjdDtcbiAgICAgICAgICAgICAgICBpZiAoIW1lc2guaXNNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYXNzb2NpYXRpb24gPSBwYXJzZXIuYXNzb2NpYXRpb25zLmdldChtZXNoKTtcbiAgICAgICAgICAgICAgICBpZiAoYXNzb2NpYXRpb24gPT0gbnVsbCB8fCBhc3NvY2lhdGlvbi5tZXNoZXMgPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgICAgICBhc3NvY2lhdGlvbi5wcmltaXRpdmVzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoRGVmID0ganNvbi5tZXNoZXNbYXNzb2NpYXRpb24ubWVzaGVzXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmltaXRpdmVzRGVmID0gbWVzaERlZi5wcmltaXRpdmVzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByaW1pdGl2ZURlZiA9IHByaW1pdGl2ZXNEZWZbYXNzb2NpYXRpb24ucHJpbWl0aXZlc107XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uc0RlZiA9IHByaW1pdGl2ZURlZi5leHRlbnNpb25zO1xuICAgICAgICAgICAgICAgIGlmICghZXh0ZW5zaW9uc0RlZiB8fCAhZXh0ZW5zaW9uc0RlZlt0aGlzLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWVzaC51c2VyRGF0YS52YXJpYW50TWF0ZXJpYWxzID1cbiAgICAgICAgICAgICAgICAgICAgbWFwcGluZ3NBcnJheVRvVGFibGUoZXh0ZW5zaW9uc0RlZlt0aGlzLm5hbWVdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGdsdGYudXNlckRhdGEudmFyaWFudHMgPSB2YXJpYW50cztcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZhcmlhbnRNYXRlcmlhbExvYWRlclBsdWdpbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/VariantMaterialLoaderPlugin.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/correlated-scene-graph.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/gltf-instance/correlated-scene-graph.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CorrelatedSceneGraph: () => (/* binding */ CorrelatedSceneGraph)\n/* harmony export */ });\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\nconst $threeGLTF = Symbol('threeGLTF');\nconst $gltf = Symbol('gltf');\nconst $gltfElementMap = Symbol('gltfElementMap');\nconst $threeObjectMap = Symbol('threeObjectMap');\nconst $parallelTraverseThreeScene = Symbol('parallelTraverseThreeScene');\nconst $correlateOriginalThreeGLTF = Symbol('correlateOriginalThreeGLTF');\nconst $correlateCloneThreeGLTF = Symbol('correlateCloneThreeGLTF');\n/**\n * The Three.js GLTFLoader provides us with an in-memory representation\n * of a glTF in terms of Three.js constructs. It also provides us with a copy\n * of the deserialized glTF without any Three.js decoration, and a mapping of\n * glTF elements to their corresponding Three.js constructs.\n *\n * A CorrelatedSceneGraph exposes a synchronously available mapping of glTF\n * element references to their corresponding Three.js constructs.\n */\nclass CorrelatedSceneGraph {\n    constructor(threeGLTF, gltf, threeObjectMap, gltfElementMap) {\n        this[$threeGLTF] = threeGLTF;\n        this[$gltf] = gltf;\n        this[$gltfElementMap] = gltfElementMap;\n        this[$threeObjectMap] = threeObjectMap;\n    }\n    /**\n     * Produce a CorrelatedSceneGraph from a naturally generated Three.js GLTF.\n     * Such GLTFs are produced by Three.js' GLTFLoader, and contain cached\n     * details that expedite the correlation step.\n     *\n     * If a CorrelatedSceneGraph is provided as the second argument, re-correlates\n     * a cloned Three.js GLTF with a clone of the glTF hierarchy used to produce\n     * the upstream Three.js GLTF that the clone was created from. The result\n     * CorrelatedSceneGraph is representative of the cloned hierarchy.\n     */\n    static from(threeGLTF, upstreamCorrelatedSceneGraph) {\n        if (upstreamCorrelatedSceneGraph != null) {\n            return this[$correlateCloneThreeGLTF](threeGLTF, upstreamCorrelatedSceneGraph);\n        }\n        else {\n            return this[$correlateOriginalThreeGLTF](threeGLTF);\n        }\n    }\n    static [$correlateOriginalThreeGLTF](threeGLTF) {\n        const gltf = threeGLTF.parser.json;\n        const associations = threeGLTF.parser.associations;\n        const gltfElementMap = new Map();\n        const defaultMaterial = { name: 'Default' };\n        const defaultReference = { type: 'materials', index: -1 };\n        for (const threeMaterial of associations.keys()) {\n            // Note: GLTFLoader creates a \"default\" material that has no\n            // corresponding glTF element in the case that no materials are\n            // specified in the source glTF. In this case we append a default\n            // material to allow this to be operated upon.\n            if (threeMaterial instanceof three__WEBPACK_IMPORTED_MODULE_0__.Material &&\n                associations.get(threeMaterial) == null) {\n                if (defaultReference.index < 0) {\n                    if (gltf.materials == null) {\n                        gltf.materials = [];\n                    }\n                    defaultReference.index = gltf.materials.length;\n                    gltf.materials.push(defaultMaterial);\n                }\n                threeMaterial.name = defaultMaterial.name;\n                associations.set(threeMaterial, { materials: defaultReference.index });\n            }\n        }\n        // Creates a reverse look up map (gltf-object to Three-object)\n        for (const [threeObject, gltfMappings] of associations) {\n            if (gltfMappings) {\n                const objWithUserData = threeObject;\n                objWithUserData.userData = objWithUserData.userData || {};\n                objWithUserData.userData.associations = gltfMappings;\n            }\n            for (const mapping in gltfMappings) {\n                if (mapping != null && mapping !== 'primitives') {\n                    const type = mapping;\n                    const elementArray = gltf[type] || [];\n                    const gltfElement = elementArray[gltfMappings[type]];\n                    if (gltfElement == null) {\n                        // TODO: Maybe throw here...\n                        continue;\n                    }\n                    let threeObjects = gltfElementMap.get(gltfElement);\n                    if (threeObjects == null) {\n                        threeObjects = new Set();\n                        gltfElementMap.set(gltfElement, threeObjects);\n                    }\n                    threeObjects.add(threeObject);\n                }\n            }\n        }\n        return new CorrelatedSceneGraph(threeGLTF, gltf, associations, gltfElementMap);\n    }\n    /**\n     * Transfers the association between a raw glTF and a Three.js scene graph\n     * to a clone of the Three.js scene graph, resolved as a new\n     * CorrelatedSceneGraph instance.\n     */\n    static [$correlateCloneThreeGLTF](cloneThreeGLTF, upstreamCorrelatedSceneGraph) {\n        const originalThreeGLTF = upstreamCorrelatedSceneGraph.threeGLTF;\n        const originalGLTF = upstreamCorrelatedSceneGraph.gltf;\n        const cloneGLTF = JSON.parse(JSON.stringify(originalGLTF));\n        const cloneThreeObjectMap = new Map();\n        const cloneGLTFElementMap = new Map();\n        for (let i = 0; i < originalThreeGLTF.scenes.length; i++) {\n            this[$parallelTraverseThreeScene](originalThreeGLTF.scenes[i], cloneThreeGLTF.scenes[i], (object, cloneObject) => {\n                const elementReference = upstreamCorrelatedSceneGraph.threeObjectMap.get(object);\n                if (elementReference == null) {\n                    return;\n                }\n                for (const mapping in elementReference) {\n                    if (mapping != null && mapping !== 'primitives') {\n                        const type = mapping;\n                        const index = elementReference[type];\n                        const cloneElement = cloneGLTF[type][index];\n                        const mappings = cloneThreeObjectMap.get(cloneObject) || {};\n                        mappings[type] = index;\n                        cloneThreeObjectMap.set(cloneObject, mappings);\n                        const cloneObjects = cloneGLTFElementMap.get(cloneElement) || new Set();\n                        cloneObjects.add(cloneObject);\n                        cloneGLTFElementMap.set(cloneElement, cloneObjects);\n                    }\n                }\n            });\n        }\n        return new CorrelatedSceneGraph(cloneThreeGLTF, cloneGLTF, cloneThreeObjectMap, cloneGLTFElementMap);\n    }\n    /**\n     * Traverses two presumably identical Three.js scenes, and invokes a\n     * callback for each Object3D or Material encountered, including the initial\n     * scene. Adapted from\n     * https://github.com/mrdoob/three.js/blob/7c1424c5819ab622a346dd630ee4e6431388021e/examples/jsm/utils/SkeletonUtils.js#L586-L596\n     */\n    static [$parallelTraverseThreeScene](sceneOne, sceneTwo, callback) {\n        const isMesh = (object) => {\n            return object.isMesh;\n        };\n        const traverse = (a, b) => {\n            callback(a, b);\n            if (a.isObject3D) {\n                if (isMesh(a)) {\n                    if (Array.isArray(a.material)) {\n                        for (let i = 0; i < a.material.length; ++i) {\n                            traverse(a.material[i], b.material[i]);\n                        }\n                    }\n                    else {\n                        traverse(a.material, b.material);\n                    }\n                }\n                for (let i = 0; i < a.children.length; ++i) {\n                    traverse(a.children[i], b.children[i]);\n                }\n            }\n        };\n        traverse(sceneOne, sceneTwo);\n    }\n    /**\n     * The source Three.js GLTF result given to us by a Three.js GLTFLoader.\n     */\n    get threeGLTF() {\n        return this[$threeGLTF];\n    }\n    /**\n     * The in-memory deserialized source glTF.\n     */\n    get gltf() {\n        return this[$gltf];\n    }\n    /**\n     * A Map of glTF element references to arrays of corresponding Three.js\n     * object references. Three.js objects are kept in arrays to account for\n     * cases where more than one Three.js object corresponds to a single glTF\n     * element.\n     */\n    get gltfElementMap() {\n        return this[$gltfElementMap];\n    }\n    /**\n     * A map of individual Three.js objects to corresponding elements in the\n     * source glTF.\n     */\n    get threeObjectMap() {\n        return this[$threeObjectMap];\n    }\n}\n//# sourceMappingURL=correlated-scene-graph.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9jb3JyZWxhdGVkLXNjZW5lLWdyYXBoLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywyQ0FBUTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsbUNBQW1DO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHFDQUFxQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHVCQUF1QjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyx1QkFBdUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi90aHJlZS1jb21wb25lbnRzL2dsdGYtaW5zdGFuY2UvY29ycmVsYXRlZC1zY2VuZS1ncmFwaC5qcz9lZTUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSAndGhyZWUnO1xuY29uc3QgJHRocmVlR0xURiA9IFN5bWJvbCgndGhyZWVHTFRGJyk7XG5jb25zdCAkZ2x0ZiA9IFN5bWJvbCgnZ2x0ZicpO1xuY29uc3QgJGdsdGZFbGVtZW50TWFwID0gU3ltYm9sKCdnbHRmRWxlbWVudE1hcCcpO1xuY29uc3QgJHRocmVlT2JqZWN0TWFwID0gU3ltYm9sKCd0aHJlZU9iamVjdE1hcCcpO1xuY29uc3QgJHBhcmFsbGVsVHJhdmVyc2VUaHJlZVNjZW5lID0gU3ltYm9sKCdwYXJhbGxlbFRyYXZlcnNlVGhyZWVTY2VuZScpO1xuY29uc3QgJGNvcnJlbGF0ZU9yaWdpbmFsVGhyZWVHTFRGID0gU3ltYm9sKCdjb3JyZWxhdGVPcmlnaW5hbFRocmVlR0xURicpO1xuY29uc3QgJGNvcnJlbGF0ZUNsb25lVGhyZWVHTFRGID0gU3ltYm9sKCdjb3JyZWxhdGVDbG9uZVRocmVlR0xURicpO1xuLyoqXG4gKiBUaGUgVGhyZWUuanMgR0xURkxvYWRlciBwcm92aWRlcyB1cyB3aXRoIGFuIGluLW1lbW9yeSByZXByZXNlbnRhdGlvblxuICogb2YgYSBnbFRGIGluIHRlcm1zIG9mIFRocmVlLmpzIGNvbnN0cnVjdHMuIEl0IGFsc28gcHJvdmlkZXMgdXMgd2l0aCBhIGNvcHlcbiAqIG9mIHRoZSBkZXNlcmlhbGl6ZWQgZ2xURiB3aXRob3V0IGFueSBUaHJlZS5qcyBkZWNvcmF0aW9uLCBhbmQgYSBtYXBwaW5nIG9mXG4gKiBnbFRGIGVsZW1lbnRzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgVGhyZWUuanMgY29uc3RydWN0cy5cbiAqXG4gKiBBIENvcnJlbGF0ZWRTY2VuZUdyYXBoIGV4cG9zZXMgYSBzeW5jaHJvbm91c2x5IGF2YWlsYWJsZSBtYXBwaW5nIG9mIGdsVEZcbiAqIGVsZW1lbnQgcmVmZXJlbmNlcyB0byB0aGVpciBjb3JyZXNwb25kaW5nIFRocmVlLmpzIGNvbnN0cnVjdHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDb3JyZWxhdGVkU2NlbmVHcmFwaCB7XG4gICAgY29uc3RydWN0b3IodGhyZWVHTFRGLCBnbHRmLCB0aHJlZU9iamVjdE1hcCwgZ2x0ZkVsZW1lbnRNYXApIHtcbiAgICAgICAgdGhpc1skdGhyZWVHTFRGXSA9IHRocmVlR0xURjtcbiAgICAgICAgdGhpc1skZ2x0Zl0gPSBnbHRmO1xuICAgICAgICB0aGlzWyRnbHRmRWxlbWVudE1hcF0gPSBnbHRmRWxlbWVudE1hcDtcbiAgICAgICAgdGhpc1skdGhyZWVPYmplY3RNYXBdID0gdGhyZWVPYmplY3RNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2R1Y2UgYSBDb3JyZWxhdGVkU2NlbmVHcmFwaCBmcm9tIGEgbmF0dXJhbGx5IGdlbmVyYXRlZCBUaHJlZS5qcyBHTFRGLlxuICAgICAqIFN1Y2ggR0xURnMgYXJlIHByb2R1Y2VkIGJ5IFRocmVlLmpzJyBHTFRGTG9hZGVyLCBhbmQgY29udGFpbiBjYWNoZWRcbiAgICAgKiBkZXRhaWxzIHRoYXQgZXhwZWRpdGUgdGhlIGNvcnJlbGF0aW9uIHN0ZXAuXG4gICAgICpcbiAgICAgKiBJZiBhIENvcnJlbGF0ZWRTY2VuZUdyYXBoIGlzIHByb3ZpZGVkIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQsIHJlLWNvcnJlbGF0ZXNcbiAgICAgKiBhIGNsb25lZCBUaHJlZS5qcyBHTFRGIHdpdGggYSBjbG9uZSBvZiB0aGUgZ2xURiBoaWVyYXJjaHkgdXNlZCB0byBwcm9kdWNlXG4gICAgICogdGhlIHVwc3RyZWFtIFRocmVlLmpzIEdMVEYgdGhhdCB0aGUgY2xvbmUgd2FzIGNyZWF0ZWQgZnJvbS4gVGhlIHJlc3VsdFxuICAgICAqIENvcnJlbGF0ZWRTY2VuZUdyYXBoIGlzIHJlcHJlc2VudGF0aXZlIG9mIHRoZSBjbG9uZWQgaGllcmFyY2h5LlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tKHRocmVlR0xURiwgdXBzdHJlYW1Db3JyZWxhdGVkU2NlbmVHcmFwaCkge1xuICAgICAgICBpZiAodXBzdHJlYW1Db3JyZWxhdGVkU2NlbmVHcmFwaCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skY29ycmVsYXRlQ2xvbmVUaHJlZUdMVEZdKHRocmVlR0xURiwgdXBzdHJlYW1Db3JyZWxhdGVkU2NlbmVHcmFwaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1skY29ycmVsYXRlT3JpZ2luYWxUaHJlZUdMVEZdKHRocmVlR0xURik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIFskY29ycmVsYXRlT3JpZ2luYWxUaHJlZUdMVEZdKHRocmVlR0xURikge1xuICAgICAgICBjb25zdCBnbHRmID0gdGhyZWVHTFRGLnBhcnNlci5qc29uO1xuICAgICAgICBjb25zdCBhc3NvY2lhdGlvbnMgPSB0aHJlZUdMVEYucGFyc2VyLmFzc29jaWF0aW9ucztcbiAgICAgICAgY29uc3QgZ2x0ZkVsZW1lbnRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRNYXRlcmlhbCA9IHsgbmFtZTogJ0RlZmF1bHQnIH07XG4gICAgICAgIGNvbnN0IGRlZmF1bHRSZWZlcmVuY2UgPSB7IHR5cGU6ICdtYXRlcmlhbHMnLCBpbmRleDogLTEgfTtcbiAgICAgICAgZm9yIChjb25zdCB0aHJlZU1hdGVyaWFsIG9mIGFzc29jaWF0aW9ucy5rZXlzKCkpIHtcbiAgICAgICAgICAgIC8vIE5vdGU6IEdMVEZMb2FkZXIgY3JlYXRlcyBhIFwiZGVmYXVsdFwiIG1hdGVyaWFsIHRoYXQgaGFzIG5vXG4gICAgICAgICAgICAvLyBjb3JyZXNwb25kaW5nIGdsVEYgZWxlbWVudCBpbiB0aGUgY2FzZSB0aGF0IG5vIG1hdGVyaWFscyBhcmVcbiAgICAgICAgICAgIC8vIHNwZWNpZmllZCBpbiB0aGUgc291cmNlIGdsVEYuIEluIHRoaXMgY2FzZSB3ZSBhcHBlbmQgYSBkZWZhdWx0XG4gICAgICAgICAgICAvLyBtYXRlcmlhbCB0byBhbGxvdyB0aGlzIHRvIGJlIG9wZXJhdGVkIHVwb24uXG4gICAgICAgICAgICBpZiAodGhyZWVNYXRlcmlhbCBpbnN0YW5jZW9mIE1hdGVyaWFsICYmXG4gICAgICAgICAgICAgICAgYXNzb2NpYXRpb25zLmdldCh0aHJlZU1hdGVyaWFsKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRSZWZlcmVuY2UuaW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnbHRmLm1hdGVyaWFscyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnbHRmLm1hdGVyaWFscyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRSZWZlcmVuY2UuaW5kZXggPSBnbHRmLm1hdGVyaWFscy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGdsdGYubWF0ZXJpYWxzLnB1c2goZGVmYXVsdE1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyZWVNYXRlcmlhbC5uYW1lID0gZGVmYXVsdE1hdGVyaWFsLm5hbWU7XG4gICAgICAgICAgICAgICAgYXNzb2NpYXRpb25zLnNldCh0aHJlZU1hdGVyaWFsLCB7IG1hdGVyaWFsczogZGVmYXVsdFJlZmVyZW5jZS5pbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGVzIGEgcmV2ZXJzZSBsb29rIHVwIG1hcCAoZ2x0Zi1vYmplY3QgdG8gVGhyZWUtb2JqZWN0KVxuICAgICAgICBmb3IgKGNvbnN0IFt0aHJlZU9iamVjdCwgZ2x0Zk1hcHBpbmdzXSBvZiBhc3NvY2lhdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChnbHRmTWFwcGluZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvYmpXaXRoVXNlckRhdGEgPSB0aHJlZU9iamVjdDtcbiAgICAgICAgICAgICAgICBvYmpXaXRoVXNlckRhdGEudXNlckRhdGEgPSBvYmpXaXRoVXNlckRhdGEudXNlckRhdGEgfHwge307XG4gICAgICAgICAgICAgICAgb2JqV2l0aFVzZXJEYXRhLnVzZXJEYXRhLmFzc29jaWF0aW9ucyA9IGdsdGZNYXBwaW5ncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgbWFwcGluZyBpbiBnbHRmTWFwcGluZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAobWFwcGluZyAhPSBudWxsICYmIG1hcHBpbmcgIT09ICdwcmltaXRpdmVzJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gbWFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudEFycmF5ID0gZ2x0Zlt0eXBlXSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2x0ZkVsZW1lbnQgPSBlbGVtZW50QXJyYXlbZ2x0Zk1hcHBpbmdzW3R5cGVdXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdsdGZFbGVtZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IE1heWJlIHRocm93IGhlcmUuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aHJlZU9iamVjdHMgPSBnbHRmRWxlbWVudE1hcC5nZXQoZ2x0ZkVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhyZWVPYmplY3RzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVlT2JqZWN0cyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsdGZFbGVtZW50TWFwLnNldChnbHRmRWxlbWVudCwgdGhyZWVPYmplY3RzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJlZU9iamVjdHMuYWRkKHRocmVlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDb3JyZWxhdGVkU2NlbmVHcmFwaCh0aHJlZUdMVEYsIGdsdGYsIGFzc29jaWF0aW9ucywgZ2x0ZkVsZW1lbnRNYXApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2ZlcnMgdGhlIGFzc29jaWF0aW9uIGJldHdlZW4gYSByYXcgZ2xURiBhbmQgYSBUaHJlZS5qcyBzY2VuZSBncmFwaFxuICAgICAqIHRvIGEgY2xvbmUgb2YgdGhlIFRocmVlLmpzIHNjZW5lIGdyYXBoLCByZXNvbHZlZCBhcyBhIG5ld1xuICAgICAqIENvcnJlbGF0ZWRTY2VuZUdyYXBoIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBbJGNvcnJlbGF0ZUNsb25lVGhyZWVHTFRGXShjbG9uZVRocmVlR0xURiwgdXBzdHJlYW1Db3JyZWxhdGVkU2NlbmVHcmFwaCkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFRocmVlR0xURiA9IHVwc3RyZWFtQ29ycmVsYXRlZFNjZW5lR3JhcGgudGhyZWVHTFRGO1xuICAgICAgICBjb25zdCBvcmlnaW5hbEdMVEYgPSB1cHN0cmVhbUNvcnJlbGF0ZWRTY2VuZUdyYXBoLmdsdGY7XG4gICAgICAgIGNvbnN0IGNsb25lR0xURiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob3JpZ2luYWxHTFRGKSk7XG4gICAgICAgIGNvbnN0IGNsb25lVGhyZWVPYmplY3RNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGNvbnN0IGNsb25lR0xURkVsZW1lbnRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3JpZ2luYWxUaHJlZUdMVEYuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzWyRwYXJhbGxlbFRyYXZlcnNlVGhyZWVTY2VuZV0ob3JpZ2luYWxUaHJlZUdMVEYuc2NlbmVzW2ldLCBjbG9uZVRocmVlR0xURi5zY2VuZXNbaV0sIChvYmplY3QsIGNsb25lT2JqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudFJlZmVyZW5jZSA9IHVwc3RyZWFtQ29ycmVsYXRlZFNjZW5lR3JhcGgudGhyZWVPYmplY3RNYXAuZ2V0KG9iamVjdCk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRSZWZlcmVuY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbWFwcGluZyBpbiBlbGVtZW50UmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXBwaW5nICE9IG51bGwgJiYgbWFwcGluZyAhPT0gJ3ByaW1pdGl2ZXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gbWFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudFJlZmVyZW5jZVt0eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lRWxlbWVudCA9IGNsb25lR0xURlt0eXBlXVtpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXBwaW5ncyA9IGNsb25lVGhyZWVPYmplY3RNYXAuZ2V0KGNsb25lT2JqZWN0KSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBpbmdzW3R5cGVdID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZVRocmVlT2JqZWN0TWFwLnNldChjbG9uZU9iamVjdCwgbWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xvbmVPYmplY3RzID0gY2xvbmVHTFRGRWxlbWVudE1hcC5nZXQoY2xvbmVFbGVtZW50KSB8fCBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU9iamVjdHMuYWRkKGNsb25lT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lR0xURkVsZW1lbnRNYXAuc2V0KGNsb25lRWxlbWVudCwgY2xvbmVPYmplY3RzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ29ycmVsYXRlZFNjZW5lR3JhcGgoY2xvbmVUaHJlZUdMVEYsIGNsb25lR0xURiwgY2xvbmVUaHJlZU9iamVjdE1hcCwgY2xvbmVHTFRGRWxlbWVudE1hcCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYXZlcnNlcyB0d28gcHJlc3VtYWJseSBpZGVudGljYWwgVGhyZWUuanMgc2NlbmVzLCBhbmQgaW52b2tlcyBhXG4gICAgICogY2FsbGJhY2sgZm9yIGVhY2ggT2JqZWN0M0Qgb3IgTWF0ZXJpYWwgZW5jb3VudGVyZWQsIGluY2x1ZGluZyB0aGUgaW5pdGlhbFxuICAgICAqIHNjZW5lLiBBZGFwdGVkIGZyb21cbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2Jsb2IvN2MxNDI0YzU4MTlhYjYyMmEzNDZkZDYzMGVlNGU2NDMxMzg4MDIxZS9leGFtcGxlcy9qc20vdXRpbHMvU2tlbGV0b25VdGlscy5qcyNMNTg2LUw1OTZcbiAgICAgKi9cbiAgICBzdGF0aWMgWyRwYXJhbGxlbFRyYXZlcnNlVGhyZWVTY2VuZV0oc2NlbmVPbmUsIHNjZW5lVHdvLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBpc01lc2ggPSAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0LmlzTWVzaDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdHJhdmVyc2UgPSAoYSwgYikgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2soYSwgYik7XG4gICAgICAgICAgICBpZiAoYS5pc09iamVjdDNEKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTWVzaChhKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhLm1hdGVyaWFsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLm1hdGVyaWFsLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2UoYS5tYXRlcmlhbFtpXSwgYi5tYXRlcmlhbFtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZShhLm1hdGVyaWFsLCBiLm1hdGVyaWFsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2UoYS5jaGlsZHJlbltpXSwgYi5jaGlsZHJlbltpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0cmF2ZXJzZShzY2VuZU9uZSwgc2NlbmVUd28pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgc291cmNlIFRocmVlLmpzIEdMVEYgcmVzdWx0IGdpdmVuIHRvIHVzIGJ5IGEgVGhyZWUuanMgR0xURkxvYWRlci5cbiAgICAgKi9cbiAgICBnZXQgdGhyZWVHTFRGKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skdGhyZWVHTFRGXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGluLW1lbW9yeSBkZXNlcmlhbGl6ZWQgc291cmNlIGdsVEYuXG4gICAgICovXG4gICAgZ2V0IGdsdGYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRnbHRmXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBNYXAgb2YgZ2xURiBlbGVtZW50IHJlZmVyZW5jZXMgdG8gYXJyYXlzIG9mIGNvcnJlc3BvbmRpbmcgVGhyZWUuanNcbiAgICAgKiBvYmplY3QgcmVmZXJlbmNlcy4gVGhyZWUuanMgb2JqZWN0cyBhcmUga2VwdCBpbiBhcnJheXMgdG8gYWNjb3VudCBmb3JcbiAgICAgKiBjYXNlcyB3aGVyZSBtb3JlIHRoYW4gb25lIFRocmVlLmpzIG9iamVjdCBjb3JyZXNwb25kcyB0byBhIHNpbmdsZSBnbFRGXG4gICAgICogZWxlbWVudC5cbiAgICAgKi9cbiAgICBnZXQgZ2x0ZkVsZW1lbnRNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRnbHRmRWxlbWVudE1hcF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIGluZGl2aWR1YWwgVGhyZWUuanMgb2JqZWN0cyB0byBjb3JyZXNwb25kaW5nIGVsZW1lbnRzIGluIHRoZVxuICAgICAqIHNvdXJjZSBnbFRGLlxuICAgICAqL1xuICAgIGdldCB0aHJlZU9iamVjdE1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbJHRocmVlT2JqZWN0TWFwXTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3JyZWxhdGVkLXNjZW5lLWdyYXBoLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/correlated-scene-graph.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/gltf-2.0.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/three-components/gltf-instance/gltf-2.0.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Filter: () => (/* binding */ Filter),\n/* harmony export */   Wrap: () => (/* binding */ Wrap)\n/* harmony export */ });\nvar Filter;\n(function (Filter) {\n    Filter[Filter[\"Nearest\"] = 9728] = \"Nearest\";\n    Filter[Filter[\"Linear\"] = 9729] = \"Linear\";\n    Filter[Filter[\"NearestMipmapNearest\"] = 9984] = \"NearestMipmapNearest\";\n    Filter[Filter[\"LinearMipmapNearest\"] = 9985] = \"LinearMipmapNearest\";\n    Filter[Filter[\"NearestMipmapLinear\"] = 9986] = \"NearestMipmapLinear\";\n    Filter[Filter[\"LinearMipmapLinear\"] = 9987] = \"LinearMipmapLinear\";\n})(Filter || (Filter = {}));\nvar Wrap;\n(function (Wrap) {\n    Wrap[Wrap[\"ClampToEdge\"] = 33071] = \"ClampToEdge\";\n    Wrap[Wrap[\"MirroredRepeat\"] = 33648] = \"MirroredRepeat\";\n    Wrap[Wrap[\"Repeat\"] = 10497] = \"Repeat\";\n})(Wrap || (Wrap = {}));\n//# sourceMappingURL=gltf-2.0.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9nbHRmLTIuMC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdCQUF3QjtBQUNsQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQkFBb0I7QUFDckIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3RocmVlLWNvbXBvbmVudHMvZ2x0Zi1pbnN0YW5jZS9nbHRmLTIuMC5qcz84MDMwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgRmlsdGVyO1xuKGZ1bmN0aW9uIChGaWx0ZXIpIHtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiTmVhcmVzdFwiXSA9IDk3MjhdID0gXCJOZWFyZXN0XCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIkxpbmVhclwiXSA9IDk3MjldID0gXCJMaW5lYXJcIjtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiTmVhcmVzdE1pcG1hcE5lYXJlc3RcIl0gPSA5OTg0XSA9IFwiTmVhcmVzdE1pcG1hcE5lYXJlc3RcIjtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiTGluZWFyTWlwbWFwTmVhcmVzdFwiXSA9IDk5ODVdID0gXCJMaW5lYXJNaXBtYXBOZWFyZXN0XCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIk5lYXJlc3RNaXBtYXBMaW5lYXJcIl0gPSA5OTg2XSA9IFwiTmVhcmVzdE1pcG1hcExpbmVhclwiO1xuICAgIEZpbHRlcltGaWx0ZXJbXCJMaW5lYXJNaXBtYXBMaW5lYXJcIl0gPSA5OTg3XSA9IFwiTGluZWFyTWlwbWFwTGluZWFyXCI7XG59KShGaWx0ZXIgfHwgKEZpbHRlciA9IHt9KSk7XG5leHBvcnQgdmFyIFdyYXA7XG4oZnVuY3Rpb24gKFdyYXApIHtcbiAgICBXcmFwW1dyYXBbXCJDbGFtcFRvRWRnZVwiXSA9IDMzMDcxXSA9IFwiQ2xhbXBUb0VkZ2VcIjtcbiAgICBXcmFwW1dyYXBbXCJNaXJyb3JlZFJlcGVhdFwiXSA9IDMzNjQ4XSA9IFwiTWlycm9yZWRSZXBlYXRcIjtcbiAgICBXcmFwW1dyYXBbXCJSZXBlYXRcIl0gPSAxMDQ5N10gPSBcIlJlcGVhdFwiO1xufSkoV3JhcCB8fCAoV3JhcCA9IHt9KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nbHRmLTIuMC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/three-components/gltf-instance/gltf-2.0.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/utilities.js":
/*!************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/utilities.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CAPPED_DEVICE_PIXEL_RATIO: () => (/* binding */ CAPPED_DEVICE_PIXEL_RATIO),\n/* harmony export */   assertIsArCandidate: () => (/* binding */ assertIsArCandidate),\n/* harmony export */   clamp: () => (/* binding */ clamp),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   deserializeUrl: () => (/* binding */ deserializeUrl),\n/* harmony export */   getFirstMapKey: () => (/* binding */ getFirstMapKey),\n/* harmony export */   isDebugMode: () => (/* binding */ isDebugMode),\n/* harmony export */   resolveDpr: () => (/* binding */ resolveDpr),\n/* harmony export */   step: () => (/* binding */ step),\n/* harmony export */   throttle: () => (/* binding */ throttle),\n/* harmony export */   timePasses: () => (/* binding */ timePasses),\n/* harmony export */   toFullUrl: () => (/* binding */ toFullUrl),\n/* harmony export */   waitForEvent: () => (/* binding */ waitForEvent)\n/* harmony export */ });\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./constants.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/constants.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst deserializeUrl = (url) => (!!url && url !== 'null') ? toFullUrl(url) : null;\nconst assertIsArCandidate = () => {\n    if (_constants_js__WEBPACK_IMPORTED_MODULE_0__.IS_WEBXR_AR_CANDIDATE) {\n        return;\n    }\n    const missingApis = [];\n    if (!_constants_js__WEBPACK_IMPORTED_MODULE_0__.HAS_WEBXR_DEVICE_API) {\n        missingApis.push('WebXR Device API');\n    }\n    if (!_constants_js__WEBPACK_IMPORTED_MODULE_0__.HAS_WEBXR_HIT_TEST_API) {\n        missingApis.push('WebXR Hit Test API');\n    }\n    throw new Error(`The following APIs are required for AR, but are missing in this browser: ${missingApis.join(', ')}`);\n};\n/**\n * Converts a partial URL string to a fully qualified URL string.\n *\n * @param {String} url\n * @return {String}\n */\nconst toFullUrl = (partialUrl) => {\n    const url = new URL(partialUrl, window.location.toString());\n    return url.toString();\n};\n/**\n * Returns a throttled version of a given function that is only invoked at most\n * once within a given threshold of time in milliseconds.\n *\n * The throttled version of the function has a \"flush\" property that resets the\n * threshold for cases when immediate invocation is desired.\n */\nconst throttle = (fn, ms) => {\n    let timer = null;\n    const throttled = (...args) => {\n        if (timer != null) {\n            return;\n        }\n        fn(...args);\n        timer = self.setTimeout(() => timer = null, ms);\n    };\n    throttled.flush = () => {\n        if (timer != null) {\n            self.clearTimeout(timer);\n            timer = null;\n        }\n    };\n    return throttled;\n};\nconst debounce = (fn, ms) => {\n    let timer = null;\n    return (...args) => {\n        if (timer != null) {\n            self.clearTimeout(timer);\n        }\n        timer = self.setTimeout(() => {\n            timer = null;\n            fn(...args);\n        }, ms);\n    };\n};\n/**\n * @param {Number} edge\n * @param {Number} value\n * @return {Number} 0 if value is less than edge, otherwise 1\n */\nconst step = (edge, value) => {\n    return value < edge ? 0 : 1;\n};\n/**\n * @param {Number} value\n * @param {Number} lowerLimit\n * @param {Number} upperLimit\n * @return {Number} value clamped within lowerLimit..upperLimit\n */\nconst clamp = (value, lowerLimit, upperLimit) => Math.max(lowerLimit, Math.min(upperLimit, value));\n// The DPR we use for a \"capped\" scenario (see resolveDpr below):\nconst CAPPED_DEVICE_PIXEL_RATIO = 1;\n/**\n * This helper analyzes the layout of the current page to decide if we should\n * use the natural device pixel ratio, or a capped value.\n *\n * We cap DPR if there is no meta viewport (suggesting that user is not\n * consciously specifying how to scale the viewport relative to the device\n * screen size).\n *\n * The rationale is that this condition typically leads to a pathological\n * outcome on mobile devices. When the window dimensions are scaled up on a\n * device with a high DPR, we create a canvas that is much larger than\n * appropriate to accommodate for the pixel density if we naively use the\n * reported DPR.\n *\n * This value needs to be measured in real time, as device pixel ratio can\n * change over time (e.g., when a user zooms the page). Also, in some cases\n * (such as Firefox on Android), the window's innerWidth is initially reported\n * as the same as the screen's availWidth but changes later.\n *\n * A user who specifies a meta viewport, thereby consciously creating scaling\n * conditions where <model-viewer> is slow, will be encouraged to live their\n * best life.\n */\nconst resolveDpr = (() => {\n    // If true, implies that the user is conscious of the viewport scaling\n    // relative to the device screen size.\n    const HAS_META_VIEWPORT_TAG = (() => {\n        var _a;\n        // Search result pages sometimes do not include a meta viewport tag even\n        // though they are certainly modern and work properly with devicePixelRatio.\n        if ((_a = document.documentElement.getAttribute('itemtype')) === null || _a === void 0 ? void 0 : _a.includes('schema.org/SearchResultsPage')) {\n            return true;\n        }\n        const metas = document.head != null ?\n            Array.from(document.head.querySelectorAll('meta')) :\n            [];\n        for (const meta of metas) {\n            if (meta.name === 'viewport') {\n                return true;\n            }\n        }\n        return false;\n    })();\n    if (!HAS_META_VIEWPORT_TAG) {\n        console.warn('No <meta name=\"viewport\"> detected; <model-viewer> will cap pixel density at 1.');\n    }\n    return () => HAS_META_VIEWPORT_TAG ? window.devicePixelRatio :\n        CAPPED_DEVICE_PIXEL_RATIO;\n})();\n/**\n * Debug mode is enabled when one of the two following conditions is true:\n *\n *  1. A 'model-viewer-debug-mode' query parameter is present in the current\n *     search string\n *  2. There is a global object ModelViewerElement with a debugMode property set\n *     to true\n */\nconst isDebugMode = (() => {\n    const debugQueryParameterName = 'model-viewer-debug-mode';\n    const debugQueryParameter = new RegExp(`[?&]${debugQueryParameterName}(&|$)`);\n    return () => (self.ModelViewerElement &&\n        self.ModelViewerElement.debugMode) ||\n        (self.location && self.location.search &&\n            self.location.search.match(debugQueryParameter));\n})();\n/**\n * Returns the first key in a Map in iteration order.\n *\n * NOTE(cdata): This is necessary because IE11 does not implement iterator\n * methods of Map, and polymer-build does not polyfill these methods for\n * compatibility and performance reasons. This helper proposes that it is\n * a reasonable compromise to sacrifice a very small amount of runtime\n * performance in IE11 for the sake of code clarity.\n */\nconst getFirstMapKey = (map) => {\n    if (map.keys != null) {\n        return map.keys().next().value || null;\n    }\n    let firstKey = null;\n    try {\n        map.forEach((_value, key, _map) => {\n            firstKey = key;\n            // Stop iterating the Map with forEach:\n            throw new Error();\n        });\n    }\n    catch (_error) {\n    }\n    return firstKey;\n};\nconst timePasses = (ms = 0) => new Promise(resolve => setTimeout(resolve, ms));\n/**\n * @param {EventTarget|EventDispatcher} target\n * @param {string} eventName\n * @param {?Function} predicate\n */\nconst waitForEvent = (target, eventName, predicate = null) => new Promise(resolve => {\n    function handler(event) {\n        if (!predicate || predicate(event)) {\n            resolve(event);\n            target.removeEventListener(eventName, handler);\n        }\n    }\n    target.addEventListener(eventName, handler);\n});\n//# sourceMappingURL=utilities.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3V0aWxpdGllcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDcUc7QUFDOUY7QUFDQTtBQUNQLFFBQVEsZ0VBQXFCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0RBQW9CO0FBQzdCO0FBQ0E7QUFDQSxTQUFTLGlFQUFzQjtBQUMvQjtBQUNBO0FBQ0EsZ0dBQWdHLHVCQUF1QjtBQUN2SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixZQUFZO0FBQ1o7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFlBQVksUUFBUTtBQUNwQjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsWUFBWSxRQUFRO0FBQ3BCO0FBQ087QUFDUDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGtEQUFrRCx3QkFBd0I7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxXQUFXLDZCQUE2QjtBQUN4QyxXQUFXLFFBQVE7QUFDbkIsV0FBVyxXQUFXO0FBQ3RCO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3plbnBheXdhbGxldF9mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZ29vZ2xlL21vZGVsLXZpZXdlci9saWIvdXRpbGl0aWVzLmpzPzk2ODAiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgSEFTX1dFQlhSX0RFVklDRV9BUEksIEhBU19XRUJYUl9ISVRfVEVTVF9BUEksIElTX1dFQlhSX0FSX0NBTkRJREFURSB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcbmV4cG9ydCBjb25zdCBkZXNlcmlhbGl6ZVVybCA9ICh1cmwpID0+ICghIXVybCAmJiB1cmwgIT09ICdudWxsJykgPyB0b0Z1bGxVcmwodXJsKSA6IG51bGw7XG5leHBvcnQgY29uc3QgYXNzZXJ0SXNBckNhbmRpZGF0ZSA9ICgpID0+IHtcbiAgICBpZiAoSVNfV0VCWFJfQVJfQ0FORElEQVRFKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWlzc2luZ0FwaXMgPSBbXTtcbiAgICBpZiAoIUhBU19XRUJYUl9ERVZJQ0VfQVBJKSB7XG4gICAgICAgIG1pc3NpbmdBcGlzLnB1c2goJ1dlYlhSIERldmljZSBBUEknKTtcbiAgICB9XG4gICAgaWYgKCFIQVNfV0VCWFJfSElUX1RFU1RfQVBJKSB7XG4gICAgICAgIG1pc3NpbmdBcGlzLnB1c2goJ1dlYlhSIEhpdCBUZXN0IEFQSScpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBmb2xsb3dpbmcgQVBJcyBhcmUgcmVxdWlyZWQgZm9yIEFSLCBidXQgYXJlIG1pc3NpbmcgaW4gdGhpcyBicm93c2VyOiAke21pc3NpbmdBcGlzLmpvaW4oJywgJyl9YCk7XG59O1xuLyoqXG4gKiBDb252ZXJ0cyBhIHBhcnRpYWwgVVJMIHN0cmluZyB0byBhIGZ1bGx5IHF1YWxpZmllZCBVUkwgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IHRvRnVsbFVybCA9IChwYXJ0aWFsVXJsKSA9PiB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChwYXJ0aWFsVXJsLCB3aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xufTtcbi8qKlxuICogUmV0dXJucyBhIHRocm90dGxlZCB2ZXJzaW9uIG9mIGEgZ2l2ZW4gZnVuY3Rpb24gdGhhdCBpcyBvbmx5IGludm9rZWQgYXQgbW9zdFxuICogb25jZSB3aXRoaW4gYSBnaXZlbiB0aHJlc2hvbGQgb2YgdGltZSBpbiBtaWxsaXNlY29uZHMuXG4gKlxuICogVGhlIHRocm90dGxlZCB2ZXJzaW9uIG9mIHRoZSBmdW5jdGlvbiBoYXMgYSBcImZsdXNoXCIgcHJvcGVydHkgdGhhdCByZXNldHMgdGhlXG4gKiB0aHJlc2hvbGQgZm9yIGNhc2VzIHdoZW4gaW1tZWRpYXRlIGludm9jYXRpb24gaXMgZGVzaXJlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHRocm90dGxlID0gKGZuLCBtcykgPT4ge1xuICAgIGxldCB0aW1lciA9IG51bGw7XG4gICAgY29uc3QgdGhyb3R0bGVkID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKHRpbWVyICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmbiguLi5hcmdzKTtcbiAgICAgICAgdGltZXIgPSBzZWxmLnNldFRpbWVvdXQoKCkgPT4gdGltZXIgPSBudWxsLCBtcyk7XG4gICAgfTtcbiAgICB0aHJvdHRsZWQuZmx1c2ggPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aW1lciAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZWxmLmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB0aHJvdHRsZWQ7XG59O1xuZXhwb3J0IGNvbnN0IGRlYm91bmNlID0gKGZuLCBtcykgPT4ge1xuICAgIGxldCB0aW1lciA9IG51bGw7XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGlmICh0aW1lciAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZWxmLmNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIH1cbiAgICAgICAgdGltZXIgPSBzZWxmLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGltZXIgPSBudWxsO1xuICAgICAgICAgICAgZm4oLi4uYXJncyk7XG4gICAgICAgIH0sIG1zKTtcbiAgICB9O1xufTtcbi8qKlxuICogQHBhcmFtIHtOdW1iZXJ9IGVkZ2VcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICogQHJldHVybiB7TnVtYmVyfSAwIGlmIHZhbHVlIGlzIGxlc3MgdGhhbiBlZGdlLCBvdGhlcndpc2UgMVxuICovXG5leHBvcnQgY29uc3Qgc3RlcCA9IChlZGdlLCB2YWx1ZSkgPT4ge1xuICAgIHJldHVybiB2YWx1ZSA8IGVkZ2UgPyAwIDogMTtcbn07XG4vKipcbiAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxuICogQHBhcmFtIHtOdW1iZXJ9IGxvd2VyTGltaXRcbiAqIEBwYXJhbSB7TnVtYmVyfSB1cHBlckxpbWl0XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IHZhbHVlIGNsYW1wZWQgd2l0aGluIGxvd2VyTGltaXQuLnVwcGVyTGltaXRcbiAqL1xuZXhwb3J0IGNvbnN0IGNsYW1wID0gKHZhbHVlLCBsb3dlckxpbWl0LCB1cHBlckxpbWl0KSA9PiBNYXRoLm1heChsb3dlckxpbWl0LCBNYXRoLm1pbih1cHBlckxpbWl0LCB2YWx1ZSkpO1xuLy8gVGhlIERQUiB3ZSB1c2UgZm9yIGEgXCJjYXBwZWRcIiBzY2VuYXJpbyAoc2VlIHJlc29sdmVEcHIgYmVsb3cpOlxuZXhwb3J0IGNvbnN0IENBUFBFRF9ERVZJQ0VfUElYRUxfUkFUSU8gPSAxO1xuLyoqXG4gKiBUaGlzIGhlbHBlciBhbmFseXplcyB0aGUgbGF5b3V0IG9mIHRoZSBjdXJyZW50IHBhZ2UgdG8gZGVjaWRlIGlmIHdlIHNob3VsZFxuICogdXNlIHRoZSBuYXR1cmFsIGRldmljZSBwaXhlbCByYXRpbywgb3IgYSBjYXBwZWQgdmFsdWUuXG4gKlxuICogV2UgY2FwIERQUiBpZiB0aGVyZSBpcyBubyBtZXRhIHZpZXdwb3J0IChzdWdnZXN0aW5nIHRoYXQgdXNlciBpcyBub3RcbiAqIGNvbnNjaW91c2x5IHNwZWNpZnlpbmcgaG93IHRvIHNjYWxlIHRoZSB2aWV3cG9ydCByZWxhdGl2ZSB0byB0aGUgZGV2aWNlXG4gKiBzY3JlZW4gc2l6ZSkuXG4gKlxuICogVGhlIHJhdGlvbmFsZSBpcyB0aGF0IHRoaXMgY29uZGl0aW9uIHR5cGljYWxseSBsZWFkcyB0byBhIHBhdGhvbG9naWNhbFxuICogb3V0Y29tZSBvbiBtb2JpbGUgZGV2aWNlcy4gV2hlbiB0aGUgd2luZG93IGRpbWVuc2lvbnMgYXJlIHNjYWxlZCB1cCBvbiBhXG4gKiBkZXZpY2Ugd2l0aCBhIGhpZ2ggRFBSLCB3ZSBjcmVhdGUgYSBjYW52YXMgdGhhdCBpcyBtdWNoIGxhcmdlciB0aGFuXG4gKiBhcHByb3ByaWF0ZSB0byBhY2NvbW1vZGF0ZSBmb3IgdGhlIHBpeGVsIGRlbnNpdHkgaWYgd2UgbmFpdmVseSB1c2UgdGhlXG4gKiByZXBvcnRlZCBEUFIuXG4gKlxuICogVGhpcyB2YWx1ZSBuZWVkcyB0byBiZSBtZWFzdXJlZCBpbiByZWFsIHRpbWUsIGFzIGRldmljZSBwaXhlbCByYXRpbyBjYW5cbiAqIGNoYW5nZSBvdmVyIHRpbWUgKGUuZy4sIHdoZW4gYSB1c2VyIHpvb21zIHRoZSBwYWdlKS4gQWxzbywgaW4gc29tZSBjYXNlc1xuICogKHN1Y2ggYXMgRmlyZWZveCBvbiBBbmRyb2lkKSwgdGhlIHdpbmRvdydzIGlubmVyV2lkdGggaXMgaW5pdGlhbGx5IHJlcG9ydGVkXG4gKiBhcyB0aGUgc2FtZSBhcyB0aGUgc2NyZWVuJ3MgYXZhaWxXaWR0aCBidXQgY2hhbmdlcyBsYXRlci5cbiAqXG4gKiBBIHVzZXIgd2hvIHNwZWNpZmllcyBhIG1ldGEgdmlld3BvcnQsIHRoZXJlYnkgY29uc2Npb3VzbHkgY3JlYXRpbmcgc2NhbGluZ1xuICogY29uZGl0aW9ucyB3aGVyZSA8bW9kZWwtdmlld2VyPiBpcyBzbG93LCB3aWxsIGJlIGVuY291cmFnZWQgdG8gbGl2ZSB0aGVpclxuICogYmVzdCBsaWZlLlxuICovXG5leHBvcnQgY29uc3QgcmVzb2x2ZURwciA9ICgoKSA9PiB7XG4gICAgLy8gSWYgdHJ1ZSwgaW1wbGllcyB0aGF0IHRoZSB1c2VyIGlzIGNvbnNjaW91cyBvZiB0aGUgdmlld3BvcnQgc2NhbGluZ1xuICAgIC8vIHJlbGF0aXZlIHRvIHRoZSBkZXZpY2Ugc2NyZWVuIHNpemUuXG4gICAgY29uc3QgSEFTX01FVEFfVklFV1BPUlRfVEFHID0gKCgpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvLyBTZWFyY2ggcmVzdWx0IHBhZ2VzIHNvbWV0aW1lcyBkbyBub3QgaW5jbHVkZSBhIG1ldGEgdmlld3BvcnQgdGFnIGV2ZW5cbiAgICAgICAgLy8gdGhvdWdoIHRoZXkgYXJlIGNlcnRhaW5seSBtb2Rlcm4gYW5kIHdvcmsgcHJvcGVybHkgd2l0aCBkZXZpY2VQaXhlbFJhdGlvLlxuICAgICAgICBpZiAoKF9hID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnaXRlbXR5cGUnKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCdzY2hlbWEub3JnL1NlYXJjaFJlc3VsdHNQYWdlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1ldGFzID0gZG9jdW1lbnQuaGVhZCAhPSBudWxsID9cbiAgICAgICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yQWxsKCdtZXRhJykpIDpcbiAgICAgICAgICAgIFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG1ldGEgb2YgbWV0YXMpIHtcbiAgICAgICAgICAgIGlmIChtZXRhLm5hbWUgPT09ICd2aWV3cG9ydCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkoKTtcbiAgICBpZiAoIUhBU19NRVRBX1ZJRVdQT1JUX1RBRykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ05vIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiPiBkZXRlY3RlZDsgPG1vZGVsLXZpZXdlcj4gd2lsbCBjYXAgcGl4ZWwgZGVuc2l0eSBhdCAxLicpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4gSEFTX01FVEFfVklFV1BPUlRfVEFHID8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gOlxuICAgICAgICBDQVBQRURfREVWSUNFX1BJWEVMX1JBVElPO1xufSkoKTtcbi8qKlxuICogRGVidWcgbW9kZSBpcyBlbmFibGVkIHdoZW4gb25lIG9mIHRoZSB0d28gZm9sbG93aW5nIGNvbmRpdGlvbnMgaXMgdHJ1ZTpcbiAqXG4gKiAgMS4gQSAnbW9kZWwtdmlld2VyLWRlYnVnLW1vZGUnIHF1ZXJ5IHBhcmFtZXRlciBpcyBwcmVzZW50IGluIHRoZSBjdXJyZW50XG4gKiAgICAgc2VhcmNoIHN0cmluZ1xuICogIDIuIFRoZXJlIGlzIGEgZ2xvYmFsIG9iamVjdCBNb2RlbFZpZXdlckVsZW1lbnQgd2l0aCBhIGRlYnVnTW9kZSBwcm9wZXJ0eSBzZXRcbiAqICAgICB0byB0cnVlXG4gKi9cbmV4cG9ydCBjb25zdCBpc0RlYnVnTW9kZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgZGVidWdRdWVyeVBhcmFtZXRlck5hbWUgPSAnbW9kZWwtdmlld2VyLWRlYnVnLW1vZGUnO1xuICAgIGNvbnN0IGRlYnVnUXVlcnlQYXJhbWV0ZXIgPSBuZXcgUmVnRXhwKGBbPyZdJHtkZWJ1Z1F1ZXJ5UGFyYW1ldGVyTmFtZX0oJnwkKWApO1xuICAgIHJldHVybiAoKSA9PiAoc2VsZi5Nb2RlbFZpZXdlckVsZW1lbnQgJiZcbiAgICAgICAgc2VsZi5Nb2RlbFZpZXdlckVsZW1lbnQuZGVidWdNb2RlKSB8fFxuICAgICAgICAoc2VsZi5sb2NhdGlvbiAmJiBzZWxmLmxvY2F0aW9uLnNlYXJjaCAmJlxuICAgICAgICAgICAgc2VsZi5sb2NhdGlvbi5zZWFyY2gubWF0Y2goZGVidWdRdWVyeVBhcmFtZXRlcikpO1xufSkoKTtcbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3Qga2V5IGluIGEgTWFwIGluIGl0ZXJhdGlvbiBvcmRlci5cbiAqXG4gKiBOT1RFKGNkYXRhKTogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBJRTExIGRvZXMgbm90IGltcGxlbWVudCBpdGVyYXRvclxuICogbWV0aG9kcyBvZiBNYXAsIGFuZCBwb2x5bWVyLWJ1aWxkIGRvZXMgbm90IHBvbHlmaWxsIHRoZXNlIG1ldGhvZHMgZm9yXG4gKiBjb21wYXRpYmlsaXR5IGFuZCBwZXJmb3JtYW5jZSByZWFzb25zLiBUaGlzIGhlbHBlciBwcm9wb3NlcyB0aGF0IGl0IGlzXG4gKiBhIHJlYXNvbmFibGUgY29tcHJvbWlzZSB0byBzYWNyaWZpY2UgYSB2ZXJ5IHNtYWxsIGFtb3VudCBvZiBydW50aW1lXG4gKiBwZXJmb3JtYW5jZSBpbiBJRTExIGZvciB0aGUgc2FrZSBvZiBjb2RlIGNsYXJpdHkuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRGaXJzdE1hcEtleSA9IChtYXApID0+IHtcbiAgICBpZiAobWFwLmtleXMgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbWFwLmtleXMoKS5uZXh0KCkudmFsdWUgfHwgbnVsbDtcbiAgICB9XG4gICAgbGV0IGZpcnN0S2V5ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgICBtYXAuZm9yRWFjaCgoX3ZhbHVlLCBrZXksIF9tYXApID0+IHtcbiAgICAgICAgICAgIGZpcnN0S2V5ID0ga2V5O1xuICAgICAgICAgICAgLy8gU3RvcCBpdGVyYXRpbmcgdGhlIE1hcCB3aXRoIGZvckVhY2g6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICB9XG4gICAgcmV0dXJuIGZpcnN0S2V5O1xufTtcbmV4cG9ydCBjb25zdCB0aW1lUGFzc2VzID0gKG1zID0gMCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4vKipcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR8RXZlbnREaXNwYXRjaGVyfSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcbiAqIEBwYXJhbSB7P0Z1bmN0aW9ufSBwcmVkaWNhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IHdhaXRGb3JFdmVudCA9ICh0YXJnZXQsIGV2ZW50TmFtZSwgcHJlZGljYXRlID0gbnVsbCkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgZnVuY3Rpb24gaGFuZGxlcihldmVudCkge1xuICAgICAgICBpZiAoIXByZWRpY2F0ZSB8fCBwcmVkaWNhdGUoZXZlbnQpKSB7XG4gICAgICAgICAgICByZXNvbHZlKGV2ZW50KTtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbGl0aWVzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/utilities/animation.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/utilities/animation.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   easeInOutQuad: () => (/* binding */ easeInOutQuad),\n/* harmony export */   interpolate: () => (/* binding */ interpolate),\n/* harmony export */   sequence: () => (/* binding */ sequence),\n/* harmony export */   timeline: () => (/* binding */ timeline)\n/* harmony export */ });\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Adapted from https://gist.github.com/gre/1650294\nconst easeInOutQuad = (t) => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n/**\n * Creates a TimingFunction that uses a given ease to interpolate between\n * two configured number values.\n */\nconst interpolate = (start, end, ease = easeInOutQuad) => (time) => start + (end - start) * ease(time);\n/**\n * Creates a TimingFunction that interpolates through a weighted list\n * of other TimingFunctions (\"tracks\"). Tracks are interpolated in order, and\n * allocated a percentage of the total time based on their relative weight.\n */\nconst sequence = (tracks, weights) => {\n    const cumulativeSum = ((sum) => (value) => sum += value);\n    const times = weights.map(cumulativeSum(0));\n    return (time) => {\n        time = (0,_utilities__WEBPACK_IMPORTED_MODULE_0__.clamp)(time, 0, 1);\n        time *= times[times.length - 1];\n        const i = times.findIndex((val) => val >= time);\n        const start = i < 1 ? 0 : times[i - 1];\n        const end = times[i];\n        return tracks[i]((time - start) / (end - start));\n    };\n};\n/**\n * Creates a \"timeline\" TimingFunction out of an initial value and a series of\n * Keyframes. The timeline function accepts value from 0-1 and returns the\n * current value based on keyframe interpolation across the total number of\n * frames. Frames are only used to indicate the relative length of each keyframe\n * transition, so interpolated values will be computed for fractional frames.\n */\nconst timeline = (path) => {\n    const tracks = [];\n    const weights = [];\n    let lastValue = path.initialValue;\n    for (let i = 0; i < path.keyframes.length; ++i) {\n        const keyframe = path.keyframes[i];\n        const { value, frames } = keyframe;\n        const ease = keyframe.ease || easeInOutQuad;\n        const track = interpolate(lastValue, value, ease);\n        tracks.push(track);\n        weights.push(frames);\n        lastValue = value;\n    }\n    return sequence(tracks, weights);\n};\n//# sourceMappingURL=animation.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3V0aWxpdGllcy9hbmltYXRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3FDO0FBQ3JDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpREFBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkJBQTJCO0FBQy9DO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5wYXl3YWxsZXRfZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3V0aWxpdGllcy9hbmltYXRpb24uanM/MWVjOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICdBUyBJUycgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL3V0aWxpdGllcyc7XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZ3JlLzE2NTAyOTRcbmV4cG9ydCBjb25zdCBlYXNlSW5PdXRRdWFkID0gKHQpID0+IHQgPCAuNSA/IDIgKiB0ICogdCA6IC0xICsgKDQgLSAyICogdCkgKiB0O1xuLyoqXG4gKiBDcmVhdGVzIGEgVGltaW5nRnVuY3Rpb24gdGhhdCB1c2VzIGEgZ2l2ZW4gZWFzZSB0byBpbnRlcnBvbGF0ZSBiZXR3ZWVuXG4gKiB0d28gY29uZmlndXJlZCBudW1iZXIgdmFsdWVzLlxuICovXG5leHBvcnQgY29uc3QgaW50ZXJwb2xhdGUgPSAoc3RhcnQsIGVuZCwgZWFzZSA9IGVhc2VJbk91dFF1YWQpID0+ICh0aW1lKSA9PiBzdGFydCArIChlbmQgLSBzdGFydCkgKiBlYXNlKHRpbWUpO1xuLyoqXG4gKiBDcmVhdGVzIGEgVGltaW5nRnVuY3Rpb24gdGhhdCBpbnRlcnBvbGF0ZXMgdGhyb3VnaCBhIHdlaWdodGVkIGxpc3RcbiAqIG9mIG90aGVyIFRpbWluZ0Z1bmN0aW9ucyAoXCJ0cmFja3NcIikuIFRyYWNrcyBhcmUgaW50ZXJwb2xhdGVkIGluIG9yZGVyLCBhbmRcbiAqIGFsbG9jYXRlZCBhIHBlcmNlbnRhZ2Ugb2YgdGhlIHRvdGFsIHRpbWUgYmFzZWQgb24gdGhlaXIgcmVsYXRpdmUgd2VpZ2h0LlxuICovXG5leHBvcnQgY29uc3Qgc2VxdWVuY2UgPSAodHJhY2tzLCB3ZWlnaHRzKSA9PiB7XG4gICAgY29uc3QgY3VtdWxhdGl2ZVN1bSA9ICgoc3VtKSA9PiAodmFsdWUpID0+IHN1bSArPSB2YWx1ZSk7XG4gICAgY29uc3QgdGltZXMgPSB3ZWlnaHRzLm1hcChjdW11bGF0aXZlU3VtKDApKTtcbiAgICByZXR1cm4gKHRpbWUpID0+IHtcbiAgICAgICAgdGltZSA9IGNsYW1wKHRpbWUsIDAsIDEpO1xuICAgICAgICB0aW1lICo9IHRpbWVzW3RpbWVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCBpID0gdGltZXMuZmluZEluZGV4KCh2YWwpID0+IHZhbCA+PSB0aW1lKTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBpIDwgMSA/IDAgOiB0aW1lc1tpIC0gMV07XG4gICAgICAgIGNvbnN0IGVuZCA9IHRpbWVzW2ldO1xuICAgICAgICByZXR1cm4gdHJhY2tzW2ldKCh0aW1lIC0gc3RhcnQpIC8gKGVuZCAtIHN0YXJ0KSk7XG4gICAgfTtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBcInRpbWVsaW5lXCIgVGltaW5nRnVuY3Rpb24gb3V0IG9mIGFuIGluaXRpYWwgdmFsdWUgYW5kIGEgc2VyaWVzIG9mXG4gKiBLZXlmcmFtZXMuIFRoZSB0aW1lbGluZSBmdW5jdGlvbiBhY2NlcHRzIHZhbHVlIGZyb20gMC0xIGFuZCByZXR1cm5zIHRoZVxuICogY3VycmVudCB2YWx1ZSBiYXNlZCBvbiBrZXlmcmFtZSBpbnRlcnBvbGF0aW9uIGFjcm9zcyB0aGUgdG90YWwgbnVtYmVyIG9mXG4gKiBmcmFtZXMuIEZyYW1lcyBhcmUgb25seSB1c2VkIHRvIGluZGljYXRlIHRoZSByZWxhdGl2ZSBsZW5ndGggb2YgZWFjaCBrZXlmcmFtZVxuICogdHJhbnNpdGlvbiwgc28gaW50ZXJwb2xhdGVkIHZhbHVlcyB3aWxsIGJlIGNvbXB1dGVkIGZvciBmcmFjdGlvbmFsIGZyYW1lcy5cbiAqL1xuZXhwb3J0IGNvbnN0IHRpbWVsaW5lID0gKHBhdGgpID0+IHtcbiAgICBjb25zdCB0cmFja3MgPSBbXTtcbiAgICBjb25zdCB3ZWlnaHRzID0gW107XG4gICAgbGV0IGxhc3RWYWx1ZSA9IHBhdGguaW5pdGlhbFZhbHVlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5rZXlmcmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3Qga2V5ZnJhbWUgPSBwYXRoLmtleWZyYW1lc1tpXTtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZnJhbWVzIH0gPSBrZXlmcmFtZTtcbiAgICAgICAgY29uc3QgZWFzZSA9IGtleWZyYW1lLmVhc2UgfHwgZWFzZUluT3V0UXVhZDtcbiAgICAgICAgY29uc3QgdHJhY2sgPSBpbnRlcnBvbGF0ZShsYXN0VmFsdWUsIHZhbHVlLCBlYXNlKTtcbiAgICAgICAgdHJhY2tzLnB1c2godHJhY2spO1xuICAgICAgICB3ZWlnaHRzLnB1c2goZnJhbWVzKTtcbiAgICAgICAgbGFzdFZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBzZXF1ZW5jZSh0cmFja3MsIHdlaWdodHMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuaW1hdGlvbi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/utilities/animation.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/utilities/cache-eviction-policy.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/utilities/cache-eviction-policy.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CacheEvictionPolicy: () => (/* binding */ CacheEvictionPolicy)\n/* harmony export */ });\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a, _b;\nconst $retainerCount = Symbol('retainerCount');\nconst $recentlyUsed = Symbol('recentlyUsed');\nconst $evict = Symbol('evict');\nconst $evictionThreshold = Symbol('evictionThreshold');\nconst $cache = Symbol('cache');\n/**\n * The CacheEvictionPolicy manages the lifecycle for items in a cache,\n * evicting any items outside some threshold bounds in \"recently used\" order,\n * if they are evictable.\n *\n * Items are considered cached as they are retained. When all retainers\n * of an item release it, that item is considered evictable.\n */\nclass CacheEvictionPolicy {\n    constructor(cache, evictionThreshold = 5) {\n        this[_a] = new Map();\n        this[_b] = [];\n        this[$cache] = cache;\n        this[$evictionThreshold] = evictionThreshold;\n    }\n    /**\n     * The eviction threshold is the maximum number of items to hold\n     * in cache indefinitely. Items within the threshold (in recently\n     * used order) will continue to be cached even if they have zero\n     * retainers.\n     */\n    set evictionThreshold(value) {\n        this[$evictionThreshold] = value;\n        this[$evict]();\n    }\n    get evictionThreshold() {\n        return this[$evictionThreshold];\n    }\n    /**\n     * A reference to the cache that operates under this policy\n     */\n    get cache() {\n        return this[$cache];\n    }\n    /**\n     * Given an item key, returns the number of retainers of that item\n     */\n    retainerCount(key) {\n        return this[$retainerCount].get(key) || 0;\n    }\n    /**\n     * Resets the internal tracking of cache item retainers. Use only in cases\n     * where it is certain that all retained cache items have been accounted for!\n     */\n    reset() {\n        this[$retainerCount].clear();\n        this[$recentlyUsed] = [];\n    }\n    /**\n     * Mark a given cache item as retained, where the item is represented\n     * by its key. An item can have any number of retainers.\n     */\n    retain(key) {\n        if (!this[$retainerCount].has(key)) {\n            this[$retainerCount].set(key, 0);\n        }\n        this[$retainerCount].set(key, this[$retainerCount].get(key) + 1);\n        const recentlyUsedIndex = this[$recentlyUsed].indexOf(key);\n        if (recentlyUsedIndex !== -1) {\n            this[$recentlyUsed].splice(recentlyUsedIndex, 1);\n        }\n        this[$recentlyUsed].unshift(key);\n        // Evict, in case retaining a new item pushed an evictable item beyond the\n        // eviction threshold\n        this[$evict]();\n    }\n    /**\n     * Mark a given cache item as released by one of its retainers, where the item\n     * is represented by its key. When all retainers of an item have released it,\n     * the item is considered evictable.\n     */\n    release(key) {\n        if (this[$retainerCount].has(key)) {\n            this[$retainerCount].set(key, Math.max(this[$retainerCount].get(key) - 1, 0));\n        }\n        this[$evict]();\n    }\n    [(_a = $retainerCount, _b = $recentlyUsed, $evict)]() {\n        if (this[$recentlyUsed].length < this[$evictionThreshold]) {\n            return;\n        }\n        for (let i = this[$recentlyUsed].length - 1; i >= this[$evictionThreshold]; --i) {\n            const key = this[$recentlyUsed][i];\n            const retainerCount = this[$retainerCount].get(key);\n            if (retainerCount === 0) {\n                this[$cache].delete(key);\n                this[$recentlyUsed].splice(i, 1);\n            }\n        }\n    }\n}\n//# sourceMappingURL=cache-eviction-policy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3V0aWxpdGllcy9jYWNoZS1ldmljdGlvbi1wb2xpY3kuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsK0JBQStCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi91dGlsaXRpZXMvY2FjaGUtZXZpY3Rpb24tcG9saWN5LmpzP2QwZWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xudmFyIF9hLCBfYjtcbmNvbnN0ICRyZXRhaW5lckNvdW50ID0gU3ltYm9sKCdyZXRhaW5lckNvdW50Jyk7XG5jb25zdCAkcmVjZW50bHlVc2VkID0gU3ltYm9sKCdyZWNlbnRseVVzZWQnKTtcbmNvbnN0ICRldmljdCA9IFN5bWJvbCgnZXZpY3QnKTtcbmNvbnN0ICRldmljdGlvblRocmVzaG9sZCA9IFN5bWJvbCgnZXZpY3Rpb25UaHJlc2hvbGQnKTtcbmNvbnN0ICRjYWNoZSA9IFN5bWJvbCgnY2FjaGUnKTtcbi8qKlxuICogVGhlIENhY2hlRXZpY3Rpb25Qb2xpY3kgbWFuYWdlcyB0aGUgbGlmZWN5Y2xlIGZvciBpdGVtcyBpbiBhIGNhY2hlLFxuICogZXZpY3RpbmcgYW55IGl0ZW1zIG91dHNpZGUgc29tZSB0aHJlc2hvbGQgYm91bmRzIGluIFwicmVjZW50bHkgdXNlZFwiIG9yZGVyLFxuICogaWYgdGhleSBhcmUgZXZpY3RhYmxlLlxuICpcbiAqIEl0ZW1zIGFyZSBjb25zaWRlcmVkIGNhY2hlZCBhcyB0aGV5IGFyZSByZXRhaW5lZC4gV2hlbiBhbGwgcmV0YWluZXJzXG4gKiBvZiBhbiBpdGVtIHJlbGVhc2UgaXQsIHRoYXQgaXRlbSBpcyBjb25zaWRlcmVkIGV2aWN0YWJsZS5cbiAqL1xuZXhwb3J0IGNsYXNzIENhY2hlRXZpY3Rpb25Qb2xpY3kge1xuICAgIGNvbnN0cnVjdG9yKGNhY2hlLCBldmljdGlvblRocmVzaG9sZCA9IDUpIHtcbiAgICAgICAgdGhpc1tfYV0gPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXNbX2JdID0gW107XG4gICAgICAgIHRoaXNbJGNhY2hlXSA9IGNhY2hlO1xuICAgICAgICB0aGlzWyRldmljdGlvblRocmVzaG9sZF0gPSBldmljdGlvblRocmVzaG9sZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGV2aWN0aW9uIHRocmVzaG9sZCBpcyB0aGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gaG9sZFxuICAgICAqIGluIGNhY2hlIGluZGVmaW5pdGVseS4gSXRlbXMgd2l0aGluIHRoZSB0aHJlc2hvbGQgKGluIHJlY2VudGx5XG4gICAgICogdXNlZCBvcmRlcikgd2lsbCBjb250aW51ZSB0byBiZSBjYWNoZWQgZXZlbiBpZiB0aGV5IGhhdmUgemVyb1xuICAgICAqIHJldGFpbmVycy5cbiAgICAgKi9cbiAgICBzZXQgZXZpY3Rpb25UaHJlc2hvbGQodmFsdWUpIHtcbiAgICAgICAgdGhpc1skZXZpY3Rpb25UaHJlc2hvbGRdID0gdmFsdWU7XG4gICAgICAgIHRoaXNbJGV2aWN0XSgpO1xuICAgIH1cbiAgICBnZXQgZXZpY3Rpb25UaHJlc2hvbGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzWyRldmljdGlvblRocmVzaG9sZF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBjYWNoZSB0aGF0IG9wZXJhdGVzIHVuZGVyIHRoaXMgcG9saWN5XG4gICAgICovXG4gICAgZ2V0IGNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpc1skY2FjaGVdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBpdGVtIGtleSwgcmV0dXJucyB0aGUgbnVtYmVyIG9mIHJldGFpbmVycyBvZiB0aGF0IGl0ZW1cbiAgICAgKi9cbiAgICByZXRhaW5lckNvdW50KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpc1skcmV0YWluZXJDb3VudF0uZ2V0KGtleSkgfHwgMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBpbnRlcm5hbCB0cmFja2luZyBvZiBjYWNoZSBpdGVtIHJldGFpbmVycy4gVXNlIG9ubHkgaW4gY2FzZXNcbiAgICAgKiB3aGVyZSBpdCBpcyBjZXJ0YWluIHRoYXQgYWxsIHJldGFpbmVkIGNhY2hlIGl0ZW1zIGhhdmUgYmVlbiBhY2NvdW50ZWQgZm9yIVxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzWyRyZXRhaW5lckNvdW50XS5jbGVhcigpO1xuICAgICAgICB0aGlzWyRyZWNlbnRseVVzZWRdID0gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmsgYSBnaXZlbiBjYWNoZSBpdGVtIGFzIHJldGFpbmVkLCB3aGVyZSB0aGUgaXRlbSBpcyByZXByZXNlbnRlZFxuICAgICAqIGJ5IGl0cyBrZXkuIEFuIGl0ZW0gY2FuIGhhdmUgYW55IG51bWJlciBvZiByZXRhaW5lcnMuXG4gICAgICovXG4gICAgcmV0YWluKGtleSkge1xuICAgICAgICBpZiAoIXRoaXNbJHJldGFpbmVyQ291bnRdLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICB0aGlzWyRyZXRhaW5lckNvdW50XS5zZXQoa2V5LCAwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzWyRyZXRhaW5lckNvdW50XS5zZXQoa2V5LCB0aGlzWyRyZXRhaW5lckNvdW50XS5nZXQoa2V5KSArIDEpO1xuICAgICAgICBjb25zdCByZWNlbnRseVVzZWRJbmRleCA9IHRoaXNbJHJlY2VudGx5VXNlZF0uaW5kZXhPZihrZXkpO1xuICAgICAgICBpZiAocmVjZW50bHlVc2VkSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzWyRyZWNlbnRseVVzZWRdLnNwbGljZShyZWNlbnRseVVzZWRJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc1skcmVjZW50bHlVc2VkXS51bnNoaWZ0KGtleSk7XG4gICAgICAgIC8vIEV2aWN0LCBpbiBjYXNlIHJldGFpbmluZyBhIG5ldyBpdGVtIHB1c2hlZCBhbiBldmljdGFibGUgaXRlbSBiZXlvbmQgdGhlXG4gICAgICAgIC8vIGV2aWN0aW9uIHRocmVzaG9sZFxuICAgICAgICB0aGlzWyRldmljdF0oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFyayBhIGdpdmVuIGNhY2hlIGl0ZW0gYXMgcmVsZWFzZWQgYnkgb25lIG9mIGl0cyByZXRhaW5lcnMsIHdoZXJlIHRoZSBpdGVtXG4gICAgICogaXMgcmVwcmVzZW50ZWQgYnkgaXRzIGtleS4gV2hlbiBhbGwgcmV0YWluZXJzIG9mIGFuIGl0ZW0gaGF2ZSByZWxlYXNlZCBpdCxcbiAgICAgKiB0aGUgaXRlbSBpcyBjb25zaWRlcmVkIGV2aWN0YWJsZS5cbiAgICAgKi9cbiAgICByZWxlYXNlKGtleSkge1xuICAgICAgICBpZiAodGhpc1skcmV0YWluZXJDb3VudF0uaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHRoaXNbJHJldGFpbmVyQ291bnRdLnNldChrZXksIE1hdGgubWF4KHRoaXNbJHJldGFpbmVyQ291bnRdLmdldChrZXkpIC0gMSwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbJGV2aWN0XSgpO1xuICAgIH1cbiAgICBbKF9hID0gJHJldGFpbmVyQ291bnQsIF9iID0gJHJlY2VudGx5VXNlZCwgJGV2aWN0KV0oKSB7XG4gICAgICAgIGlmICh0aGlzWyRyZWNlbnRseVVzZWRdLmxlbmd0aCA8IHRoaXNbJGV2aWN0aW9uVGhyZXNob2xkXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzWyRyZWNlbnRseVVzZWRdLmxlbmd0aCAtIDE7IGkgPj0gdGhpc1skZXZpY3Rpb25UaHJlc2hvbGRdOyAtLWkpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXNbJHJlY2VudGx5VXNlZF1baV07XG4gICAgICAgICAgICBjb25zdCByZXRhaW5lckNvdW50ID0gdGhpc1skcmV0YWluZXJDb3VudF0uZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAocmV0YWluZXJDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXNbJGNhY2hlXS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzWyRyZWNlbnRseVVzZWRdLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLWV2aWN0aW9uLXBvbGljeS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/utilities/cache-eviction-policy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/utilities/data-conversion.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/utilities/data-conversion.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dataUrlToBlob: () => (/* binding */ dataUrlToBlob)\n/* harmony export */ });\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Converts a base64 string which represents a data url\n * into a Blob of the same contents.\n */\nconst dataUrlToBlob = async (base64DataUrl) => {\n    return new Promise((resolve, reject) => {\n        const sliceSize = 512;\n        const typeMatch = base64DataUrl.match(/data:(.*);/);\n        if (!typeMatch) {\n            return reject(new Error(`${base64DataUrl} is not a valid data Url`));\n        }\n        const type = typeMatch[1];\n        const base64 = base64DataUrl.replace(/data:image\\/\\w+;base64,/, '');\n        const byteCharacters = atob(base64);\n        const byteArrays = [];\n        for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            const slice = byteCharacters.slice(offset, offset + sliceSize);\n            const byteNumbers = new Array(slice.length);\n            for (let i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            const byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        resolve(new Blob(byteArrays, { type }));\n    });\n};\n//# sourceMappingURL=data-conversion.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3V0aWxpdGllcy9kYXRhLWNvbnZlcnNpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDtBQUNBLHVDQUF1QyxlQUFlO0FBQ3REO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBLDZCQUE2QixnQ0FBZ0M7QUFDN0Q7QUFDQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxNQUFNO0FBQzdDLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi91dGlsaXRpZXMvZGF0YS1jb252ZXJzaW9uLmpzPzUxZTEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgJ0xpY2Vuc2UnKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAnQVMgSVMnIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBhIGJhc2U2NCBzdHJpbmcgd2hpY2ggcmVwcmVzZW50cyBhIGRhdGEgdXJsXG4gKiBpbnRvIGEgQmxvYiBvZiB0aGUgc2FtZSBjb250ZW50cy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRhdGFVcmxUb0Jsb2IgPSBhc3luYyAoYmFzZTY0RGF0YVVybCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHNsaWNlU2l6ZSA9IDUxMjtcbiAgICAgICAgY29uc3QgdHlwZU1hdGNoID0gYmFzZTY0RGF0YVVybC5tYXRjaCgvZGF0YTooLiopOy8pO1xuICAgICAgICBpZiAoIXR5cGVNYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoYCR7YmFzZTY0RGF0YVVybH0gaXMgbm90IGEgdmFsaWQgZGF0YSBVcmxgKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVNYXRjaFsxXTtcbiAgICAgICAgY29uc3QgYmFzZTY0ID0gYmFzZTY0RGF0YVVybC5yZXBsYWNlKC9kYXRhOmltYWdlXFwvXFx3KztiYXNlNjQsLywgJycpO1xuICAgICAgICBjb25zdCBieXRlQ2hhcmFjdGVycyA9IGF0b2IoYmFzZTY0KTtcbiAgICAgICAgY29uc3QgYnl0ZUFycmF5cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBvZmZzZXQgPSAwOyBvZmZzZXQgPCBieXRlQ2hhcmFjdGVycy5sZW5ndGg7IG9mZnNldCArPSBzbGljZVNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsaWNlID0gYnl0ZUNoYXJhY3RlcnMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBzbGljZVNpemUpO1xuICAgICAgICAgICAgY29uc3QgYnl0ZU51bWJlcnMgPSBuZXcgQXJyYXkoc2xpY2UubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBieXRlTnVtYmVyc1tpXSA9IHNsaWNlLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBuZXcgVWludDhBcnJheShieXRlTnVtYmVycyk7XG4gICAgICAgICAgICBieXRlQXJyYXlzLnB1c2goYnl0ZUFycmF5KTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKG5ldyBCbG9iKGJ5dGVBcnJheXMsIHsgdHlwZSB9KSk7XG4gICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YS1jb252ZXJzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/utilities/data-conversion.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/utilities/focus-visible.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/utilities/focus-visible.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FocusVisiblePolyfillMixin: () => (/* binding */ FocusVisiblePolyfillMixin)\n/* harmony export */ });\n/**\n * This mixin function is designed to be applied to a class that inherits\n * from HTMLElement. It makes it easy for a custom element to coordinate with\n * the :focus-visible polyfill.\n *\n * NOTE(cdata): The code here was adapted from an example proposed with the\n * introduction of ShadowDOM support in the :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196\n * @param {Function} SuperClass The base class implementation to decorate with\n * implementation that coordinates with the :focus-visible polyfill\n */\nconst FocusVisiblePolyfillMixin = (SuperClass) => {\n    var _a;\n    const coordinateWithPolyfill = (instance) => {\n        // If there is no shadow root, there is no need to coordinate with\n        // the polyfill. If we already coordinated with the polyfill, we can\n        // skip subsequent invocations:\n        if (instance.shadowRoot == null ||\n            instance.hasAttribute('data-js-focus-visible')) {\n            return () => { };\n        }\n        // The polyfill might already be loaded. If so, we can apply it to\n        // the shadow root immediately:\n        if (self.applyFocusVisiblePolyfill) {\n            self.applyFocusVisiblePolyfill(instance.shadowRoot);\n        }\n        else {\n            const coordinationHandler = () => {\n                self.applyFocusVisiblePolyfill(instance.shadowRoot);\n            };\n            // Otherwise, wait for the polyfill to be loaded lazily. It might\n            // never be loaded, but if it is then we can apply it to the\n            // shadow root at the appropriate time by waiting for the ready\n            // event:\n            self.addEventListener('focus-visible-polyfill-ready', coordinationHandler, { once: true });\n            return () => {\n                self.removeEventListener('focus-visible-polyfill-ready', coordinationHandler);\n            };\n        }\n        return () => { };\n    };\n    const $endPolyfillCoordination = Symbol('endPolyfillCoordination');\n    // IE11 doesn't natively support custom elements or JavaScript class\n    // syntax The mixin implementation assumes that the user will take the\n    // appropriate steps to support both:\n    class FocusVisibleCoordinator extends SuperClass {\n        constructor() {\n            super(...arguments);\n            this[_a] = null;\n        }\n        // Attempt to coordinate with the polyfill when connected to the\n        // document:\n        connectedCallback() {\n            super.connectedCallback && super.connectedCallback();\n            if (this[$endPolyfillCoordination] == null) {\n                this[$endPolyfillCoordination] = coordinateWithPolyfill(this);\n            }\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback && super.disconnectedCallback();\n            // It's important to remove the polyfill event listener when we\n            // disconnect, otherwise we will leak the whole element via window:\n            if (this[$endPolyfillCoordination] != null) {\n                this[$endPolyfillCoordination]();\n                this[$endPolyfillCoordination] = null;\n            }\n        }\n    }\n    _a = $endPolyfillCoordination;\n    ;\n    return FocusVisibleCoordinator;\n};\n//# sourceMappingURL=focus-visible.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3V0aWxpdGllcy9mb2N1cy12aXNpYmxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFVBQVU7QUFDckI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RkFBeUYsWUFBWTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi91dGlsaXRpZXMvZm9jdXMtdmlzaWJsZS5qcz83OTZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBtaXhpbiBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBhcHBsaWVkIHRvIGEgY2xhc3MgdGhhdCBpbmhlcml0c1xuICogZnJvbSBIVE1MRWxlbWVudC4gSXQgbWFrZXMgaXQgZWFzeSBmb3IgYSBjdXN0b20gZWxlbWVudCB0byBjb29yZGluYXRlIHdpdGhcbiAqIHRoZSA6Zm9jdXMtdmlzaWJsZSBwb2x5ZmlsbC5cbiAqXG4gKiBOT1RFKGNkYXRhKTogVGhlIGNvZGUgaGVyZSB3YXMgYWRhcHRlZCBmcm9tIGFuIGV4YW1wbGUgcHJvcG9zZWQgd2l0aCB0aGVcbiAqIGludHJvZHVjdGlvbiBvZiBTaGFkb3dET00gc3VwcG9ydCBpbiB0aGUgOmZvY3VzLXZpc2libGUgcG9seWZpbGwuXG4gKlxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9mb2N1cy12aXNpYmxlL3B1bGwvMTk2XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBTdXBlckNsYXNzIFRoZSBiYXNlIGNsYXNzIGltcGxlbWVudGF0aW9uIHRvIGRlY29yYXRlIHdpdGhcbiAqIGltcGxlbWVudGF0aW9uIHRoYXQgY29vcmRpbmF0ZXMgd2l0aCB0aGUgOmZvY3VzLXZpc2libGUgcG9seWZpbGxcbiAqL1xuZXhwb3J0IGNvbnN0IEZvY3VzVmlzaWJsZVBvbHlmaWxsTWl4aW4gPSAoU3VwZXJDbGFzcykgPT4ge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBjb29yZGluYXRlV2l0aFBvbHlmaWxsID0gKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHNoYWRvdyByb290LCB0aGVyZSBpcyBubyBuZWVkIHRvIGNvb3JkaW5hdGUgd2l0aFxuICAgICAgICAvLyB0aGUgcG9seWZpbGwuIElmIHdlIGFscmVhZHkgY29vcmRpbmF0ZWQgd2l0aCB0aGUgcG9seWZpbGwsIHdlIGNhblxuICAgICAgICAvLyBza2lwIHN1YnNlcXVlbnQgaW52b2NhdGlvbnM6XG4gICAgICAgIGlmIChpbnN0YW5jZS5zaGFkb3dSb290ID09IG51bGwgfHxcbiAgICAgICAgICAgIGluc3RhbmNlLmhhc0F0dHJpYnV0ZSgnZGF0YS1qcy1mb2N1cy12aXNpYmxlJykpIHtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7IH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIHBvbHlmaWxsIG1pZ2h0IGFscmVhZHkgYmUgbG9hZGVkLiBJZiBzbywgd2UgY2FuIGFwcGx5IGl0IHRvXG4gICAgICAgIC8vIHRoZSBzaGFkb3cgcm9vdCBpbW1lZGlhdGVseTpcbiAgICAgICAgaWYgKHNlbGYuYXBwbHlGb2N1c1Zpc2libGVQb2x5ZmlsbCkge1xuICAgICAgICAgICAgc2VsZi5hcHBseUZvY3VzVmlzaWJsZVBvbHlmaWxsKGluc3RhbmNlLnNoYWRvd1Jvb3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29vcmRpbmF0aW9uSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZWxmLmFwcGx5Rm9jdXNWaXNpYmxlUG9seWZpbGwoaW5zdGFuY2Uuc2hhZG93Um9vdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3YWl0IGZvciB0aGUgcG9seWZpbGwgdG8gYmUgbG9hZGVkIGxhemlseS4gSXQgbWlnaHRcbiAgICAgICAgICAgIC8vIG5ldmVyIGJlIGxvYWRlZCwgYnV0IGlmIGl0IGlzIHRoZW4gd2UgY2FuIGFwcGx5IGl0IHRvIHRoZVxuICAgICAgICAgICAgLy8gc2hhZG93IHJvb3QgYXQgdGhlIGFwcHJvcHJpYXRlIHRpbWUgYnkgd2FpdGluZyBmb3IgdGhlIHJlYWR5XG4gICAgICAgICAgICAvLyBldmVudDpcbiAgICAgICAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMtdmlzaWJsZS1wb2x5ZmlsbC1yZWFkeScsIGNvb3JkaW5hdGlvbkhhbmRsZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cy12aXNpYmxlLXBvbHlmaWxsLXJlYWR5JywgY29vcmRpbmF0aW9uSGFuZGxlcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoKSA9PiB7IH07XG4gICAgfTtcbiAgICBjb25zdCAkZW5kUG9seWZpbGxDb29yZGluYXRpb24gPSBTeW1ib2woJ2VuZFBvbHlmaWxsQ29vcmRpbmF0aW9uJyk7XG4gICAgLy8gSUUxMSBkb2Vzbid0IG5hdGl2ZWx5IHN1cHBvcnQgY3VzdG9tIGVsZW1lbnRzIG9yIEphdmFTY3JpcHQgY2xhc3NcbiAgICAvLyBzeW50YXggVGhlIG1peGluIGltcGxlbWVudGF0aW9uIGFzc3VtZXMgdGhhdCB0aGUgdXNlciB3aWxsIHRha2UgdGhlXG4gICAgLy8gYXBwcm9wcmlhdGUgc3RlcHMgdG8gc3VwcG9ydCBib3RoOlxuICAgIGNsYXNzIEZvY3VzVmlzaWJsZUNvb3JkaW5hdG9yIGV4dGVuZHMgU3VwZXJDbGFzcyB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXNbX2FdID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBBdHRlbXB0IHRvIGNvb3JkaW5hdGUgd2l0aCB0aGUgcG9seWZpbGwgd2hlbiBjb25uZWN0ZWQgdG8gdGhlXG4gICAgICAgIC8vIGRvY3VtZW50OlxuICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrICYmIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICBpZiAodGhpc1skZW5kUG9seWZpbGxDb29yZGluYXRpb25dID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzWyRlbmRQb2x5ZmlsbENvb3JkaW5hdGlvbl0gPSBjb29yZGluYXRlV2l0aFBvbHlmaWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2sgJiYgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIC8vIEl0J3MgaW1wb3J0YW50IHRvIHJlbW92ZSB0aGUgcG9seWZpbGwgZXZlbnQgbGlzdGVuZXIgd2hlbiB3ZVxuICAgICAgICAgICAgLy8gZGlzY29ubmVjdCwgb3RoZXJ3aXNlIHdlIHdpbGwgbGVhayB0aGUgd2hvbGUgZWxlbWVudCB2aWEgd2luZG93OlxuICAgICAgICAgICAgaWYgKHRoaXNbJGVuZFBvbHlmaWxsQ29vcmRpbmF0aW9uXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpc1skZW5kUG9seWZpbGxDb29yZGluYXRpb25dKCk7XG4gICAgICAgICAgICAgICAgdGhpc1skZW5kUG9seWZpbGxDb29yZGluYXRpb25dID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfYSA9ICRlbmRQb2x5ZmlsbENvb3JkaW5hdGlvbjtcbiAgICA7XG4gICAgcmV0dXJuIEZvY3VzVmlzaWJsZUNvb3JkaW5hdG9yO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvY3VzLXZpc2libGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/utilities/focus-visible.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@google/model-viewer/lib/utilities/progress-tracker.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@google/model-viewer/lib/utilities/progress-tracker.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProgressTracker: () => (/* binding */ ProgressTracker)\n/* harmony export */ });\n/* harmony import */ var _utilities_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities.js */ \"(ssr)/./node_modules/@google/model-viewer/lib/utilities.js\");\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * ProgressTracker is an event emitter that helps to track the ongoing progress\n * of many simultaneous actions.\n *\n * ProgressTracker reports progress activity in the form of a progress event.\n * The event.detail.totalProgress value indicates the elapsed progress of all\n * activities being tracked by the ProgressTracker.\n *\n * The value of totalProgress is a number that progresses from 0 to 1. The\n * ProgressTracker allows for the lazy accumulation of tracked actions, so the\n * total progress represents a abstract, non-absolute progress towards the\n * completion of all currently tracked events.\n *\n * When all currently tracked activities are finished, the ProgressTracker\n * emits one final progress event and then resets the list of its currently\n * tracked activities. This means that from an observer's perspective,\n * ongoing activities will accumulate and collectively contribute to the notion\n * of total progress until all currently tracked ongoing activities have\n * completed.\n */\nclass ProgressTracker extends EventTarget {\n    constructor() {\n        super(...arguments);\n        this.ongoingActivities = new Set();\n        this.totalProgress = 0;\n    }\n    /**\n     * The total number of activities currently being tracked.\n     */\n    get ongoingActivityCount() {\n        return this.ongoingActivities.size;\n    }\n    /**\n     * Registers a new activity to be tracked by the progress tracker. The method\n     * returns a special callback that should be invoked whenever new progress is\n     * ready to be reported. The progress should be reported as a value between 0\n     * and 1, where 0 would represent the beginning of the action and 1 would\n     * represent its completion.\n     *\n     * There is no built-in notion of a time-out for ongoing activities, so once\n     * an ongoing activity is begun, it is up to the consumer of this API to\n     * update the progress until that activity is no longer ongoing.\n     *\n     * Progress is only allowed to move forward for any given activity. If a lower\n     * progress is reported than the previously reported progress, it will be\n     * ignored.\n     */\n    beginActivity() {\n        const activity = { progress: 0, completed: false };\n        this.ongoingActivities.add(activity);\n        if (this.ongoingActivityCount === 1) {\n            // Announce the first progress event (which should always be 0 / 1\n            // total progress):\n            this.announceTotalProgress(activity, 0);\n        }\n        return (progress) => {\n            let nextProgress;\n            nextProgress = Math.max((0,_utilities_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(progress, 0, 1), activity.progress);\n            if (nextProgress !== activity.progress) {\n                this.announceTotalProgress(activity, nextProgress);\n            }\n            return activity.progress;\n        };\n    }\n    announceTotalProgress(updatedActivity, nextProgress) {\n        let progressLeft = 0;\n        let completedActivities = 0;\n        if (nextProgress == 1.0)\n            updatedActivity.completed = true;\n        for (const activity of this.ongoingActivities) {\n            const { progress } = activity;\n            progressLeft += 1.0 - progress;\n            if (activity.completed === true) {\n                completedActivities++;\n            }\n        }\n        const lastProgress = updatedActivity.progress;\n        updatedActivity.progress = nextProgress;\n        // Advance the total progress by the fraction of total remaining progress\n        // due to this activity.\n        this.totalProgress += (nextProgress - lastProgress) *\n            (1.0 - this.totalProgress) / progressLeft;\n        const totalProgress = completedActivities === this.ongoingActivityCount ?\n            1.0 :\n            this.totalProgress;\n        this.dispatchEvent(new CustomEvent('progress', { detail: { totalProgress } }));\n        if (completedActivities === this.ongoingActivityCount) {\n            this.totalProgress = 0.0;\n            this.ongoingActivities.clear();\n        }\n    }\n}\n//# sourceMappingURL=progress-tracker.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGdvb2dsZS9tb2RlbC12aWV3ZXIvbGliL3V0aWxpdGllcy9wcm9ncmVzcy10cmFja2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxvREFBSztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELFVBQVUsaUJBQWlCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVucGF5d2FsbGV0X2Zyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0Bnb29nbGUvbW9kZWwtdmlld2VyL2xpYi91dGlsaXRpZXMvcHJvZ3Jlc3MtdHJhY2tlci5qcz84ZDVmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJztcbi8qKlxuICogUHJvZ3Jlc3NUcmFja2VyIGlzIGFuIGV2ZW50IGVtaXR0ZXIgdGhhdCBoZWxwcyB0byB0cmFjayB0aGUgb25nb2luZyBwcm9ncmVzc1xuICogb2YgbWFueSBzaW11bHRhbmVvdXMgYWN0aW9ucy5cbiAqXG4gKiBQcm9ncmVzc1RyYWNrZXIgcmVwb3J0cyBwcm9ncmVzcyBhY3Rpdml0eSBpbiB0aGUgZm9ybSBvZiBhIHByb2dyZXNzIGV2ZW50LlxuICogVGhlIGV2ZW50LmRldGFpbC50b3RhbFByb2dyZXNzIHZhbHVlIGluZGljYXRlcyB0aGUgZWxhcHNlZCBwcm9ncmVzcyBvZiBhbGxcbiAqIGFjdGl2aXRpZXMgYmVpbmcgdHJhY2tlZCBieSB0aGUgUHJvZ3Jlc3NUcmFja2VyLlxuICpcbiAqIFRoZSB2YWx1ZSBvZiB0b3RhbFByb2dyZXNzIGlzIGEgbnVtYmVyIHRoYXQgcHJvZ3Jlc3NlcyBmcm9tIDAgdG8gMS4gVGhlXG4gKiBQcm9ncmVzc1RyYWNrZXIgYWxsb3dzIGZvciB0aGUgbGF6eSBhY2N1bXVsYXRpb24gb2YgdHJhY2tlZCBhY3Rpb25zLCBzbyB0aGVcbiAqIHRvdGFsIHByb2dyZXNzIHJlcHJlc2VudHMgYSBhYnN0cmFjdCwgbm9uLWFic29sdXRlIHByb2dyZXNzIHRvd2FyZHMgdGhlXG4gKiBjb21wbGV0aW9uIG9mIGFsbCBjdXJyZW50bHkgdHJhY2tlZCBldmVudHMuXG4gKlxuICogV2hlbiBhbGwgY3VycmVudGx5IHRyYWNrZWQgYWN0aXZpdGllcyBhcmUgZmluaXNoZWQsIHRoZSBQcm9ncmVzc1RyYWNrZXJcbiAqIGVtaXRzIG9uZSBmaW5hbCBwcm9ncmVzcyBldmVudCBhbmQgdGhlbiByZXNldHMgdGhlIGxpc3Qgb2YgaXRzIGN1cnJlbnRseVxuICogdHJhY2tlZCBhY3Rpdml0aWVzLiBUaGlzIG1lYW5zIHRoYXQgZnJvbSBhbiBvYnNlcnZlcidzIHBlcnNwZWN0aXZlLFxuICogb25nb2luZyBhY3Rpdml0aWVzIHdpbGwgYWNjdW11bGF0ZSBhbmQgY29sbGVjdGl2ZWx5IGNvbnRyaWJ1dGUgdG8gdGhlIG5vdGlvblxuICogb2YgdG90YWwgcHJvZ3Jlc3MgdW50aWwgYWxsIGN1cnJlbnRseSB0cmFja2VkIG9uZ29pbmcgYWN0aXZpdGllcyBoYXZlXG4gKiBjb21wbGV0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9ncmVzc1RyYWNrZXIgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMub25nb2luZ0FjdGl2aXRpZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMudG90YWxQcm9ncmVzcyA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgYWN0aXZpdGllcyBjdXJyZW50bHkgYmVpbmcgdHJhY2tlZC5cbiAgICAgKi9cbiAgICBnZXQgb25nb2luZ0FjdGl2aXR5Q291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9uZ29pbmdBY3Rpdml0aWVzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIG5ldyBhY3Rpdml0eSB0byBiZSB0cmFja2VkIGJ5IHRoZSBwcm9ncmVzcyB0cmFja2VyLiBUaGUgbWV0aG9kXG4gICAgICogcmV0dXJucyBhIHNwZWNpYWwgY2FsbGJhY2sgdGhhdCBzaG91bGQgYmUgaW52b2tlZCB3aGVuZXZlciBuZXcgcHJvZ3Jlc3MgaXNcbiAgICAgKiByZWFkeSB0byBiZSByZXBvcnRlZC4gVGhlIHByb2dyZXNzIHNob3VsZCBiZSByZXBvcnRlZCBhcyBhIHZhbHVlIGJldHdlZW4gMFxuICAgICAqIGFuZCAxLCB3aGVyZSAwIHdvdWxkIHJlcHJlc2VudCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhY3Rpb24gYW5kIDEgd291bGRcbiAgICAgKiByZXByZXNlbnQgaXRzIGNvbXBsZXRpb24uXG4gICAgICpcbiAgICAgKiBUaGVyZSBpcyBubyBidWlsdC1pbiBub3Rpb24gb2YgYSB0aW1lLW91dCBmb3Igb25nb2luZyBhY3Rpdml0aWVzLCBzbyBvbmNlXG4gICAgICogYW4gb25nb2luZyBhY3Rpdml0eSBpcyBiZWd1biwgaXQgaXMgdXAgdG8gdGhlIGNvbnN1bWVyIG9mIHRoaXMgQVBJIHRvXG4gICAgICogdXBkYXRlIHRoZSBwcm9ncmVzcyB1bnRpbCB0aGF0IGFjdGl2aXR5IGlzIG5vIGxvbmdlciBvbmdvaW5nLlxuICAgICAqXG4gICAgICogUHJvZ3Jlc3MgaXMgb25seSBhbGxvd2VkIHRvIG1vdmUgZm9yd2FyZCBmb3IgYW55IGdpdmVuIGFjdGl2aXR5LiBJZiBhIGxvd2VyXG4gICAgICogcHJvZ3Jlc3MgaXMgcmVwb3J0ZWQgdGhhbiB0aGUgcHJldmlvdXNseSByZXBvcnRlZCBwcm9ncmVzcywgaXQgd2lsbCBiZVxuICAgICAqIGlnbm9yZWQuXG4gICAgICovXG4gICAgYmVnaW5BY3Rpdml0eSgpIHtcbiAgICAgICAgY29uc3QgYWN0aXZpdHkgPSB7IHByb2dyZXNzOiAwLCBjb21wbGV0ZWQ6IGZhbHNlIH07XG4gICAgICAgIHRoaXMub25nb2luZ0FjdGl2aXRpZXMuYWRkKGFjdGl2aXR5KTtcbiAgICAgICAgaWYgKHRoaXMub25nb2luZ0FjdGl2aXR5Q291bnQgPT09IDEpIHtcbiAgICAgICAgICAgIC8vIEFubm91bmNlIHRoZSBmaXJzdCBwcm9ncmVzcyBldmVudCAod2hpY2ggc2hvdWxkIGFsd2F5cyBiZSAwIC8gMVxuICAgICAgICAgICAgLy8gdG90YWwgcHJvZ3Jlc3MpOlxuICAgICAgICAgICAgdGhpcy5hbm5vdW5jZVRvdGFsUHJvZ3Jlc3MoYWN0aXZpdHksIDApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgICAgIGxldCBuZXh0UHJvZ3Jlc3M7XG4gICAgICAgICAgICBuZXh0UHJvZ3Jlc3MgPSBNYXRoLm1heChjbGFtcChwcm9ncmVzcywgMCwgMSksIGFjdGl2aXR5LnByb2dyZXNzKTtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvZ3Jlc3MgIT09IGFjdGl2aXR5LnByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbm5vdW5jZVRvdGFsUHJvZ3Jlc3MoYWN0aXZpdHksIG5leHRQcm9ncmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYWN0aXZpdHkucHJvZ3Jlc3M7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGFubm91bmNlVG90YWxQcm9ncmVzcyh1cGRhdGVkQWN0aXZpdHksIG5leHRQcm9ncmVzcykge1xuICAgICAgICBsZXQgcHJvZ3Jlc3NMZWZ0ID0gMDtcbiAgICAgICAgbGV0IGNvbXBsZXRlZEFjdGl2aXRpZXMgPSAwO1xuICAgICAgICBpZiAobmV4dFByb2dyZXNzID09IDEuMClcbiAgICAgICAgICAgIHVwZGF0ZWRBY3Rpdml0eS5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBmb3IgKGNvbnN0IGFjdGl2aXR5IG9mIHRoaXMub25nb2luZ0FjdGl2aXRpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcHJvZ3Jlc3MgfSA9IGFjdGl2aXR5O1xuICAgICAgICAgICAgcHJvZ3Jlc3NMZWZ0ICs9IDEuMCAtIHByb2dyZXNzO1xuICAgICAgICAgICAgaWYgKGFjdGl2aXR5LmNvbXBsZXRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlZEFjdGl2aXRpZXMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsYXN0UHJvZ3Jlc3MgPSB1cGRhdGVkQWN0aXZpdHkucHJvZ3Jlc3M7XG4gICAgICAgIHVwZGF0ZWRBY3Rpdml0eS5wcm9ncmVzcyA9IG5leHRQcm9ncmVzcztcbiAgICAgICAgLy8gQWR2YW5jZSB0aGUgdG90YWwgcHJvZ3Jlc3MgYnkgdGhlIGZyYWN0aW9uIG9mIHRvdGFsIHJlbWFpbmluZyBwcm9ncmVzc1xuICAgICAgICAvLyBkdWUgdG8gdGhpcyBhY3Rpdml0eS5cbiAgICAgICAgdGhpcy50b3RhbFByb2dyZXNzICs9IChuZXh0UHJvZ3Jlc3MgLSBsYXN0UHJvZ3Jlc3MpICpcbiAgICAgICAgICAgICgxLjAgLSB0aGlzLnRvdGFsUHJvZ3Jlc3MpIC8gcHJvZ3Jlc3NMZWZ0O1xuICAgICAgICBjb25zdCB0b3RhbFByb2dyZXNzID0gY29tcGxldGVkQWN0aXZpdGllcyA9PT0gdGhpcy5vbmdvaW5nQWN0aXZpdHlDb3VudCA/XG4gICAgICAgICAgICAxLjAgOlxuICAgICAgICAgICAgdGhpcy50b3RhbFByb2dyZXNzO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdwcm9ncmVzcycsIHsgZGV0YWlsOiB7IHRvdGFsUHJvZ3Jlc3MgfSB9KSk7XG4gICAgICAgIGlmIChjb21wbGV0ZWRBY3Rpdml0aWVzID09PSB0aGlzLm9uZ29pbmdBY3Rpdml0eUNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLnRvdGFsUHJvZ3Jlc3MgPSAwLjA7XG4gICAgICAgICAgICB0aGlzLm9uZ29pbmdBY3Rpdml0aWVzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9ncmVzcy10cmFja2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@google/model-viewer/lib/utilities/progress-tracker.js\n");

/***/ })

};
;